(function(e){function t(t){for(var n,i,s=t[0],l=t[1],c=t[2],u=0,d=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);p&&p(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,i=1;i<a.length;i++){var s=a[i];0!==o[s]&&(n=!1)}n&&(r.splice(t--,1),e=l(l.s=a[0]))}return e}var n={},i={app:0},o={app:0},r=[];function s(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-21d437ba":"d8cda77a","chunk-6af405b9":"4ba86438","chunk-79d81bde":"562e051d","chunk-89b4c078":"7d4f54ec"}[e]+".js"}function l(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(e){var t=[],a={"chunk-21d437ba":1,"chunk-89b4c078":1};i[e]?t.push(i[e]):0!==i[e]&&a[e]&&t.push(i[e]=new Promise((function(t,a){for(var n="css/"+({}[e]||e)+"."+{"chunk-21d437ba":"f540ca53","chunk-6af405b9":"31d6cfe0","chunk-79d81bde":"31d6cfe0","chunk-89b4c078":"3edff1f0"}[e]+".css",o=l.p+n,r=document.getElementsByTagName("link"),s=0;s<r.length;s++){var c=r[s],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===n||u===o))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){c=d[s],u=c.getAttribute("data-href");if(u===n||u===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var n=t&&t.target&&t.target.src||o,r=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=n,delete i[e],p.parentNode.removeChild(p),a(r)},p.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){i[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,a){n=o[e]=[t,a]}));t.push(n[2]=r);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=s(e);var d=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(p);var a=o[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+n+": "+i+")",d.name="ChunkLoadError",d.type=n,d.request=i,a[1](d)}o[e]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=n,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(a,n,function(t){return e[t]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var p=u;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0400":function(e,t,a){var n={"./components/packages/Button/src/index.vue":"5abc","./components/packages/Table/src/index.vue":"e4cd","./components/plugin/upload/index.vue":"504b","element-ui/packages/upload/src/index.vue":"8bfb"};function i(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id="0400"},1:function(e,t){},1543:function(e,t,a){},"199c":function(e,t){var a=window.getComputedStyle;window.getComputedStyle=function(e,t){return e instanceof Element?a(e,t):{}}},"23be":function(e,t,a){"use strict";var n=a("199c"),i=a.n(n);t["default"]=i.a},"293b":function(e,t,a){"use strict";a("df47")},"295d":function(e,t,a){"use strict";a("5a9b")},"3bbe6":function(e,t,a){"use strict";a("e011")},"3dfd":function(e,t,a){"use strict";var n=a("e4c6"),i=a("23be"),o=a("2877"),r=Object(o["a"])(i["default"],n["a"],n["b"],!1,null,null,null);t["default"]=r.exports},4360:function(e,t,a){"use strict";var n=a("2b0e"),i=a("2f62"),o={Sidebar:!1,isLoading:!1,name:"小哥哥",taspsBox:[],currentMicroApp:{},microAppHost:"",keepLiveBox:[],currentRoute:null};a("b0c0"),a("4de4"),a("ac1f"),a("1276"),a("99af"),a("fb6a");function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=e.split("/")[t];return a}function s(e){var t=k.state.base.keepLiveBox.filter((function(t){return(t.path===e.fullPath||r(t.path)!==r(e.fullPath)||!r(t.path,3))&&t}));k.commit("setKeepLiveBox",t)}function l(e){var t=k.state.base.keepLiveBox.concat([]);if(e.meta.keepAlive){var a=t.some((function(t){return t.path===e.path}));a||(e.keepName=c(e),t.push(e),k.commit("setKeepLiveBox",t))}s(e)}function c(e){if(e.matched[1].components&&e.matched[1].components.default)return e.matched[1].components.default.name}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=[],n=t;-1!==t.indexOf("?")&&(n=t.slice(0,t.indexOf("?"))),1===e?a=k.state.base.keepLiveBox.filter((function(e){return e.path!==n})):2===e&&(a=k.state.base.keepLiveBox.filter((function(e){return e.path===n}))),k.commit("setKeepLiveBox",a)}function d(e,t){var a=e.split("/"),n=t.split("/");return a[1]===n[1]&&a[2]===n[2]}var p={Sidebar:function(e,t){e.Sidebar=t},updatastate:function(e,t){e.name=t},loadingCommit:function(e,t){e.isLoading=t},changeCurrentMicroApp:function(e,t){e.currentMicroApp=t},removeTags:function(e,t){var a=t.type,n=t.router;if(e.taspsBox.length>1)if(1===a){var i=0;e.taspsBox=e.taspsBox.filter((function(t,a){return t.currentRoute===e.currentRoute&&(i=a),t.currentRoute!==e.currentRoute}));var o={};e.taspsBox[i-1]&&(o=e.taspsBox[i-1]),e.taspsBox[i]&&(o=e.taspsBox[i]),e.currentRoute=o.currentRoute,n.push(o.jumpUrl)}else 2===a?e.taspsBox=e.taspsBox.filter((function(t){return t.currentRoute===e.currentRoute})):3===a&&(e.taspsBox=e.taspsBox.filter((function(e){return"/"===e.currentRoute})),e.currentRoute=e.taspsBox[0]?e.taspsBox[0].currentRoute:"");u(a,e.currentRoute)},setMicroAppHost:function(e,t){e.microAppHost=t},setKeepLiveBox:function(e,t){e.keepLiveBox=t},taspsChange:function(e,t){var a=t.route,n=t.base,i=!0;if(0!==a.matched.length){var o=Object.assign({},a);o.currentRoute=n+a.fullPath,o.jumpUrl=o.currentRoute;for(var r=0;r<e.taspsBox.length;r++)if(e.taspsBox[r].path===a.path||d(e.taspsBox[r].path,a.path)){var s=e.taspsBox[r].currentRoute;e.taspsBox[r]=o,e.taspsBox[r].currentRoute=s,o.currentRoute=s,i=!1;break}e.currentRoute=o.currentRoute,i&&e.taspsBox.push(o),l(o)}}},h={Sidebar:function(e,t){e.commit("Sidebar",t)}},f={getKeepLiveBox:function(e){for(var t=[],a=0,n=e.keepLiveBox.length;a<n;a++)e.keepLiveBox[a].path&&t.push(e.keepLiveBox[a].keepName);return t},get_Sidebar:function(e){return e.Sidebar},getTaspsBox:function(e){return e.taspsBox},getCurrentMicroApp:function(e){return e.currentMicroApp},getCurrentRoute:function(e){return e.currentRoute}},g={state:o,getters:f,mutations:p,actions:h},m={token:""},b=a("e223"),v={user:{}},y=Object(b["b"])(v);y.onGlobalStateChange((function(e,t){console.log("main change")}));var _={},x={Sidebar:function(e,t){e.commit("Sidebar",t)}},w={},C={state:m,getters:w,mutations:_,actions:x};n["a"].use(i["a"]);var k=t["a"]=new i["a"].Store({modules:{base:g,user:C}})},"473e":function(e,t,a){"use strict";a("b494")},4978:function(e,t,a){"use strict";a("6063")},"504b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ul",e._l(e.imgArr,(function(e){return a("li",{key:e,staticClass:"imgClass"},[a("img",{staticClass:"img",attrs:{src:e.url,alt:e.name}})])})),0),a("input",{ref:"fileInt",attrs:{type:"file",name:"upload",multiple:""},on:{change:e.changeHander}})])},i=[],o=(a("f316"),a("b41a"),a("3c64"),a("410a"),a("6f78"),a("b1f0"),a("fb04"),a("e27b"),a("facf"),a("7801"),{name:"jybdupload",data:function(){return{imgArr:[]}},methods:{changeHander:function(e){var t=this;console.log(e);var a=Array.from(e["target"].files);a.length?a.forEach((function(e){var a=e.type.split("/")[0];if("image"==a){var n=URL.createObjectURL(e);t.imgArr.push({url:n,name:e.name})}else""==a&&t.imgArr.push({url:"https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=1763633455,1584227941&fm=26&gp=0.jpg",name:e.name})})):alert("上传失败")}}}),r=o,s=a("2877"),l=Object(s["a"])(r,n,i,!1,null,"c78c1ca0",null);t["default"]=l.exports},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),i=a("3dfd"),o=(a("d3b7"),a("3ca3"),a("ddb0"),a("8c4f"));n["a"].use(o["a"]);var r=[{path:"/login",name:"login",component:function(){return a.e("chunk-21d437ba").then(a.bind(null,"d9c9"))}},{path:"/",name:"home",component:function(){return Promise.all([a.e("chunk-79d81bde"),a.e("chunk-89b4c078")]).then(a.bind(null,"b471"))},children:[{path:"/erpcode/*",component:function(){return a.e("chunk-79d81bde").then(a.bind(null,"1b69"))}},{path:"/service/*",component:function(){return a.e("chunk-79d81bde").then(a.bind(null,"1b69"))}}]}],s=o["a"].prototype.push;o["a"].prototype.push=function(e){return s.call(this,e).catch((function(e){return e}))};var l=new o["a"]({mode:"history",routes:r}),c=l,u=a("4360"),d=(a("3c64"),a("b1f0"),a("fb04"),a("7801"),a("c07b"),a("42aa"),a("fe40")),p=a.n(d),h=(a("0a38"),a("7e8a")),f=a.n(h),g=a("c154"),m=function(e,t){return e+t},b=(a("1e09"),a("e3df"),a("f454"),a("54b4"),a("4b99")),v=a.n(b),y=(a("343f"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-autocomplete",{ref:"autoinput",attrs:{clearable:"",disabled:e.disabled,autocomplete:"","popper-class":"goodsListContainer","fetch-suggestions":e.remoteGoods,placeholder:"请输入商品"},on:{clear:e.clearGoods,blur:e.removeScroll,select:function(t){e.change(e.scopes,t)}},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item;return[n.disabled?a("ul",{staticClass:"goodsListItem goodsListTitle",on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},e._l(e.showObj,(function(t,n){return a("li",{key:n},[e._v(" "+e._s(t)+" ")])})),0):n.loading?a("div",{staticStyle:{"text-align":"center",color:"#409eff"},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[a("i",{staticClass:"icon el-icon-loading"}),e._v(" 拼命加载中 ")]):n.isFinish?a("div",{staticStyle:{"text-align":"center",color:"#409eff"},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[e._v(" 已经到底了 ")]):a("ul",{staticClass:"goodsListItem"},e._l(e.showObj,(function(t,i){return a("li",{key:i,attrs:{title:n[i]}},[e._v(" "+e._s(n[i])+" ")])})),0)]}}]),model:{value:e.query,callback:function(t){e.query=t},expression:"query"}})}),_=[],x=a("2909"),w=(a("e326"),a("3736"),a("410a"),a("6f78"),a("53ca")),C=(a("fb24"),a("1269"),a("fe82"),a("1bdf"),a("3db6"),a("74af"),function(e,t){var a,n=t||500;return function(){var t=this,i=arguments;a&&clearTimeout(a),a=setTimeout((function(){a=null,e.apply(t,i)}),n)}}),k=function(e,t){var a,n,i=t||500;return function(){var t=this,o=arguments,r=+new Date;a&&r-a<i?(clearTimeout(n),n=setTimeout((function(){a=r,e.apply(t,o)}),i)):(a=r,e.apply(this,o))}},j=function(e){if(e instanceof Date){var t=e.getFullYear(),a=(e.getMonth()+1).toString(),n=e.getDate().toString();return a=2==a.length?a:"0"+a,n=2==n.length?n:"0"+n,t+"-"+a+"-"+n}},O=function(e){if(e instanceof Date){var t=e.getFullYear();return t}},$=function(){var e,t,a,n,i=new Date;switch(t=i.getFullYear(),a=i.getMonth()+1,n=i.getDate(),a){case 1:case 2:case 3:a+=9,t--;break;default:a-=3;break}return a=a<10?"0"+a:a,e=t+"-"+a+"-"+n,e};function P(e,t){var a=new Date(e),n=a.getFullYear(),i=a.getMonth()+1,o=a.getDate(),r=new Date(n,i,0).getDate(),s=new Date(t),l=s.getFullYear(),c=s.getMonth()+1,u=l,d=parseInt(c)+1;d>12&&(u=parseInt(u)+1,d=1);var p=new Date(u,d,0).getDate(),h=p;o>=r?h=p:o<p&&(h=o),d<10&&(d="0"+d),h<10&&(h="0"+h);var f=u+"-"+d+"-"+h;return f}function S(e,t){var a=e.split("-"),n=new Date(a[1]+"-"+a[2]+"-"+a[0]),i=Math.abs(n)+24*t*60*60*1e3,o=new Date(i),r=o.getFullYear(),s=o.getMonth()+1;s<10&&(s="0"+s);var l=o.getDate();return l<10&&(l="0"+l),r+"-"+s+"-"+l}var D=function(e){for(var t in e[0]){var a=0;while(a<e.length){e[a][t+"span"]=1,e[a][t+"dis"]=!1;for(var n=a+1;n<=e.length-1;n++){if(e[a][t]!=e[n][t]||""==e[a][t])break;e[a][t+"span"]++,e[a][t+"dis"]=!1,e[n][t+"span"]=1,e[n][t+"dis"]=!0}a=n}}return e};function N(e,t,a,n,i){var o=i||{},r=o.callback,s=o.minus,l=void 0!==s&&s,c=o.major,u=void 0!==c&&c;if((isNaN(e[a])||Number(e[a])<0)&&(e[a]=0,n.$set(e,a,0)),"num"===T(t,a)&&(e[t.price]||0===e[t.price]?(t.goodsPrice&&(e[t.price]||0===e[t.price])&&n.$set(e,t.goodsPrice,(Number(e[a])*Number(e[t.price])).toFixed(2)),!t.totalPrice||t.goodsPrice||!e[t.price]&&0!==e[t.price]||n.$set(e,t.totalPrice,(Number(e[a])*Number(e[t.price])).toFixed(2))):t.num&&Number(e[t.num])>0&&((e[t.goodsPrice]||e[t.goodsPrice]>0)&&t.goodsPrice?n.$set(e,t.price,(e[t.goodsPrice]/Number(e[t.num])).toFixed(2)):!e[t.totalPrice]&&0!==e[t.totalPrice]||t.goodsPrice||(t.discount_price&&(e[t.discount_price]||0===e[t.discount_price])?n.$set(e,t.price,(e[t.totalPrice]-e[t.discount_price]/Number(e[t.num])).toFixed(2)):n.$set(e,t.price,(e[t.totalPrice]/Number(e[t.num])).toFixed(2)))),t.discount_price&&t.discount_unitPrice&&Number(e[t.num]>0)&&(!e[t.discount_unitPrice]&&0!==e[t.discount_unitPrice]||u||n.$set(e,t.discount_price,(e[t.discount_unitPrice]*e[t.num]).toFixed(2)),(e[t.discount_price]||0===e[t.discount_price])&&u&&n.$set(e,t.discount_unitPrice,(e[t.discount_price]/Number(e[t.num])).toFixed(2)))),"goodsPrice"!==T(t,a)||!e[t.goodsPrice]&&0!==e[t.goodsPrice]||t.price&&Number(e[t.num]>0)&&n.$set(e,t.price,(e[a]/Number(e[t.num])).toFixed(2)),"price"!==T(t,a)||!e[t.price]&&0!==e[t.price]||t.goodsPrice&&Number(e[t.num]>0)&&n.$set(e,t.goodsPrice,(e[a]*Number(e[t.num])).toFixed(2)),"discount_price"===T(t,a)&&Number(e[t.num]>0)&&n.$set(e,t.discount_unitPrice,(e[a]/Number(e[t.num])).toFixed(2)),"discount_unitPrice"===T(t,a)&&(0===Number(e[t.num])||e[t.num])&&n.$set(e,t.discount_price,(e[a]*Number(e[t.num])).toFixed(2)),"totalPrice"===T(t,a))return Number(e[t.num]>0)&&(t.discount_price&&(e[t.discount_price]||0===e[t.discount_price])?n.$set(e,t.price,((e[a]-e[t.discount_price])/Number(e[t.num])).toFixed(2)):n.$set(e,t.price,(e[a]/Number(e[t.num])).toFixed(2))),void L(t,e,a);if("revenue_price"!==T(t,a)){var d=F(e,t);null!==d?d<0&&!l?(n.$set(e,t.discount_price,0),n.$set(e,t.discount_unitPrice,0),N(e,t,a,n,r)):t.totalPrice&&("totalPrice"===T(t,a)?n.$set(e,t.totalPrice,Number(d)):n.$set(e,t.totalPrice,Number(d).toFixed(2))):t.totalPrice&&n.$set(e,t.totalPrice,""),L(t,e,a),r&&r()}else L(t,e,a)}function L(e,t,a){var n;if(e.goodsPrice&&(n=Number(t[e.goodsPrice])),e.totalPrice&&(n=Number(t[e.totalPrice])),e.BuoyancyFactor&&0!==Number(t[e.BuoyancyFactor])&&!isNaN(t[e.BuoyancyFactor])&&(e.discount_price&&!isNaN(t[e.discount_price])?n=(n+Number(t[e.discount_price]))*Number(t[e.BuoyancyFactor]):n*=Number(t[e.BuoyancyFactor])),e.taxrate&&e.revenue_price&&!isNaN(n)){if("revenue_price"!==T(e,a)&&!isNaN(t[e.taxrate])){var i=t[e.taxrate]/100;t[e.revenue_price]=(n/(1+i)*i).toFixed(2)}isNaN(t[e.revenue_price])&&(t[e.revenue_price]=0),T(e,"no_revenue_price")&&(t[e.no_revenue_price]=(n-Number(t[e.revenue_price])).toFixed(2))}}function T(e,t){for(var a in e)if(e[a]===t)return a;console.log("计算对象错误 或 key值有误")}function F(e,t){var a=null;return t.goodsPrice&&(e[t.goodsPrice]||0===e[t.goodsPrice])?a=e[t.discount_price]||0===e[t.discount_price]?e[t.goodsPrice]-e[t.discount_price]:e[t.goodsPrice]:!e[t.num]&&0!==e[t.num]||!e[t.price]&&0!==e[t.price]||(a=e[t.discount_price]||0===e[t.discount_price]?e[t.num]*e[t.price]-e[t.discount_price]:e[t.num]*e[t.price]),a}function A(e,t,a){if(isNaN(Number(t))||parseInt(t)!==Number(t)){var n=e.label?e.label:"";a(new Error(n+"必须是正整数"))}a()}function M(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.type,i=a.min,o=a.max,r=a.greater,s=a.less,l=a.message;if(!isNaN(e[t])&&""!==e[t])return e[t]=Number(e[t]).toFixed(2),"Positive"===n&&Number(e[t])<0?(d["Message"].warning("请输入大于等于零的数"),void(e[t]="")):("Integer"===n&&(e[t]=Number(e[t]).toFixed(0)),"PositiveInteger"===n&&(e[t]=Number(Math.abs(e[t])).toFixed(0)),"positive"===n&&Number(e[t])<=0?(d["Message"].warning("请输入大于零的数"),void(e[t]="")):void 0!==i&&Number(e[t])<i?(l?d["Message"].warning(l):d["Message"].warning("请输入大于等于"+i+"的数"),void(e[t]=i)):void 0!==o&&Number(e[t])>o?(l?d["Message"].warning(l):d["Message"].warning("请输入小于等于"+o+"的数"),void(e[t]="")):void 0!==r&&Number(e[t])<=r?(d["Message"].warning("请输入大于"+r+"的数"),void(e[t]="")):void 0!==s&&Number(e[t])>=s?(d["Message"].warning("请输入小于"+s+"的数"),void(e[t]="")):void 0);e[t]=""}function B(e,t,a){var n=(""+a).replace(/[^\d^\.]+/g,"").replace(/^0+(\d)/,"$1").replace(/^\./,"0.").match(/^\d*(\.?\d{0,2})/g)[0]||"";console.log(n),e[t]=n}function E(e,t){var a=[];return e.forEach((function(e){var n=a.find((function(a){return a[t]===e[t]}));n||a.push(e)})),a}function I(e){if(!e)return"";if(isNaN(e-0))return e;var t=new Date(e-0),a=t.getFullYear(),n=t.getMonth()+1,i=t.getDate(),o=t.getHours(),r=t.getMinutes(),s=t.getSeconds();return"".concat(a,"-").concat(n<10?"0"+n:n,"-").concat(i<10?"0"+i:i," ").concat(o<10?"0"+o:o,":").concat(r<10?"0"+r:r,":").concat(s<10?"0"+s:s)}function R(e){if(!e)return"";if(isNaN(e-0))return e;var t=new Date(e-0),a=t.getFullYear(),n=t.getMonth()+1,i=t.getDate();return"".concat(a,"-").concat(n<10?"0"+n:n,"-").concat(i<10?"0"+i:i)}var G=function e(t){var a=Array.isArray(t)?[]:{};for(var n in t)"[object Object]"===Object.prototype.toString.call(t[n])||"[object Array]"===Object.prototype.toString.call(t[n])?a[n]=e(t[n]):a[n]=t[n];return a},q=function(e,t){var a=G(e);for(var n in a)"object"===Object(w["a"])(a[n])?void 0!==t[n]&&null!==t[n]?a[n]&&"Int"===a[n].formatter&&(a[n]=isNaN(parseInt(t[n]))?0:parseInt(t[n])):a[n]=a[n].default:a[n]=void 0!==t[n]&&null!==t[n]?t[n]:a[n];return a},z=function(e){var t={};for(var a in e)void 0!==e[a]&&null!==e[a]&&""!==e[a]&&(t[a]=e[a]);return t},U=function(e){var t=G(e),a=[];return t.forEach((function(e){e.editRender=null,"checkbox"!==e.type&&a.push(e)})),a};function H(e){d["Message"].warning(e)}function K(e){var t=e[Object.keys(e)[0]];d["Message"].warning(t.rule.message)}function W(e){window.goPage=e?void 0:1,setTimeout((function(){window.goPage=void 0}),500)}function V(e){return isNaN(e)?0:Number(e)}function Y(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",";return"number"!==typeof a&&(a=2),"string"!==typeof n&&(n=","),!isNaN(parseFloat(e))&&isFinite(e)?(e=Number(e),e=("undefined"!==typeof a?e.toFixed(a):e).toString(),t=e.split("."),t[0]=t[0].toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+(n||",")),t.join(".")):"无权限"==e?"无权限":e}function J(e,t){var a=0;return e.length>=1&&(a=t?e.reduce((function(e,a){return V(e[t])+V(a[t])})):e.reduce((function(e,t){return V(e)+V(t)}))),"object"===Object(w["a"])(a)&&(a=a[t]),V(a)}var Q=k(H,1e3);function X(){var e=new Date,t=new Date(e.getFullYear(),0,1),a=t.getDay(),n=1;0!=a&&(n=7-a+1),t=new Date(e.getFullYear(),0,1+n);var i=Math.ceil((e.valueOf()-t.valueOf())/864e5),o=2==String(Math.ceil(i/7)+1).length?Math.ceil(i/7)+1:"0".concat(Math.ceil(i/7)+1),r=e.getFullYear().toString().substring(2);return"".concat(o).concat(r)}var Z={isInt:A,getWeekYear:X,sum:J,get3MonthBefor:$,getNextMonth:P,getNextDay:S,goPage:W,formatData:j,formatDataYear:O,combineCell:D,computeTotal:N,toFixedTwo:M,deepCopy:G,filter:q,confirm:Q,priceFormatNone:Y,vxeValidate:K,filterTableColumn:U,getAllTime:I,getTime:R,dealParams:z,deduplication:E,limitInput:B},ee={name:"vGoodsList",props:{vxeParams:{type:Object,default:function(){}},scopes:{type:Object,default:function(){}},keyObj:{type:Object,default:function(){return{label:"goods_name",value:"goods_id"}}},beforeGetList:{type:Function,default:function(){return!0}},disabled:{type:Boolean,default:!1},updateArray:{type:Array,default:function(){return[]}},showObj:{type:Object,default:function(){return{goods_id:"商品编号",goods_name:"商品名称",factory_code:"工厂代码",available_stocks:"可用库存",stocks:"在库库存"}}},isFuzzy:{type:Boolean,default:!1},returnString:{type:String,default:function(){return"data.data.data"}},url:{type:String,default:"getGoodsListDropdown"},changeGoods:{type:Function,default:function(){}},clear:{type:Function,default:function(){}}},watch:{"scopes.row":function(e){this.updateArray.length>0?this.updateArray.includes(this.keyObj.label)&&(this.query=e[this.keyObj.label]):this.query=e[this.keyObj.label]},query:function(e){this.isFuzzy&&(this.scopes.row[this.keyObj.label]=e)}},data:function(){return{goodslist:[],query:"",page:1,isLoading:!1,isFinish:!1}},created:function(){this.query=this.scopes.row[this.keyObj.label]},methods:{clearGoods:function(){this.updateRow(this.scopes,{}),this.clear();var e=this.$refs.autoinput.$el.getElementsByClassName("el-input__inner")[0];e&&e.blur()},updateRow:function(e,t){var a=this;0===this.updateArray.length?(this.$set(e.row,this.keyObj.label,t.goods_name),this.$set(e.row,this.keyObj.value,t.goods_id)):this.updateArray.forEach((function(n){a.$set(e.row,n,t[n])})),this.changeGoods&&this.changeGoods(t,e)},removeScroll:function(){for(var e=document.getElementsByClassName("el-autocomplete-suggestion__wrap"),t=0;t<e.length;t++)e[t].onscroll=null},scroll:function(){for(var e=document.getElementsByClassName("el-autocomplete-suggestion__wrap"),t=this,a=function(a){e[a].onscroll=function(){e[a].scrollTop+e[a].clientHeight+200>e[a].children[0].clientHeight&&!t.isLoading&&!t.isFinish&&(t.page++,t.getList(t.query),t.goodslist.push({loading:!0}),t.isLoading=!0)}},n=0;n<e.length;n++)a(n)},remoteGoods:C((function(e,t){if(!1===this.beforeGetList())return this.isFinish=!0,t&&t([]),this.isLoading=!1,void this.clearGoods();this.page=1,this.isFinish=!1,this.goodslist=[{goods_id:"编号",goods_name:"商品名称",disabled:!0}],this.getList(e,t),this.scroll()}),500),getList:function(e,t){var a=this,n=this.$publicFution.deepCopy(this.vxeParams);n.goods_name=e,n.page=this.page,n.per_page=30;var i=this.$axMethod[this.url]?this.$axMethod[this.url]:this.$api[this.url];i(this.$publicFution.deepCopy(n)).then((function(e){if(a.isLoading&&a.goodslist.pop(),200==e.data.code){var n,i=a.$publicFution.deepCopy(e);a.returnString.split(".").forEach((function(e){i=i[e]})),Array.isArray(i)||(i=[]),(n=a.goodslist).push.apply(n,Object(x["a"])(i)),e.data.data.last_page===e.data.data.current_page&&(a.isFinish=!0,a.goodslist.push({isFinish:!0})),t&&t(a.goodslist)}else t&&t([]);a.isLoading=!1})).catch((function(){a.isFinish=!0,t&&t([]),a.isLoading=!1}))},change:function(e,t){t.disabled||(this.query=t.goods_name,this.updateRow(e,t),e.$table&&e.$table.updateStatus(e))}}},te=ee,ae=(a("3bbe6"),a("2877")),ne=Object(ae["a"])(te,y,_,!1,null,null,null),ie=ne.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[2===e.type?a("el-autocomplete",{attrs:{"fetch-suggestions":function(t,a){e.batchRemote(e.scope,t,a)},placeholder:"请输入批次"},on:{blur:function(t){return e.blurchange(e.scope)},select:function(t){e.autocompleteSelect(t)}},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item;return[n.isEmpty&&e.batchList.length<2?a("div",{staticStyle:{textAlign:"center",color:"#dedede"},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[e._v("暂无数据")]):a("div",[e._v(e._s(n.batch))])]}}],null,!1,1406800359),model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}):e._e(),1===e.type?a("el-select",{attrs:{filterable:"",loading:e.loading,clearable:"","value-key":"batch_id",placeholder:"请选择"},on:{clear:function(t){return e.clear(e.scope.row)},focus:function(t){return e.batchRemote(e.scope)},change:function(t){return e.autocompleteSelect(e.query)}},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},[a("div",{staticClass:"batchBox",staticStyle:{padding:"0 20px"}},e._l(e.showObj,(function(t,n){return a("span",{key:n,class:"batch_"+n},[e._v(" "+e._s(t)+" ")])})),0),e._l(e.batchList,(function(t){return a("el-option",{key:t.batch_id,attrs:{label:t.batch,value:t}},[a("div",{staticClass:"batchBox"},e._l(e.showObj,(function(n,i){return a("span",{key:i,class:"batch_"+i,attrs:{title:t[i]}},[e._v(" "+e._s(t[i])+" ")])})),0)])}))],2):e._e()],1)},re=[],se={data:function(){return{query:"",loading:!1,batchList:[]}},watch:{query:function(e){2===this.type&&(this.scope.row.batch=e)}},props:{vxeParams:{type:Object,default:function(){}},type:{type:Number,default:1},scope:{type:Object,default:function(){}},url:{type:String,default:"getBatchlist"},showObj:{type:Object,default:function(){return{batch:"年周/批次",production_time:"生产日期",warehouse_name:"仓库名称",allocation_name:"货位名称",available_stocks:"可用库存",stocks:"在库库存"}}},batchBlur:{type:Function,default:function(){console.log("请写blur方法")}},batchChange:{type:Function,default:function(){console.log("请写change方法")}}},created:function(){this.query=this.scope.row.batch?this.scope.row.batch:"",1===this.type&&this.batchRemote(this.scope)},methods:{clear:function(e){var t=this;["batch","batch_id","warehouse_name","warehouse_id","allocation_name","allocation_id"].forEach((function(a){t.$set(e,a,"")}))},autocompleteSelect:function(e){1!==e.isEmpty&&(this.query=e.batch,this.batchChange&&this.batchChange(e,this.scope),this.scope.$table&&this.scope.$table.updateStatus(this.scope))},blurchange:function(e){this.batchBlur(e,this)},batchRemote:function(e,t,a){var n=this;this.loading=!0,this.batchList=[],2===this.type&&(this.vxeParams.batch=t);var i=this.$axMethod[this.url]?this.$axMethod[this.url]:this.$api[this.url];i(this.vxeParams).then((function(e){200===e.data.code&&(n.batchList=e.data.data,2===n.type&&n.batchList.push({isEmpty:1}),a&&a(n.batchList),n.loading=!1)}))}}},le=se,ce=(a("4978"),a("94f0"),Object(ae["a"])(le,oe,re,!1,null,"5f1d880a",null)),ue=ce.exports,de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-spinner":"el-icon-loading"}},[a("el-select",{attrs:{placeholder:"请选择",remote:"","remote-method":e.getAllocationList,"popper-class":"allocationClass",filterable:"",clearable:""},on:{focus:function(t){return e.getAllocationList("")},change:e.allocation_Change},model:{value:e.scope.row[e.modelKey],callback:function(t){e.$set(e.scope.row,e.modelKey,t)},expression:"scope.row[modelKey]"}},[a("ul",{staticClass:"warehouse-ul warehouse-ul2 warehouse-ul3"},e._l(e.showObj,(function(t,n){return t?a("li",{key:n},[e._v(" "+e._s(t)+" ")]):e._e()})),0),e._l(e.allocationList,(function(t,n){return a("el-option",{key:n,attrs:{label:t.allocation_name,value:t.allocation_id}},[t.loading?a("div",{staticStyle:{"text-align":"center",color:"#409eff"},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[a("i",{staticClass:"icon el-icon-loading"}),e._v(" 拼命加载中 ")]):t.isFinish?a("div",{staticStyle:{"text-align":"center",color:"#409eff"},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[e._v(" 已经到底了 ")]):e._e(),a("ul",{staticClass:"warehouse-ul  warehouse-ul3"},e._l(e.showObj,(function(n,i){return a("li",{key:i},[e._v(" "+e._s(t[i])+" ")])})),0)])}))],2)],1)},pe=[],he={data:function(){return{allocationList:[],loading:!1,isLoading:!1,isFinish:!1,page:1,query:""}},props:{modelKey:{type:String,default:"allocation_id"},modelLabel:{type:String,default:"allocation_name"},vxeParams:{type:Object,default:function(){return null}},scope:{type:Object,default:function(){}},showObj:{type:Object,default:function(){return{allocation_name:"货位名称",stocks:"在库库存"}}},isPage:{type:Boolean,default:!0},url:{type:String,default:"stockTakingGetGoodsList"},allocationChange:{type:Function,default:function(){console.log("请写change方法")}}},created:function(){var e=this.$publicFution.deepCopy(this.scope.row);e.allocation_id=e[this.modelKey],e.allocation_name=e[this.modelLabel],0!==e.allocation_id||e.allocation_name?this.allocationList.push(e):this.scope.row[this.modelKey]=""},methods:{allocation_Change:function(e){var t=this.allocationList.filter((function(t){return e===t.allocation_id}))[0];try{this.scope.row[this.scope.column.property]=t.allocation_name}catch(a){}this.allocationChange&&this.allocationChange(this.scope,t||{},this.allocationList),this.scope.$table&&this.scope.$table.updateStatus(this.scope)},scroll:function(){for(var e,t=document.getElementsByClassName("allocationClass"),a=this,n=0;n<t.length;n++)"none"!==t[n].style.display&&(e=t[n]);e&&(e=e.getElementsByClassName("el-select-dropdown__wrap")[0],e.onscroll=function(){e.scrollTop+e.clientHeight+200>e.children[0].clientHeight&&!a.isLoading&&!a.isFinish&&(a.page++,a.allocationList.push({loading:!0}),a.getList(),a.isLoading=!0)})},getAllocationList:function(e){var t=this;this.query=e,!0===this.isPage?(this.allocationList=[],this.page=1,this.isFinish=!1,setTimeout((function(){t.scroll()}),50),this.getList()):((this.$axMethod[this.url]||this.$api[this.url])&&(this.allocationList=[]),this.getList())},dealData:function(e){this.loading=!1,200===e.data.code&&(!0===this.isPage?(this.isLoading&&this.allocationList.pop(),this.allocationList=this.allocationList.concat(e.data.data.data),e.data.data.last_page===e.data.data.current_page&&(this.isFinish=!0,this.allocationList.push({isFinish:!0})),this.isLoading=!1):this.allocationList=e.data.data)},getList:function(){var e=this,t=this.$publicFution.deepCopy(this.vxeParams);t.allocation_name=this.query,!0===this.isPage&&(t.page=this.page,t.per_page=20,t.is_page=1),this.loading=!0;var a=this.$axMethod[this.url]?this.$axMethod[this.url]:this.$api[this.url];"string"===typeof a?this.$axios({url:a,method:"get",params:t}).then((function(t){e.dealData(t)})):a(t).then((function(t){e.dealData(t)}))}}},fe=he,ge=(a("473e"),Object(ae["a"])(fe,de,pe,!1,null,"7f1c52ac",null)),me=ge.exports,be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.show?a("el-select",{attrs:{clearable:"",placeholder:"请选择",loading:e.loading},on:{focus:function(t){return e.getList(e.scope)},change:function(t){e.changeFn(e.scope,e.list,t)}},model:{value:e.scope.row[e.itemObj["id"]],callback:function(t){e.$set(e.scope.row,e.itemObj["id"],t)},expression:"scope.row[itemObj['id']]"}},e._l(e.list,(function(t,n){return a("el-option",{key:t.index,attrs:{label:t[e.itemObj["name"]],value:t[e.itemObj["id"]]}})})),1):e._e()},ve=[],ye=a("5530"),_e={data:function(){return{list:[],loading:!1,show:!1}},props:{vxeParams:{type:Object,default:function(){}},scope:{type:Object,default:function(){}},url:{type:String,default:"getWarehouseFocus"},changeFn:{type:Function,default:function(){}},itemObj:{type:Object,default:function(){return{id:"warehouse_id",name:"warehouse_name"}}}},created:function(){this.getList(this.scope)},methods:{getList:function(e){var t=this;e.row;if(!(this.list.length>0)){this.loading=!0;var a=Object.assign({},Object(ye["a"])({},this.vxeParams));this.$axMethod[this.url](a).then((function(e){t.loading=!1,200===e.data.code&&(t.list=e.data.data,t.show=!0)})).catch((function(e){t.loading=!1}))}}}},xe=_e,we=Object(ae["a"])(xe,be,ve,!1,null,null,null),Ce=we.exports,ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{"element-loading-spinner":"el-icon-loading"}},[a("el-select",{ref:"select",class:e.popperClass,attrs:{"popper-class":"selectPullDown",remote:"",loading:e.loading,placeholder:"请选择","collapse-tags":"",multiple:e.extendParams.multiple,filterable:"",clearable:e.clearable},on:{focus:e.getData,change:e.selectChange},model:{value:e.scope.row[e.selectId],callback:function(t){e.$set(e.scope.row,e.selectId,t)},expression:"scope.row[selectId]"}},[a("ul",{staticClass:"warehouse-ul warehouse-ul2 warehouse-ul3"},e._l(e.showObj,(function(t,n){return t?a("li",{key:n},[e._v(" "+e._s(t)+" ")]):e._e()})),0),e._l(e.list,(function(t,n){return a("el-option",{key:n,attrs:{label:t[e.itemObj.name],value:t[e.itemObj.id]}},[t.loading?a("div",{staticStyle:{"text-align":"center",color:"#409eff"},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[a("i",{staticClass:"icon el-icon-loading"}),e._v(" 拼命加载中 ")]):t.isFinish?a("div",{staticStyle:{"text-align":"center",color:"#409eff"},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[e._v(" 已经到底了 ")]):e._e(),e.showObj?a("ul",{staticClass:"warehouse-ul  warehouse-ul3"},e._l(e.showObj,(function(n,i){return a("li",{key:i},[e._v(" "+e._s(t[i])+" ")])})),0):e._e()])}))],2)],1)},je=[],Oe={data:function(){return{list:[],page:1,loading:!1,isLoading:!1,isFinish:!1,selectId:""}},props:{clearable:{type:Boolean,default:!0},modelKey:{type:String,default:""},modelLabel:{type:String,default:""},vxeParams:{type:Object,default:function(){return null}},scope:{type:Object,default:function(){}},options:{type:Array,default:function(){return[]}},isPage:{type:Boolean,default:!1},itemObj:{type:Object,default:function(){return{id:"value",name:"label"}}},returnString:{type:String,default:function(){return"data.data"}},showObj:{type:Object,default:function(){return null}},extendParams:{type:Object,default:function(e){var t={multiple:!1};return Object.assign({},t,e)}},popperClass:{type:String,default:""},url:{type:String,default:""},change:{type:Function,default:function(){}},dealList:{type:Function,default:function(){}}},created:function(){this.modelKey?this.selectId=this.modelKey:this.selectId=this.itemObj.id;var e=this.$publicFution.deepCopy(this.scope.row);if(e[this.itemObj.id]=e[this.selectId],e[this.itemObj.name]=e[this.modelLabel?this.modelLabel:this.itemObj.name],this.list=this.list.concat(this.options),0===this.options.length){if(0===e[this.itemObj.id]&&!e[this.itemObj.name])return void(this.scope.row[this.selectId]="");this.list.push(e)}},methods:{scroll:function(){for(var e,t=document.getElementsByClassName("selectPullDown"),a=this,n=0;n<t.length;n++)"none"!==t[n].style.display&&(e=t[n]);e=e.getElementsByClassName("el-select-dropdown__wrap")[0],e.onscroll=function(){e.scrollTop+e.clientHeight+200>e.children[0].clientHeight&&!a.isLoading&&!a.isFinish&&(a.page++,a.list.push({loading:!0}),a.getList(),a.isLoading=!0)}},selectChange:function(e){var t,a=this;if(Array.isArray(e))t=e;else{t=this.list.filter((function(t){return e===t[a.itemObj.id]}))[0],t=t||{};try{this.scope.row[this.scope.column.property]=t[this.itemObj.name]}catch(n){}}this.change&&this.change(this.scope,t,this.list),this.scope.$table&&this.scope.$table.updateStatus(this.scope)},getData:function(){var e=this;!0===this.isPage?(this.list=[],this.page=1,this.isFinish=!1,setTimeout((function(){e.scroll()}),50),this.getList()):((this.$axMethod[this.url]||this.$api[this.url])&&(this.list=[]),this.getList())},getList:function(){var e=this;console.log(this.$api);var t=this.$publicFution.deepCopy(this.vxeParams);if(!0===this.isPage&&(t.page=this.page,t.per_page=30),this.loading=!0,this.$axMethod[this.url]||this.$api[this.url]){var a=this.$axMethod[this.url]?this.$axMethod[this.url](t):this.$api[this.url](t);a.then((function(t){if(e.loading=!1,200===t.data.code){var a=e.$publicFution.deepCopy(t);e.returnString.split(".").forEach((function(e){a=a[e]})),Array.isArray(a)||(a=[]),!0===e.isPage?(e.isLoading&&e.list.pop(),e.list=e.list.concat(a),t.data.data.last_page===t.data.data.current_page&&(e.isFinish=!0,e.list.push({isFinish:!0})),e.isLoading=!1):e.list=a,e.dealList(e.list,e.list.some((function(t){return t[e.itemObj.id]===e.scope.row[e.selectId]})))}}))}else this.loading=!1}}},$e=Oe,Pe=(a("d6d6"),Object(ae["a"])($e,ke,je,!1,null,"2a316447",null)),Se=Pe.exports,De=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"iconBox"},[a("span",{staticClass:"iconLeft"},[e._t("default")],2),a("span",{staticClass:"iconRight"},[e._t("content"),e._l(e.iconList,(function(e,t){return a("i",{key:t,class:e.icon?e.icon:"el-icon-search",attrs:{title:e.title},on:{click:function(t){e.iconMethod&&e.iconMethod()}}})}))],2)])},Ne=[],Le={props:{iconList:{type:Array,default:function(){return[]}}}},Te=Le,Fe=(a("a8b0"),Object(ae["a"])(Te,De,Ne,!1,null,"cab86502",null)),Ae=Fe.exports;function Me(e,t,a){var n=a.row,i=a.column,o=t.getParams?t.getParams(a):{};if(o.getOutIcon){var r=o.getOutIcon(a).map((function(t){return e("i",{class:t.icon?t.icon:"el-icon-search",attrs:{title:t.title?t.title:" "},style:"cursor: pointer;float:right;padding:0px 5px;",on:{click:function(e){e.preventDefault(),e.stopPropagation(),t.iconMethod&&t.iconMethod(a,e)}}})}));return[r,e("span",[" ",n[i.property]]),t.getOutSlots?t.getOutSlots(a):""]}return[e("span",[" ",n[i.property]]),t.getOutSlots&&t.getOutSlots(a)]}function Be(e,t,a,n,i){for(var o=0,r=0;r<t.length;r++)if(o||n){if(t[r].editRender)return e.setActiveCell(a,t[r].property),!0}else t[r].property===i&&(o=r)}function Ee(e,t){var a;return a=0==t.charAt(0)?isNaN(Number(t))?0:t:isNaN(Number(t))?0:Number(t),"Positive"===e&&a<0?(d["Message"].warning("只能输入正数"),0):a}function Ie(e,t){if(""===t)return"";if("Int"===e)return isNaN(parseInt(t))?0:parseInt(t);if("positiveInt"===e)return isNaN(parseInt(t))||t<0?(d["Message"].warning("请输入大于等于0的整数"),""):parseInt(t);if("String"===e)return t;if("Positive"===e){var a=isNaN(Number(t))?-1:Number(t).toFixed(2);return a<0?(d["Message"].warning("请输入大于等于0的数"),""):isNaN(Number(t))?"":Number(t).toFixed(2)}if("positive"===e){a=isNaN(Number(t))?"":Number(t).toFixed(2);return a<=0?(d["Message"].warning("请输入大于0的数"),""):isNaN(Number(t))?"":Number(t).toFixed(2)}return t>=1e8?(d["Message"].warning("数值不能超过一亿"),""):isNaN(Number(t))?"":Number(t).toFixed(2)}v.a.interceptor.add("event.keydown",(function(e,t){if(13===t.keyCode){var a=e.$table.editStore.actived;if(window.vxeKeyupCallBack)return window.vxeKeyupCallBack(t.keyCode,a),!1;if(a.row){var n=a.column,i=a.args,o=i.$table.tableColumn,r=n.property,s=i.$table;if(!Be(s,o,a.row,!1,r)){var l=s.$getRowIndex(a.row),c=s.getTableData().fullData;c[l++]&&Be(s,o,c[l++],!0)}}return!1}if(9===t.keyCode){t.preventDefault();var u=e.$table.editStore.actived;if(u.row){var d=u.column,p=u.args,h=p.$table.tableColumn,f=d.property,g=p.$table;if(!Be(g,h,u.row,!1,f)){var m=g.$getRowIndex(u.row),b=g.getTableData().fullData;b[m++]&&Be(g,h,b[m++],!0)}}return!1}})),v.a.renderer.add("vNumber",{autofocus:".custom-input",renderEdit:function(e,t,a,n){var i,o=a.row,r=a.column,s=a.$table,l=t.getParams?t.getParams(a):{};return i=e("input",{class:"vxe-default-input custom-input",attrs:{type:"number"},domProps:{value:o[r.property]},on:{focus:function(e){t.events.focus&&t.events.focus(a,e)},change:function(e){t.events.change&&t.events.change(a,e)},blur:function(e){o[r.property]=Ie(t.formatter,e.target.value),t.events.input&&t.events.input(a,event),t.events.blur&&t.events.blur(a,e)},input:function(e){o[r.property]=isNaN(e.target.value)?"":e.target.value,t.events&&t.events.input(a,event),s.updateStatus(a)}}}),[e(Ae,{attrs:{iconList:l.getIcon?l.getIcon(a):[]}},[i])]},renderCell:Me}),v.a.renderer.add("number",{autofocus:".custom-input",renderEdit:function(e,t,a,n){var i,o=a.row,r=a.column,s=a.$table,l=t.getParams?t.getParams(a):{};return i=e("input",{class:"vxe-default-input custom-input",attrs:{type:"number"},domProps:{value:o[r.property]},directives:[{name:"integer-number",value:!0}],on:{change:function(e){o[r.property]=Ee(t.formatter,e.target.value),t.events&&t.events.change&&t.events.change(a,e)},blur:function(e){o[r.property]=Ee(t.formatter,e.target.value),t.events&&t.events.blur&&t.events.blur(a,e)},input:function(e){o[r.property]=isNaN(e.target.value)?"":e.target.value,t.events&&t.events.input&&t.events.input(a,event),s.updateStatus(a)}}}),[e(Ae,{attrs:{iconList:l.getIcon?l.getIcon(a):[]},scopedSlots:{default:function(){return i},content:function(){return t.getSlots?t.getSlots(a):""}}},[","])]},renderCell:Me}),v.a.renderer.add("vAllocation",{autofocus:".el-input__inner",renderEdit:function(e,t,a){var n=t.getParams?t.getParams(a):{};return[e(Ae,{attrs:{iconList:n.getIcon?n.getIcon(a):[]}},[e(me,{attrs:{scope:a,url:n.url,modelKey:n.modelKey,isPage:n.isPage,modelLabel:n.modelLabel,vxeParams:n.params,showObj:n.showObj,allocationChange:t.events?t.events.change:null}},[" "])])]},renderCell:Me}),v.a.renderer.add("vGoods",{autofocus:".el-input__inner",renderEdit:function(e,t,a,n){var i=t.getParams?t.getParams(a):{};return[e(Ae,{attrs:{iconList:i.getIcon?i.getIcon(a):[]}},[e(ie,{attrs:{vxeParams:i.params,url:i.url,showObj:i.showObj,returnString:i.ReturnString,scopes:a,changeGoods:t.events?t.events.change:null}},[" "])])]},renderCell:Me}),v.a.renderer.add("vBatch",{autofocus:".el-input__inner",renderEdit:function(e,t,a){var n=t.getParams?t.getParams(a):{};return[e(Ae,{attrs:{iconList:n.getIcon?n.getIcon(a):[]}},[e(ue,{attrs:{scope:a,url:n.url,placeholder:n.placeholder,type:n.type,showObj:n.showObj,vxeParams:n.params,batchChange:t.events?t.events.change:null,batchBlur:t.events?t.events.blur:null}},[" "])])]},renderCell:Me}),v.a.renderer.add("Vinput",{autofocus:".custom-input",renderEdit:function(e,t,a){var n,i=a.row,o=a.column,r=a.$table,s=t.getParams?t.getParams(a):{};return n=t.events?e("input",{class:"vxe-default-input custom-input",attrs:{type:"text",placeholder:t.placeholder?t.placeholder:"",disabled:t.disabled||s.disabled},domProps:{value:i[o.property]},on:{focus:function(e){t.events.focus&&t.events.focus(a,e)},change:function(e){i[o.property]=Ie(t.formatter,e.target.value),t.events.change&&t.events.change(a,e)},blur:function(e){i[o.property]=Ie(t.formatter,e.target.value),t.events.input&&t.events.input(a,event),t.events.blur&&t.events.blur(a,e)},input:function(e){i[o.property]=e.target.value.trim(),t.events.input&&t.events.input(a,event),r.updateStatus(a)}}}):e("input",{class:"vxe-default-input custom-input",attrs:{type:"text",placeholder:t.placeholder?t.placeholder:"",disabled:t.disabled||s.disabled},domProps:{value:i[o.property]},on:{input:function(e){i[o.property]=e.target.value.trim(),r.updateStatus(a)},blur:function(e){i[o.property]=Ie(t.formatter,e.target.value)}}}),[e(Ae,{attrs:{iconList:s.getIcon?s.getIcon(a):[]},scopedSlots:{default:function(){return n},content:function(){return t.getSlots?t.getSlots(a):""}}},[","])]},renderCell:Me}),v.a.renderer.add("vWarehouse",{autofocus:".el-input__inner",renderEdit:function(e,t,a){var n=t.getParams?t.getParams(a):{};return[e(Ae,{attrs:{iconList:n.getIcon?n.getIcon(a):[]}},[e(Ce,{attrs:{scope:a,url:n.url,vxeParams:n.params,itemObj:n.itemObj,changeFn:t.events?t.events.change:null}},[" "])])]},renderCell:Me}),v.a.renderer.add("vSelect",{autofocus:".el-input__inner",renderEdit:function(e,t,a){var n=t.getParams?t.getParams(a):{};return[e(Se,{attrs:{clearable:n.clearable,scope:a,popperClass:n.popperClass,isPage:n.isPage,url:n.url,extendParams:n.extendParams,options:n.list,returnString:n.returnString,dealList:n.dealList,modelLabel:n.modelLabel,modelKey:n.modelKey,vxeParams:n.params,itemObj:n.itemObj,showObj:n.showObj,change:t.events?t.events.change:null}},[" "])]},renderCell:function(e,t,a){var n=a.row,i=a.column,o=n[i.property],r=t.getParams?t.getParams(a):{};if(t.slots)return t.slots(a);if(void 0!==r.list&&r.list.length>0){var s=r.itemObj?r.itemObj.id:"value",l=r.modelKey?r.modelKey:r.itemObj?r.itemObj.id:"value",c=r.list.filter((function(e){return e[s]===n[l]}));c.length>0&&(o=c[0][r.modelLabel?r.modelLabel:r.itemObj?r.itemObj.name:"label"],n[i.property]=o)}if(r.getOutIcon){var u=r.getOutIcon(a).map((function(t){return e("i",{class:"iconfont "+(t.icon?t.icon:"el-icon-search"),style:"cursor: pointer;float:right;padding:0px 5px;",on:{click:function(e){e.preventDefault(),e.stopPropagation(),t.iconMethod&&t.iconMethod(a,e)}}})}));return[u,e("span",[" ",o])]}return[e("span",[" ",o])]}});var Re,Ge=v.a,qe=(a("c40c"),a("9887")),ze=a.n(qe),Ue=a("c4ad"),He=a.n(Ue);function Ke(){Re=d["Loading"].service({lock:!0,text:"正在加载...",target:document.querySelector(".loading-area")})}function We(){Re.close()}var Ve=0;function Ye(){0===Ve&&Ke(),Ve++}function Je(){Ve<=0||(Ve--,0===Ve&&We())}a("bf00");var Qe=a("7178"),Xe=a.n(Qe),Ze="jybd20180331",et=a("91f4").Base64;function tt(e){if(e)for(var t in e)e[t]instanceof Array&&(e[t]=e[t].join(","));var a=null;return e&&Object.keys(e).length?(a=decodeURIComponent(He.a.stringify(at(e)))+"&key="+Ze,Xe()(a)):(a="key="+Ze,Xe()(a))}var at=function(e){for(var t=Object.keys(e).sort(),a={},n=0;n<t.length;n++)[null,void 0].includes(e[t[n]])&&(e[t[n]]=""),a[t[n]]=e[t[n]];return a},nt=function(e){return e._userp=et.encode(e._userp+it()),e},it=function(){var e=new Date,t="-",a=e.getFullYear(),n=e.getMonth()+1,i=e.getDate();n>=1&&n<=9&&(n="0"+n),i>=0&&i<=9&&(i="0"+i);var o=a+t+n+t+i;return o},ot=function(){var e=["role_id","titName","site","department_id","affiliated_company_name","purchase_center_company_name","company_name","hasAuditorStatusPrint","business_sn","employee_name","is_docking","FDBName_business","realname","purchase_center_company_id","loglevel:webpack-dev-server","affiliated_company_id","user_id","Documents_operation","employee_id","login_mac","company_admin_id","last_login_time","department_name","company_str","company_id","token","startMenu"];e.forEach((function(e){localStorage.removeItem(e)}))},rt=[],st=ze.a.CancelToken,lt=function(e){for(var t in rt)rt[t].url===e.url&&rt[t].f("cancelRequest")},ct=ze.a.create({baseURL:"https://test-www.taijierp.com",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:[function(e){return e=He.a.stringify(e),e}]});ct.interceptors.request.use((function(e){var t,a=e.url?e.url.split("/"):["open"];t=a.some((function(e){return["Publics","open","publics","Open"].includes(e)})),t||(e.params&&e.params.hideLoding?Je():Ye()),e.params&&e.params.hideLoding&&delete e.params.hideLoding,"post"==e.method?(e.data=Object(ye["a"])(Object(ye["a"])({},e.data),{},{sign:tt(e.data)}),lt(e),e.cancelToken=new st((function(t){rt.push({url:e.url,f:t})}))):"get"==e.method&&(e.params&&e.params.repeat?delete e.params.repeat:(lt(e),e.cancelToken=new st((function(t){rt.push({url:e.url,f:t})}))),e.params=Object(ye["a"])(Object(ye["a"])({},e.params),{},{sign:tt(e.params)}));var n=window.localStorage.getItem("token");return n&&(e.headers.Token=n),e}),(function(e){return Je(),Object(d["Message"])({showClose:!0,message:e.msg,type:"error"}),Promise.reject(e)})),ct.interceptors.response.use((function(e){"post"==e.config.method&&lt(e.config),Je();var t=[400,402,403],a=e.data;return 401==a.code?(ot(),history.replaceState(null,"","/login")):503==a.code&&(d["Message"].error(a.msg),ot(),history.replaceState(null,"","/login")),t.indexOf(a.code)>-1&&(d["Message"].closeAll(),a.msg&&d["Message"].error(a.msg)),e}),(function(e){return Je(),"cancelRequest"==e.message?(d["Message"].closeAll(),{data:{code:404}}):(Object(d["Message"])({message:"网络错误",type:"error",duration:5e3}),e)}));var ut=ct,dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.title,visible:e.dialogEmployeeImportVisible,width:"400px"},on:{close:e.close,"update:visible":function(t){e.dialogEmployeeImportVisible=t}}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{"on-exceed":e.handleExceed,"before-upload":e.beforeAvatarUpload,limit:1,action:e.uploadUrl,headers:e.headersToken,data:e.cdataPost,name:"excel",onError:e.uploadError,onSuccess:e.uploadSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("按照下载模板完成上传，只支持Excel文件")]),e._t("content")],2),a("div",{staticClass:"dialog-footer"},[a("el-button",{on:{click:e.close}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitUpload}},[e._v("确定")])],1)],1)],1)},pt=[],ht={name:"upload",props:["options","noTips"],data:function(){return{headersToken:{token:localStorage.token},uploadUrl:this.$axios.defaults.baseURL+this.options.url,title:this.options.title,dialogEmployeeImportVisible:!1}},computed:{cdataPost:function(){var e=tt(this.options.params);return Object(ye["a"])(Object(ye["a"])({},this.options.params),{},{sign:e})}},methods:{close:function(){this.$refs.upload.clearFiles(),this.dialogEmployeeImportVisible=!1},stateOpen:function(){this.dialogEmployeeImportVisible=!0},handleExceed:function(e,t){this.$message({message:"一次只能上传一个文件！",type:"error"})},submitUpload:function(){this.$refs.upload.submit()},uploadSuccess:function(e){if(200!=e.code)return this.$message({message:e.msg,type:"error"}),this.$emit("uploadFail",e),this.$refs.upload.uploadFiles[0].status="ready",!1;this.noTips||this.$message({message:e.msg?e.msg:e.data,type:"success"}),this.sendMsgToParent(e),this.dialogEmployeeImportVisible=!1,this.$emit("uploadFail",e)},sendMsgToParent:function(e){this.$emit("receiveUploadMsg",e)},uploadError:function(e){this.$message({message:"上传失败，请重试！",type:"error"}),this.sendMsgToParent(e)},beforeAvatarUpload:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a="xls"===t,n="xlsx"===t;return a||n||this.$message({message:"上传文件只能是 xls、xlsx格式!",type:"warning"}),a||n}}},ft=ht,gt=Object(ae["a"])(ft,dt,pt,!1,null,"2e43f6a8",null),mt=gt.exports,bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-cascader",{ref:"cascader",attrs:{placeholder:"搜索",options:e.authData,filterable:"",clearable:"",props:{value:"value"},remote:""},on:{change:e.handleChange},model:{value:e.cascaderVue,callback:function(t){e.cascaderVue=t},expression:"cascaderVue"}})],1)},vt=[],yt=(a("8757"),{name:"JybdCascader",props:{cascaderVue:{type:Array,default:function(){return[]}}},data:function(){return{clearable:!0,authData:[],options:[]}},methods:{handleChange:function(e){var t=this;setTimeout((function(){t.$emit("cascaderChange",e,t.$refs.cascader.getCheckedNodes())}),50)},operationModule:function(){var e=this;this.$axMethod.getGoodsTypeList().then((function(t){var a=t.data;if(200==a.code){var n=a.data;n.forEach((function(t,a){t.sub.length?(e.authData.push({value:t.goods_type_id,label:t.goods_type_name,children:[]}),t.sub.forEach((function(t,n){t.sub.length?(e.authData[a].children.push({value:t.goods_type_id,label:t.goods_type_name,children:[]}),t.sub.forEach((function(t){e.authData[a].children[n].children.push({value:t.goods_type_id,label:t.goods_type_name})}))):e.authData[a].children.push({value:t.goods_type_id,label:t.goods_type_name})}))):e.authData.push({value:t.goods_type_id,label:t.goods_type_name})}))}}))},clear:function(){this.cascaderVue=[]}},mounted:function(){this.operationModule()}}),_t=yt,xt=Object(ae["a"])(_t,bt,vt,!1,null,"3965403c",null),wt=xt.exports,Ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-autocomplete",{ref:"autocomplete",attrs:{"popper-class":"scrollClass","fetch-suggestions":e.remoteGoods,placeholder:"请输入商品"},on:{select:function(t){e.changeGoods(e.scopes.row,e.scopes.$index,t)}},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item;return[n.disabled?a("ul",{staticClass:"goods_ul goods_ul3 title  warehouseTitle",on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[a("li",[e._v("商品编号")]),a("li",[e._v("商品名称")]),a("li",[e._v("可用库存")]),a("li",[e._v("在库库存")])]):n.loading?a("div",{staticStyle:{"text-align":"center",color:"#409eff"},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[a("i",{staticClass:"icon el-icon-loading"}),e._v(" 拼命加载中 ")]):n.isFinish?a("div",{staticStyle:{"text-align":"center",color:"#409eff"},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[e._v(" 已经到底了 ")]):a("ul",{staticClass:"goods_ul  goods_ul3"},[a("li",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(n.goods_id))]),a("li",[e._v(e._s(n.value=n.goods_name))]),a("li",[e._v(e._s(n.available_stocks))]),a("li",[e._v(e._s(n.stocks))])])]}}]),model:{value:e.scopes.row.goods_name,callback:function(t){e.$set(e.scopes.row,"goods_name",t)},expression:"scopes.row.goods_name"}})],1)},kt=[],jt={name:"JybdGoodslist",props:["goodsopthion","scopes","fatherGoods"],data:function(){return{goodslist:[],page:1,isLoading:!1,isFinish:!1,query:"",source:null,loading:!1,callback:function(){},done:!1}},methods:{scroll:function(){for(var e=document.getElementsByClassName("el-autocomplete-suggestion__wrap"),t=this,a=function(a){e[a].onscroll=function(){e[a].scrollTop+e[a].clientHeight+200>e[a].children[0].clientHeight&&!t.isLoading&&!t.isFinish&&(t.getList(t.query),t.goodslist.push({loading:!0}),t.page++,t.isLoading=!0)}},n=0;n<e.length;n++)a(n)},remoteGoods:C((function(e,t){this.query=e,this.page=1,this.isFinish=!1,this.goodslist=[{goods_id:"编号",goods_name:"商品名称",disabled:!0}],this.getList(e,t),this.scroll()}),500),getList:function(e,t){var a=this,n={company_id:this.goodsopthion.company_id,customer_id:this.goodsopthion.customer_id,order_id:this.goodsopthion.order_id||0,warehouse_id:this.goodsopthion.warehouse_id||0,bill_type:this.goodsopthion.bill_type||0,page:this.page,goods_name:e},i=this.goodsopthion.Method?this.goodsopthion.Method:"getGoodsSnList";this.$axMethod[i](n,this).then((function(e){var n;(a.isLoading&&a.goodslist.pop(),200==e.data.code)&&((n=a.goodslist).push.apply(n,Object(x["a"])(e.data.data)),e.data.data.length<30&&(a.isFinish=!0,a.goodslist.push({isFinish:!0})),t&&t(a.goodslist));a.isLoading=!1}))},changeGoods:function(e,t,a){this.fatherGoods&&this.fatherGoods(e,this.scopes.$rowIndex,a),this.$emit("changeGoods",e,t,a)}}},Ot=jt,$t=Object(ae["a"])(Ot,Ct,kt,!1,null,"61b87858",null),Pt=$t.exports,St=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vxeTable"},[e.isShow?a("vxe-grid",{ref:"vxeGrid",attrs:{border:"",columnKey:"",resizable:"","auto-resize":"","show-overflow":"","highlight-hover-row":"","highlight-current-row":"","show-header-overflow":"",size:e.size,data:e.xData,"row-id":e.rowId,params:e.params,height:e.height,stripe:e.stripe,"row-style":e.rowStyle,toolbar:e.tool_Config,customs:e.customs,"max-height":e.maxHeight,"edit-rules":e.editRules,"show-footer":e.showFooter,"span-method":e.spanMethod,columns:e.vxeTableColumn,"edit-config":e.edit_Config,"radio-config":e.radioConfig,"cell-class-name":e.cellClassName,"sort-config":{trigger:"cell"},"mouse-config":e.mouse_Config,"checkbox-config":e.select_Config,footerMethod:e.footerMethods,"proxy-config":e.proxy_Config,"pager-config":e.pager_Config,"column-min-width":e.columnMinWidth,"row-class-name":function(t){return e.rowClass(t)},"keyboard-config":{isArrow:!0,isDel:!0,isTab:!0,isEdit:!0,editMethod:e.isEdit}},on:{"update:customs":function(t){e.customs=t},"cell-click":e.cellClick,"current-change":e.currentChangeEvent,"cell-mouseenter":e.cellHover,"select-all":e.selectChange,"page-size-change":e.sizeChange,"cell-context-menu":e.cellContextMenuEvent,"select-change":e.selectChange,"edit-actived":e.editActived,"radio-change":e.radioChange,"page-change":e.pageChange,"cell-dblclick":e.cellDblclick,"toolbar-button-click":e.toolbarButtonClick},scopedSlots:e._u([{key:"empty",fn:function(){return[a("div",[e._v(" "+e._s(e.emptyText)+" ")])]},proxy:!0}],null,!1,837423425)}):e._e()],1)},Dt=[],Nt=(a("fde8"),{methods:{initTool:function(){var e={id:"Jybd",buttons:[],zoom:!0,resizable:{storage:!0},setting:{storage:!0,immediate:!0}};if(this.$router){var t=this.$router.currentRoute.fullPath.split("/");t[3]?-1!==t[3].indexOf("?")?e.id=t[3].slice(0,t[3].indexOf("?")-1):e.id=t[3]:e.id=t[2],this.isShowTool&&(this.tool_Config=Object.assign(e,this.toolConfig))}}}}),Lt={methods:{initEdit:function(){var e=this,t={showHeader:!0,reserve:!0,checkMethod:function(t){return e.rowClass(t,!0)}};this.select_Config=Object.assign(t,this.selectConfig);var a={trigger:"click",mode:"cell",showStatus:!1,showIcon:!0,activeMethod:this.isEdit,autoClear:!1};this.edit_Config=Object.assign(a,this.editConfig)}}},Tt={methods:{cellClick:function(e){this.$emit("cellClick",e)},cellContextMenuEvent:function(e){var t=e.row;this._proxy("setCurrentRow",t)},cellHover:function(e){this.$emit("cell-mouseenter",e)},currentChangeEvent:function(e){this.$emit("current-change",e)},cellDblclick:function(e){this.$emit("cellDblclick",e)},radioChange:function(e){this.$emit("radioChange",e)},editActived:function(e){this.$emit("editActived",e.row)},selectChange:function(e){e.selection=e.records,this.$emit("selectChange",e),this.$parent.handleSelectionChange&&this.$parent.handleSelectionChange(e.records)},sizeChange:function(e){this.$emit("sizeChange",e),this.$parent.pageSize&&(this.$parent.pageSize=e)},rowClass:function(e,t){var a=e.row,n=e.$rowIndex;if(this.sign.arr)for(var i=0;i<this.sign.arr.length;i++)if(this.sign.arr[i][this.sign.str]===a[this.sign.str])return(!t||!this.rowClassName.isDisable||!0===this.sign.noDisabled)&&this.rowClassName.name;for(var o=0;o<this.indexSign.length;o++)if(n+this.indexSignStart===this.indexSign[o]-0)return(!t||!this.indexSignConfig.indexDisabled)&&(this.indexSignConfig.className?this.indexSignConfig.className:"sign_row");if(t)return!0},pageChange:function(e){this.$emit("pageChange",e.currentPage),this.$parent.goPage&&(this.$parent.goPage=e.currentPage)}}},Ft={zeroNull:function(e){return e||(e="0"),Number(e)},priceFormatNone:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",";return!isNaN(parseFloat(e))&&isFinite(e)?(e=Number(e),e=("undefined"!==typeof a?e.toFixed(a):e).toString(),t=e.split("."),t[0]=t[0].toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+(n||",")),t.join(".")):"无权限"==e?"无权限":e},getAllTime:function(e){if(!e)return"";if(isNaN(e-0))return e;var t=new Date(e-0),a=t.getFullYear(),n=t.getMonth()+1,i=t.getDate(),o=t.getHours(),r=t.getMinutes(),s=t.getSeconds();return"".concat(a,"-").concat(n<10?"0"+n:n,"-").concat(i<10?"0"+i:i," ").concat(o<10?"0"+o:o,":").concat(r<10?"0"+r:r,":").concat(s<10?"0"+s:s)},getTime:function(e){if(!e)return"";if(isNaN(e-0))return e;var t=new Date(e-0),a=t.getFullYear(),n=t.getMonth()+1,i=t.getDate();return"".concat(a,"-").concat(n<10?"0"+n:n,"-").concat(i<10?"0"+i:i)},priceFormat:function(e,t){if(!e&&0!==e)return e;var a=Number(e);if(a&&a>0){t=t>0&&t<=20?t:2,a=parseFloat((a+"").replace(/[^\d\.-]/g,"")).toFixed(t)+"";for(var n=a.split(".")[0].split("").reverse(),i=a.split(".")[1],o="",r=0;r<n.length;r++)o+=n[r]+((r+1)%3==0&&r+1!=n.length?",":"");return e<0&&Math.abs(e)<1e3?e:o.split("").reverse().join("")+"."+i}return a<=0?0:null},statusFormat:function(e){return 1==e?"未审核":2==e?"已审核":3==e?"作废":0==e?"全部":4==e?"关闭":5==e?"锁定":"未知"}},At={methods:{initColumn:function(e){this.$createElement;for(var t={showOverflow:"tooltip",showHeaderOverflow:"tooltip",headerAlign:"left",align:"left"},a=0;a<e.length;a++)e[a]=Object.assign({},t,e[a]),"string"===typeof e[a].formatter&&(e[a].formatter=function(e){return function(t){var a=t.row,n=t.column;return Ft[e](a[n.property])}}(e[a].formatter)),"操作"===e[a].title&&(e[a].showOverflow=!1,e[a].headerAlign="center"==e[a].align?"center":"right",e[a].align="center"==e[a].align?"center":"right"),"index"!==e[a].type&&"seq"!==e[a].type||(e[a].headerAlign="center",e[a].width="50",e[a].align="center"),"checkbox"===e[a].type&&(e[a].headerAlign="center",e[a].width="44",e[a].align="center"),e[a].headIcon&&(e[a].slots||(e[a].slots={}),e[a].slots.header={},e[a].slots.header=function(e){return function(t,a){t.row,t.rowIndex;var n,i=t.column;return n="string"===typeof e?a("span",[a("i",{class:e},[" "]),i.title]):a("span",{class:"headIcon"},[i.title]),[n]}}(e[a].headIcon)),e[a].slots||e[a].formatter||e[a].editRender||"goods_name"!==e[a].field||(e[a].slots={default:function(e,t){var a=e.row,n=e.column;return[t("pre",[a[n.property]," "])]}});var n=JSON.parse(window.localStorage.getItem("vtable-".concat(this.rowId,"-").concat(this.$route.fullPath))||"[]");if(n.length){var i=[];n.forEach((function(t){var a=e.find((function(e){return e.title===t.title}))||{};i.push(a)})),e=i}this.$refs.vxeGrid?this._proxy("reloadColumn",e):this.vxeTableColumn=e.concat()},getFieldPower:function(){var e=this;this.$axios({url:"v2/open/FieldAuth/getFieldList",method:"get",params:{menu_action:this.fieldUrl}}).then((function(t){var a=t.data;if(a.code){var n=e.tableColumn.filter((function(e){for(var t=0;t<a.data.length;t++)if(a.data[t].field===e.field||"checkbox"===e.type||"index"===e.type||"sqp"===e.type||"操作"===e.title)return!0}));e.initColumn(n),e.initAttrs()}})).catch((function(){e.initColumn(e.tableColumn),e.initAttrs()}))}}},Mt=(a("53d8"),{setSelection:"setCheckboxRow",removeSelecteds:"removeCheckboxRow",getSelectRecords:"getCheckboxRecords"}),Bt={methods:{_proxy:function(){var e=this,t=arguments,a=Mt[arguments[0]]?Mt[arguments[0]]:arguments[0];return"loadData"!==a&&"insertAt"!==a&&"removeSelecteds"!==a&&"remove"!==a||setTimeout((function(){e.$emit("tableUpdate"),e.$parent.vxeTableData&&(e.$parent.vxeTableData.length=e.$refs.vxeGrid.getTableData().fullData.length),e.$refs.vxeGrid.updateFooter()}),50),"validate"===a?new Promise((function(n,i){var o=e.$refs.vxeGrid[a].apply(null,Array.prototype.slice.call(t,1));o.then((function(e){n(e)})).catch((function(t){if(i(t),t)for(var a in t)e.$message.warning(t[a].rule.message)}))})):this.$refs.vxeGrid[a].apply(null,Array.prototype.slice.call(arguments,1))},_copyRow:function(e,t){var a=this._proxy("$getRowIndex",e),n=this._proxy("getTableData").fullData.concat([]),i=this.$publicFution.deepCopy(e);return delete i[this.rowId],a<n.length-1?this._proxy("insertAt",t||i,n[a+1]):this._proxy("insertAt",t||i,-1)},_getData:function(e,t){var a=this;this.$parent.handleSelectionChange&&this.$parent.handleSelectionChange&&this.$parent.handleSelectionChange([]),this.isShow&&this.$nextTick((function(){a._proxy("commitProxy","query",e,t)}))},_updateFooter:function(){this._proxy("updateFooter")},initFooter:function(){var e,t=this;this.footerMethod?(e=this.footerMethod,this.showFooter=!0):this.totalArray.length>0&&(e=function(e){var a=e.columns;return[a.map((function(e,a){return a===t.totalIndex?"合计":t.totalArray.includes(e.property)?(n=t.$refs.vxeGrid?t.$utils.sum(t._proxy("getTableData").fullData,e.property):0,Number.isInteger(n)?t.$publicFution.priceFormatNone(n,0):t.$publicFution.priceFormatNone(n.toFixed(2))):null;var n}))]},this.showFooter=!0),this.footerMethods=e}}},Et={methods:{contextMenuClickEvent:function(e){var t=e.menu,a=e.row,n=e.column,i=this.$refs.vxeGrid;switch(t.code){case"clear":i.clearData(a,n.property);break;case"export":i.exportCsv();break;case"reload":i.commitProxy("query")}},initMenu:function(){var e={body:{options:[[{code:"copy",name:"复制内容",visible:!0,disabled:!1,prefixIcon:"fa fa-copy"}]]}};this.context_menu=Object.assign(e,this.menu)}}},It={props:{stripe:{type:Boolean,default:!1},maxHeight:{type:Number,default:500},rowId:{default:"XID"},size:{type:String,default:"mini"},tableColumn:{type:Array,default:function(){return[]}},editConfig:{type:Object,default:function(){return{}}},isPage:{type:Boolean,default:!0},"tree-config":{type:Object,default:function(){return{}}},ajax:{type:Object,default:function(){return{}}},xData:{type:Array,default:function(){return[]}},pagerConfig:{type:Object,default:function(){return{}}},selectConfig:{type:Object,default:function(){return{}}},proxyConfig:{type:Object,default:function(){return{}}},toolConfig:{type:Object,default:function(){return{}}},isShowTool:{type:Boolean,default:function(){return!1}},toolbarButtonClick:{type:Function,default:function(){return function(){}}},indexSignStart:{type:Number,default:0},indexSign:{type:Array,default:function(){return[]}},indexSignConfig:{type:Object,default:function(){return{indexDisabled:!1,className:"sign_row"}}},rowClassName:{type:Object,default:function(){return{name:"sign_row",isDisable:!0}}},sign:{type:Object,default:function(){return{arr:[],str:"id"}}},totalIndex:{type:Number,default:1},editRules:{type:Object,default:function(){}},totalArray:{type:Array,default:function(){return[]}},footerMethod:Function,isEdit:{type:Function,default:function(){return function(){return!0}}},fieldUrl:{type:String,default:""},"empty-text":{type:String,default:"暂无数据"},dragable:{type:Boolean,default:!1},columnMinWidth:{}}},Rt={methods:{initProxy:function(){var e=this,t={"page-sizes":[30,50,100,500],background:!1,"current-page":1,"pager-count":7,pageSize:30};if(this.ajax&&this.ajax.url){this.isPage&&(this.pager_Config=Object.assign(t,this.pagerConfig));var a=void 0===this.ajax.Proxy||this.ajax.Proxy,n={sort:void 0===this.ajax.sort||this.ajax.sort,props:{result:this.ajax.result?this.ajax.result:"data.data.data",list:this.ajax.result?this.ajax.result:"data.data.data",total:this.ajax.total?this.ajax.total:"data.data.total"},ajax:{query:function(t,n,i){var o=t.$grid,r=t.page,s=t.sort,l={};return e.ajax.params?l=e.$publicFution.deepCopy(e.ajax.params):e.ajax.params={},e.isPage&&(i&&(o.tablePage.pageSize=i),o.tablePage.currentPage=isNaN(n)?r.currentPage:n,l.page=r.currentPage,l.per_page=r.pageSize,e.$parent.goPage&&(e.$parent.goPage=r.currentPage)),s&&s.field&&(l.order_key=s.field,l.order_by=s.order),l.hideLoding=!0,new Promise((function(t){e.$axios({method:"get",url:e.$api[e.ajax.url]?e.$api[e.ajax.url]:e.ajax.url,params:l}).then((function(n){if(200==n.code){a&&t(n),e.$emit("getData",{data:n.data,next:t});var i=e.ajax.result?e.ajax.result:"data.data.data";i.split(".").forEach((function(e){n=n[e]})),Array.isArray(n)?e.$parent.tableData=n:e.$parent.tableData=[],setTimeout((function(){e._updateFooter()}),50)}else t(n)}))}))}}};this.proxy_Config=Object.assign(n,this.proxyConfig)}}}},Gt=a("1da1"),qt=(a("d210"),a("c9ce"),a("9600")),zt={methods:{initDrag:function(){var e=this;return Object(Gt["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:a=e.$refs.vxeGrid,e.sortable=qt["a"].create(a.$el.querySelector(".body--wrapper>.vxe-table--header .vxe-header--row"),{handle:".vxe-header--column:not(.col--fixed)",onEnd:function(t){var n=t.item,i=t.newIndex,o=t.oldIndex,r=a.getTableColumn(),s=r.fullColumn,l=r.tableColumn,c=n,u=(c.parentNode,a.getColumnIndex(l[o])),d=a.getColumnIndex(l[i]),p=s.splice(u,1)[0];s.splice(d,0,p);var h=[];s.forEach((function(e){h.push({title:e.title,type:e.type,property:e.property})})),window.localStorage.setItem("vtable-".concat(e.rowId,"-").concat(e.$route.fullPath),JSON.stringify(h)),a.loadColumn(s)}});case 4:case"end":return t.stop()}}),t)})))()}},beforeDestroy:function(){this.sortable&&this.sortable.destroy()}},Ut={mixins:[Lt,Tt,At,Bt,Et,It,Rt,Nt,zt],name:"xTable",data:function(){return{timer:null,params:{},loading:!1,mouse_Config:{},vxeTableColumn:[],currentRdit:{},hoverCurrentRow:!1,currentRditColumn:[],showFooter:!1,footerMethods:null,isShow:!1,proxy_Config:null,pager_Config:null,tool_Config:null,edit_Config:{},context_menu:{},select_Config:{},radioConfig:{trigger:"row"}}},created:function(){this.initEdit(),this.initProxy(),this.initFooter(),this.initMenu(),this.initTool(),this.fieldUrl?this.getFieldPower(this.tableColumn):(this.initColumn(this.tableColumn),this.isShow=!0)},methods:{initAttrs:function(){}},mounted:function(){var e=this;this.dragable&&setTimeout((function(){e.initDrag()}),2e3)},beforeDestroy:function(){this.timer&&clearTimeout(this.timer)}},Ht=Ut,Kt=(a("295d"),a("293b"),Object(ae["a"])(Ht,St,Dt,!1,null,"728956ee",null)),Wt=Kt.exports,Vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vxe-modal",{attrs:{id:"myModal6",width:e.width,"esc-closable":!0,"destroy-on-close":"",height:"700","min-width":"100","min-height":"100",resize:"",remember:"",storage:""},on:{hide:function(t){return e.$emit("close")}},scopedSlots:e._u([{key:"title",fn:function(){return[a("span",[e._v("选择商品")])]},proxy:!0}]),model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[[a("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[e.paramsBox.includes("goods_name")?a("el-form-item",{attrs:{label:"商品名称",size:"mini","label-width":e.formStyle.labelWidth}},[a("el-input",{attrs:{clearable:"",placeholder:"名称、编码、助记码、工厂代码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.params.goods_name,callback:function(t){e.$set(e.params,"goods_name",t)},expression:"params.goods_name"}})],1):e._e(),e.paramsBox.includes("brand_id")?a("el-form-item",{attrs:{label:"品牌",size:"mini","label-width":e.formStyle.labelWidth}},[a("getBrand",{model:{value:e.params.brand_id,callback:function(t){e.$set(e.params,"brand_id",t)},expression:"params.brand_id"}})],1):e._e(),e.paramsBox.includes("shopType")?a("el-form-item",{attrs:{label:"商品类型",size:"mini","label-width":e.formStyle.labelWidth}},[a("jybd-cascader",{ref:"cascader",on:{cascaderChange:e.handleChange}})],1):e._e(),e.paramsBox.includes("warehouse")?a("el-form-item",{attrs:{label:"仓库名称",size:"mini","label-width":e.formStyle.labelWidth}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择",disabled:Boolean(e.searchParams.warehouse_id)},on:{focus:e.warehouseInvok},model:{value:e.params.warehouse_id,callback:function(t){e.$set(e.params,"warehouse_id",t)},expression:"params.warehouse_id"}},e._l(e.warehouseList,(function(e){return a("el-option",{key:e.warehouse_id,attrs:{label:e.warehouse_name,value:e.warehouse_id}})})),1)],1):e._e(),e.paramsBox.includes("specification_type")?a("el-form-item",{attrs:{label:"规格型号",size:"mini","label-width":e.formStyle.labelWidth}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入规格型号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.params.specification_type,callback:function(t){e.$set(e.params,"specification_type",t)},expression:"params.specification_type"}})],1):e._e(),e.paramsBox.includes("pattern")?a("el-form-item",{attrs:{label:"花纹",size:"mini","label-width":e.formStyle.labelWidth}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入花纹"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.params.pattern,callback:function(t){e.$set(e.params,"pattern",t)},expression:"params.pattern"}})],1):e._e(),a("el-form-item",{attrs:{size:"mini","label-width":e.formStyle.labelWidth}},[e.paramsBox.includes("is_stocks")?a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.params.is_available_stocks,callback:function(t){e.$set(e.params,"is_available_stocks",t)},expression:"params.is_available_stocks"}},[e._v("可用库存>0")]):e._e(),e.paramsBox.includes("is_available_stocks")?a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.params.is_stocks,callback:function(t){e.$set(e.params,"is_stocks",t)},expression:"params.is_stocks"}},[e._v("在库库存 >0")]):e._e()],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.onReset}},[e._v("重置")])],1)],1),a("div",[a("div",{staticClass:"wz_selectr",staticStyle:{margin:"15px 0"}},[e._v("【参照商品列表】")]),a("xTable",{ref:"xTable",attrs:{xData:e.tableDataTop,dataStr:"tableDataTop",ajax:{url:this.url,params:e.params},maxHeight:200,rowId:e.rowId,selectConfig:{reserve:!0,highlight:!0,trigger:"row"},tableColumn:e.tableColumnTop},on:{getData:e.dealData,selectChange:e.selectAllChange,selectAllChange:e.selectAllChange}})],1),a("div",{staticClass:"wz_selectr"},[e._v("【选中商品列表】已选"),a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.llistlebnth))]),e._v("种商品")]),a("div",{staticStyle:{height:"160px"}},[a("xTable",{ref:"xTables",attrs:{isPage:!1,maxHeight:160,selectConfig:{trigger:"row"},tableColumn:e.tableColumnBottom,xData:e.tableData},on:{selectChange:e.selectAllChangeTwo,selectAllChange:e.selectAllChangeTwo}})],1),a("div",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(t){return e.$emit("close")}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)]],2)],1)},Yt=[],Jt={company_id:"",goods_id:"",goods_name:"",goods_type_id:"",customer_id:0,specification_type:"",pattern:"",order_id:"",order_type:"",brand_id:"",factory_code:"",warehouse_id:"",is_stocks:0,is_available_stocks:0,bill_type:"",type:"",page:"",per_page:""},Qt={data:function(){var e=this;this.$createElement;return{params:this.$publicFution.deepCopy(Jt),paramsBox:["goods_name","brand_id","shopType","warehouse","specification_type","pattern","is_stocks","is_available_stocks"],tableColumnTop:[{type:"checkbox",width:50},{title:"数量",field:"goods_num",headerAlign:"right",align:"right",width:70,editRender:{name:"number",events:{input:function(t){var a=t.row;e.updateTableData([a],e.tableData)}}}},{title:"商品编号",field:"goods_id",width:100},{title:"商品名称",field:"goods_name",minWidth:"250",slots:{default:function(e,t){var a=e.row,n=e.column;return[t("pre",[a[n.property]," "])]}}},{title:"年周/批次",field:"batch",width:100,sortable:!0},{title:"仓库名称",field:"warehouse_name",width:120,sortable:!0},{title:"可用库存",field:"available_stocks",headerAlign:"right",align:"right",width:120,sortable:!0},{title:"在库库存",field:"stocks",headerAlign:"right",align:"right",width:120,sortable:!0},{title:"结存成本价",field:"cost_price",headerAlign:"right",align:"right",width:100,sortable:!0},{title:"售价",field:"unit_price",headerAlign:"right",align:"right",width:100,sortable:!0},{title:"品牌",field:"brand_name",width:120,sortable:!0},{title:"货位",field:"allocation_name",width:100},{title:"工厂代码",field:"factory_code",width:100},{title:"速记码",field:"shorthand_code",width:100},{title:"助记码",field:"logogram",width:100},{title:"规格型号",field:"specification_type",width:100},{title:"花纹",field:"pattern",width:100},{title:"单位",field:"unit_name",width:80}],tableColumnBottom:[],baseColumn:["goods_id","goods_name"]}},methods:{dealData:function(e){200===e.data.code&&(this.tableDataTop=e.data.data.data,this.updateTableData(this.tableData,this.tableDataTop),this.$refs.xTable._proxy("setActiveCell",this.tableDataTop[0],"goods_num"))},updateTableData:function(e,t){var a=this;e.forEach((function(e){t.forEach((function(t){t[a.rowId]===e[a.rowId]&&(t.goods_num=e.goods_num)}))}))},initTableColumn:function(){var e=this;this.tableColumnTop=this.tableColumnTop.map((function(t){for(var a=0;a<e.tableColumnConfig.length;a++)if(t.field===e.tableColumnConfig[a].old_field)return Object.assign(t,e.tableColumnConfig[a]);return t}));var t=this.tableColumnTop.concat([]);t[1]={title:"数量",field:"goods_num",width:70,editRender:{name:"number",events:{input:function(t){var a=t.row;e.updateTableData([a],e.tableDataTop)}}}},this.tableColumnBottom=t,this.incloudTop.length>0?(this.incloudTop=this.incloudTop.concat(this.baseColumn),this.tableColumnTop=this.tableColumnTop.filter((function(t){for(var a=0;a<e.incloudTop.length;a++)if(e.incloudTop[a]===t.field||"checkbox"===t.type)return t;return!1}))):this.tableColumnTop=this.tableColumnTop.filter((function(t){for(var a=0;a<e.ExcludeTop.length;a++)if(e.ExcludeTop[a]===t.field)return!1;return t}));var a=[];this.incloudTop.length>0?(a=this.incloudBottom.length>0?this.incloudBottom.concat(this.baseColumn):this.incloudTop.concat(this.baseColumn),this.tableColumnBottom=this.tableColumnBottom.filter((function(e){for(var t=0;t<a.length;t++)if(a[t]===e.field||"checkbox"===e.type)return e;return!1}))):(a=this.ExcludeBottom.length>0?this.ExcludeBottom.concat([]):this.ExcludeTop.concat([]),this.tableColumnBottom=this.tableColumnBottom.filter((function(e){for(var t=0;t<a.length;t++)if(a[t]===e.field)return!1;return e}))),this.paramsBox=this.paramsBox.filter((function(t){for(var a=0;a<e.ExcloudParams.length;a++)if(e.ExcloudParams[a]===t)return!1;return t}))}},created:function(){this.initTableColumn(),this.warehouseList=[],this.warehouseList.push({warehouse_id:this.searchParams.warehouse_id,warehouse_name:this.searchParams.warehouse_name}),this.searchParams=this.$publicFution.filter(Jt,this.searchParams),this.params=this.$publicFution.deepCopy(this.searchParams),console.log(this.searchParams)},mounted:function(){this.onSearch()}},Xt={name:"goodsPopout",mixins:[Qt],props:{rowId:{type:String,default:"batch_id"},width:{type:Number,default:1500},url:{type:String,default:"getGoodsListPopup"},searchParams:Object,ExcloudParams:{type:Array,default:function(){return[]}},ExcludeTop:{type:Array,default:function(){return[]}},incloudTop:{type:Array,default:function(){return[]}},ExcludeBottom:{type:Array,default:function(){return[]}},defaultNum:{type:Number,default:1},incloudBottom:{type:Array,default:function(){return[]}},tableColumnConfig:{type:Array,default:function(){return[]}}},data:function(){return{formStyle:{labelWidth:"70px"},show:!0,loading:!1,tableDataTop:[],llistlebnth:0,tableData:[]}},methods:{handleChange:function(e){this.params.goods_type_id=e[2]},onReset:function(){this.$refs.cascader&&this.$refs.cascader.clear(),this.params=this.$publicFution.filter(this.params,this.searchParams),this.onSearch()},onSearch:function(){var e=this;this.$refs.xTable?this.$refs.xTable._getData(1):this.$nextTick((function(){e.$refs.xTable._getData(1)}))},selectAllChangeTwo:function(e){var t=this,a=e.selection;e.reserves;this.$nextTick((function(){t.llistlebnth=a.length}))},selectAllChange:function(e){var t=this,a=e.selection,n=e.reserves;this.tableData=n.concat(a),this.tableData.forEach((function(e){e.goods_num||t.$set(e,"goods_num",t.defaultNum),t.$refs.xTables._proxy("setSelection",e,!0)})),this.$nextTick((function(){t.llistlebnth=t.tableData.length}))},submit:function(){var e=this.$refs.xTables._proxy("getCheckboxRecords");e.length?this.$emit("submit",e):this.$message({message:"请选择商品",type:"error"})}}},Zt=Xt,ea=Object(ae["a"])(Zt,Vt,Yt,!1,null,"59fa36f8",null),ta=ea.exports,aa=a("504b"),na=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.exportClick()}}},[e._v("导出")])],1)},ia=[],oa=(a("56a0"),{name:"excelExport",data:function(){return{}},props:{titles:{type:String,default:"错误文件"},headerTitle:{type:Array,default:function(){return[]}},dataList:{type:Array,default:function(){return[]}}},methods:{exportClick:function(){var e=this;a.e("chunk-6af405b9").then(function(){try{var t=a("fcb1"),n=t.export_json_to_excel,i=e.formatJson(e.dataList);n(e.headerTitle,i,e.titles)}catch(o){console.error(o)}}.bind(null,a)).catch(a.oe)},formatJson:function(e){var t=[];return e.forEach((function(e){t.push(Object.values(e))})),console.log(t),t}}}),ra=oa,sa=Object(ae["a"])(ra,na,ia,!1,null,"199f2ab1",null),la=sa.exports,ca=function e(t){e.installed||(t.component(mt.name,mt),t.component(aa["default"].name,aa["default"]),t.component(Wt.name,Wt),t.component(wt.name,wt),t.component(Pt.name,Pt),t.component(ta.name,ta),t.component(ie.name,ie),t.component(la.name,la))};"undefined"!==typeof window&&window.Vue&&ca(window.Vue);var ua={install:ca,xTable:Wt,upload:mt,JybdCascader:wt,JybdGoodslist:Pt,jybdupload:aa["default"],vGoodsList:ie,goodsPopout:ta,excelExport:la},da=a("b85c"),pa=(a("0698"),a("b41a"),{}),ha={initApi:function(e){pa=e},initData:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"object"==Object(w["a"])(a)&&"loading"in a&&(a.loading=!0);var n=Object.assign({},a);delete n.loading,ut({method:"get",url:pa[e],params:n}).then((function(e){if("object"==Object(w["a"])(a)&&"loading"in a&&(a.loading=!1),200==e.data.code){var n=e.data.data;void 0!==n.total?(t.tableData=n.data,t.total=n.total,t.goPage=Number(n.current_page),t.pageSize=Number(n.per_page)):t.tableData=n}}))},BatchDeletion:function(e,t,a,n){var i=this,o=e.deleID,r=new Object,s=e.deleApi,l=e.deleSelect,c=e.list.esData,u=new Array,p=e.list.UrlApi,h=e.list.data;if(void 0==l||0==l.length)return Object(d["Message"])({message:"请选择需要".concat(t||"删除","的信息"),type:"warning"}),!1;d["MessageBox"].confirm("\n        确定要".concat(t||"删除","此条信息？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){for(var t=0;t<l.length;t++)u.push(l[t][o]);r[o]=u.toString(),ut({method:"post",url:pa[s],data:r}).then((function(t){if(200==t.data.code){var r=t.data.data;t.data.msg&&(r=t.data.msg),Object(d["Message"])({message:r,type:"success"}),a.goPage=1,i.initData(p,h,c)}else{var s=[];t.data.msg.error.forEach((function(e){s.push(e[o])}));var l=[];e.deleSelect.forEach((function(e){l.push(e[o])}));var u=function(e,t){var a,n=new Set(e),i=new Set(t),o=[],r=Object(da["a"])(n);try{for(r.s();!(a=r.n()).done;){var s=a.value;i.has(s)||o.push(s)}}catch(l){r.e(l)}finally{r.f()}return o},f=u(l,s);if(f.length>0){e.list.data.tableData.forEach((function(e,t){-1!=f.indexOf(e[o])&&(e.sucDel=!0)})),e.list.data.tableData=e.list.data.tableData.filter((function(e){return 1!=e.sucDel})),e.list.data.tableData.forEach((function(e){-1!=s.indexOf(e[o])&&(e.canNotDelete=!0)})),e.list.data.tableData.push({}),e.list.data.tableData.pop()}else e.list.data.tableData.forEach((function(e){-1!=s.indexOf(e[o])&&(e.canNotDelete=!0)})),e.list.data.tableData.push({}),e.list.data.tableData.pop();Object(d["Message"])({message:"选中"+t.data.msg.sum.all+"条 删除成功"+t.data.msg.sum.success+"条，不可删除已引用数据",duration:5e3,type:"error"})}n&&n()}))})).catch((function(){Object(d["Message"])({type:"info",message:"已取消".concat(t||"删除")})}))},deletes:function(e,t,a,n){var i=this,o=e.deleID,r=new Object,s=e.deleApi,l=e.deleSelect,c=e.list.esData,u=new Array,p=e.list.UrlApi,h=e.list.data;if(void 0==l||0==l.length)return Object(d["Message"])({message:"请选择需要".concat(t||"删除","的信息"),type:"warning"}),!1;d["MessageBox"].confirm("\n        确定要".concat(t||"删除","此条信息？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){for(var e=0;e<l.length;e++)u.push(l[e][o]);r[o]=u.toString(),ut({method:"post",url:pa[s],data:r}).then((function(e){200==e.data.code&&(Object(d["Message"])({message:e.data.msg?e.data.msg:e.data.data,type:"success"}),a.goPage=1,n?n():i.initData(p,h,c))}))})).catch((function(){Object(d["Message"])({type:"info",message:"已取消".concat(t||"删除")})}))},listData:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";ut({method:"get",url:pa[e],params:a}).then((function(e){200==e.data.code&&(t.tableData=e.data.data)}))},addAndupdateFun:function(e,t){var a=this,n=e.eachData,i=e.UrlApi,o=e.list.UrlApi,r=e.list.data,s=e.list.esData;ut({method:"post",url:pa[i],data:n}).then((function(n){if(200==n.data.code){var i=n.data.data;n.data.msg&&(i=n.data.msg),Object(d["Message"])({message:i,type:"success"}),e.closeDialog=!1,t&&t(),o&&a.initData(o,r,s)}}))},examineFun:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.editType,i=a.that,o=this,r=e.eachData,s=e.examineApi,l=e.list.esData,c=(e.checkShow,e.list.UrlApi),u=e.list.data;d["MessageBox"].confirm("确定要操作此条信息？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",customClass:n&&i.autoTest&&i.autoTest(n),type:"warning"}).then((function(){ut({method:"post",url:pa[s],data:r}).then((function(e){if(200==e.data.code){var a=e.data.data;e.data.msg&&(a=e.data.msg),e.data.data.length,Object(d["Message"])({message:a,type:"success"}),!0}t?setTimeout((function(){t&&t()}),500):setTimeout((function(){o.initData(c,u,l)}),800)}))})).catch((function(){Object(d["Message"])({message:"已取消此操作",type:"info"})}))},getDataById:function(e,t,a){ut({method:"get",url:pa[e],params:t}).then((function(e){console.log(e),200==e.data.code&&e.data.data}))},handleCurrentChange:function(e,t,a){ut({method:"get",url:pa[e],params:t}).then((function(e){200==e.data.code&&(a.tableData=e.data.data.data,a.total=e.data.data.total)}))},options:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("getWarehouseListOption"==e)try{a instanceof Object&&"company_id"in a||(a={company_id:Number(localStorage.company_id)})}catch(n){a={company_id:Number(localStorage.company_id)}}ut({method:"get",url:pa[e],params:a}).then((function(e){200==e.data.code&&(t.options=e.data.data)}))},optionsList:function(e,t){ut({method:"get",url:pa[e],params:{is_page:1}}).then((function(e){t.companyList=e.data.data}))},audit:function(e,t){var a=this,n=e.eachData,i=e.UrlApi,o=e.list.esData,r=e.list.UrlApi,s=e.list.data;ut({method:"post",url:pa[i],data:n}).then((function(e){var n=e.data.data;e.data.msg&&(n=e.data.msg),200==e.data.code&&(e.data.data.length,Object(d["Message"])({message:n,type:"success"})),t?t(e):a.initData(r,s,o)}))},cancellation:function(e){var t=this,a=e.deleID,n=new Object,i=e.deleApi,o=e.deleSelect,r=e.list.esData,s=new Array,l=e.list.UrlApi,c=e.list.data;if(!o)return Object(d["Message"])({message:"请选择需要作废的信息",type:"warning"}),!1;d["MessageBox"].confirm("确定要操作已选信息？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){for(var e=0;e<o.length;e++)s.push(o[e][a]);n[a]=s.toString(),ut({method:"post",url:pa[i],data:n}).then((function(e){200==e.data.code&&(Object(d["Message"])({message:e.data.data,type:"success"}),t.initData(l,c,r),200==e.data.code&&(Object(d["Message"])({message:e.data.data,type:"success"}),t.initData(l,c,r)))}))}))},getDepartmentList:function(e){ut({method:"get",url:pa.departmentList,params:{is_page:1}}).then((function(t){e.departmentList=t.data.data}))},getSupplierList:function(e){ut({method:"get",url:pa.getSupplierList,params:{is_page:1}}).then((function(t){e.supplierList=t.data.data}))},getRebateList:function(e){ut({method:"get",url:pa.getRebateList,params:{is_page:1}}).then((function(t){e.rebatecycleList=t.data.data}))},getRebateTypeList:function(e){ut({method:"get",url:pa.getRebateTypeList,params:{is_page:1}}).then((function(t){e.rebateTypeList=t.data.data}))},getOrganizationList:function(e){ut({method:"get",url:pa.companyinfo,params:{is_page:2}}).then((function(t){e.organizationList=t.data.data}))}},fa=(a("c700"),function(e){var t=a("0400");t.keys().forEach((function(a){e.component(t(a).default.name||t(a).name,t(a).default||t(a))})),Object.keys(Ft).forEach((function(t){e.filter(t,Ft[t])})),e.prototype.$sum=m,e.prototype.$axios=ut,e.prototype.$Logout=ot,e.prototype.$compilePsworld=nt,e.prototype.$publicFution=Z,e.prototype.$common=ha,e.use(Ge),e.use(p.a),e.use(ua),e.use(g["a"],f.a),e.prototype.$api&&ha.initApi(e.prototype.$api)});"undefined"!==typeof window&&window.Vue&&fa(window.Vue);var ga=fa,ma={login:function(e){return ut({url:"/v2/user/Login/login",method:"get",params:e})},isTokenInvalid:function(e){return ut({url:"/system/user/isTokenInvalid",method:"get",params:e})},getRoleAuthList:function(e){return ut({url:"/v2/Open/RoleAuth/getRoleAuthList",method:"get",params:e})},logout:function(e){return ut({url:"/v2/user/Login/logout",method:"get",params:e})}},ba=Object(ye["a"])({},ma);a("1543"),a("fc4a");n["a"].prototype.$axMethod=ba,n["a"].config.productionTip=!1,n["a"].use(ga),new n["a"]({router:c,store:u["a"],render:function(e){return e(i["default"])}}).$mount("#app")},"5a9b":function(e,t,a){},"5abc":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"x-button"},[e._t("default")],2)},i=[],o={name:"x-button",props:{type:String}},r=o,s=(a("8dde"),a("2877")),l=Object(s["a"])(r,n,i,!1,null,"680d696c",null);t["default"]=l.exports},"5adc":function(e,t,a){},"5cd9":function(e,t,a){},6063:function(e,t,a){},"8dde":function(e,t,a){"use strict";a("f4b0")},"94f0":function(e,t,a){"use strict";a("5cd9")},a2d5:function(e,t,a){},a8b0:function(e,t,a){"use strict";a("5adc")},b494:function(e,t,a){},c700:function(e,t,a){},d6d6:function(e,t,a){"use strict";a("a2d5")},df47:function(e,t,a){},e011:function(e,t,a){},e4c6:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},i=[]},e4cd:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vxe-table",{attrs:{data:e.tableData}},[a("vxe-column",{attrs:{type:"seq",width:"60"}}),a("vxe-column",{attrs:{field:"name",title:"Name"}}),a("vxe-column",{attrs:{field:"sex",title:"Sex"}}),a("vxe-column",{attrs:{field:"age",title:"Age"}})],1)],1)},i=[],o={name:"x-table",data:function(){return{tableData:[{id:10001,name:"Test1",role:"Develop",sex:"Man",age:28,address:"vxe-table 从入门到放弃"},{id:10002,name:"Test2",role:"Test",sex:"Women",age:22,address:"Guangzhou"},{id:10003,name:"Test3",role:"PM",sex:"Man",age:32,address:"Shanghai"},{id:10004,name:"Test4",role:"Designer",sex:"Women",age:24,address:"Shanghai"}]}}},r=o,s=a("2877"),l=Object(s["a"])(r,n,i,!1,null,"5c6714b4",null);t["default"]=l.exports},f4b0:function(e,t,a){},fc4a:function(e,t,a){}});