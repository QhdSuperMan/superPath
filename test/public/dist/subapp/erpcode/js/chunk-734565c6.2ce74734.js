(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-734565c6"],{"003f":function(t,e,a){"use strict";a("6e0f")},"33fd":function(t,e,a){"use strict";var i=a("233f"),n=a("084c"),s=a("9533"),r=a("a83e"),o=a("ab58"),l=a("2585"),c=a("f8cc");i("search",(function(t,e,a){return[function(e){var a=s(this),i=void 0==e?void 0:l(e,t);return i?i.call(e,a):new RegExp(e)[t](o(a))},function(t){var i=n(this),s=o(t),l=a(e,i,s);if(l.done)return l.value;var d=i.lastIndex;r(d,0)||(i.lastIndex=0);var u=c(i,s);return r(i.lastIndex,d)||(i.lastIndex=d),null===u?-1:u.index}]}))},"432c":function(t,e,a){"use strict";a("df4c")},"4d29":function(t,e,a){"use strict";a("a693")},"613b":function(t,e,a){var i=a("bf54"),n=a("aa54"),s=a("ae94"),r=a("1b18"),o=a("807e"),l=a("89aa").f,c=a("6724").f,d=a("21dc"),u=a("ab58"),h=a("309c"),f=a("3f8c5"),g=a("843b"),m=a("88e4"),p=a("313b"),_=a("cc76").enforce,b=a("6f25"),v=a("3c60"),y=a("ccba"),w=a("31bb"),C=v("match"),x=n.RegExp,S=x.prototype,k=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,O=/a/g,T=/a/g,j=new x(O)!==O,D=f.UNSUPPORTED_Y,$=i&&(!j||D||y||w||m((function(){return T[C]=!1,x(O)!=O||x(T)==T||"/a/i"!=x(O,"i")}))),B=function(t){for(var e,a=t.length,i=0,n="",s=!1;i<=a;i++)e=t.charAt(i),"\\"!==e?s||"."!==e?("["===e?s=!0:"]"===e&&(s=!1),n+=e):n+="[\\s\\S]":n+=e+t.charAt(++i);return n},L=function(t){for(var e,a=t.length,i=0,n="",s=[],r={},o=!1,l=!1,c=0,d="";i<=a;i++){if(e=t.charAt(i),"\\"===e)e+=t.charAt(++i);else if("]"===e)o=!1;else if(!o)switch(!0){case"["===e:o=!0;break;case"("===e:k.test(t.slice(i+1))&&(i+=2,l=!0),n+=e,c++;continue;case">"===e&&l:if(""===d||p(r,d))throw new SyntaxError("Invalid capture group name");r[d]=!0,s.push([d,c]),l=!1,d="";continue}l?d+=e:n+=e}return[n,s]};if(s("RegExp",$)){for(var M=function(t,e){var a,i,n,s,l,c,f=this instanceof M,g=d(t),m=void 0===e,p=[],b=t;if(!f&&g&&m&&t.constructor===M)return t;if((g||t instanceof M)&&(t=t.source,m&&(e="flags"in b?b.flags:h.call(b))),t=void 0===t?"":u(t),e=void 0===e?"":u(e),b=t,y&&"dotAll"in O&&(i=!!e&&e.indexOf("s")>-1,i&&(e=e.replace(/s/g,""))),a=e,D&&"sticky"in O&&(n=!!e&&e.indexOf("y")>-1,n&&(e=e.replace(/y/g,""))),w&&(s=L(t),t=s[0],p=s[1]),l=r(x(t,e),f?this:S,M),(i||n||p.length)&&(c=_(l),i&&(c.dotAll=!0,c.raw=M(B(t),a)),n&&(c.sticky=!0),p.length&&(c.groups=p)),t!==b)try{o(l,"source",""===b?"(?:)":b)}catch(v){}return l},I=function(t){t in M||l(M,t,{configurable:!0,get:function(){return x[t]},set:function(e){x[t]=e}})},z=c(x),E=0;z.length>E;)I(z[E++]);S.constructor=M,M.prototype=S,g(n,"RegExp",M)}b("RegExp")},"6e0f":function(t,e,a){},7524:function(t,e,a){"use strict";a("9178")},"78d0":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.RampLoad,expression:"RampLoad"}],staticClass:"params",attrs:{id:"dropImg"}},[a("div",{attrs:{id:"leixin"}},[a("div",{staticClass:"search_container"},[a("el-button",{staticClass:"useTutorial",staticStyle:{width:"auto"},attrs:{type:"primary",size:"mini"},on:{click:function(e){t.isShowUseTutorial=!0}}},[t._v("用户教程")]),a("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.params,rules:t.rules}},[a("el-form-item",{staticStyle:{width:"412px"},attrs:{label:"关键字:",size:"mini"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{maxlength:"100",placeholder:"请输入库位码/名称/品牌/OE码/商品类目",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch()}},model:{value:t.params.keyword,callback:function(e){t.$set(t.params,"keyword",e)},expression:"params.keyword"}})],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.onSearch()}}},[t._v("查询")])],1),a("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"VIN码:",size:"mini"}},[a("vinCode",{ref:"vinCode",on:{search:function(e){return t.vinSearch()}},model:{value:t.params.vin,callback:function(e){t.$set(t.params,"vin",e)},expression:"params.vin"}}),a("el-button",{staticStyle:{width:"auto"},attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.vinSearch()}}},[t._v("VIN查询")])],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{class:t.showModelIsLoad?"":"is-disabled",staticStyle:{width:"auto"},attrs:{type:"primary",size:"mini"},on:{click:t.openSelectModel}},[t._v("选择车型")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.onReset}},[t._v("重置")])],1)],1)],1),a("div",[a("Classification",{ref:"Classification",attrs:{searchParams:t.params},on:{search:function(e){return t.search()},InitializeThe:function(e){t.RampLoad=!1}}})],1),a("div",[a("div",{staticClass:"add_delet"},[a("el-checkbox",{on:{change:t.changeCheck},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("隐藏库存为0商品")]),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{icon:"el-icon-plus",type:"primary",size:"mini"},on:{click:t.BatchAddToCart}},[t._v("批量加入购物车")]),a("el-button",{staticClass:"addBtn ",staticStyle:{float:"right"},attrs:{icon:"el-icon-shopping-cart-full",loading:t.buttonLoadding,type:"primary",size:"mini"},on:{click:t.goShoppingCart}},[t._v(t._s(t.buttonLoadding?"正在加载...":"购物车")+" "),t.buttonLoadding?t._e():a("span",{staticClass:"clycle ",class:{doudong:t.AnimationState}},[t._v(t._s(t.car_count))])]),a("el-button",{staticClass:"addBtn",staticStyle:{float:"right"},attrs:{icon:"el-icon-shopping-bag-1",type:"primary",size:"mini"},on:{click:t.orderAdd}},[t._v("一键补货")])],1),a("xTable",{ref:"xTable",attrs:{indexSign:t.indexSign,rowStyle:t.rowClassName,tableColumn:t.tableColumn,selectConfig:{checkMethod:t.checkMethod},ajax:{url:"MoneyMangetgetGoodsList",params:t.params}},on:{getData:t.dealData}})],1),a("div",{staticClass:"specialBorderDiv"},[a("p",[t._v("注意")]),a("div",[a("span",[t._v("预售商品：")]),t._v("预售商品预计在下单后5-10个工作日内发货"),a("br"),a("div",[t._v('"我的库存"为您当前所属服务站"'+t._s(t.Company_name)+'"组织库存量')])])])]),t.isShowConfirmOrder?a("confirmOrder",{attrs:{data:t.confirmOrderData},on:{close:function(e){t.isShowConfirmOrder=!1}}}):t._e(),a("selectModel",{ref:"selectModel",on:{sumbitData:t.carModelChange,load:function(e){t.showModelIsLoad=!0}},model:{value:t.isShowModel,callback:function(e){t.isShowModel=e},expression:"isShowModel"}}),1==t.isShowUseTutorial?a("useTutorial",{model:{value:t.isShowUseTutorial,callback:function(e){t.isShowUseTutorial=e},expression:"isShowUseTutorial"}}):t._e(),a("modelDetail",{ref:"library",attrs:{library_id:t.idsArry,shop_goods_id:t.shop_goods_id,type:2},model:{value:t.Status,callback:function(e){t.Status=e},expression:"Status"}}),a("el-dialog",{attrs:{title:"提示",visible:t.centerDialogVisible,width:"400px",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"商品名称:"}},[a("span",[t._v(t._s(t.form.goods_name))])]),a("el-form-item",{attrs:{label:"预计购买量:"}},[a("el-input",{model:{value:t.form.goods_num,callback:function(e){t.$set(t.form,"goods_num",e)},expression:"form.goods_num"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.ReplenSubmit}},[t._v("确 定")])],1)],1)],1)},n=[],s=(a("dca8"),a("e9c4"),a("b64b"),a("d81d"),a("a9e3"),a("c9b7")),r={vin:"",goods_id:"",goods_name:"",brand_id:"",gc_id:""},o={data:function(){var t=this,e=this.$createElement;return{disabledStack:!1,tableColumn:[{type:"checkbox",width:44,align:"center"},{title:"操作",width:100,fixed:"right",slots:{default:function(a){return a.row.goods_storage>0?[e("el-button",{attrs:{disabled:!a.row.inventory_goods_id,type:"text",size:"small"},on:{click:function(){t.AddCart(a.row)}}},["加购"])]:[e("el-button",{attrs:{disabled:!a.row.inventory_goods_id,type:"text",size:"small"},on:{click:function(){t.BackOrder(a.row)}}},["申请补货"])]}}},{title:"库位码",field:"goods_sn",width:150,slots:{default:function(t){return t.row.is_pre_sales?[e("span",{style:{color:"red",paddingRight:"10px"}},["预售"]),e("span",[t.row.goods_sn])]:[e("span",{style:{color:"red",paddingRight:"10px"}},["      "]),e("span",[t.row.goods_sn])]}}},{title:"商品名称",field:"goods_name",minWidth:200,slots:{default:function(e,a){return[a("a",{style:{cursor:"pointer"},on:{click:function(){t.seeF(e.row)}},attrs:{type:"text",size:"small"}},[e.row.goods_name," "])]}}},{title:"品牌",field:"brand_name",width:100},{title:"分类",field:"goods_type_name",width:100},{title:"商品型号",field:"goods_model",width:150,slots:{default:function(t){return t.row.goods_vat-0?[e("i",{class:"el-icon-star-on",style:{color:"red"}}),e("span",[t.row.goods_model])]:[e("i",{class:"Placeholder"}),e("span",[t.row.goods_model])]}}},{title:"OE码",field:"oe_code",minWidth:100},{title:"适配车型",headerAlign:"left",align:"left",slots:{default:function(a){return[e("el-link",{attrs:{type:"primary",target:a.row.library_id?"primary":"_blank",disabled:!a.row.library_id},on:{click:function(){t.idsArry=a.row.library_id,t.shop_goods_id=a.row.shop_goods_id,t.$refs.library.GetValue(a.row.library_id).then((function(e){var a=e.data;Object.keys(a.data.car_library).length&&(t.Status=!0)}))}}},[a.row.shop_car_library_attribute])]}}},{title:"销售价",field:"goods_price",headerAlign:"right",align:"right",width:100,formatter:"priceFormat"},{title:"总库存",field:"goods_storage",width:80},{title:"起订量",field:"order_batch_quantity",headerAlign:"right",align:"right",width:80,slots:{default:function(t){return[e("span",[t.row.order_batch_quantity,t.row.unit_name?"/"+t.row.unit_name:t.row.unit_name])]}}},{title:"我的库存",field:"erp_stocks",headerAlign:"right",width:80,align:"right"},{title:"已加购数量",field:"cart_goods_goods_num",width:90},{title:"订货数量",field:"goods_num",headerAlign:"center",width:100,slots:{default:function(a){var i=a.row,n=a.rowIndex;return[e("div",{class:"AddShoppingCart fcsb"},[e("el-link",{class:"widthSpan",attrs:{underline:!1,disabled:i.goods_num<=i.order_batch_quantity},on:{click:function(){return t.ReduceShoppingCart(i,n)}}},[e("i",{class:"el-icon-minus"})]),e("el-input",{attrs:{type:"number"},class:"inputCenter",on:{input:function(e){t.inptChange(i,e)}},model:{value:i.goods_num,callback:function(e){t.$set(i,"goods_num",e)}}}),e("el-link",{class:"widthSpan",attrs:{underline:!1,disabled:i.goods_num+i.order_batch_quantity>i.goods_storage},on:{click:function(){return t.AddShoppingCart(i,n)}}},[e("i",{class:"el-icon-plus"})])])]}}}]}},methods:{ReduceShoppingCart:function(t){t.goods_num-=t.order_batch_quantity,this.Sum(t)},AddShoppingCart:function(t){t.goods_num+=t.order_batch_quantity,this.Sum(t)},AddCart:function(t){var e={shop_goods_id:t.shop_goods_id,goods_num:t.goods_num};this.ShoppingCartToAdd([e],t)},BackOrder:function(t){this.form=Object.assign({},t),this.centerDialogVisible=!0},ReplenSubmit:function(){var t=this;this.$axMethod.addReplenishment({goods_id:this.form.goods_id,goods_num:this.form.goods_num,inventory_goods_id:this.form.inventory_goods_id}).then((function(e){var a=e.data;200==a.code&&t.$message({message:a.msg,type:"success"})})),this.centerDialogVisible=!1},seeF:function(t){this.$router.push({path:"/purchase/jybdorder/particulars",query:{shop_goods_id:t.shop_goods_id}})},Sum:function(t){var e={num:"goods_num",price:"goods_price",goodsPrice:"goods_total_price"};this.$publicFution.computeTotal(t,e,"goods_num",this)},inptChange:Object(s["a"])((function(t,e){Number(e)<t.order_batch_quantity?this.$set(t,"goods_num",t.order_batch_quantity):Number(e)>t.goods_storage?this.$set(t,"goods_num",parseInt(Number(t.goods_storage)/t.order_batch_quantity)*t.order_batch_quantity):this.$set(t,"goods_num",parseInt(Number(e)/t.order_batch_quantity)*t.order_batch_quantity),this.Sum(t)}),500)}},l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("vxe-modal",{attrs:{title:"适配车型",width:"1200","esc-closable":!0,"destroy-on-close":"",height:"500","min-width":"600","min-height":"100",resize:""},model:{value:t.Status,callback:function(e){t.Status=e},expression:"Status"}},[a("xTable",{ref:"xTable",attrs:{tableColumn:t.tableColumn,ajax:{url:"MoneyMangetgetGoodsList",params:t.params}}}),a("div",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){return t.$emit("Cancel",!1)}}},[t._v("关闭")])],1)],1)],1)},c=[],d={props:{Status:{type:Boolean,default:!1}},data:function(){return{params:{},tableColumn:[{title:"品牌",field:"goods_id",width:150},{title:"厂家",field:"goods_id",width:150},{title:"车系",field:"goods_id",width:150},{title:"排放标准",field:"goods_id",width:150},{title:"年款",field:"goods_id",width:150},{title:"上市年份",field:"goods_id",width:150},{title:"生产年份",field:"goods_id",width:150},{title:"停产年份",field:"goods_id",width:150},{title:"排量",field:"goods_id",width:150},{title:"发动机",field:"goods_id",width:150},{title:"适配来源",field:"goods_id",width:150}]}},methods:{Cancel:function(){}}},u=d,h=a("2877"),f=Object(h["a"])(u,l,c,!1,null,"52378b6d",null),g=f.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"Accordion"},[a("div",{staticClass:"SelectedList fcl"},[a("div",{staticStyle:{"margin-right":"50px"}},[t.tagObj?a("span",{staticClass:"lable"},[t._v("已选条件：")]):t._e(),t.tagObj.oneType?a("el-tag",{key:"oneType",attrs:{size:"medium",closable:""},on:{close:function(e){return t.removeTag("oneType")}}},[t._v(" "+t._s(1==t.type?"一级分类":"二级分类")+" : "+t._s(t.tagObj.oneType.gc_name)+" ")]):t._e(),t.tagObj.twoType?a("el-tag",{key:"twoType",attrs:{size:"medium",closable:""},on:{close:function(e){return t.removeTag("twoType")}}},[t._v(" "+t._s(1==t.type?"二级分类":"三级分类")+" : "+t._s(t.tagObj.twoType.gc_name)+" ")]):t._e(),t.tagObj.brand?a("el-tag",{key:"brand",attrs:{size:"medium",closable:""},on:{close:function(e){return t.removeTag("brand")}}},[t._v(" 品牌："+t._s(t.tagObj.brand.brand_name)+" ")]):t._e(),t.tagObj.carModel?a("el-tag",{key:"carModel",attrs:{size:"medium",closable:""},on:{close:function(e){return t.removeTag("carModel")}}},[t._v(" 车型："+t._s(t.tagObj.carModel.sales_name)+" ")]):t._e()],1)]),a("erpCollapse",{attrs:{accordion:"",height:30},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("erpCollapseItem",{attrs:{title:1==t.type?"一级分类:":"二级分类：",name:"2",rightTitle:"更多"}},t._l(t.oneTypes,(function(e,i){return a("el-tag",{key:i,attrs:{type:t.tagObj.oneType.gc_id==e.gc_id?"danger":""},on:{click:function(a){return t.typeChange(e,1)}}},[t._v(t._s(e.gc_name))])})),1),a("erpCollapseItem",{attrs:{title:1==t.type?"二级分类：":"三级分类：",name:"3",rightTitle:"更多",disabled:!t.tagObj.oneType}},t._l(t.twoTypes,(function(e,i){return a("el-tag",{key:i,attrs:{type:t.tagObj.twoType.gc_id==e.gc_id?"danger":""},on:{click:function(a){return t.typeChange(e,2)}}},[t._v(t._s(e.gc_name)+" ")])})),1)],1),t.brandList.length?a("div",{staticClass:"searchItem"},[a("erpCollapse",{attrs:{accordion:"",height:30},model:{value:t.brandBox,callback:function(e){t.brandBox=e},expression:"brandBox"}},[a("erpCollapseItem",{attrs:{title:"品牌列表：",name:"2",rightTitle:"更多"}},t._l(t.brandList,(function(e,i){return a("el-tag",{key:i,attrs:{type:t.tagObj.brand.brand_id==e.brand_id?"danger":""},on:{click:function(a){return t.brandChange(e,i)}}},[t._v(t._s(e.brand_name))])})),1)],1)],1):t._e(),t.carModelBox.length?a("div",{staticClass:"searchItem"},[a("span",{staticClass:"brandtitle"},[t._v("车型列表：")]),t._l(t.carModelBox,(function(e,i){return a("el-tag",{key:i,attrs:{type:t.tagObj.carModel.car_lib_id==e.car_lib_id?"danger":""},on:{click:function(a){return t.carModelChange(e,i)}}},[t._v(" "+t._s(e.sales_name)+" "),a("el-button",{staticStyle:{"line-height":"5px"},attrs:{type:"text"},on:{click:function(a){return a.stopPropagation(),function(){t.car_lib_id=e.car_lib_id,t.isShowCarModelDetail=!0}.apply(null,arguments)}}},[t._v("详情")])],1)}))],2):t._e(),a("carModelDetail",{ref:"carModelDetail",attrs:{car_lib_id:t.car_lib_id},model:{value:t.isShowCarModelDetail,callback:function(e){t.isShowCarModelDetail=e},expression:"isShowCarModelDetail"}})],1)])},p=[],_=(a("e3df"),a("410a"),a("33fd"),a("b1f0"),a("3c64"),a("3db6"),a("1e09"),a("42aa"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"collapse"},[t._t("default")],2)}),b=[],v=(a("7801"),a("fde8"),a("c9ce"),{props:{accordion:Boolean,value:{type:[Array,String,Number],default:function(){return[]}},height:{type:Number,default:35}},data:function(){return{activeNames:[].concat(this.value)}},provide:function(){return{collapse:this,height:this.height}},watch:{value:function(t){this.activeNames=[].concat(t)}},methods:{setActiveNames:function(t){t=[].concat(t);var e=this.accordion?t[0]:t;this.activeNames=t,this.$emit("input",e),this.$emit("change",e)},switchCollapse:function(t){if(this.accordion)this.setActiveNames(!this.activeNames[0]&&0!==this.activeNames[0]||this.activeNames[0]!==t.name?t.name:"");else{var e=this.activeNames.slice(0),a=e.indexOf(t.name);a>-1?e.splice(a,1):e.push(t.name),this.setActiveNames(e)}}}}),y=v,w=Object(h["a"])(y,_,b,!1,null,"ba54d414",null),C=w.exports,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"collapse_item",style:t.styleObj},[a("div",{staticClass:"collapse_content"},[a("div",{ref:"collapse_all_height",staticClass:"collapse_all_height"},[a("span",{staticClass:"collapse_title"},[t.$slots.title?t._t("title"):t.title?a("span",[t._v(t._s(t.title))]):t._e()],2),a("span",{staticClass:"collapse_right_title",on:{click:t.switchCollapse}},[t.$slots.right?t._t("right"):t.rightTitle?a("span",[t._v(t._s(t.rightTitle))]):t._e()],2),a("span",[t._t("default")],2)])])])},S=[],k=(a("e326"),a("3736"),{data:function(){return{active:!1,currentHeight:"",styleObj:{}}},props:{title:{type:String,default:""},rightTitle:{type:String,default:""},name:{type:[String,Number],default:function(){return this._uid}}},created:function(){this.initHeight()},inject:["collapse","height"],watch:{"collapse.activeNames":{handler:function(t){var e=this;setTimeout((function(){t.includes(e.name)?e.active=!0:e.active=!1,e.isExpand()}),50)}}},methods:{initHeight:function(){var t=(this.active?this.currentHeight:this.height)+"px";this.styleObj={lineHeight:this.height+"px",height:t}},isExpand:function(){this.$refs.collapse_all_height&&this.$refs.collapse_all_height.offsetHeight>this.height+5?this.currentHeight=this.$refs.collapse_all_height.offsetHeight:this.currentHeight=this.height,this.initHeight()},switchCollapse:function(){this.active=!this.active,this.collapse&&this.collapse.switchCollapse(this)}}}),O=k,T=(a("df04"),Object(h["a"])(O,x,S,!1,null,"41330f7d",null)),j=T.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"carModelDetail"},[a("vxe-modal",{staticClass:"carModelDetail",attrs:{title:"车型详情",id:"inReceiptSelectOrder",width:"850","esc-closable":!0,"destroy-on-close":"",height:"650","min-width":"700","min-height":"100",resize:"",remember:"",storage:"",transfer:""},on:{hide:function(e){return t.$emit("input",!1)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("div",{staticClass:"carModelContent"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formData}},[a("el-form-item",{attrs:{label:"厂家：",size:"mini"}},[a("span",{staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t.formData.show_name)+" ")])]),a("el-form-item",{attrs:{label:"品牌：",size:"mini"}},[a("span",[t._v(t._s(t.formData.brand_name))])]),a("el-form-item",{attrs:{label:"车系：",size:"mini"}},[t._v(" "+t._s(t.formData.car_series)+" ")]),a("el-form-item",{attrs:{label:"车型：",size:"mini"}},[t._v(" "+t._s(t.formData.car_type)+" ")]),a("el-form-item",{attrs:{label:"年款：",size:"mini"}},[t._v(" "+t._s(t.formData.years)+" ")]),a("el-form-item",{attrs:{label:"上市时间：",size:"mini"}},[t._v(" "+t._s(t.formData.c_variant_sop)+" ")]),a("el-form-item",{attrs:{label:"停产时间：",size:"mini"}},[t._v(" "+t._s(t.formData.c_variant_eop)+" ")]),a("el-form-item",{attrs:{label:"国产合资进口类型：",size:"mini"}},[t._v(" "+t._s(t.formData.joint_type)+" ")]),a("el-form-item",{attrs:{label:"排放标准：",size:"mini"}},[t._v(" "+t._s(t.formData.emission_standard)+" ")]),a("el-form-item",{attrs:{label:"最大功率（kw）：",size:"mini"}},[t._v(" "+t._s(t.formData.max_power)+" ")]),a("el-form-item",{attrs:{label:"驱动形式：",size:"mini"}},[t._v(" "+t._s(t.formData.drive_mode)+" ")]),a("el-form-item",{attrs:{label:"变速器类型：",size:"mini"}},[t._v(" "+t._s(t.formData.transmission_type)+" ")]),a("el-form-item",{attrs:{label:"变速器描述：",size:"mini"}},[t._v(" "+t._s(t.formData.transmission_desc)+" ")]),a("el-form-item",{attrs:{label:"档位数：",size:"mini"}},[t._v(" "+t._s(t.formData.gear_number)+" ")]),a("el-form-item",{attrs:{label:"发动机型号：",size:"mini"}},[t._v(" "+t._s(t.formData.engine_type)+" ")]),a("el-form-item",{attrs:{label:"排量(升)：",size:"mini"}},[t._v(" "+t._s(t.formData.displacement)+" ")]),a("el-form-item",{attrs:{label:"气缸数(个)：",size:"mini"}},[t._v(" "+t._s(t.formData.cylinder_num)+" ")]),a("el-form-item",{attrs:{label:"燃油类型：",size:"mini"}},[t._v(" "+t._s(t.formData.fuel_type)+" ")]),a("el-form-item",{attrs:{label:"车门数：",size:"mini"}},[t._v(" "+t._s(t.formData.door_num)+" ")]),a("el-form-item",{attrs:{label:"座位数（个）：",size:"mini"}},[t._v(" "+t._s(t.formData.seats_num)+" ")])],1)],1),a("div",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){return t.$emit("input",!1)}}},[t._v("关 闭")])],1)])],1)},$=[],B=a("b85c"),L=a("f043"),M={data:function(){return{formData:{}}},watch:{value:function(t){!0===t&&this.getData()}},props:{value:null,car_lib_id:{type:String,default:""}},created:function(){var t=this;Object(L["a"])((function(e){t.allData=e.data}))},methods:{getData:function(){for(var t in this.allData){var e,a=Object(B["a"])(this.allData[t]);try{for(a.s();!(e=a.n()).done;){var i=e.value;i.car_lib_id==this.car_lib_id&&(this.formData=i)}}catch(n){a.e(n)}finally{a.f()}}}}},I=M,z=(a("c473"),Object(h["a"])(I,D,$,!1,null,null,null)),E=z.exports,A={props:{searchParams:{type:Object,default:function(){}},type:{type:Number,default:1}},data:function(){return{activeNames:[],brandList:[],brandBox:[],allBrandList:[],isShowCarModelDetail:!1,tagObj:{oneType:"",twoType:"",brand:"",carModel:""},carModelBox:[],car_lib_id:"",oneTypes:[],twoTypes:[]}},methods:{removeTag:function(t){this.tagObj[t]="","oneType"===t?this.clear():"twoType"===t?this.tagObj.brand="":"carModel"===t&&(this.carModelBox=[]),this.search()},_addCarModel:function(t){this.carModelBox=t,t.length&&this.carModelChange(t[0])},carModelChange:function(t){this.tagObj.carModel=t,this.search()},brandChange:function(t){this.tagObj.brand=t,this.search()},search:function(){this.searchParams.gc_id=this.tagObj.twoType?this.tagObj.twoType.gc_id:this.tagObj.oneType?this.tagObj.oneType.gc_id:"",this.searchParams.brand_id=this.tagObj.brand.brand_id,this.searchParams.car_lib_id=this.tagObj.carModel.car_lib_id,this.$emit("search",this.tagObj)},typeChange:function(t,e){1===e?(this.twoTypes=t.child,this.tagObj.oneType=t,this.tagObj.twoType=""):this.tagObj.twoType=t,this.tagObj.brand="",this.search()},initClassList:function(t){var e=[];if(1===this.type)t.class_list.forEach((function(t){e=e.concat(t.child)})),this.classList=e;else{for(var a in t.goods_type_list){var i=t.goods_type_list[a].child?t.goods_type_list[a].child:[],n={gc_id:a,gc_name:t.goods_type_list[a].type_info.goods_type_name,child:i.map((function(t){return t.gc_id=t.goods_type_id,t.gc_name=t.goods_type_name,t}))};e.push(n)}this.classList=e}this.renderClass(this.renderObj),this.renderBrank(this.renderObj)},renderClass:function(t){var e=this,a=t.class_list;this.twoTypes=[],this.oneTypes=[],this.classList.forEach((function(t){var i=!1;t.child.forEach((function(t){for(var n=0;n<a.length;n++)a[n]-0===t.gc_id-0&&(i=!0,e.twoTypes.push(t))})),i&&e.oneTypes.push(t)}))},init:function(){var t,e=this;1===this.type?t=this.$axMethod["getClassAndBrandList"]():2==this.type&&(t=this.$api["serviceStationGetAllClassAndBrand"]()),t.then((function(t){var a=t.data;200==a.code&&(e.$emit("InitializeThe",a.data),e.allBrandList=a.data.brand_list.concat([]),e.initClassList(a.data),e.renderBrank(e.renderObj),e.renderClass(e.renderObj))}))},clear:function(){this.tagObj={oneType:"",twoType:"",brand:"",carModel:""},this.carModelBox=[],this.search(),this.activeNames=[]},renderBrank:function(t){var e=t.brand_list;this.brandList=this.allBrandList.filter((function(t){for(var a=0;a<e.length;a++)if(e[a]-0===t.brand_id-0)return!0;return!1}))},echoSearch:function(t){200===t.code&&(this.renderObj=t.data,this.renderObj={brand_list:t.data.brand_list?t.data.brand_list:[],class_list:t.data.class_list?t.data.class_list:[]},this.renderBrank(this.renderObj),this.renderClass(this.renderObj))}},mounted:function(){this.classList=[],this.renderObj={brand_list:[],class_list:[]},this.init()},components:{erpCollapse:C,erpCollapseItem:j,carModelDetail:E}},N=A,P=(a("c230"),Object(h["a"])(N,m,p,!1,null,"61294714",null)),R=P.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("vxe-modal",{staticClass:"selectModel",attrs:{title:"选择车型",id:"inReceiptSelectOrder",width:"1250","esc-closable":!0,"destroy-on-close":"",height:"600","min-width":"600","min-height":"100",resize:"",remember:"",storage:"",transfer:""},on:{hide:function(e){return t.$emit("input",!1)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("div",{staticClass:"el_tree_box"},[a("div",{staticClass:"brand"},[a("span",{staticClass:"brandTitle",on:{click:function(e){t.searchParams.brand="",t.active=0}}},[t._v("品牌")]),t._l(t.letterBox,(function(e,i){return a("el-link",{key:i,class:t.currentLetter===e?"activeClass hoverClass":"hoverClass",attrs:{underline:!1},on:{click:function(a){return t.searchBrand(e)}}},[t._v(t._s(e))])})),a("el-input",{directives:[{name:"show",rawName:"v-show",value:0===t.active,expression:"active === 0"}],staticClass:"search-input",attrs:{placeholder:"品牌检索",clearable:""},on:{change:t.keywordSearch},model:{value:t.keywords,callback:function(e){t.keywords="string"===typeof e?e.trim():e},expression:"keywords"}})],2),a("div",{ref:"carContainer",staticClass:"carContainer",on:{scroll:t.scrollHandler}},[a("div",{ref:"brandBox0",staticClass:"brandBox"},[t.currentLetter?[a("div",{staticClass:"brandFlex"},t._l(t.BrandBox,(function(e,i){return a("span",{key:i,staticClass:"brandItem",class:t.searchParams.brand===i?"activeClass hoverClass":"hoverClass",on:{click:function(a){return t.selecBrand(i,t.letter,e)}}},[a("img",{attrs:{src:e[0]&&e[0].brand_logo,alt:""}}),a("span",{staticClass:"brandName",domProps:{innerHTML:t._s(t.highlightKeywords(i))}})])})),0),0===Object.keys(t.BrandBox).length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" 暂无数据 ")]):t._e()]:[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.searchParams.brand,expression:"!searchParams.brand"}]},[t.isLoading?a("div",{staticClass:"loadingText"},[t._v("Loading...")]):t._l(t.calcAllBrandBox,(function(e,i){return a("div",{key:i},[a("p",{staticClass:"brandHorizontalTitle"},[t._v(t._s(i))]),a("hr"),a("div",{staticClass:"brandFlex"},t._l(t.calcAllBrandBox[i],(function(e,n){return a("span",{key:n,staticClass:"brandItem",class:t.searchParams.brand===n?"activeClass hoverClass":"hoverClass",on:{click:function(a){return t.selecBrand(n,i,e)}}},[a("img",{attrs:{src:e[0]&&e[0].brand_logo,alt:""}}),a("span",{staticClass:"brandName",attrs:{title:n},domProps:{innerHTML:t._s(t.highlightKeywords(n))}})])})),0)])})),0===Object.keys(t.calcAllBrandBox).length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" 暂无数据 ")]):t._e()],2),a("div",{directives:[{name:"show",rawName:"v-show",value:t.searchParams.brand,expression:"searchParams.brand"}]},[a("div",{staticClass:"brandFlex"},[a("span",{staticClass:"brandItem activeClass"},[a("img",{attrs:{src:t.searchParams.brand_logo,alt:""}}),a("span",{staticClass:"brandName"},[t._v(t._s(t.searchParams.brand))])])])])]],2),a("div",{directives:[{name:"show",rawName:"v-show",value:t.active>=1,expression:"active >= 1"}],ref:"brandBox1",staticClass:"carSeries"},[a("div",[a("span",{staticClass:"carSeriesTitle"},[t._v("全部车系")]),a("span",{staticClass:"carSeriesDesc"},[t._v(" 共 "+t._s(t.carSerieslength)+"个车系 , "+t._s(t.carTypeLength)+"个车型")])]),a("hr"),t._l(t.carSeriesTitleOrder,(function(e){return a("div",{key:e,staticClass:"carSeriesBox"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"text",title:e,size:"mini"}},[t._v(t._s(e))])],1),a("el-col",{attrs:{span:21}},t._l(t.carSeriesOrder,(function(i){return a("div",{key:i},[t.carSeriesBox[e][i]?[a("el-row",{staticClass:"carSeriesBoxRow"},[a("el-col",{staticClass:"carSeriesBoxTitle",attrs:{span:2}},[t._v(" "+t._s(i)+"： ")]),a("el-col",{attrs:{span:22}},t._l(t.carSeriesBox[e][i],(function(e,n){return a("span",{key:n,staticClass:"carSeriesBoxItem",attrs:{title:n},on:{click:function(a){return t.selecModel(e,i+n)}}},[a("el-popover",{key:n,attrs:{placement:"bottom",width:"230","popper-class":"selectModelPopover"}},[a("div",{staticClass:"displacementYears"},[a("div",[a("h1",{staticClass:"displacementYearsTitle"},[t._v("选择排量")]),t.active>=2?a("div",t._l(t.displacementBox,(function(e,s){return a("div",{key:s,on:{click:function(e){return t.selecDisplacement(s,i+n+s)}}},[a("span",{class:t.searchParams.displacement===i+n+s?"activeClassTwo displacementYearsName":"displacementYearsName"},[t._v(t._s(s))])])})),0):t._e()]),a("div",[a("h1",{staticClass:"displacementYearsTitle"},[t._v("选择年款")]),t.active>=3?a("div",t._l(t.yearsBox,(function(e,i){return a("div",{key:i,on:{click:function(a){return t.submit(e)}}},[a("span",{staticClass:"displacementYearsName"},[t._v(t._s(i))])])})),0):t._e()])]),a("el-button",{class:t.searchParams.model===i+n?"activeClassTwo":"",attrs:{slot:"reference",type:"text",title:n,size:"mini"},slot:"reference"},[t._v(t._s(n))])],1)],1)})),0)],1)]:t._e()],2)})),0)],1)],1)}))],2)])]),!t.isLoading&&t.showToTop?a("div",{staticClass:"scrollToTop",on:{click:t.scrollToTop}},[a("p",{staticClass:"icon"}),t._v("返回顶部 ")]):t._e()])],1)},F=[],U=a("2909"),H=(a("6f78"),a("de3b"),a("613b"),a("d605"),a("d063"),a("fb24"),a("fe82"),a("c07b"),a("fca2"));a("bf00");function q(t){for(var e={},a=Object.keys(t).sort(),i=0;i<a.length;i++){var n=a[i];e[n]||(e[n]={});for(var s=0;s<t[n].length;s++)e[n][t[n][s].brand_name]||(e[n][t[n][s].brand_name]=[]),e[n][t[n][s].brand_name].push(t[n][s])}return e}function G(t){var e=t.list,a=t.letter,i=t.keywords;if(a){var n=e[a]||{},s={};return Object.keys(n).forEach((function(t){t.includes(i)&&(s[t]=n[t])})),s}var r=e,o={};for(var l in r){var c=Object.keys(r[l]),d=c.filter((function(t){return t.includes(i)}));if(d.length){o[l]={};for(var u=0;u<d.length;u++){var h=d[u];o[l][h]=r[l][h]}}}return o}var Y=["三厢","三厢车","两厢车","两厢","掀背车","旅行车"],K=["EV","氢燃料","增程式"],W=["硬顶敞篷车","软顶敞篷车","硬顶跑车","跑车"];function J(t){var e=t.car_type,a=t.displacement;return K.includes(a)?"新能源":"MPV"===e.toUpperCase()?"MPV":"SUV"===e.toUpperCase()?"SUV":"客车"===e?"客车":W.includes(e)?"跑车":Y.includes(e)?"轿车":"其他"}function Q(t){var e={},a=0,i=[];return t.forEach((function(t){if(1!=t.source){e[t.show_name]||(e[t.show_name]={});var n=J(t);e[t.show_name][n]||(e[t.show_name][n]={}),e[t.show_name][n][t.car_series]||(e[t.show_name][n][t.car_series]=[]),i.includes(t.car_series)||i.push(t.car_series),e[t.show_name][n][t.car_series].push(t),a++}})),{obj:e,total:a,carSeriesArr:i}}var X={data:function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return{letterBox:t.split(""),carTypeLength:0,carSerieslength:0,currentLetter:"",active:0,carSeriesOrder:"轿车,SUV,MPV,跑车,新能源,客车,其他".split(","),carSeriesTitleOrder:[],searchParams:{brand:"",model:"",displacement:""},isLoading:!0,keywords:"",isKeywordsSwitch:"",allBrandBox:{},filterBrandBox:{},showToTop:!1,BrandBox:{},carSeriesBox:{},displacementBox:{},yearsBox:{}}},computed:{calcAllBrandBox:function(){return this.isKeywordsSwitch?this.filterBrandBox:this.allBrandBox}},props:{value:null,data:{type:Object,default:function(){}}},created:function(){this.getData()},methods:{getData:function(){this.allData=[],this.isLoading=!0;var t=this;setTimeout((function(){Object(L["a"])((function(e){t.allBrandBox=Object.freeze(q(e.data)),t.isLoading=!1,t.$emit("load")}))}),0)},highlightKeywords:function(t){if(!this.keywords||!t.includes(this.keywords))return t;var e=new RegExp(this.keywords,"ig"),a=t.replace(e,'<span style="color:red;">'.concat(this.keywords,"</span>"));return a},keywordSearch:function(){this.isLoading=!0;var t=G({list:this.allBrandBox,letter:this.currentLetter,keywords:this.keywords});this.currentLetter?this.BrandBox=Object.freeze(t):this.filterBrandBox=Object.freeze(t),this.isLoading=!1,this.isKeywordsSwitch=this.keywords},searchBrand:function(t){if(this.keywords="",!t||this.currentLetter===t)return this.isLoading=!1,void(this.currentLetter="");this.currentLetter=t,this.BrandBox=this.allBrandBox[t]||{},this.isLoading=!0,this.searchParams.brand="",this.active=0},selecBrand:function(t,e,a){this.searchParams.brand=t;var i=this.currentLetter?this.BrandBox[t]:this.allBrandBox[e][t],n=Q(i);console.log(n),this.carSeriesBox=n.obj,this.carTypeLength=n.total,this.carSerieslength=n.carSeriesArr.length;var s=[];this.carSeriesTitleOrder=Object.keys(this.carSeriesBox).filter((function(t){if(-1===t.indexOf("进口"))return!0;s.push(t)})).concat(s),this.active=1,this.searchParams.brand_logo=a[0].brand_logo},selecModel:function(t,e){this.searchParams.model=e;var a={};t.forEach((function(t){a[t.displacement]||(a[t.displacement]=[]),a[t.displacement].push(t)})),this.displacementBox=a,this.active=2},selecDisplacement:function(t,e){var a={};this.displacementBox[t].forEach((function(t){a[t.years]||(a[t.years]=[]),a[t.years].push(t)})),this.yearsBox=a,this.active=3,this.searchParams.displacement=e},submit:function(t){this.active=1,this.searchParams.displacement="",this.$emit("sumbitData",t),Object(U["a"])(document.getElementsByClassName("selectModelPopover")).forEach((function(t){t.style.display="none"}))},scrollToTop:function(){var t=this;this.$refs.carContainer.scrollTo(0,0),this.$nextTick((function(){t.showToTop=!1}))},scrollHandler:Object(H["b"])((function(t){this.showToTop=t.target.scrollTop>=50}),200)}},Z=X,tt=(a("432c"),a("4d29"),Object(h["a"])(Z,V,F,!1,null,"4a41a500",null)),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("el-input",{attrs:{size:"small",maxlength:"20",placeholder:"输入VIN码或点击相机传图",clearable:""},on:{input:function(e){return t.$emit("input",t.value)},change:function(e){return t.$emit("search")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.$emit("search")}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("i",{staticClass:"el-input__icon el-icon-camera",attrs:{slot:"suffix"},on:{click:function(e){t.isShowIdentifyVin=!t.isShowIdentifyVin,t.isIdentifyingLoading=0}},slot:"suffix"})]),a("el-popover",{staticClass:"el-popover-useTutorial",attrs:{placement:"top",width:"160"},model:{value:t.isShowIdentifyVin,callback:function(e){t.isShowIdentifyVin=e},expression:"isShowIdentifyVin"}},[a("div",{staticClass:"useTutorialBox"},[0===t.isIdentifyingLoading?a("div",[a("div",{staticClass:"useTutorialImg"},[a("el-input",{attrs:{type:"textarea",contenteditable:"true",placeholder:"拖拽或复制图片到这里"},nativeOn:{paste:function(e){return t.copyImag.apply(null,arguments)}}}),a("span",{staticClass:"content"},[t._v("拖拽或复制图片到这里")])],1),a("div",[a("input",{attrs:{type:"file"},on:{change:t.uploadImg}}),a("el-button",{attrs:{type:"primary"}},[t._v("选择文件")])],1)]):1===t.isIdentifyingLoading?a("div",[a("div",{staticClass:"loadingBox"},[t._v(" 正在加载图片. . . ")])]):a("div",[a("img",{attrs:{src:t.imgurl,alt:""}})]),a("span",{staticClass:"close",on:{click:function(e){t.isShowIdentifyVin=!1,t.isIdentifyingLoading=0}}},[a("i",{staticClass:"el-icon-close"})])])])],1)},it=[];function nt(t){return new Promise((function(e,a){if(t.clipboardData||t.originalEvent){var i=t.clipboardData||t.originalEvent.clipboardData;if(i.items){for(var n,s=0;s<i.items.length;s++)-1!==i.items[s].type.indexOf("image")&&(n=i.items[s].getAsFile());var r=new FileReader;r.onload=function(t){st(t.target.result,(function(t){e(t)}))},r.readAsDataURL(n)}else a()}else a()}))}function st(t,e){var a=new Image;a.src=t,a.onload=function(){var t=document.createElement("canvas"),i=t.getContext("2d");t.width=a.naturalWidth,t.height=a.naturalHeight,i.drawImage(a,0,0,t.width,t.height),e(t.toDataURL("image/jpeg",.2))}}function rt(t){return new Promise((function(e){var a=new FileReader;a.onload=function(t){st(t.target.result,(function(t){e(t)}))},a.readAsDataURL(t)}))}var ot={data:function(){return{isIdentifyingLoading:0,isShowIdentifyVin:!1}},props:{value:{type:String||Number,default:""}},mounted:function(){this.dropImg()},methods:{_close:function(){this.isShowIdentifyVin=!1},dropImg:function(){var t=this,e=this.$myDocument.getElementById("dropImg");e.addEventListener("dragover",(function(t){t.stopPropagation(),t.preventDefault()})),e.ondrop=function(e){e.stopPropagation(),e.preventDefault();var a=e.dataTransfer.files[0];t.isIdentifyingLoading=1,rt(a).then((function(e){t.imgurl=e,t.identifyImageVin()}))}},uploadImg:function(t){var e=this,a=t.target.files[0],i=a.name.substring(a.name.lastIndexOf(".")+1).toLocaleLowerCase();"jpg"==i||"jpeg"==i||"png"==i||"bmp"==i?(this.isIdentifyingLoading=1,rt(a).then((function(t){e.imgurl=t,e.identifyImageVin()}))):(t.target.valle="",this.$message.warning("请上传图片！"))},copyImag:function(t){var e=this;this.isIdentifyingLoading=1,nt(t).then((function(t){e.imgurl=t,e.identifyImageVin()})).catch((function(){}))},identifyImageVin:function(){var t=this;this.$axMethod.identifyImageVin({image:this.imgurl}).then((function(e){var a=e.data;200==a.code?(t.$emit("input",a.data.vin_code),t.isShowIdentifyVin=!0,t.isIdentifyingLoading=2):t.isIdentifyingLoading=0})).catch((function(){t.isIdentifyingLoading=0}))}}},lt=ot,ct=(a("003f"),Object(h["a"])(lt,at,it,!1,null,"5ae4dea8",null)),dt=ct.exports,ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"params"},[a("vxe-modal",{staticClass:"useTutorial",attrs:{title:"使用教程",width:"1200","esc-closable":!0,"destroy-on-close":"",height:"830","min-width":"600","min-height":"100",resize:"",remember:"",storage:"",transfer:""},on:{hide:function(e){return t.$emit("input",!1)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("div",[a("el-carousel",{attrs:{"indicator-position":"outside"}},t._l(t.imgList,(function(t,e){return a("el-carousel-item",{key:e},[a("img",{attrs:{src:t,alt:""}})])})),1)],1),a("div",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){return t.$emit("input",!1)}}},[t._v("关 闭")])],1)])],1)},ht=[],ft={data:function(){return{imgList:[]}},props:{value:null},methods:{init:function(){var t=this;0===this.imgList.length&&this.$axMethod.getGuideInfoImg({}).then((function(e){var a=e.data;200==a.code&&(t.imgList=a.data)}))}},created:function(){this.init()}},gt=ft,mt=(a("7524"),Object(h["a"])(gt,ut,ht,!1,null,null,null)),pt=mt.exports,_t=a("a35c"),bt={name:"jybdpurchaseorder",mixins:[o],components:{Modal:g,Classification:R,selectModel:et,useTutorial:pt,vinCode:dt,modelDetail:_t["a"]},data:function(){return{testObj:Object.freeze({id:1}),isShowConfirmOrder:!1,isShowSelectCar:!1,isShowModel:!1,showModelIsLoad:!1,Status:!1,idsArry:"",shop_goods_id:null,isShowIdentifyVin:!1,isIdentifyingLoading:0,isShowUseTutorial:!1,imgurl:"",form:{},AnimationState:!1,Company_name:localStorage.getItem("company_name"),RampLoad:!0,centerDialogVisible:!1,checked:!1,loading:!1,indexSign:[],buttonLoadding:!0,car_count:0,isShowCarTypes:!1,multipleSelection:[],params:this.$publicFution.deepCopy(r),newresult:[],rules:{oe_code:[{min:4,message:"OE码至少需要填写三位以上",trigger:"blur"}]}}},methods:{openSelectModel:function(){this.showModelIsLoad?this.isShowModel=!0:this.$message.warning("正在初始化车型库数据，请稍等！")},Cancel:function(t){this.Status=t},changeCheck:function(t){var e=this;Object.assign(this.params,{has_stocks:t?1:0}),this.$nextTick((function(){e.$refs.xTable._getData()}))},rowClassName:function(t){var e=t.row;if(e.is_cart_goods)return{backgroundColor:"#fdecea",color:"#5F5F5F"}},carModelChange:function(t){this.$refs.Classification._addCarModel(t),this.isShowModel=!1},checkMethod:function(t){return!!t.row.inventory_goods_id},getFairModel:function(){var t=this;this.params.vin&&this.$axMethod.getCarLibraryByVin({vin:this.params.vin}).then((function(e){var a=e.data;200==a.code&&(t.$refs.Classification.carModelBox=a.data,a.data.length&&t.$refs.Classification.carModelChange(a.data[0]))}))},onReset:function(){var t=this;this.params=this.$publicFution.deepCopy(r),this.$refs.Classification.clear(),this.$nextTick((function(){t.$refs.xTable._getData()}))},goShoppingCart:function(){this.$router.push({path:"/purchase/shoppingCart"})},change:function(t){var e=this;Object.assign(this.params,{gc_id:t.gc_id||0}),this.$nextTick((function(){e.$refs.xTable._getData()}))},brandChange:function(t){var e=this;"undefined"!=typeof t?Object.assign(this.params,{brand_id:t.brand_id}):Object.assign(this.params,{brand_id:""}),this.$nextTick((function(){e.$refs.xTable._getData()}))},orderAdd:function(){var t=this;this.$api.getStocksWaringGoodsList().then((function(e){var a=e.data;200==a.code&&(Object.assign(t.params,a.data),t.$nextTick((function(){t.$refs.xTable._getData()})))}))},ShoppingCartToAdd:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.AnimationState=!1,this.$axMethod.addShoppingCartGoods({goods_list:JSON.stringify(t)}).then((function(t){var i=t.data;200==i.code?(e.buttonLoadding=!1,e.$set(e,"car_count",i.data.car_count),e.$nextTick((function(){e.$refs.xTable.clearCheckboxRow&&e.$refs.xTable.clearCheckboxRow()})),Object.keys(a).length?(a.is_cart_goods=!0,a.cart_goods_goods_num+=a.goods_num):e.$nextTick((function(){e.$refs.xTable._getData()})),e.AnimationState=!0):e.buttonLoadding=!1}))},BatchAddToCart:function(){if(this.multipleSelection.length){var t=this.multipleSelection.map((function(t){return{shop_goods_id:t.shop_goods_id,goods_num:t.goods_num}}));this.ShoppingCartToAdd(t)}else this.$message({message:"请选择批量加入购物车商品",type:"warning"})},search:function(){this.$refs.xTable._getData(),this.$refs.vinCode._close()},vinSearch:function(){var t=this.params.vin;this.$refs.Classification.clear(),this.params=Object.assign({},{vin:t}),this.getFairModel(),this.$refs.vinCode._close()},onSearch:function(){var t=this;this.$refs["ruleForm"].validate((function(e){e&&t.$nextTick((function(){t.$refs.xTable._getData()}))})),this.$refs.vinCode._close()},dealData:function(t){var e=t.data;this.$refs.Classification.echoSearch(e)}},activated:function(){var t=this,e=this.$route.params.inventory_goods_id||"";e&&e!=this.params.inventory_goods_id&&(this.params.inventory_goods_id=e,this.$nextTick((function(){t.$refs.xTable._getData()}))),this.buttonLoadding=!0,this.$axMethod.getShoppingCartGoodsCount({hideLoding:!0}).then((function(e){var a=e.data;200==a.code?(t.$set(t,"car_count",a.data.car_count),t.buttonLoadding=!1):t.buttonLoadding=!1}))}},vt=bt,yt=(a("d482"),Object(h["a"])(vt,i,n,!1,null,"dea8ce2c",null));e["default"]=yt.exports},"8d58":function(t,e,a){},9178:function(t,e,a){},a35c:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"params"},[a("vxe-modal",{attrs:{title:"适配车型",id:"inReceiptSelectOrder",width:"1200","esc-closable":!0,"destroy-on-close":"",height:"500","min-width":"600","min-height":"100",resize:"",remember:"",storage:"",transfer:""},on:{hide:function(e){return t.$emit("input",!1)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[t.tableData.length?a("div",[a("div",{staticClass:"el_tree_box"},[a("xTable",{ref:"xTable",attrs:{tableColumn:t.tableColumn,maxHeight:"380",xData:t.tableData}}),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,50],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)]):t.loading?t._e():a("div",{staticClass:"dialog-footer"},[t._v(" 适配车型无数据 ")])])])],1)},n=[],s=a("b85c"),r=(a("e3df"),a("3db6"),a("74af"),a("fde8"),a("c9ce"),a("b1f0"),a("3c64"),a("f043")),o={data:function(){var t=this;return{loading:!1,tableColumn:[{title:"车款",field:"sales_name",formatter:function(t){var e=t.row;return e.sales_name?e.sales_name:e.attr_value_name},width:250},{title:"品牌",field:"brand_name",width:70},{title:"厂家",field:"show_name",width:100},{title:"车系",field:"car_series",width:120},{title:"排放标准",field:"emission_standard",width:70},{title:"年款",field:"years",width:100},{title:"上市年份",field:"c_variant_sop",width:120},{title:"生产年份",field:"c_variant_sop",width:120},{title:"停产年份",field:"c_variant_eop",width:100},{title:"排量",field:"displacement",width:100},{title:"发动机",field:"engine_type",width:100},{title:"适配来源",field:"unit_name",width:100,formatter:function(e){var a=e.row;return 1==t.idsObj[a.car_lib_id]?"OE码匹配":"自主选择"}}],idsObj:{},tableData:[],currentPage:1,pageSize:10,total:0}},watch:{value:function(t){!0===t&&2===this.type&&this.getLibraryId()},library_id:function(){1===this.type&&this.getLibraryId()},ids:function(){this.getData()}},props:{value:null,type:{type:Number,default:1},library_id:{type:Number|String,default:""},shop_goods_id:{type:Number|String,default:""},ids:{type:Array,default:function(){return[]}}},created:function(){var t=this;this.alltableData=[],this.allData=[],Object(r["a"])((function(e){var a=[];for(var i in e.data){var n,r=Object(s["a"])(e.data[i]);try{for(r.s();!(n=r.n()).done;){var o=n.value;a.push(o)}}catch(l){r.e(l)}finally{r.f()}}t.allData=a,t.$emit("loaded"),1==t.type&&t.getData()}))},methods:{getLibraryId:function(){var t=this;this.init(),this.library_id?(this.loading=!0,this.$api.serviceStationGetOeCodeOrCarLibraryList({library_id:this.library_id}).then((function(e){var a=e.data;if(200==a.code){var i=[],n=[];for(var s in a.data.car_library)i=i.concat(a.data.car_library[s]);for(var r in a.data.oe_code)n.push(a.data.oe_code[r]);t.ids=i,t.$emit("getOeCode",n.join(","))}t.loading=!1,t.getAttributeCarLibraryList()})).catch((function(){t.loading=!1}))):this.getAttributeCarLibraryList()},submit:function(){this.$emit("sumbitData",{params:this.currentRow,selectBox:this.selectBox})},GetValue:function(t){if(t)return this.$api.serviceStationGetOeCodeOrCarLibraryList({library_id:t})},getAttributeCarLibraryList:function(){var t=this;this.shop_goods_id&&0===this.ids.length&&this.$api.getAttributeCarLibraryList({shop_goods_id:this.shop_goods_id}).then((function(e){var a=e.data;if(200==a.code){var i=[];for(var n in a.data)i=i.concat(a.data[n]);t.alltableData=i,t.handleCurrentChange(1)}}))},getFairModelData:function(t){for(var e="",a=0;a<t.length;a++){if(e.length>100)break;e=e+t[a].sales_name+","}this.$emit("renderModel",e.slice(0,-1)),this.$parent.showModelsName=e.slice(0,-1)},handleCurrentChange:function(t){var e=this.alltableData.concat([]);this.tableData=e.splice((t-1)*this.pageSize,this.pageSize)},handleSizeChange:function(t){this.pageSize=t},init:function(){this.currentPage=1,this.total=0,this.alltableData=[],this.tableData=[]},getData:function(){var t=this;if(this.init(),this.allData.length&&this.ids.length){this.idsObj={};for(var e=0;e<this.ids.length;e++){if(-1==this.ids[e].car_lib_id)return this.total=this.allData.length,this.alltableData=this.allData,this.handleCurrentChange(1),this.$emit("getData",[{sales_name:"通用车型"}]),void this.getFairModelData([{sales_name:"通用车型"}]);this.idsObj[this.ids[e].car_lib_id]=this.ids[e].match_type}var a=[],i=[];this.allData.forEach((function(e){1==t.idsObj[e.car_lib_id]&&i.push(e),0==t.idsObj[e.car_lib_id]&&a.push(e)})),this.total=i.length+a.length,this.alltableData=a.concat(i),this.handleCurrentChange(1),this.$emit("getData",this.alltableData),this.getFairModelData(this.alltableData)}}}},l=o,c=a("2877"),d=Object(c["a"])(l,i,n,!1,null,"5577fe30",null);e["a"]=d.exports},a693:function(t,e,a){},a83e:function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},ab22:function(t,e,a){},abf9:function(t,e,a){},aeba:function(t,e,a){},bb2f:function(t,e,a){var i=a("d039");t.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},c230:function(t,e,a){"use strict";a("abf9")},c473:function(t,e,a){"use strict";a("aeba")},d063:function(t,e,a){var i=a("bf54"),n=a("3f8c5").UNSUPPORTED_Y,s=a("89aa").f,r=a("cc76").get,o=RegExp.prototype;i&&n&&s(o,"sticky",{configurable:!0,get:function(){if(this!==o){if(this instanceof RegExp)return!!r(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}}})},d482:function(t,e,a){"use strict";a("8d58")},d605:function(t,e,a){var i=a("bf54"),n=a("ccba"),s=a("89aa").f,r=a("cc76").get,o=RegExp.prototype;i&&n&&s(o,"dotAll",{configurable:!0,get:function(){if(this!==o){if(this instanceof RegExp)return!!r(this).dotAll;throw TypeError("Incompatible receiver, RegExp required")}}})},dca8:function(t,e,a){var i=a("23e7"),n=a("bb2f"),s=a("d039"),r=a("861d"),o=a("f183").onFreeze,l=Object.freeze,c=s((function(){l(1)}));i({target:"Object",stat:!0,forced:c,sham:!n},{freeze:function(t){return l&&r(t)?l(o(t)):t}})},de3b:function(t,e,a){var i=a("ef00"),n=a("6446"),s=a("88e4"),r=a("e67c"),o=a("a754").onFreeze,l=Object.freeze,c=s((function(){l(1)}));i({target:"Object",stat:!0,forced:c,sham:!n},{freeze:function(t){return l&&r(t)?l(o(t)):t}})},df04:function(t,e,a){"use strict";a("ab22")},df4c:function(t,e,a){},f043:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("410a"),a("6f78"),a("b1f0"),a("3c64");var i=a("fc5a"),n=a("9887"),s=a.n(n);function r(t){var e="car_librarys_csv_874654166";if(window[e])return t({code:200,data:window[e]});function a(t){if(!(window.localStorage&&window.indexedDB&&window.indexedDB.open))return t(!1);var e=indexedDB.open("jybd-car",1);e.onerror=function(e){console.log("数据库打开报错"),t(!1)},e.onsuccess=function(a){console.log("数据库打开成功"),t(e.result)},e.onupgradeneeded=function(t){t.target.result.objectStoreNames.contains("car_choice")||t.target.result.createObjectStore("car_choice",{keyPath:"id"})}}function n(t,e){s.a.get(t).then((function(t){for(var a=t.data.split("\n"),i=[],n=a[1].split(","),s=2;s<a.length;s++){for(var r={},o=a[s].split(","),l=0;l<o.length;l++)n[l]&&(r[n[l]]=o[l]);r.car_lib_id&&i.push(r)}e({code:200,data:i})}))}function r(t,i){window[e]=t,a((function(a){if(!1!==a){var n=a.transaction(["car_choice"],"readwrite").objectStore("car_choice").put({id:0,data:t});n.onsuccess=function(t){window.localStorage.setItem(e,i.data.update_time),console.log("数据库存储成功")},n.onerror=function(t){console.log("Database error: ",t.target.error)}}}))}function o(t,i){if(200==t.code&&window.localStorage&&window.localStorage.getItem&&window.localStorage.getItem(e)!=t.data.update_time)return i();a((function(t){if(!1===t)return i();var a=t.transaction(["car_choice"]).objectStore("car_choice").get(0);a.onsuccess=function(t){console.log("数据库读取成功");var n=a.result&&a.result.data;i(n),n&&(window[e]=n)},a.onerror=function(t){console.log("Database error: ",t.target.error),i()}}))}function l(t){Object(i["a"])({type:"get",url:"v2/open/Excel/getCarLibraryExcel"}).then((function(e){try{e=JSON.parse(e.data.data)}catch(a){}t({code:e.code,data:e.result})})).catch((function(){t({code:400,message:"服务器错误，请联系管理员"})}))}function c(t){var e={};return t.forEach((function(t){e[t.brand_letter]||(e[t.brand_letter]=[]),e[t.brand_letter].push(t)})),e}l((function(e){o(e,(function(a){return a?t({code:200,data:a}):200!=e.code?t(e):void n(e.data.url,(function(a){a.data=c(a.data),t(a),200==a.code&&setTimeout((function(){r(a.data,e)}),100)}))}))}))}},f183:function(t,e,a){var i=a("23e7"),n=a("e330"),s=a("d012"),r=a("861d"),o=a("1a2d"),l=a("9bf2").f,c=a("241c"),d=a("057f"),u=a("90e3"),h=a("bb2f"),f=!1,g=u("meta"),m=0,p=Object.isExtensible||function(){return!0},_=function(t){l(t,g,{value:{objectID:"O"+m++,weakData:{}}})},b=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,g)){if(!p(t))return"F";if(!e)return"E";_(t)}return t[g].objectID},v=function(t,e){if(!o(t,g)){if(!p(t))return!0;if(!e)return!1;_(t)}return t[g].weakData},y=function(t){return h&&f&&p(t)&&!o(t,g)&&_(t),t},w=function(){C.enable=function(){},f=!0;var t=c.f,e=n([].splice),a={};a[g]=1,t(a).length&&(c.f=function(a){for(var i=t(a),n=0,s=i.length;n<s;n++)if(i[n]===g){e(i,n,1);break}return i},i({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:d.f}))},C=t.exports={enable:w,fastKey:b,getWeakData:v,onFreeze:y};s[g]=!0}}]);
//# sourceMappingURL=chunk-734565c6.2ce74734.js.map