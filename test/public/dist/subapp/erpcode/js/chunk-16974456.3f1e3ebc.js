(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-16974456"],{2459:function(e,t,i){"use strict";i("c75b")},b003:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",[e._v("客户管理")]),i("el-breadcrumb-item",[e._v("客户结算")]),i("el-breadcrumb-item",{staticClass:"attrbute"},[i("span",{on:{click:e.goBack}},[e._v("客户收款单管理")])]),i("el-breadcrumb-item",[e._v("查看收款单")])],1),i("div",{staticClass:"search_container"},[i("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[i("el-form-item",{attrs:{label:"财务组织：",size:"mini"}},[e._v(" "+e._s(e.formInline.company_name)+" ")]),i("el-form-item",{attrs:{label:"单据号：",size:"mini"}},[e._v(" "+e._s(e.formInline.receipt_sn)+" ")]),10002!=e.formInline.accounts_type_id||e.is_company_service?e._e():i("el-form-item",{attrs:{label:"物流公司：",size:"mini"}},[e._v(" "+e._s(e.formInline.logistics_name)+" ")]),10002!=e.formInline.accounts_type_id||e.is_company_service?e._e():i("el-form-item",{attrs:{label:"物流票号：",size:"mini"}},[e._v(" "+e._s(e.formInline.logistics_numbe)+" ")]),10002!=e.formInline.accounts_type_id?i("el-form-item",{attrs:{label:"客户名称：",size:"mini"}},[e._v(" "+e._s(e.formInline.customer_name)+" ")]):e._e(),i("el-form-item",{attrs:{label:"预收余额",size:"mini"}},[i("span",[e._v(e._s(e.formInline.deposits||0))])]),i("el-form-item",{attrs:{label:"应收余额",size:"mini"}},[i("span",[e._v(e._s(e.formInline.balance||0))])]),i("el-form-item",{attrs:{label:"授信余额",size:"mini"}},[i("span",[e._v(e._s(e.formInline.credit_balance||0))]),i("span",[e._v("授信额度："+e._s(e.formInline.credit_quota||0))])]),i("el-form-item",{attrs:{label:"联系人",size:"mini"}},[i("span",[e._v(e._s(e.formInline.contact_name||""))])]),i("el-form-item",{attrs:{label:"联系电话",size:"mini"}},[i("span",[e._v(e._s(e.formInline.customer_mobile||""))])]),i("el-form-item",{attrs:{label:"商城订单号",size:"mini"}},[i("span",[e._v(e._s(e.formInline.shopping_order_sn||""))])]),i("el-divider"),i("el-form-item",{attrs:{label:"往来类型：",size:"mini"}},[e._v(" "+e._s(e.formInline.accounts_type_name)+" ")]),i("el-form-item",{attrs:{label:"业务日期：",size:"mini"}},[e._v(" "+e._s(e.formInline.business_time)+" ")]),e.is_company_service?i("el-form-item",{attrs:{label:"优惠金额",size:"mini"}},[e._v(" "+e._s(e.formInline.discount_price)+" ")]):e._e(),i("el-form-item",{attrs:{label:"部门：",size:"mini"}},[e._v(" "+e._s(e.formInline.department_name)+" ")]),i("el-form-item",{attrs:{label:"业务员：",size:"mini"}},[e._v(" "+e._s(e.formInline.business_name)+" ")]),i("el-form-item",{attrs:{label:"备注：",size:"mini"}},[e._v(" "+e._s(e.formInline.remark)+" ")]),i("el-form-item",{attrs:{label:"结算单号",size:"mini"}},[e._v(" "+e._s(e.formInline.ec_order_sn)+" ")]),i("el-form-item",{attrs:{label:"审核状态：",size:"mini"}},[e._v(" "+e._s(e.formInline.auditor_status_name)+" ")])],1)],1),e._m(0),i("div",{staticClass:"table_container"},[i("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:e.TableData.receipt_common,"summary-method":e.getSummaries,"show-summary":"","max-height":"600"}},[i("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"index",width:"46",align:"center",label:"序号"}}),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"receivables_mode_name",label:"收款方式"}}),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"bank_name",label:"开户银行"}}),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"bank_number",label:"银行账号"}}),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"common_price",label:"金额"}}),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"remark",label:"备注"}}),i("el-table-column",{attrs:{label:"图片附件",property:"fileList","show-overflow-tooltip":!0,"min-width":"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[i("ul",e._l(t.row.fileList,(function(t,a){return i("li",{key:a,staticStyle:{height:"36px",float:"left","margin-right":"3px",width:"44px",cursor:"pointer"}},[i("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.url,alt:t.name},on:{click:function(i){return e.opent(t.url)}}})])})),0)])]}}])})],1)],1),e.is_disabled&&e.hexiaoDetail?i("div",{staticClass:"aboutList"},[e._m(1),i("div",{staticClass:"table_container"},[i("div",[i("vxe-table",{ref:"xTable",attrs:{border:"","show-overflow":"","show-header-overflow":"",size:"mini","show-footer":"","footer-method":e.footerMethod,align:"center","highlight-cell":"","max-height":"500","highlight-hover-row":"","highlight-current-row":"",resizable:""}},[i("vxe-table-column",{attrs:{type:"seq",width:"60",title:"序号"}}),i("vxe-table-column",{attrs:{field:"bill_sn",width:"120",title:"单据号"}}),i("vxe-table-column",{attrs:{field:"order_type",width:"120",title:"单据类型"}}),i("vxe-table-column",{attrs:{field:"customer_name",width:"120",title:"客户名称"}}),i("vxe-table-column",{attrs:{field:"bill_num",width:"120",title:"出库数量"}}),i("vxe-table-column",{attrs:{field:"order_price",width:"120",title:"出库金额"}}),i("vxe-table-column",{attrs:{field:"ec_channel_fee",width:"120",title:"通道费",visible:Boolean(!e.is_company_service)}}),i("vxe-table-column",{attrs:{field:"sc_price",title:"实际应收金额",width:"130"},scopedSlots:e._u([{key:"header",fn:function(){return[i("vxe-tooltip",{attrs:{content:"实际应收金额=本出库单中出库金额"},model:{value:e.showSexTip,callback:function(t){e.showSexTip=t},expression:"showSexTip"}},[i("span",[e._v("实际应收金额"),i("i",{staticClass:"el-icon-question",on:{click:function(t){e.showSexTip=!e.showSexTip}}})])])]},proxy:!0}],null,!1,1553495767)}),i("vxe-table-column",{attrs:{field:"business_time",width:"120",title:"业务日期"}}),i("vxe-table-column",{attrs:{field:"add_time",width:"120",title:"单据时间"}}),i("vxe-table-column",{attrs:{field:"remark",width:"120",title:"备注"}}),i("vxe-table-column",{attrs:{field:"rc_price",width:"120",title:"已冲销金额"}}),i("vxe-table-column",{attrs:{field:"bill_receipt_discount_price",width:"120",title:"已优惠金额",visible:Boolean(e.is_company_service)}}),i("vxe-table-column",{attrs:{field:"rest_price",width:"120",title:"未冲销金额"}}),i("vxe-table-column",{attrs:{field:"bill_discount_price",width:"120",title:"本次优惠金额",visible:Boolean(e.is_company_service)}}),i("vxe-table-column",{attrs:{field:"bill_price",width:"120",title:"本次冲销金额"}})],1)],1)])]):e._e(),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[1==e.formInline.auditor_status?[1==e.authority.b_pass?i("el-button",{attrs:{type:"primary"},on:{click:e.examineFun}},[e._v("审 核")]):e._e(),1==e.authority.b_invalid?i("el-button",{on:{click:e.abolishFun}},[e._v("作 废")]):e._e()]:e._e(),3==e.formInline.auditor_status||1!=e.authority.b_invalid&&1!=e.authority.b_pass?[i("el-button",{on:{click:e.goBack}},[e._v("返 回")])]:[i("el-button",{on:{click:e.goBack}},[e._v("取 消")])]],2),i("el-dialog",{attrs:{visible:e.dialogVisibleimg,width:"30%"},on:{"update:visible":function(t){e.dialogVisibleimg=t}}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},l=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"paymanageTitle"},[i("i"),i("span",[e._v("结算明细")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"paymanageTitle "},[i("i"),i("span",[e._v("核销明细")])])}],r=(i("d81d"),i("caad"),i("b680"),i("d3b7"),i("159b"),i("a9e3"),{name:"customeReceiptmanageSearch",data:function(){return{goBackText:null,authority:{},formInline:{},dialogImageUrl:"",TableData:{},dialogVisibleimg:!1,isShow_sbList:!1,sbListTabel:{tableData:[]},isShow_flList:!1,flListTabel:{tableData:[]},isShow_xschukuList:!1,xsListTabel:{tableData:[]},receiptaudit:"",receipt_id:"",is_disabled:!1,relationTable:{tableData:[]},title:"",changeIndex:0,hexiaoDetail:!0}},methods:{goBack:function(){this.$router.push({path:"/custom/receiptmanage"})},footerMethod:function(e){var t=this,i=e.columns,a=e.data;return[i.map((function(e,i){return 1===i?"合计":["sc_price","rc_price","rest_price","bill_price","bill_discount_price"].includes(e.property)?(t.cxhj=t.$utils.sum(a,"bill_price").toFixed(2),t.bcyh=t.$utils.sum(a,"bill_discount_price").toFixed(2),t.$utils.sum(a,e.property).toFixed(2)):null}))]},opent:function(e){this.dialogImageUrl=e,this.dialogVisibleimg=!0},renderHeader:function(){var e=this.$createElement,t="";switch(this.formInline.accounts_type_name){case"销售收款":case"物流代收":t="实际应收金额=本出库单中出库金额",this.hexiaoDetail=!0;break;case"预收款":case"其他收款":this.hexiaoDetail=!1;break;default:break}return e("el-tooltip",{class:"item",attrs:{effect:"dark",placement:"top"}},[e("p",{slot:"content"},[t]),e("span",{class:"el-icon-question",style:"cursor:pointer;font-weight:bold"},["实际应收金额"])])},changeTitle:function(e){this.changeIndex=e},examineFun:function(){var e=this;this.$axios({method:"post",url:this.$api.auditorRecePass,data:{receipt_id:this.receipt_id}}).then((function(t){200==t.data.code&&(e.$message({message:t.data.msg||t.data.data,type:"success"}),e.goBack())}))},abolishFun:function(){var e=this;this.$axios({method:"post",url:this.$api.auditorReceInvalid,data:{receipt_id:this.receipt_id}}).then((function(t){200==t.data.code&&(e.$message({message:t.data.msg||t.data.data,type:"success"}),e.goBack())}))},getSummaries:function(e){var t=e.columns,i=e.data,a=[];return t.forEach((function(e,t){if(0!==t){var l=i.map((function(t){return Number(t[e.property])}));l.every((function(e){return isNaN(e)}))?a[t]="":(a[t]=l.reduce((function(e,t){var i=Number(t);return isNaN(i)?e:e+t}),0),a[t]=4==t?parseFloat(a[t]).toFixed(2):"")}else a[t]="总计"})),a}},mounted:function(){var e=this;this.authority=JSON.parse(localStorage.getItem("authority"));var t=this.$route.query.receipt_id;this.receiptaudit=this.$route.query.id||"";var i=this;this.$axios({method:"get",url:this.$api.getReceiptInfo,params:{receipt_id:t,receipt_sn:this.$route.query.receipt_sn,is_edit:0}}).then((function(a){var l=a.data;200==l.code&&(e.$set(e,"TableData",l.data),e.formInline=e.TableData,e.$axMethod.getCustomerInfoNEWqx({customer_id:i.formInline.customer_id,company_id:i.formInline.company_id}).then((function(t){var a=t.data;200==a.code&&["deposits","balance","credit_balance","credit_quota","contact_name","customer_mobile","business_id"].forEach((function(t){e.$set(i.formInline,t,a.data[t])}))})),e.receipt_id=t,"未审核"==e.formInline.auditor_status_name?e.goBackText="取 消":e.goBackText="返 回",l.data.receipt_common_bill.length?(e.is_disabled=!0,setTimeout((function(){e.$refs.xTable&&(e.$refs.xTable.reloadData(l.data.receipt_common_bill),e.$refs.xTable.updateFooter())}),500)):e.is_disabled=!1)}))}}),o=r,n=(i("2459"),i("2877")),s=Object(n["a"])(o,a,l,!1,null,"1b035f80",null);t["default"]=s.exports},b680:function(e,t,i){"use strict";var a=i("23e7"),l=i("da84"),r=i("e330"),o=i("5926"),n=i("408a"),s=i("1148"),c=i("d039"),m=l.RangeError,u=l.String,d=Math.floor,_=r(s),f=r("".slice),b=r(1..toFixed),h=function(e,t,i){return 0===t?i:t%2===1?h(e,t-1,i*e):h(e*e,t/2,i)},p=function(e){var t=0,i=e;while(i>=4096)t+=12,i/=4096;while(i>=2)t+=1,i/=2;return t},v=function(e,t,i){var a=-1,l=i;while(++a<6)l+=t*e[a],e[a]=l%1e7,l=d(l/1e7)},g=function(e,t){var i=6,a=0;while(--i>=0)a+=e[i],e[i]=d(a/t),a=a%t*1e7},w=function(e){var t=6,i="";while(--t>=0)if(""!==i||0===t||0!==e[t]){var a=u(e[t]);i=""===i?a:i+_("0",7-a.length)+a}return i},x=c((function(){return"0.000"!==b(8e-5,3)||"1"!==b(.9,0)||"1.25"!==b(1.255,2)||"1000000000000000128"!==b(0xde0b6b3a7640080,0)}))||!c((function(){b({})}));a({target:"Number",proto:!0,forced:x},{toFixed:function(e){var t,i,a,l,r=n(this),s=o(e),c=[0,0,0,0,0,0],d="",b="0";if(s<0||s>20)throw m("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return u(r);if(r<0&&(d="-",r=-r),r>1e-21)if(t=p(r*h(2,69,1))-69,i=t<0?r*h(2,-t,1):r/h(2,t,1),i*=4503599627370496,t=52-t,t>0){v(c,0,i),a=s;while(a>=7)v(c,1e7,0),a-=7;v(c,h(10,a,1),0),a=t-1;while(a>=23)g(c,1<<23),a-=23;g(c,1<<a),v(c,1,1),g(c,2),b=w(c)}else v(c,0,i),v(c,1<<-t,0),b=w(c)+_("0",s);return s>0?(l=b.length,b=d+(l<=s?"0."+_("0",s-l)+b:f(b,0,l-s)+"."+f(b,l-s))):b=d+b,b}})},c75b:function(e,t,i){}}]);
//# sourceMappingURL=chunk-16974456.3f1e3ebc.js.map