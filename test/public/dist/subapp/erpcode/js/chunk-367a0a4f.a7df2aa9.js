(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-367a0a4f"],{"03b3":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{attrs:{id:"leixin"}},[a("div",{staticClass:"search_container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"组织",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.companyListInvok,change:e.companyChange},model:{value:e.params.company_id,callback:function(t){e.$set(e.params,"company_id",t)},expression:"params.company_id"}},e._l(e.companyList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[a("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"业务日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}})],1),a("el-form-item",{attrs:{label:"单据号",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.params.sn,callback:function(t){e.$set(e.params,"sn",t)},expression:"params.sn"}})],1),a("el-form-item",{attrs:{label:"单据状态",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.params.sn_auditor_status,callback:function(t){e.$set(e.params,"sn_auditor_status",t)},expression:"params.sn_auditor_status"}},[a("el-option",{attrs:{label:"全部",value:0}},[e._v("全部")]),a("el-option",{attrs:{label:"未审核",value:1}},[e._v("未审核")]),a("el-option",{attrs:{label:"已审核",value:2}},[e._v("已审核")])],1)],1),a("el-form-item",{attrs:{label:"录入状态",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},model:{value:e.params.entering_tire_un,callback:function(t){e.$set(e.params,"entering_tire_un",t)},expression:"params.entering_tire_un"}},[a("el-option",{attrs:{label:"全部",value:0}}),a("el-option",{attrs:{label:"未录完",value:1}}),a("el-option",{attrs:{label:"已录完",value:2}})],1)],1),a("el-form-item",{attrs:{label:"商品编号",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.params.goods_id,callback:function(t){e.$set(e.params,"goods_id",t)},expression:"params.goods_id"}})],1),a("el-form-item",{attrs:{label:"商品名称",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.params.goods_name,callback:function(t){e.$set(e.params,"goods_name",t)},expression:"params.goods_name"}})],1),a("el-form-item",{attrs:{label:"胎号",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.params.tire_un,callback:function(t){e.$set(e.params,"tire_un",t)},expression:"params.tire_un"}})],1),a("el-form-item",{attrs:{label:"仓库名称",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{focus:e.warehouseInvok,change:e.clearAllocation},model:{value:e.params.warehouse_id,callback:function(t){e.$set(e.params,"warehouse_id",t)},expression:"params.warehouse_id"}},e._l(e.warehouseList,(function(e){return a("el-option",{key:e.warehouse_id,attrs:{label:e.warehouse_name,value:e.warehouse_id}})})),1)],1),a("el-form-item",{attrs:{label:"货位",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"mini"},on:{focus:e.InventoryInvok},model:{value:e.params.allocation_id,callback:function(t){e.$set(e.params,"allocation_id",t)},expression:"params.allocation_id"}},e._l(e.allocationInventoryList,(function(e){return a("el-option",{key:e.allocation_id,attrs:{label:e.allocation_name,value:e.allocation_id}})})),1)],1),a("el-form-item",{attrs:{label:"单据类型",size:"mini"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.params.type,callback:function(t){e.$set(e.params,"type",t)},expression:"params.type"}},[a("el-option",{attrs:{label:"全部",value:0}}),a("el-option",{attrs:{label:"采购入库",value:1}}),a("el-option",{attrs:{label:"其他入库",value:2}}),a("el-option",{attrs:{label:"三包入库",value:3}}),a("el-option",{attrs:{label:"盘点单",value:4}}),a("el-option",{attrs:{label:"调仓移库",value:5}}),a("el-option",{attrs:{label:"采购退货",value:6}}),a("el-option",{attrs:{label:"销售出库",value:7}}),a("el-option",{attrs:{label:"三包出库",value:8}}),a("el-option",{attrs:{label:"其他出库",value:9}}),a("el-option",{attrs:{label:"销售退货",value:10}}),a("el-option",{attrs:{label:"三包退货",value:11}})],1)],1),a("el-form-item",{attrs:{label:"往来单位",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.params.btype_name,callback:function(t){e.$set(e.params,"btype_name",t)},expression:"params.btype_name"}})],1),a("el-form-item",{attrs:{label:"部门",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.DepartmentListInvok,change:e.departmentChange},model:{value:e.params.department_id,callback:function(t){e.$set(e.params,"department_id",t)},expression:"params.department_id"}},e._l(e.departmentList,(function(e){return a("el-option",{key:e.department_id,attrs:{label:e.department_name,value:e.department_id}})})),1)],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.onSearch()}}},[e._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1),1==e.authority.b_export?a("div",{staticClass:"add_delet"},[a("el-dropdown",{staticStyle:{"margin-left":"10px"}},[a("span",{staticStyle:{cursor:"pointer",color:"#4e90e2"},attrs:{"split-button":""}},[a("el-button",{attrs:{plain:"",icon:"iconfont icon-daochu10",size:"mini"}},[e._v("导出")])],1),a("el-dropdown-menu",{staticStyle:{"margin-top":"10px"},attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){return e.exportOrder(1)}}},[e._v("导出Excel文件")]),a("el-dropdown-item",{nativeOn:{click:function(t){return e.exportOrder(2)}}},[e._v("导出CSV逗号分隔")])],1)],1)],1):e._e(),a("div",{staticClass:"table_container"},[e.tableColumn.length>0?a("xTable",{ref:"xTable",attrs:{ajax:{url:"getTireTypeList",params:e.params},showFooter:!0,footerMethod:e.footerMethod,tableColumn:e.tableColumn,xData:e.TableData},on:{getData:e.dealData}}):e._e()],1)])])},l=[],n=a("5530"),r=(a("a9e3"),a("4de4"),a("d3b7"),a("d81d"),a("caad"),a("65b0")),o=a("2f62");function s(e){var t=[{type:"index",width:50,title:"序号"},{title:"销售组织",field:"company_name",width:140},{field:"name",title:"操作",width:100,fixed:"right",slots:{default:function(t,a){var i=[];return i=1==e.authority.b_info?a("div",[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(){return e.addF(t,t.row)}}},[" 胎号录入 "]),a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(){return e.seeF(t,t.row)}}},[" 查看  "])]):a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(){return e.addF(t,t.row)}}},[" 胎号录入  "]),[i]}}},{field:"warehouse_name",width:156,title:"仓库名称"},{title:"货位名称",field:"allocation_name",width:100},{title:"品牌名称",field:"brand_name",width:84},{title:"商品编号",field:"goods_id",width:70},{title:"商品名称",field:"goods_name",width:180},{title:"年周/批次",field:"batch",width:100},{title:"生产日期",field:"production_time",width:100},{title:"关联胎号数量",field:"tire_num",headerAlign:"right",align:"right",width:120},{title:"出入库数",headerAlign:"right",align:"right",field:"goods_num",width:100},{title:"单价",field:"unit_price",headerAlign:"right",align:"right",width:100},{title:"金额",field:"total_price",headerAlign:"right",align:"right",width:100},{title:"往来单位",field:"btype_name",width:100},{title:"出入库单号",field:"sn",width:140},{title:"关联单据号",field:"reference_sn",width:84},{title:"出入库类型",field:"type_name",width:140},{title:"业务日期",field:"sn_business_time",width:84},{title:"单据时间",field:"sn_add_time",width:140},{title:"所属部门",field:"department_name",width:90},{title:"商品备注",field:"remark",width:140},{title:"创建人",field:"sn_add_user_name",width:90},{title:"修改人",field:"sn_update_user_name",width:90},{title:"修改时间",field:"sn_update_time",width:90},{title:"审核状态",field:"sn_auditor_status_name",width:90},{title:"审核人",field:"sn_auditor_name",width:90}];return t}var m={name:"instorageTiremanagementTiremanagementIndex",data:function(){return{tableColumn:[],footerData:{},params:{entering_tire_un:0,sn_auditor_status:0,type:0},footerSum:{subtotal_output_num:null,subtotal_entering_num:null,total_output_num:null,total_entering_num:null},TableData:[],dialogFormVisible:!1,showDepartment:!0}},created:function(){this.tableColumn=s(this),Object(r["l"])(this,window.localStorage),this.$set(this.params,"company_id",Number(localStorage.getItem("company_id")))},methods:Object(n["a"])(Object(n["a"])({},Object(o["b"])(["tiremanagementSeeACT","tiremanagementAddACT","tiremanagementIndexACT"])),{},{onSearch:function(){var e=this;this.timeValue&&2==this.timeValue.length?(this.params.start_time=this.timeValue[0],this.params.end_time=this.timeValue[1]):this.params.start_time=this.params.end_time="",this.$refs.xTable._getData(1),this.footerData={},this.$axMethod.getTireGoodsList(this.params).then((function(t){var a=t.data;200===a.code&&(e.footerData=a.data,setTimeout((function(){e.$refs.xTable._updateFooter()}),50))}))},dealData:function(e){var t=this;200===e.data.code&&this.$set(this,"footerSum",e.data.data.desc),setTimeout((function(){t.$refs.xTable._updateFooter()}),100)},clearAllocation:function(e){""!=e&&(this.params.warehouse_name=this.warehouseList.filter((function(t){return t.warehouse_id===e}))[0].warehouse_name),this.$set(this.params,"allocation_id",null)},exportOrder:function(e){Object.assign(this.params,{export_type:e});this.$axMethod.exportTireTypeUrl(this.params).then((function(e){200==e.data.code&&(window.location.href=e.data.data.url)}))},footerMethod:function(e){var t=this,a=e.columns,i=e.data;return[a.map((function(e,a){return 1===a?"合计":["goods_num","tire_num"].includes(e.property)?t.$utils.sum(i,e.property):void 0})),a.map((function(e,a){return 1===a?"总计":"goods_num"===e.property?t.footerData.total_goods_num:"tire_num"===e.property?t.footerData.total_tire_num:["goods_num","tire_num"].includes(e.property)?"加载中...":null}))]},seeF:function(e,t){this.tiremanagementSeeACT({row:t}),this.$router.push({path:"/inventory/tiremanagement/tiremanagementSee"})},addF:function(e,t){this.tiremanagementAddACT({row:t,goPage:this.goPage,params:this.params,pageSize:this.pageSize}),this.$router.push({path:"/inventory/tiremanagement/tiremanagementAdd"})},departmentChange:function(e){e&&(this.params.department_name=this.departmentList.filter((function(t){return t.department_id===e}))[0].department_name)},onReset:function(e){this.$set(this,"params",{type:0,entering_tire_un:0,sn_auditor_status:0}),this.timeValue=[],this.onSearch()},companyChange:function(e){e&&(this.params.company_name=this.companyList.filter((function(t){return t.company_id===e}))[0].company_name),this.$set(this.params,"department_id","")}}),activated:function(){this.onSearch()}},d=m,u=(a("c5b8"),a("2877")),p=Object(u["a"])(d,i,l,!1,null,"75307060",null);t["default"]=p.exports},"47cb":function(e,t,a){},c5b8:function(e,t,a){"use strict";a("47cb")}}]);
//# sourceMappingURL=chunk-367a0a4f.a7df2aa9.js.map