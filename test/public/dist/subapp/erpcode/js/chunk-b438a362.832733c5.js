(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-b438a362"],{"0e8c":function(e,t,a){},"19aa":function(e,t,a){var i=a("da84"),s=a("3a9b"),o=i.TypeError;e.exports=function(e,t){if(s(t,e))return e;throw o("Incorrect invocation")}},2266:function(e,t,a){var i=a("da84"),s=a("0366"),o=a("c65b"),r=a("825a"),n=a("0d51"),l=a("e95a"),c=a("07fa"),p=a("3a9b"),d=a("9a1f"),u=a("35a1"),m=a("2a62"),_=i.TypeError,g=function(e,t){this.stopped=e,this.result=t},h=g.prototype;e.exports=function(e,t,a){var i,f,b,v,y,w,k,D=a&&a.that,x=!(!a||!a.AS_ENTRIES),T=!(!a||!a.IS_ITERATOR),$=!(!a||!a.INTERRUPTED),C=s(t,D),O=function(e){return i&&m(i,"normal",e),new g(!0,e)},S=function(e){return x?(r(e),$?C(e[0],e[1],O):C(e[0],e[1])):$?C(e,O):C(e)};if(T)i=e;else{if(f=u(e),!f)throw _(n(e)+" is not iterable");if(l(f)){for(b=0,v=c(e);v>b;b++)if(y=S(e[b]),y&&p(h,y))return y;return new g(!1)}i=d(e,f)}w=i.next;while(!(k=o(w,i)).done){try{y=S(k.value)}catch(L){m(i,"throw",L)}if("object"==typeof y&&y&&p(h,y))return y}return new g(!1)}},2626:function(e,t,a){"use strict";var i=a("d066"),s=a("9bf2"),o=a("b622"),r=a("83ab"),n=o("species");e.exports=function(e){var t=i(e),a=s.f;r&&t&&!t[n]&&a(t,n,{configurable:!0,get:function(){return this}})}},"2dd2":function(e,t,a){},4532:function(e,t,a){},6062:function(e,t,a){"use strict";var i=a("6d61"),s=a("6566");i("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),s)},6566:function(e,t,a){"use strict";var i=a("9bf2").f,s=a("7c73"),o=a("e2cc"),r=a("0366"),n=a("19aa"),l=a("2266"),c=a("7dd0"),p=a("2626"),d=a("83ab"),u=a("f183").fastKey,m=a("69f3"),_=m.set,g=m.getterFor;e.exports={getConstructor:function(e,t,a,c){var p=e((function(e,i){n(e,m),_(e,{type:t,index:s(null),first:void 0,last:void 0,size:0}),d||(e.size=0),void 0!=i&&l(i,e[c],{that:e,AS_ENTRIES:a})})),m=p.prototype,h=g(t),f=function(e,t,a){var i,s,o=h(e),r=b(e,t);return r?r.value=a:(o.last=r={index:s=u(t,!0),key:t,value:a,previous:i=o.last,next:void 0,removed:!1},o.first||(o.first=r),i&&(i.next=r),d?o.size++:e.size++,"F"!==s&&(o.index[s]=r)),e},b=function(e,t){var a,i=h(e),s=u(t);if("F"!==s)return i.index[s];for(a=i.first;a;a=a.next)if(a.key==t)return a};return o(m,{clear:function(){var e=this,t=h(e),a=t.index,i=t.first;while(i)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete a[i.index],i=i.next;t.first=t.last=void 0,d?t.size=0:e.size=0},delete:function(e){var t=this,a=h(t),i=b(t,e);if(i){var s=i.next,o=i.previous;delete a.index[i.index],i.removed=!0,o&&(o.next=s),s&&(s.previous=o),a.first==i&&(a.first=s),a.last==i&&(a.last=o),d?a.size--:t.size--}return!!i},forEach:function(e){var t,a=h(this),i=r(e,arguments.length>1?arguments[1]:void 0);while(t=t?t.next:a.first){i(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!b(this,e)}}),o(m,a?{get:function(e){var t=b(this,e);return t&&t.value},set:function(e,t){return f(this,0===e?0:e,t)}}:{add:function(e){return f(this,e=0===e?0:e,e)}}),d&&i(m,"size",{get:function(){return h(this).size}}),p},setStrong:function(e,t,a){var i=t+" Iterator",s=g(t),o=g(i);c(e,t,(function(e,t){_(this,{type:i,target:e,state:s(e),kind:t,last:void 0})}),(function(){var e=o(this),t=e.kind,a=e.last;while(a&&a.removed)a=a.previous;return e.target&&(e.last=a=a?a.next:e.state.first)?"keys"==t?{value:a.key,done:!1}:"values"==t?{value:a.value,done:!1}:{value:[a.key,a.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),a?"entries":"values",!a,!0),p(t)}}},"6d61":function(e,t,a){"use strict";var i=a("23e7"),s=a("da84"),o=a("e330"),r=a("94ca"),n=a("6eeb"),l=a("f183"),c=a("2266"),p=a("19aa"),d=a("1626"),u=a("861d"),m=a("d039"),_=a("1c7e"),g=a("d44e"),h=a("7156");e.exports=function(e,t,a){var f=-1!==e.indexOf("Map"),b=-1!==e.indexOf("Weak"),v=f?"set":"add",y=s[e],w=y&&y.prototype,k=y,D={},x=function(e){var t=o(w[e]);n(w,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(b&&!u(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return b&&!u(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(b&&!u(e))&&t(this,0===e?0:e)}:function(e,a){return t(this,0===e?0:e,a),this})},T=r(e,!d(y)||!(b||w.forEach&&!m((function(){(new y).entries().next()}))));if(T)k=a.getConstructor(t,e,f,v),l.enable();else if(r(e,!0)){var $=new k,C=$[v](b?{}:-0,1)!=$,O=m((function(){$.has(1)})),S=_((function(e){new y(e)})),L=!b&&m((function(){var e=new y,t=5;while(t--)e[v](t,t);return!e.has(-0)}));S||(k=t((function(e,t){p(e,w);var a=h(new y,e,k);return void 0!=t&&c(t,a[v],{that:a,AS_ENTRIES:f}),a})),k.prototype=w,w.constructor=k),(O||L)&&(x("delete"),x("has"),f&&x("get")),(L||C)&&x(v),b&&w.clear&&delete w.clear}return D[e]=k,i({global:!0,forced:k!=y},D),g(k,e),b||a.setStrong(k,e,f),k}},8675:function(e,t,a){"use strict";a("2dd2")},"89b2":function(e,t,a){"use strict";a("0e8c")},a825:function(e,t,a){"use strict";a("4532")},b680:function(e,t,a){"use strict";var i=a("23e7"),s=a("da84"),o=a("e330"),r=a("5926"),n=a("408a"),l=a("1148"),c=a("d039"),p=s.RangeError,d=s.String,u=Math.floor,m=o(l),_=o("".slice),g=o(1..toFixed),h=function(e,t,a){return 0===t?a:t%2===1?h(e,t-1,a*e):h(e*e,t/2,a)},f=function(e){var t=0,a=e;while(a>=4096)t+=12,a/=4096;while(a>=2)t+=1,a/=2;return t},b=function(e,t,a){var i=-1,s=a;while(++i<6)s+=t*e[i],e[i]=s%1e7,s=u(s/1e7)},v=function(e,t){var a=6,i=0;while(--a>=0)i+=e[a],e[a]=u(i/t),i=i%t*1e7},y=function(e){var t=6,a="";while(--t>=0)if(""!==a||0===t||0!==e[t]){var i=d(e[t]);a=""===a?i:a+m("0",7-i.length)+i}return a},w=c((function(){return"0.000"!==g(8e-5,3)||"1"!==g(.9,0)||"1.25"!==g(1.255,2)||"1000000000000000128"!==g(0xde0b6b3a7640080,0)}))||!c((function(){g({})}));i({target:"Number",proto:!0,forced:w},{toFixed:function(e){var t,a,i,s,o=n(this),l=r(e),c=[0,0,0,0,0,0],u="",g="0";if(l<0||l>20)throw p("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return d(o);if(o<0&&(u="-",o=-o),o>1e-21)if(t=f(o*h(2,69,1))-69,a=t<0?o*h(2,-t,1):o/h(2,t,1),a*=4503599627370496,t=52-t,t>0){b(c,0,a),i=l;while(i>=7)b(c,1e7,0),i-=7;b(c,h(10,i,1),0),i=t-1;while(i>=23)v(c,1<<23),i-=23;v(c,1<<i),b(c,1,1),v(c,2),g=y(c)}else b(c,0,a),b(c,1<<-t,0),g=y(c)+m("0",l);return l>0?(s=g.length,g=u+(s<=l?"0."+m("0",l-s)+g:_(g,0,s-l)+"."+_(g,s-l))):g=u+g,g}})},bb2f:function(e,t,a){var i=a("d039");e.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},e2cc:function(e,t,a){var i=a("6eeb");e.exports=function(e,t,a){for(var s in t)i(e,s,t[s],a);return e}},f183:function(e,t,a){var i=a("23e7"),s=a("e330"),o=a("d012"),r=a("861d"),n=a("1a2d"),l=a("9bf2").f,c=a("241c"),p=a("057f"),d=a("90e3"),u=a("bb2f"),m=!1,_=d("meta"),g=0,h=Object.isExtensible||function(){return!0},f=function(e){l(e,_,{value:{objectID:"O"+g++,weakData:{}}})},b=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!n(e,_)){if(!h(e))return"F";if(!t)return"E";f(e)}return e[_].objectID},v=function(e,t){if(!n(e,_)){if(!h(e))return!0;if(!t)return!1;f(e)}return e[_].weakData},y=function(e){return u&&m&&h(e)&&!n(e,_)&&f(e),e},w=function(){k.enable=function(){},m=!0;var e=c.f,t=s([].splice),a={};a[_]=1,e(a).length&&(c.f=function(a){for(var i=e(a),s=0,o=i.length;s<o;s++)if(i[s]===_){t(i,s,1);break}return i},i({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:p.f}))},k=e.exports={enable:w,fastKey:b,getWeakData:v,onFreeze:y};o[_]=!0},f56c:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"params"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("库存管理")]),a("el-breadcrumb-item",{staticClass:"attrbute"},[a("span",{on:{click:e.goBack}},[e._v("其他发货管理")])]),a("el-breadcrumb-item",[e._v(e._s(e.otherDeliveryAddGet.other_delivery_id?"修改":"新增")+"其他发货 ")])],1),a("div",{attrs:{id:"leixin"}},[a("div",{staticClass:"search_container"},[a("el-form",{ref:"paramsRef",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[e.otherDeliveryAddGet.other_delivery_id?a("el-form-item",{attrs:{label:"单据号",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入",disabled:""},model:{value:e.params.other_delivery_sn,callback:function(t){e.$set(e.params,"other_delivery_sn",t)},expression:"params.other_delivery_sn"}})],1):e._e(),a("el-form-item",{attrs:{label:"销售组织",size:"mini",rules:e.rules.company_id,prop:"company_id"},on:{focus:e.companyListInvok}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},on:{focus:e.companyListInvok,change:e.companyChange},model:{value:e.params.company_id,callback:function(t){e.$set(e.params,"company_id",t)},expression:"params.company_id"}},e._l(e.companyList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[a("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name)+" ")])])})),1)],1),a("el-form-item",{attrs:{label:"部门",size:"mini"}},[e._v(" "+e._s(function(){0==e.params.department_id&&(e.params.department_id=null)}())+" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.DepartmentListInvok,change:e.departmentChange},model:{value:e.params.department_id,callback:function(t){e.$set(e.params,"department_id",t)},expression:"params.department_id"}},e._l(e.departmentList,(function(e){return a("el-option",{key:e.department_id,attrs:{label:e.department_name,value:e.department_id}})})),1)],1),a("el-form-item",{attrs:{label:"业务日期",size:"mini",rules:e.rules.business_time,prop:"business_time"}},[a("el-date-picker",{attrs:{clearable:!1,editable:!1,type:"date","default-value":e.params.business_time,"value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.params.business_time,callback:function(t){e.$set(e.params,"business_time",t)},expression:"params.business_time"}})],1),a("el-form-item",{attrs:{label:"发货方式",size:"mini"}},[e._v(" "+e._s(function(){0==e.params.send_mode&&(e.params.send_mode=null)}())+" "),a("el-select",{attrs:{clearable:"",filterable:"",disabled:3==e.params.send_mode},model:{value:e.params.send_mode,callback:function(t){e.$set(e.params,"send_mode",t)},expression:"params.send_mode"}},[a("el-option",{attrs:{label:"物流发货",value:1}},[e._v("物流发货")]),a("el-option",{attrs:{label:"客户自提",value:2}},[e._v("客户自提")]),a("el-option",{attrs:{label:"自提物流",value:3}},[e._v("自提物流")])],1)],1),a("el-form-item",{attrs:{label:"物流公司",size:"mini"}},[e._v(" "+e._s(function(){0==e.params.logistics_id&&(e.params.logistics_id=null)}())+" "),a("el-select",{attrs:{clearable:"",filterable:""},on:{focus:e.logisticsInvok,change:e.logisticsChange},model:{value:e.params.logistics_id,callback:function(t){e.$set(e.params,"logistics_id",t)},expression:"params.logistics_id"}},e._l(e.logisticsList,(function(e){return a("el-option",{key:e.logistics_id,attrs:{label:e.logistics_name,value:e.logistics_id}})})),1)],1),a("el-form-item",{attrs:{label:"物流票号",size:"mini"}},[a("el-input",{attrs:{disabled:e.logistics_numberFormDisabled,placeholder:"请输入"},on:{change:e.logistics_numberChange},nativeOn:{click:function(t){return e.logistics_numberFormClick.apply(null,arguments)}},model:{value:e.params.logistics_number,callback:function(t){e.$set(e.params,"logistics_number",t)},expression:"params.logistics_number"}})],1),a("el-form-item",{attrs:{label:"运费金额",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入"},on:{change:e.handleEdit},model:{value:e.params.postage_price,callback:function(t){e.$set(e.params,"postage_price",t)},expression:"params.postage_price"}})],1),a("el-form-item",{attrs:{label:"运费结算方式",size:"mini"}},[e._v(" "+e._s(function(){0==e.params.postage_type_id&&(e.params.postage_type_id=null)}())+" "),a("el-select",{attrs:{clearable:"",disabled:e.postageTYPEform},on:{focus:e.PostageTypeListInvok,change:e.postageTypeFormChange},nativeOn:{click:function(t){return e.postageTypeFormClick.apply(null,arguments)}},model:{value:e.params.postage_type_id,callback:function(t){e.$set(e.params,"postage_type_id",t)},expression:"params.postage_type_id"}},e._l(e.postageTypeList,(function(e){return a("el-option",{key:e.postage_type_id,attrs:{label:e.postage_type_name,value:e.postage_type_id}})})),1)],1),a("el-form-item",{attrs:{label:"发货类型",size:"mini",rules:e.rules.delivery_type,prop:"delivery_type"}},[a("el-select",{attrs:{disabled:!!e.otherDeliveryAddGet.other_delivery_id,placeholder:"请选择"},on:{change:e.delivery_type_change},model:{value:e.params.delivery_type,callback:function(t){e.$set(e.params,"delivery_type",t)},expression:"params.delivery_type"}},[a("el-option",{attrs:{label:"三包出库发货",value:1}},[e._v("三包出库发货")]),a("el-option",{attrs:{label:"返胎出库发货",value:2}},[e._v("返胎出库发货")]),a("el-option",{attrs:{label:"旧胎退回发货",value:3}},[e._v("旧胎退回发货")])],1)],1),a("el-form-item",{attrs:{label:"司机",size:"mini"}},[e._v(" "+e._s(function(){0==e.params.logistics_driver_id&&(e.params.logistics_driver_id=null)}())+" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{change:e.logistics_driverChange,focus:e.LogisticsDriverInvok},model:{value:e.params.logistics_driver_id,callback:function(t){e.$set(e.params,"logistics_driver_id",t)},expression:"params.logistics_driver_id"}},[a("ul",{staticClass:"customer"},[a("li",{staticStyle:{margin:"0 15px","font-size":"14px"}},[e._v("司机名称")]),a("li",{staticStyle:{float:"right",margin:"0 15px","font-size":"14px"}},[e._v("司机电话")])]),e._l(e.logistics_driveList,(function(t){return a("el-option",{key:t.logistics_driver_id,attrs:{label:t.logistics_driver_name,value:t.logistics_driver_id}},[a("ul",{staticClass:"customer"},[a("li",{staticStyle:{margin:"0 15px"},attrs:{title:t.logistics_driver_name}},[e._v(e._s(t.logistics_driver_name))]),a("li",{staticStyle:{float:"right"},attrs:{title:t.phone}},[e._v(e._s(t.phone))])])])}))],2)],1),a("el-form-item",{attrs:{label:"车牌号",size:"mini"}},[a("el-input",{attrs:{type:"text",maxlength:"300",placeholder:"请输入"},model:{value:e.params.license_number,callback:function(t){e.$set(e.params,"license_number",t)},expression:"params.license_number"}})],1),a("el-form-item",{attrs:{label:"备注",size:"mini"}},[a("el-input",{attrs:{type:"text",maxlength:"300",placeholder:"请输入"},model:{value:e.params.remark,callback:function(t){e.$set(e.params,"remark",t)},expression:"params.remark"}})],1)],1)],1),a("div",{staticClass:"add_delet"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:3!=e.params.send_mode,expression:"params.send_mode==3?false:true"}],staticClass:"addBtn",attrs:{icon:"el-icon-circle-plus-outline",type:"primary",size:"mini"},on:{click:e.addF}},[e._v("引用单据")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:3!=e.params.send_mode,expression:"params.send_mode==3?false:true"}],staticClass:"addBtn",attrs:{plain:"",icon:"el-icon-delete",size:"mini"},on:{click:e.delF}},[e._v("删行")])],1),a("div",{staticClass:"table_container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:e.TableData.tableData,"max-height":"600","show-summary":"","summary-method":e.getSummaries},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",fixed:"left",align:"center",width:"44"}}),a("el-table-column",{attrs:{label:"序号",type:"index",width:"46",align:"center"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"company_name",width:"150",label:"销售组织",align:"center"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"department_name",width:"150",label:"部门",align:"center"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"outstock_sn",width:"156",label:"出库单号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"customer_name",width:"120",label:"收货单位"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"customer_mobile",width:"120",label:"手机号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_id",width:"80",label:"商品编号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_name",width:"400",label:"商品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("pre",[e._v(e._s(t.row.goods_name))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"batch",width:"88",label:"年周/批次"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"delivery_goods_num",width:"110",label:"发货数量",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"editor",attrs:{size:"small",disabled:3==e.params.send_mode,"suffix-icon":"el-icon-edit-outline",placeholder:"请输入"},on:{change:function(a){return e.goods_num_change(t.row)}},model:{value:t.row.delivery_goods_num,callback:function(a){e.$set(t.row,"delivery_goods_num",a)},expression:"scope.row.delivery_goods_num"}})]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,width:"150",label:"物流公司"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{clearable:""},on:{focus:function(a){return e.tableDownLogistics("",t.row)},change:function(a){e.logisticsChangeDate(a,t.row)}},model:{value:t.row.logistics_id,callback:function(a){e.$set(t.row,"logistics_id",a)},expression:"scope.row.logistics_id"}},e._l(t.row.logisticsList,(function(e){return a("el-option",{key:e.logistics_id,attrs:{label:e.logistics_name,value:e.logistics_id}})})),1)]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"logistics_number",width:"110",label:"物流票号",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"editor",attrs:{size:"small",disabled:!!e.params.logistics_number,"suffix-icon":"el-icon-edit-outline",placeholder:"请输入"},on:{change:e.logistics_numberList},nativeOn:{click:function(t){return e.logistics_numberListClick.apply(null,arguments)}},model:{value:t.row.logistics_number,callback:function(a){e.$set(t.row,"logistics_number",a)},expression:"scope.row.logistics_number"}})]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"postage_price",width:"110",label:"运费金额",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"editor",attrs:{size:"small",disabled:e.postage_priceDisList,"suffix-icon":"el-icon-edit-outline",placeholder:"请输入"},on:{change:function(a){return e.postage_ListChange(t.row)}},nativeOn:{click:function(t){return e.postage_ListClick.apply(null,arguments)}},model:{value:t.row.postage_price,callback:function(a){e.$set(t.row,"postage_price",a)},expression:"scope.row.postage_price"}})]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"postage_type_id",width:"110",label:"运费结算方式",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(function(){0==t.row.postage_type_id&&(t.row.postage_type_id=null)}())+" "),a("el-select",{attrs:{clearable:"",disabled:!!e.params.postage_type_id},on:{change:function(a){return e.postageTypeChange(t.row)},focus:e.PostageTypeListInvok},nativeOn:{click:function(t){return e.postageTypeListClick.apply(null,arguments)}},model:{value:t.row.postage_type_id,callback:function(a){e.$set(t.row,"postage_type_id",a)},expression:"scope.row.postage_type_id"}},e._l(e.postageTypeList,(function(e){return a("el-option",{key:e.postage_type_id,attrs:{label:e.postage_type_name,value:e.postage_type_id}})})),1)]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"remark",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"editor",attrs:{size:"small","suffix-icon":"el-icon-edit-outline",placeholder:"请输入"},model:{value:t.row.remark,callback:function(a){e.$set(t.row,"remark",a)},expression:"scope.row.remark"}})]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,width:"140",label:"区域"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.province_name+t.row.city_name+t.row.area_name))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"address",width:"140",label:"详细地址"}})],1)],1),e.dialogVisible?a("div",[a("el-dialog",{staticClass:"dialogForm",attrs:{"close-on-click-modal":!1,title:e.title,visible:e.dialogVisible,width:"1100px"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.closeDialog}},[a("Document",{attrs:{dialogParams:e.params},on:{dialogformInline:e.getOutstockData,closedialog:e.closeDialog}})],1)],1):e._e(),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-button",{on:{click:e.goBack}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit("paramsRef")}}},[e._v("确 定")])],1)])],1)},s=[],o=a("ade3"),r=a("2909"),n=a("5530"),l=(a("4de4"),a("d3b7"),a("159b"),a("d81d"),a("caad"),a("2532"),a("6062"),a("3ca3"),a("ddb0"),a("a630"),a("e9c4"),a("a9e3"),a("b680"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"otherdelivery"},[a("div",{attrs:{id:"leixin"}},[a("div",{},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"销售组织",size:"mini"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},on:{focus:e.companyListInvok},model:{value:e.params.company_id,callback:function(t){e.$set(e.params,"company_id",t)},expression:"params.company_id"}},e._l(e.companyList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[a("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name)+" ")])])})),1)],1),a("el-form-item",{attrs:{label:"单据号",size:"mini"}},[3==this.type?a("el-input",{staticClass:"shortSearchInput",attrs:{placeholder:"请输入"},model:{value:e.params.reborn_outstock_sn,callback:function(t){e.$set(e.params,"reborn_outstock_sn",t)},expression:"params.reborn_outstock_sn"}}):a("el-input",{staticClass:"shortSearchInput",attrs:{placeholder:"请输入"},model:{value:e.params.outstock_sn,callback:function(t){e.$set(e.params,"outstock_sn",t)},expression:"params.outstock_sn"}})],1),a("el-form-item",{attrs:{label:"业务日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}})],1),3==this.type?a("el-form-item",{attrs:{label:"厂家名称",size:"mini"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请输入",loading:e.loading,remote:""},on:{focus:e.getCustomerListFocus},model:{value:e.params.supplier_id,callback:function(t){e.$set(e.params,"supplier_id",t)},expression:"params.supplier_id"}},e._l(e.dialogSupplierList,(function(e){return a("el-option",{key:e.supplier_id,attrs:{label:e.supplier_name,value:e.supplier_id}})})),1)],1):a("el-form-item",{attrs:{label:"客户名称",size:"mini"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请输入",loading:e.loading,remote:"","remote-method":e.clienteleListInvok},on:{focus:e.clienteleListInvok},model:{value:e.params.customer_id,callback:function(t){e.$set(e.params,"customer_id",t)},expression:"params.customer_id"}},[a("ul",{staticClass:"customer customer-ul4 customer-ul2"},[a("li",[e._v("客户编号")]),a("li",[e._v("客户名称")]),a("li",[e._v("联系人")]),a("li",[e._v("联系电话")]),a("li",[e._v("区域")])]),e._l(e.customerList,(function(t){return a("el-option",{key:t.customer_id,attrs:{label:t.customer_name,value:t.customer_id}},[a("ul",{staticClass:"customer customer-ul4"},[a("li",{attrs:{title:t.customer_id}},[e._v(e._s(t.customer_id))]),a("li",{attrs:{title:t.customer_name}},[e._v(e._s(t.customer_name))]),a("li",{attrs:{title:t.contact_name}},[e._v(e._s(t.contact_name))]),a("li",{attrs:{title:t.customer_mobile}},[e._v(e._s(t.customer_mobile))]),a("li",[e._v(e._s(t.province_name)+"/"+e._s(t.city_name)+"/"+e._s(t.area_name))])])])}))],2)],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"table_container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:e.TableData.tableData,"max-height":"240"},on:{"selection-change":e.handleCurrentChanges}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",fixed:"left",align:"center",width:"44"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"company_name",width:"150",label:"销售组织"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"department_name",width:"150",label:"部门"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"outstock_sn",label:"单据号","min-width":"160"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"business_time",label:"业务日期","min-width":"100"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"customer_name",label:e.customer_nameTitle,"min-width":"150"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"no_delivery_num",label:"未发货数量","min-width":"80",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"delivery_num",label:"已发货数量","min-width":"80",align:"right"}}),1==e.dialogParams.delivery_type?a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"order_sn",label:"关联单据号","min-width":"170"}}):e._e(),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"settlement_customer_name",width:"130",label:"物流公司"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"abstract",label:"备注","min-width":"110"}})],1)],1),a("div",{staticClass:"page_container"},[a("div",{staticClass:"pageNumber"},[e._v("每页显示")]),a("el-pagination",{staticClass:"erp-pagination",attrs:{"current-page":e.goPage,"page-size":e.pageSize1,"page-sizes":e.per_page,layout:"total,sizes, prev, pager, next,jumper",prevText:"上一页",nextText:"下一页",total:e.TableData.total},on:{"size-change":e.handleSizeChange,"update:currentPage":function(t){e.goPage=t},"update:current-page":function(t){e.goPage=t},"current-change":e.handleCurrentChange}})],1),a("div",{staticStyle:{"padding-top":"20px","border-top":"1px dotted #333","margin-top":"20px"}},[a("p",[e._v("单据明细")]),a("br"),a("el-table",{ref:"TableDataInfoRef",staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:e.TableDataInfo,"max-height":"240"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",fixed:"left",align:"center",width:"44"},on:{"selection-change":e.handleSelectionChange}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"index",width:"50",label:"序号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"company_name",width:"150",label:"销售组织"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"department_name",width:"150",label:"部门"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"outstock_sn",label:"单据号","min-width":"170"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_id",label:"商品编号","min-width":"170"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_name",label:"商品名称","min-width":"500"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("pre",[e._v(e._s(t.row.goods_name))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"batch",label:"年周/批次"}}),1!=e.dialogParams.delivery_type?a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"tire_un",label:"胎号"}}):e._e(),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"no_delivery_num",label:"未发货数量",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"warehouse_name",label:"仓库名称",width:"132"}}),3==e.dialogParams.delivery_type?a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"company_appraisal_sn",label:"关联单据号",width:"170"}}):e._e(),2==e.dialogParams.delivery_type?a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"order_sn",label:"关联单据号",width:"170"}}):e._e()],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.dialogCancelForm()}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dialogSubmitForm()}}},[e._v("确 定")])],1)])])}),c=[],p=(a("a15b"),a("65b0")),d={data:function(){return{radio:null,timeValue:"",params:{},companyList:[],dialogSupplierList:[],loading:!1,customerList:[],searchParams:{},multipleSelection:[],TableData:{tableData:[],total:0},TableDataInfo:[],warehouseList:{options:[]},pageSize:30,goPage:1,per_page:[30,50,100,500],customer_nameTitle:"",order_snTitle:"",Api:"",type:0}},props:["dialogParams"],methods:{companyFocus:function(e){Object(p["e"])(this)},selectedTable:function(){this.$refs.TableDataInfoRef.toggleAllSelection()},handleCurrentChanges:function(e){var t=this;0!==e.length?3==this.type?this.$axios({method:"get",url:"Publics/OtherDelivery/referenceRebornOutstockInfo",params:{reborn_outstock_id:e.map((function(e){return e.outstock_id})).join(),warehouse_id:this.params.warehouse_id}}).then((function(e){200==e.data.code&&(t.TableDataInfo=e.data.data,t.selectedTable())})):this.$axios({method:"get",url:this.$api.referenceOutstockInfoQTFH,params:{outstock_id:e.map((function(e){return e.outstock_id})).join(),warehouse_id:this.params.warehouse_id}}).then((function(e){200==e.data.code&&(t.TableDataInfo=e.data.data,t.selectedTable())})):this.TableDataInfo=[]},handleSelectionChange:function(e){this.multipleSelection=e},getCustomerListFocus:function(){var e=this;this.loading=!0,this.$axMethod.getSupplierListOpen({company_id:this.params.company_id}).then((function(t){var a=t.data;if(200==a.code){e.loading=!1;var i=a.data;vm.$set(vm,"dialogSupplierList",i)}})).catch((function(t){e.loading=!1}))},dialogCancelForm:function(){this.$emit("closedialog",!1)},dialogSubmitForm:function(){this.multipleSelection.length?this.$emit("dialogformInline",this.multipleSelection):this.$message.error("请选择一项")},handleSizeChange:function(e){Object.assign(this.params,{per_page:e,page:1}),this.getThisData()},handleCurrentChange:function(e){Object.assign(this.params,{page:e}),this.getThisData()},onSearch:function(){this.timeValue?(this.params.business_start_time=this.timeValue[0],this.params.business_end_time=this.timeValue[1]):this.params.business_start_time=this.params.business_end_time="",this.getThisData()},onReset:function(){this.$set(this,"params",{company_id:null,department_id:null,type:this.type}),this.$set(this,"TableDataInfo",[]),this.timeValue=[],this.timeValue2=null,this.getThisData()},getThisData:function(){var e=this;this.$axios({method:"get",url:this.Api,params:this.params}).then((function(t){200==t.data.code&&(e.TableData.tableData=t.data.data.data,e.TableData.total=t.data.data.total)}))}},mounted:function(){switch(this.dialogParams.delivery_type){case 1:this.order_snTitle="关联三包出库单号",this.customer_nameTitle="客户名称",this.Api="Publics/OtherDelivery/quoteThreeOutstockList",this.type=0;break;case 2:this.order_snTitle="关联返胎入库单号",this.customer_nameTitle="厂家名称",this.Api="Publics/OtherDelivery/quoteRebornOutstockList",this.type=3;break;case 3:this.order_snTitle="关联旧胎退回单号",this.customer_nameTitle="客户名称",this.Api="Publics/OtherDelivery/quoteThreeOutstockList",this.type=1;break}this.$set(this,"params",{type:this.type}),this.getThisData(),this.$common.options("getWarehouseListOption",this.warehouseList,{company_id:this.params.company_id})}},u=d,m=(a("89b2"),a("a825"),a("2877")),_=Object(m["a"])(u,l,c,!1,null,"6e4c8604",null),g=_.exports,h=a("2f62"),f={name:"instorageOtherDeliveryOtherDeliveryAdd",data:function(){return{tableDownLoading:!1,authority:{},loading:!1,lock:0,outerVisible:!1,dialogVisible:!1,pages:1,TableData:{tableData:[],total:10},title:"",timeValue:[],options:{options:[]},params:{company_id:null,department_id:null},multipleSelection:[],postageTYPEtable:!1,postageTYPEform:!1,postageTYPE:!1,logistics_numberDisabled:!1,logistics_numberFormDisabled:!1,relevancy_sn:"relevancy_sn",postagePriceDisForm:!1,postage_priceDisList:!1,flag:!1}},components:{Document:g},computed:Object(n["a"])({},Object(h["c"])(["otherDeliveryAddGet"])),methods:Object(n["a"])(Object(n["a"])({},Object(h["b"])(["otherDeliveryAddACT","otherDeliveryIndexACT","otherDeliverySeeACT"])),{},{tableDownLogistics:function(e,t){var a=this;this.tableDownLoading=!0;var i={company_id:this.params.company_id?this.params.company_id:"",logistics_name:e};this.$set(t,"logisticsList",[]),this.$axMethod.getLogisticsList(i).then((function(e){var i=e.data;if(a.tableDownLoading=!1,200==i.code){var s=i.data;a.$set(t,"logisticsList",s)}})).catch((function(e){a.tableDownLoading=!1}))},logisticsChangeDate:function(e,t){if(!e)return t.logistics_id="",this.$set(this.params,"logistics_id",""),void this.$set(this.params,"logistics_name","");var a=t.logisticsList.filter((function(t){return t.logistics_id===e}));t.logistics_name=a[0]?a[0].logistics_name:a[0];var i=this.TableData.tableData.every((function(t){return t.logistics_id===e}));i?(this.$set(this.params,"logistics_id",t.logistics_id),this.$set(this.params,"logistics_name",t.logistics_name),this.logisticsList.push({logistics_id:t.logistics_id,logistics_name:t.logistics_name})):(this.$set(this.params,"logistics_id",""),this.$set(this.params,"logistics_name",""))},postage_FormClick:function(){this.postagePriceDisForm&&this.$message({type:"warning",message:"清除表格所有运费金额才可编辑！"})},postage_ListClick:function(){this.postage_priceDisList&&this.$message({type:"warning",message:"清除表头运费金额才可编辑！"})},logistics_numberListClick:function(){this.logistics_numberDisabled&&this.$message({type:"warning",message:"清除表头物流票号才可编辑！"})},logistics_numberFormClick:function(){this.logistics_numberFormDisabled&&this.$message({type:"warning",message:"清除表格所有物流票号才可编辑！"})},postageTypeListClick:function(){this.postageTYPEtable&&this.$message({type:"warning",message:"清除表头运费结算方式才可选择！"})},postageTypeFormClick:function(){this.postageTYPEform&&this.$message({type:"warning",message:"清除表格所有运费结算方式才可选择！"})},logistics_numberList:function(e){var t=this;this.logistics_numberFormDisabled=!0,e||this.TableData.tableData.forEach((function(e){e.logistics_number?t.logistics_numberFormDisabled=!0:t.logistics_numberFormDisabled=!1}))},logistics_numberChange:function(e){var t=this;e?(this.TableData.tableData.forEach((function(e){t.$set(e,"logistics_number",t.params.logistics_number)})),this.logistics_numberDisabled=!0):this.logistics_numberDisabled=!1},postageTypeFormChange:function(e){var t=this;e?(this.params.postage_type_name=this.postageTypeList.filter((function(t){return t.postage_type_id===e}))[0].postage_type_name,this.postageTYPEtable=!0,this.TableData.tableData.forEach((function(e){t.$set(e,"postage_type_id",t.params.postage_type_id),t.$set(e,"postage_type_name",t.params.postage_type_name)}))):(this.postageTYPEtable=!1,this.postageTYPEform=!0)},postageTypeChange:function(e){var t=this;if(this.postageTYPEform=!0,this.$set(this.params,"postage_type_name",""),this.$set(this.params,"postage_type_id",""),e.postage_type_id){var a=this.postageTypeList.filter((function(t){return t.postage_type_id===e.postage_type_id}))[0].postage_type_name;this.$set(e,"postage_type_name",a)}else this.TableData.tableData.forEach((function(e){e.postage_type_id?t.postageTYPEform=!0:(t.$set(e,"postage_type_name",""),t.$set(e,"postage_type_id",""),t.postageTYPEform=!1)}))},delivery_type_change:function(e){this.$set(this.TableData,"tableData",[])},logistics_driverChange:function(e){e&&this.$set(this.params,"license_number",this.logistics_driveList.filter((function(t){return t.logistics_driver_id===e}))[0].license_number)},departmentChange:function(){this.$set(this.TableData,"tableData",[])},logisticsChange:function(e){var t=this;this.params.logistics_name=this.logisticsList.filter((function(t){return t.logistics_id===e}))[0].logistics_name||0,this.TableData.tableData.length>0&&this.TableData.tableData.forEach((function(a){a.logistics_id=e,a.logistics_name=t.params.logistics_name,t.$set(a,"logisticsList",[{logistics_id:e,logistics_name:t.params.logistics_name}])}))},companyChange:function(e){this.$set(this.params,"logistics_id",0),this.$set(this.params,"company_id",e),this.$set(this.params,"department_id",0),this.params.company_name=this.companyList.filter((function(t){return t.company_id===e}))[0].company_name||0,this.TableData.tableData.forEach((function(e){e.logistics_id=0,e.logistics_name=""}))},handleSelectionChange:function(e){this.multipleSelection=e},goBack:function(){this.$router.push({path:"/inventory/otherdelivery"})},getOutstockData:function(e){var t=this;this.dialogVisible=!1;var a="intentional_logistics",i="intentional_logistics_id";1===this.params.delivery_type&&(a="settlement_customer_name",i="settlement_customer_id");var s=this.TableData.tableData.map((function(e){return e.outstock_id})),o=e.map((function(e){return Object.assign({},e,{delivery_goods_num:e.no_delivery_num,logistics_id:0==e[i]?null:e[i],logistics_name:e[a],logisticsList:[{logistics_id:e[i],logistics_name:e[a]}]})}));o.forEach((function(e){s.includes(e.outstock_id)||t.TableData.tableData.push(e)})),null!=this.params.logistics_number&&this.TableData.tableData.forEach((function(e){t.$set(e,"logistics_number",t.params.logistics_number)})),null!=this.params.postage_type_id&&(this.TableData.tableData.forEach((function(e){t.$set(e,"postage_type_id",t.params.postage_type_id),t.$set(e,"postage_type_name",t.params.postage_type_name)})),this.postageTYPEtable=!0);var r=this.TableData.tableData[0];r&&this.logisticsChangeDate(r.logistics_id,r),null!=this.params.postage_price&&(this.handleEdit(this.params.postage_price),this.postage_priceDisList=!0)},closeDialog:function(){this.dialogVisible=!1},addF:function(){if(!this.params.delivery_type)return this.$message.warning("请先选择发货类型"),!1;switch(this.params.delivery_type){case 1:this.title="引用三包出库单列表";break;case 2:this.title="引用返胎出库单列表";break;case 3:this.title="引用旧胎退回单列表";break;default:break}this.dialogVisible=!0},delF:function(){if(this.multipleSelection.length){var e=new Set(this.TableData.tableData),t=new Set(this.multipleSelection),a=new Set(Object(r["a"])(e).filter((function(e){return!t.has(e)})));this.$set(this.TableData,"tableData",Array.from(a))}else this.$message({message:"请先选择要删除的数据！",type:"warning"})},submit:function(e){var t=this;if(this.TableData.tableData.length<1)return this.$message({type:"warning",message:"请先引用单据"}),!1;var a=[];if(this.TableData.tableData.forEach((function(e,a){if(!e.delivery_goods_num)return t.$message.warning("请输入发货数量"),t.flag=!0,!1;t.flag=!1})),this.flag)return!1;this.TableData.tableData.forEach((function(e,t){var i;a.push((i={relevancy_id:e.relevancy_id?e.relevancy_id:e.outstock_id,relevancy_sn:e.relevancy_sn?e.relevancy_sn:e.outstock_sn,relevancy_goods_id:e.relevancy_goods_id?e.relevancy_goods_id:e.outstock_goods_id,company_name:e.company_name,company_id:e.company_id,department_id:e.department_id,department_name:e.department_name,customer_id:e.customer_id,customer_name:e.customer_name,goods_id:e.goods_id,customer_mobile:e.customer_mobile,goods_sn:e.goods_sn,goods_name:e.goods_name,batch_id:e.batch_id,batch:e.batch,tire_un:e.tire_un,intentional_id:e.intentional_id?e.intentional_id:"",warehouse_id:e.warehouse_id,warehouse_name:e.warehouse_name,allocation_id:e.allocation_id,allocation_name:e.allocation_name},Object(o["a"])(i,"tire_un",e.tire_un),Object(o["a"])(i,"goods_num",e.goods_num),Object(o["a"])(i,"delivery_goods_num",e.delivery_goods_num),Object(o["a"])(i,"logistics_number",e.logistics_number?e.logistics_number:""),Object(o["a"])(i,"postage_price",e.postage_price?e.postage_price:""),Object(o["a"])(i,"postage_type_id",e.postage_type_id?e.postage_type_id:0),Object(o["a"])(i,"postage_type_name",e.postage_type_name?e.postage_type_name:""),Object(o["a"])(i,"intentional_logistics",e.intentional_logistics),Object(o["a"])(i,"logistics_id",e.logistics_id||0),Object(o["a"])(i,"logistics_name",e.logistics_name||""),Object(o["a"])(i,"remark",e.remark?e.remark:""),Object(o["a"])(i,"address",e.address||""),Object(o["a"])(i,"province_name",e.province_name||""),Object(o["a"])(i,"province_id",e.province_id||""),Object(o["a"])(i,"city_name",e.city_name||""),Object(o["a"])(i,"city_id",e.city_id||""),Object(o["a"])(i,"area_name",e.area_name||""),Object(o["a"])(i,"area_id",e.area_id||""),i))})),this.params.postage_price=this.params.price,this.$refs[e].validate((function(e){var i=Object(n["a"])(Object(n["a"])({},t.params),{},{delivery_info:JSON.stringify(a)});t.otherDeliveryAddGet.other_delivery_id?t.$axios({url:"v2/inventory/OtherDelivery/editOtherDelivery",method:"post",data:i}).then((function(e){200==e.data.code&&(t.$message({type:"success",message:e.data.msg}),t.goBack())})):t.$axios({url:"v2/inventory/OtherDelivery/addOtherDelivery",method:"post",data:i}).then((function(e){200==e.data.code&&(t.$message({type:"success",message:e.data.msg}),t.goBack())}))}))},getSummaries:function(e){var t=this,a=e.columns,i=e.data,s=[];return a.forEach((function(e,a){if(1!==a){if("delivery_goods_num"===e.property){var o=i.map((function(t){return Number(t[e.property]||0)}));s[a]=o.reduce((function(e,t){Number(t);return Number(e+t)}),0),s[a]=Number(s[a]),t.params.delivery_num=s[a]}if("postage_price"===e.property){var r=i.map((function(t){return Number(t[e.property]||0)}));s[a]=r.reduce((function(e,t){Number(t);return Number(e+t)}),0),s[a]=Number(s[a]).toFixed(2),t.params.price=s[a]}}else s[a]="合计"})),s},postage_ListChange:function(e){var t=this;(e.postage_price<0||isNaN(e.postage_price))&&(this.$message.warning("只能输入正数"),this.$set(e,"postage_price",0)),this.$set(this.params,"postage_price",""),e.postage_price?this.postagePriceDisForm=!0:this.TableData.tableData.forEach((function(e){e.postage_price?t.postagePriceDisForm=!0:t.postagePriceDisForm=!1}))},handleEdit:function(e){var t=this;if(!e)return this.postage_priceDisList=!1,!1;if(e<0||isNaN(e)||0==e)return this.$set(this.params,"postage_price",""),this.flag=!0,!1;if(this.flag=!1,this.TableData.tableData<1)return!1;var a=[],i=!1;this.TableData.tableData.forEach((function(e){var s;return e.delivery_goods_num<0||0==e.delivery_goods_num||isNaN(e.delivery_goods_num)?(i=!0,t.$message.warning("请输入发货数量"),!1):(i=!1,i?(t.$message.warning("请输入发货数量"),!1):(t.flag=!1,void a.push((s={relevancy_id:e.relevancy_id?e.relevancy_id:e.outstock_id,relevancy_sn:e.relevancy_sn?e.relevancy_sn:e.outstock_sn,relevancy_goods_id:e.relevancy_goods_id?e.relevancy_goods_id:e.outstock_goods_id,customer_id:e.customer_id,customer_name:e.customer_name,customer_mobile:e.customer_mobile,goods_id:e.goods_id,goods_sn:e.goods_sn,goods_name:e.goods_name,batch_id:e.batch_id,batch:e.batch,tire_un:e.tire_un,intentional_id:e.intentional_id?e.intentional_id:"",warehouse_id:e.warehouse_id,warehouse_name:e.warehouse_name,allocation_id:e.allocation_id,allocation_name:e.allocation_name},Object(o["a"])(s,"tire_un",e.tire_un),Object(o["a"])(s,"goods_num",e.goods_num),Object(o["a"])(s,"delivery_goods_num",e.delivery_goods_num),Object(o["a"])(s,"logistics_number",e.logistics_number?e.logistics_number:""),Object(o["a"])(s,"postage_price",e.postage_price?e.postage_price:""),Object(o["a"])(s,"postage_type_id",e.postage_type_id?e.postage_type_id:0),Object(o["a"])(s,"postage_type_name",e.postage_type_name?e.postage_type_name:""),Object(o["a"])(s,"intentional_logistics",e.intentional_logistics),Object(o["a"])(s,"logistics_id",e.logistics_id||0),Object(o["a"])(s,"logistics_name",e.logistics_name||""),Object(o["a"])(s,"remark",e.remark?e.remark:""),s))))})),this.$axios({url:"open/CountApportion/getCountOtherDeliveryApportion",method:"post",data:{postage_price:e,delivery_info:JSON.stringify(a)}}).then((function(e){if(200==e.data.code)for(var a=0;a<t.TableData.tableData.length;a++)t.$set(t.TableData.tableData[a],"postage_price",e.data.data.goods_list[a].postage_price)})),this.postage_priceDisList=!0},goods_num_change:function(e){e.delivery_goods_num<0||isNaN(e.delivery_goods_num)||0==e.delivery_goods_num?(this.$set(e,"delivery_goods_num",0),this.$message.warning("只能输入正数")):this.handleEdit(this.params.postage_price)}}),mounted:function(){var e=this;if(this.otherDeliveryAddGet.other_delivery_id)this.postagePriceDisForm=!0,this.postage_priceDisList=!1,this.relevancy_sn="relevancy_sn",this.$axMethod.getOtherDeliveryInfo({other_delivery_id:this.otherDeliveryAddGet.other_delivery_id}).then((function(t){200==t.data.code&&(Object.assign(t.data.data,{logistics_driver_id:t.data.data.driver_id,logistics_driver_name:t.data.data.driver_name}),t.data.data.goods_info.forEach((function(t){e.$set(t,"logisticsList",[{logistics_id:t.logistics_id,logistics_name:t.logistics_name}])})),e.$set(e,"params",t.data.data),e.params.logistics_number&&(e.logistics_numberDisabled=!0),e.params.postage_price&&(e.postage_priceDisList=!1),e.params.postage_type_id&&(e.postageTYPEtable=!0),e.TableData.tableData=t.data.data.goods_info,Object(p["l"])(e,t.data.data),t.data.data.goods_info.forEach((function(t){e.postageTypeList.push({postage_type_id:t.postage_type_id,postage_type_name:t.postage_type_name})})))}));else{this.relevancy_sn="outstock_sn";var t=localStorage,a=t.employee_id,i=t.company_admin_id;[0,1,2].includes(Number(a))||i>0?this.$set(this,"params",{business_time:this.$publicFution.formatData(new Date),company_id:Number(localStorage.company_id),logistics_id:0,logistics_number:"",postage_price:null,postage_type_id:0,logistics_driver_id:0,license_number:""}):this.$set(this,"params",{business_time:this.$publicFution.formatData(new Date),company_id:Number(localStorage.company_id),department_id:Number(localStorage.department_id),delivery_type:1,logistics_id:0,logistics_number:"",postage_price:null,postage_type_id:0,logistics_driver_id:0,license_number:""}),Object(p["l"])(this,window.localStorage)}}},b=f,v=(a("8675"),Object(m["a"])(b,i,s,!1,null,"27c9df3a",null));t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-b438a362.832733c5.js.map