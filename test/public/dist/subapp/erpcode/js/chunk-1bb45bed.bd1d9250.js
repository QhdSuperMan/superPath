(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-1bb45bed"],{"0cb2":function(e,t,a){var i=a("e330"),n=a("7b0b"),r=Math.floor,s=i("".charAt),o=i("".replace),l=i("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,a,i,m,d){var p=a+e.length,h=i.length,_=u;return void 0!==m&&(m=n(m),_=c),o(d,_,(function(n,o){var c;switch(s(o,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,a);case"'":return l(t,p);case"<":c=m[l(o,1,-1)];break;default:var u=+o;if(0===u)return n;if(u>h){var d=r(u/10);return 0===d?n:d<=h?void 0===i[d-1]?s(o,1):i[d-1]+s(o,1):n}c=i[u-1]}return void 0===c?"":c}))}},1777:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.submitLoading,expression:"submitLoading"}],staticClass:"search_container"},[a("el-form",{ref:"filterFormRef",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"财务组织",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.companyListInvok,change:e.companyChange},model:{value:e.params.company_id,callback:function(t){e.$set(e.params,"company_id",t)},expression:"params.company_id"}},e._l(e.companyList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[a("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"业务日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.changeDate},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}})],1),a("el-form-item",{attrs:{label:"单据号",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(1)}},model:{value:e.params.receipt_sn,callback:function(t){e.$set(e.params,"receipt_sn",t)},expression:"params.receipt_sn"}})],1),a("el-form-item",{attrs:{label:"部门",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{focus:e.DepartmentListInvok,change:e.departmentChange},model:{value:e.params.department_id,callback:function(t){e.$set(e.params,"department_id",t)},expression:"params.department_id"}},e._l(e.departmentList,(function(e){return a("el-option",{key:e.department_id,attrs:{label:e.department_name,value:e.department_id}})})),1)],1),a("el-form-item",{attrs:{label:"客户名称",size:"mini"}},[a("el-select",{attrs:{filterable:"",placeholder:"请输入",clearable:"",loading:e.loading,remote:"","remote-method":e.clienteleListInvok},on:{focus:e.clienteleListInvok,change:e.getCustomerChange},model:{value:e.params.customer_id,callback:function(t){e.$set(e.params,"customer_id",t)},expression:"params.customer_id"}},[a("ul",{staticClass:"customer customer-ul4 customer-ul2"},[a("li",[e._v("客户编号")]),a("li",[e._v("客户名称")]),a("li",[e._v("联系人")]),a("li",[e._v("联系电话")]),a("li",[e._v("区域")])]),e._l(e.customerList,(function(t){return a("el-option",{key:t.customer_id,attrs:{label:t.customer_name,value:t.customer_id}},[a("ul",{staticClass:"customer customer-ul4"},[a("li",{attrs:{title:t.customer_id}},[e._v(e._s(t.customer_id))]),a("li",{attrs:{title:t.customer_name}},[e._v(e._s(t.customer_name))]),a("li",{attrs:{title:t.contact_name}},[e._v(e._s(t.contact_name))]),a("li",{attrs:{title:t.customer_mobile}},[e._v(e._s(t.customer_mobile))]),a("li",[e._v(e._s(t.province_name)+"/"+e._s(t.city_name)+"/"+e._s(t.area_name))])])])}))],2)],1),e.is_company_service?e._e():a("el-form-item",{attrs:{label:"物流公司",size:"mini"}},[a("el-select",{attrs:{clearable:"",filterable:""},on:{focus:e.logisticsInvok,change:e.getlogisticsChange},model:{value:e.params.logistics_id,callback:function(t){e.$set(e.params,"logistics_id",t)},expression:"params.logistics_id"}},e._l(e.logisticsList,(function(e){return a("el-option",{key:e.logistics_id,attrs:{label:e.logistics_name,value:e.logistics_id}})})),1)],1),a("el-form-item",{attrs:{label:"往来类型",size:"mini"}},[a("el-select",{attrs:{clearable:"",filterable:""},on:{focus:e.getCurrentAccountListInvok,change:e.getCurrentAccountChange},model:{value:e.params.accounts_type_id,callback:function(t){e.$set(e.params,"accounts_type_id",t)},expression:"params.accounts_type_id"}},e._l(e.accountypeList,(function(e){return a("el-option",{key:e.accounts_type_id,attrs:{label:e.accounts_type_name,value:e.accounts_type_id}})})),1)],1),a("el-form-item",{attrs:{label:"业务员",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.EmployeeListInvok,change:e.employeeChange},model:{value:e.params.employee_id,callback:function(t){e.$set(e.params,"employee_id",t)},expression:"params.employee_id"}},e._l(e.employeeList,(function(e){return a("el-option",{key:e.employee_id,attrs:{label:e.employee_name,value:e.employee_id}})})),1)],1),a("el-form-item",{attrs:{label:"审核状态",size:"mini"}},[a("el-select",{attrs:{clearable:""},model:{value:e.params.auditor_status,callback:function(t){e.$set(e.params,"auditor_status",t)},expression:"params.auditor_status"}},[a("el-option",{attrs:{label:"全部",value:0}},[e._v("全部")]),a("el-option",{attrs:{label:"未审核",value:1}},[e._v("未审核")]),a("el-option",{attrs:{label:"已审核",value:2}},[e._v("已审核")]),a("el-option",{attrs:{label:"作废",value:3}},[e._v("作废")])],1)],1),a("el-form-item",{attrs:{label:"结算单号",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(1)}},model:{value:e.params.ec_order_sn,callback:function(t){e.$set(e.params,"ec_order_sn",t)},expression:"params.ec_order_sn"}})],1),a("el-form-item",{attrs:{label:"备注",size:"mini"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入备注"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(1)}},model:{value:e.params.remark,callback:function(t){e.$set(e.params,"remark",t)},expression:"params.remark"}})],1),a("el-form-item",{attrs:{label:"商城订单号",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(1)}},model:{value:e.params.shopping_order_sn,callback:function(t){e.$set(e.params,"shopping_order_sn",t)},expression:"params.shopping_order_sn"}})],1),a("el-form-item",{attrs:{label:"创建人",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入创建人"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(1)}},model:{value:e.params.add_user_name,callback:function(t){e.$set(e.params,"add_user_name",t)},expression:"params.add_user_name"}})],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.onSearch(1)}}},[e._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"add_delet"},[1==e.authority.b_add?a("el-button",{staticClass:"addBtn",attrs:{icon:"el-icon-circle-plus-outline",type:"primary",size:"mini"},on:{click:e.addFun}},[e._v("新增")]):e._e(),1==e.authority.b_del?a("el-button",{attrs:{plain:"",icon:"el-icon-delete",size:"mini"},on:{click:e.deletes}},[e._v("删除")]):e._e(),1==e.authority.b_pass?a("el-button",{staticClass:"iconfont icon-pass",attrs:{type:"primary",size:"mini"},on:{click:e.examineFun}},[e._v("审核")]):e._e(),1==e.authority.b_nopass?a("el-button",{attrs:{plain:"",size:"mini",icon:"iconfont icon-fanshenhe"},on:{click:e.AUDIT_GET}},[e._v("弃审")]):e._e(),1!=e.authority.b_invalid||e.is_company_service?e._e():a("el-button",{staticClass:"iconfont icon-zuofei",attrs:{plain:"",size:"mini"},on:{click:e.abolishFun}},[e._v("作废")]),e.is_company_service?e._e():a("el-button",{attrs:{plain:"",icon:"el-icon-download",size:"mini"},on:{click:e.downLoadFile}},[e._v("下载模板")]),1!=e.authority.b_import||e.is_company_service?e._e():a("el-button",{attrs:{plain:"",icon:"iconfont icon-daoru5",size:"mini"},on:{click:e.dialogEmployee}},[e._v("导入")])],1),a("div",{staticClass:"table_container"},[e.tableColumn.length>0?a("xTable",{ref:"xTable",attrs:{ajax:{url:"getReceiptList",params:e.params},footerMethod:e.footerMethod,tableColumn:e.tableColumn},on:{getData:e.dealData}}):e._e()],1),a("upload",{ref:"upload",attrs:{options:e.options},on:{uploadFail:e.uploadFail}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("说明:目前只支持预收款导入")])]),a("excelExport",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"excelExport",attrs:{headerTitle:e.headerTitle,titles:"客户收款导入错误文件",dataList:e.dataList}})],1)},n=[],r=(a("d3b7"),a("159b"),a("d81d"),a("a9e3"),a("ac1f"),a("5319"),a("25f0"),a("b680"),a("4de4"),a("a15b"),a("228a")),s={data:function(){var e=this;this.$createElement;return{tableColumn:[{type:"checkbox",width:44,align:"center"},{title:"财务组织",field:"company_name",width:130},{title:"操作",width:100,fixed:"right",slots:{default:function(t,a){var i=[];return 1==e.authority.b_info&&i.push(a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(){return e.orderSee(t.row)}}},[" 查看 "])),i.push(a("el-button",{attrs:{size:"small",type:"text",disabled:1!==t.row.auditor_status},on:{click:function(){return e.orderModify(t.row)}}},[" 修改  "])),[i]}}},{field:"receipt_sn",width:156,title:"单据号"},{field:"customer_name",width:150,title:"客户名称"},{field:"accounts_type_name",width:70,title:"收款类型"},{field:"total_price",width:100,title:"实际收款金额"},{title:"部门",field:"department_name",width:100},{title:"业务员",field:"buyer_name",width:100},{title:"商城订单号",field:"shopping_order_sn",width:150},{title:"创建人",field:"add_user_name",width:84},{title:"业务日期",field:"business_time",width:100},{title:"单据时间",field:"add_time",width:150},{title:"审核状态",field:"auditor_status_name",width:70},{title:"审核人",field:"auditor_user_name",width:100},{title:"审核时间",field:"auditor_time",width:150},{title:"修改人",field:"update_user_name",width:110},{title:"修改时间",field:"update_time",width:160},{title:"物流公司",field:"business_time",width:120,visible:Boolean(this.is_company_service)},{title:"结算单号",field:"ec_order_sn",width:120},{title:"备注",field:"remark",width:120}]}},methods:{orderSee:function(e){this.$router.push({path:"/custom/receiptmanage/receiptmanage_search",query:{receipt_id:e.receipt_id}})},orderModify:function(e){this.$router.push({path:"/custom/receiptmanage/receiptmanage_add",query:{receipt_id:e.receipt_id}})},footerMethod:function(e){var t=this,a=e.columns,i=e.data;return[a.map((function(e,a){return 1===a?"本页小计":"total_price"===e.property?t.$utils.sum(i,e.property).toFixed(2):null})),a.map((function(e,a){return 1===a?"总计":"total_price"===e.property&&t.footerData.total_price?t.$publicFution.priceFormatNone(t.footerData.total_price-0):null}))]}}},o=a("65b0"),l={name:"customeReceiptmanageDefault",mixins:[s],data:function(){return{authority:{},submitLoading:!1,timeValue:[],headerTitle:[],dataList:[],loading:!1,options:{title:"收款单导入",url:"/v2/custom/CustomerReceipt/importCustomerReceipt"},footerData:{},multipleSelection:[],tableHeight:600}},components:{excel:r["a"]},methods:{dialogEmployee:function(){this.$refs.upload.stateOpen()},dealData:function(e){200===e.data.code&&(this.footerData=e.data.data.desc)},uploadFail:function(e){var t=this;400===e.code&&(this.$refs.upload.close(),this.$confirm("是否下载错误文件?","温馨提示！",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.headerTitle=e.data.title,t.dataList=e.data.data,t.$refs.excelExport.exportClick()})))},AUDIT_GET:function(){var e=this;if(this.multipleSelection.length<1)return this.$message({message:"请选择需要弃审的信息",type:"warning"}),!1;for(var t=[],a=0;a<this.multipleSelection.length;a++)t.push(this.multipleSelection[a].receipt_id);var i=t.toString();this.$axMethod.antiAuditorReceipt({receipt_id:i}).then((function(t){200==t.data.code&&e.$message({message:t.data.msg||t.data.data,type:"success"}),e.$refs.xTable._getData()}))},downLoadFile:function(){var e=this;this.submitLoading=!0,this.$axMethod.customDownloadFileUrl().then((function(t){var a=t.data;e.submitLoading=!1,200==a.code&&(window.location.href=a.data.url)})).catch((function(t){e.submitLoading=!1}))},getSummaries:function(e){var t=e.columns,a=e.data,i=[];return t.forEach((function(e,t){if(1!==t){var n=a.map((function(t){return Number(t[e.property])}));n.every((function(e){return isNaN(e)}))?i[t]="":(i[t]=n.reduce((function(e,t){var a=Number(t);return isNaN(a)?e:e+t}),0),i[t]=5==t?parseFloat(i[t]).toFixed(2).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):"")}else i[t]="页小计"})),i},changeDate:function(e){null!=e?(this.params.start_time=e[0],this.params.end_time=e[1]):(this.params.start_time="",this.params.end_time="")},companyChange:function(e){e&&(this.params.company_name=this.companyList.filter((function(t){return t.company_id===e}))[0].company_name),this.$set(this.params,"department_id",""),this.$set(this.params,"customer_id",""),this.$set(this.params,"logistics_id",""),this.$set(this.params,"employee_id","")},getCustomerChange:function(e){e&&(this.params.customer_name=this.customerList.filter((function(t){return t.customer_id===e}))[0].customer_name)},getCurrentAccountChange:function(e){e&&(this.params.accounts_type_name=this.accountypeList.filter((function(t){return t.accounts_type_id===e}))[0].accounts_type_name)},getlogisticsChange:function(e){e&&(this.params.logistics_name=this.logisticsList.filter((function(t){return t.logistics_id===e}))[0].logistics_name)},employeeChange:function(e){e&&(this.params.employee_name=this.employeeList.filter((function(t){return t.employee_id===e}))[0].employee_name)},departmentChange:function(e){e&&(this.params.department_name=this.departmentList.filter((function(t){return t.department_id===e}))[0].department_name)},examineFun:function(){var e=this;if(this.multipleSelection.length<1)return this.$message({message:"请选择需要审核的信息",type:"warning"}),!1;var t=this.multipleSelection.map((function(e){return e.receipt_id}));this.$axMethod.customAuditorPassCustomerReceipt({receipt_id:t.join()}).then((function(t){var a=t.data;200==a.code&&(e.$message({message:a.msg||a.data,type:"success"}),e.$refs.xTable._getData())}))},abolishFun:function(){var e=this;if(this.multipleSelection.length<1)return this.$message({message:"请选择需要作废的信息",type:"warning"}),!1;var t=this.multipleSelection.map((function(e){return e.receipt_id}));this.$axMethod.customAuditorInvalid({receipt_id:t.join()}).then((function(t){var a=t.data;200==a.code&&(e.$message({message:a.msg||a.data,type:"success"}),e.$refs.xTable._getData())}))},onSearch:function(e){this.timeValue&&2==this.timeValue.length?(this.params.start_time=this.timeValue[0],this.params.end_time=this.timeValue[1]):this.params.start_time=this.params.end_time="",this.$refs.xTable._getData(e)},onReset:function(){this.timeValue=[],this.$set(this,"params",{}),this.onSearch(1)},addFun:function(){this.$router.push({path:"/custom/receiptmanage/receiptmanage_add"})},deletes:function(){var e=this;if(this.multipleSelection.length<1)return this.$message({message:"请选择需要删除的信息",type:"warning"}),!1;var t=this.multipleSelection.map((function(e){return e.receipt_id}));this.$axMethod.customDelReceipt({receipt_id:t.join()}).then((function(t){var a=t.data;200==a.code&&(e.$message({message:a.data,type:"success"}),e.$refs.xTable._getData())}))},examine:function(e,t){this.$router.push({path:"/custom/receiptmanage/receiptmanage_search",query:{receipt_id:t.receipt_id}})},handleEdit:function(e,t){this.$router.push({path:"/custom/receiptmanage/receiptmanage_add",query:{receipt_id:t.receipt_id}})}},mounted:function(){if(this.authority=JSON.parse(localStorage.getItem("authority")),this.$route.query.receipt_id){var e=this.$route.query.receipt_id;this.$router.push({path:"/custom/receiptmanage/receiptmanage_search",query:{receipt_id:e}})}this.onSearch(1)},activated:function(){this.$set(this,"params",{company_id:Number(localStorage.company_id)}),Object(o["l"])(this,localStorage),this.onSearch(window.goPage)}},c=l,u=(a("1e4c"),a("2877")),m=Object(u["a"])(c,i,n,!1,null,"0994d905",null);t["default"]=m.exports},"1e4c":function(e,t,a){"use strict";a("cae8")},5319:function(e,t,a){"use strict";var i=a("2ba4"),n=a("c65b"),r=a("e330"),s=a("d784"),o=a("d039"),l=a("825a"),c=a("1626"),u=a("5926"),m=a("50c4"),d=a("577e"),p=a("1d80"),h=a("8aa5"),_=a("dc4a"),f=a("0cb2"),v=a("14c3"),g=a("b622"),y=g("replace"),b=Math.max,k=Math.min,$=r([].concat),x=r([].push),w=r("".indexOf),C=r("".slice),S=function(e){return void 0===e?e:String(e)},L=function(){return"$0"==="a".replace(/./,"$0")}(),z=function(){return!!/./[y]&&""===/./[y]("a","$0")}(),D=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));s("replace",(function(e,t,a){var r=z?"$":"$0";return[function(e,a){var i=p(this),r=void 0==e?void 0:_(e,y);return r?n(r,e,i,a):n(t,d(i),e,a)},function(e,n){var s=l(this),o=d(e);if("string"==typeof n&&-1===w(n,r)&&-1===w(n,"$<")){var p=a(t,s,o,n);if(p.done)return p.value}var _=c(n);_||(n=d(n));var g=s.global;if(g){var y=s.unicode;s.lastIndex=0}var L=[];while(1){var z=v(s,o);if(null===z)break;if(x(L,z),!g)break;var D=d(z[0]);""===D&&(s.lastIndex=h(o,m(s.lastIndex),y))}for(var F="",E=0,T=0;T<L.length;T++){z=L[T];for(var M=d(z[0]),I=b(k(u(z.index),o.length),0),O=[],N=1;N<z.length;N++)x(O,S(z[N]));var R=z.groups;if(_){var A=$([M],O,I,o);void 0!==R&&x(A,R);var V=d(i(n,void 0,A))}else V=f(M,o,I,O,R,n);I>=E&&(F+=C(o,E,I)+V,E=I+M.length)}return F+C(o,E)}]}),!D||!L||z)},b680:function(e,t,a){"use strict";var i=a("23e7"),n=a("da84"),r=a("e330"),s=a("5926"),o=a("408a"),l=a("1148"),c=a("d039"),u=n.RangeError,m=n.String,d=Math.floor,p=r(l),h=r("".slice),_=r(1..toFixed),f=function(e,t,a){return 0===t?a:t%2===1?f(e,t-1,a*e):f(e*e,t/2,a)},v=function(e){var t=0,a=e;while(a>=4096)t+=12,a/=4096;while(a>=2)t+=1,a/=2;return t},g=function(e,t,a){var i=-1,n=a;while(++i<6)n+=t*e[i],e[i]=n%1e7,n=d(n/1e7)},y=function(e,t){var a=6,i=0;while(--a>=0)i+=e[a],e[a]=d(i/t),i=i%t*1e7},b=function(e){var t=6,a="";while(--t>=0)if(""!==a||0===t||0!==e[t]){var i=m(e[t]);a=""===a?i:a+p("0",7-i.length)+i}return a},k=c((function(){return"0.000"!==_(8e-5,3)||"1"!==_(.9,0)||"1.25"!==_(1.255,2)||"1000000000000000128"!==_(0xde0b6b3a7640080,0)}))||!c((function(){_({})}));i({target:"Number",proto:!0,forced:k},{toFixed:function(e){var t,a,i,n,r=o(this),l=s(e),c=[0,0,0,0,0,0],d="",_="0";if(l<0||l>20)throw u("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return m(r);if(r<0&&(d="-",r=-r),r>1e-21)if(t=v(r*f(2,69,1))-69,a=t<0?r*f(2,-t,1):r/f(2,t,1),a*=4503599627370496,t=52-t,t>0){g(c,0,a),i=l;while(i>=7)g(c,1e7,0),i-=7;g(c,f(10,i,1),0),i=t-1;while(i>=23)y(c,1<<23),i-=23;y(c,1<<i),g(c,1,1),y(c,2),_=b(c)}else g(c,0,a),g(c,1<<-t,0),_=b(c)+p("0",l);return l>0?(n=_.length,_=d+(n<=l?"0."+p("0",l-n)+_:h(_,0,n-l)+"."+h(_,n-l))):_=d+_,_}})},cae8:function(e,t,a){}}]);
//# sourceMappingURL=chunk-1bb45bed.bd1d9250.js.map