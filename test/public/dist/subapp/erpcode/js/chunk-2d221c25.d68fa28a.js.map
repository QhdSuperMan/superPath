{"version":3,"sources":["webpack://erpcode-[name]/./src/components/element/purchase/shoplowPriceSearch/shoplowPriceSearch.vue?504c","webpack://erpcode-[name]/./src/components/element/purchase/shoplowPriceSearch/config/shoplowPriceSearch.js","webpack://erpcode-[name]/src/components/element/purchase/shoplowPriceSearch/shoplowPriceSearch.vue","webpack://erpcode-[name]/./src/components/element/purchase/shoplowPriceSearch/shoplowPriceSearch.vue?2a04","webpack://erpcode-[name]/./src/components/element/purchase/shoplowPriceSearch/shoplowPriceSearch.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","ref","params","editType","on","companyChange","model","value","callback","$$v","$set","expression","shopChange","nativeOn","$event","type","indexOf","_k","keyCode","key","onSearch","row","company_id","goods_id","goods_name","policyMonth","_v","onReset","authority","b_export","staticStyle","slot","exportOrder","_e","url","tableColumn","footerMethod","staticRenderFns","paramsModule","localStorage","getItem","company_name","factory_code","tableModule","data","title","field","width","headerAlign","align","mixins","name","$publicFution","deepCopy","methods","$refs","cascader","clear","goods_type_id","val","length","export_type","scheduleType","$axios","method","s","$api","exportShopPrice","res","code","window","location","href","Array","isArray","effective_start_time","effective_end_time","xTable","_getData","number","activated","goPage","component"],"mappings":"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","file":"js/chunk-2d221c25.d68fa28a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"params\"},[_c('div',{attrs:{\"id\":\"leixin\"}},[_c('div',{staticClass:\"search_container\"},[_c('el-form',{ref:\"filterFormRef\",staticClass:\"demo-form-inline\",attrs:{\"inline\":true,\"model\":_vm.params}},[_c('el-form-item',{attrs:{\"label\":\"组织名称\",\"size\":\"mini\"}},[_c('erpCompanyList',{attrs:{\"disabled\":_vm.editType === 2,\"fatherParams\":_vm.params},on:{\"change\":_vm.companyChange},model:{value:(_vm.params.company_id),callback:function ($$v) {_vm.$set(_vm.params, \"company_id\", $$v)},expression:\"params.company_id\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品类型\",\"size\":\"mini\"}},[_c('jybd-cascader',{ref:\"cascader\",on:{\"cascaderChange\":_vm.shopChange}})],1),_c('el-form-item',{attrs:{\"label\":\"品牌\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"maxlength\":\"100\",\"placeholder\":\"请输入\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.onSearch(1)}},model:{value:(_vm.params.brand_name),callback:function ($$v) {_vm.$set(_vm.params, \"brand_name\", $$v)},expression:\"params.brand_name\"}})],1),_c('el-form-item',{staticClass:\"el-form-item_shortInput\",attrs:{\"label\":\"商品名称\"}},[_c('v-GoodsList',{attrs:{\"scopes\":{ row: _vm.params },\"vxeParams\":{ company_id: _vm.params.company_id },\"showObj\":{ goods_id: '商品编号', goods_name: '商品名称' }}})],1),_c('el-form-item',{attrs:{\"label\":\"工厂代码\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"maxlength\":\"100\",\"placeholder\":\"请输入\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.onSearch(1)}},model:{value:(_vm.params.factory_code),callback:function ($$v) {_vm.$set(_vm.params, \"factory_code\", $$v)},expression:\"params.factory_code\"}})],1),_c('el-form-item',{attrs:{\"label\":\"年月\",\"size\":\"mini\"}},[_c('el-date-picker',{attrs:{\"type\":\"monthrange\",\"value-format\":\"yyyy-MM\",\"range-separator\":\"至\",\"start-placeholder\":\"开始月份\",\"end-placeholder\":\"结束月份\"},model:{value:(_vm.policyMonth),callback:function ($$v) {_vm.policyMonth=$$v},expression:\"policyMonth\"}})],1),_c('el-form-item',{staticClass:\"search-style search\",attrs:{\"size\":\"mini\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onSearch(1)}}},[_vm._v(\"查询\")]),_c('el-button',{attrs:{\"plain\":\"\",\"size\":\"mini\"},on:{\"click\":_vm.onReset}},[_vm._v(\"重置\")])],1)],1)],1),_c('div',{staticClass:\"add_delet\"},[(_vm.authority.b_export == 1)?_c('el-dropdown',[_c('span',{staticStyle:{\"cursor\":\"pointer\",\"color\":\"#4e90e2\"},attrs:{\"split-button\":\"\"}},[_c('el-button',{attrs:{\"plain\":\"\",\"icon\":\"iconfont icon-daochu10\",\"size\":\"mini\"}},[_vm._v(\"导出\")])],1),_c('el-dropdown-menu',{staticStyle:{\"margin-top\":\"10px\"},attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{nativeOn:{\"click\":function($event){return _vm.exportOrder(1)}}},[_vm._v(\"导出Excel文件\")]),_c('el-dropdown-item',{nativeOn:{\"click\":function($event){return _vm.exportOrder(2)}}},[_vm._v(\"导出CSV逗号分隔\")])],1)],1):_vm._e()],1),_c('div',[_c('xTable',{ref:\"xTable\",attrs:{\"ajax\":{ url: 'getPriceContentList', params: _vm.params },\"tableColumn\":_vm.tableColumn,\"footerMethod\":_vm.footerMethod}})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const paramsModule = {\n  company_id: localStorage.getItem('company_id'),\n  company_name: localStorage.getItem('company_name'),\n  goods_id: '',\n  goods_name: '',\n  factory_code: '',\n}\n\nexport const tableModule = {\n  data() {\n    return {\n      tableColumn: [\n        {\n          title: '组织名称',\n          field: 'company_name',\n          width: 220\n        },\n        {\n          title: '商品类型',\n          field: 'goods_type_name',\n          width: 80\n        },\n        {\n          title: '品牌',\n          field: 'brand_name',\n          width: 80\n        },\n        {\n          title: '商品编号',\n          field: 'goods_id',\n          width: 80\n        },\n        {\n          title: '商品名称',\n          field: 'goods_name',\n        },\n        {\n          title: '工厂代码',\n          field: 'factory_code',\n          width: 140\n        },\n        {\n          title: '底价有效年月',\n          field: 'effective_time',\n          width: 160\n        },\n        {\n          title: '销售底价金额',\n          field: 'sales_gross_profit',\n          headerAlign: \"right\", // 表头对齐方式\n          align: \"right\", // 列对齐方式\n          width: 160\n        },\n      ]\n    }\n  }\n}","<template>\n  <div class=\"params\">\n    <div id=\"leixin\">\n      <div class=\"search_container\">\n        <!-- 集采-采购订单入库 -->\n        <el-form\n          :inline=\"true\"\n          :model=\"params\"\n          class=\"demo-form-inline\"\n          ref=\"filterFormRef\"\n        >\n          <el-form-item label=\"组织名称\" size=\"mini\">\n            <erpCompanyList\n              v-model=\"params.company_id\"\n              :disabled=\"editType === 2\"\n              :fatherParams=\"params\"\n              @change=\"companyChange\"\n            />\n          </el-form-item>\n          <el-form-item label=\"商品类型\" size=\"mini\">\n            <jybd-cascader\n              ref=\"cascader\"\n              @cascaderChange=\"shopChange\"\n            ></jybd-cascader>\n          </el-form-item>\n          <el-form-item label=\"品牌\" size=\"mini\">\n            <el-input\n              v-model=\"params.brand_name\"\n              maxlength=\"100\"\n              placeholder=\"请输入\"\n              clearable\n              @keyup.enter.native=\"onSearch(1)\"\n            ></el-input>\n          </el-form-item>\n\n          <el-form-item label=\"商品名称\" class=\"el-form-item_shortInput\">\n            <v-GoodsList\n              :scopes=\"{ row: params }\"\n              :vxeParams=\"{ company_id: params.company_id }\"\n              :showObj=\"{ goods_id: '商品编号', goods_name: '商品名称' }\"\n            />\n          </el-form-item>\n          <el-form-item label=\"工厂代码\" size=\"mini\">\n            <el-input\n              v-model=\"params.factory_code\"\n              maxlength=\"100\"\n              placeholder=\"请输入\"\n              clearable\n              @keyup.enter.native=\"onSearch(1)\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"年月\" size=\"mini\">\n            <el-date-picker\n              v-model=\"policyMonth\"\n              type=\"monthrange\"\n              value-format=\"yyyy-MM\"\n              range-separator=\"至\"\n              start-placeholder=\"开始月份\"\n              end-placeholder=\"结束月份\"\n            ></el-date-picker>\n          </el-form-item>\n          <!--\n          <el-form-item label=\"状态\" size=\"mini\">\n            <el-select clearable v-model=\"params.auditor_status\" placeholder=\"请选择\" @change=\"onSearch(1)\">\n              <el-option label=\"全部\" :value=\"0\">全部</el-option>\n              <el-option label=\"未审核\" :value=\"1\">未审核</el-option>\n              <el-option label=\"已审核\" :value=\"3\">已审核</el-option>\n            </el-select>\n          </el-form-item> -->\n          <el-form-item size=\"mini\" class=\"search-style search\">\n            <el-button @click=\"onSearch(1)\" size=\"mini\" type=\"primary\"\n              >查询</el-button\n            >\n            <el-button plain @click=\"onReset\" size=\"mini\">重置</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n      <div class=\"add_delet\">\n        <el-dropdown v-if=\"authority.b_export == 1\">\n          <span split-button style=\"cursor:pointer;color:#4e90e2\">\n            <el-button plain icon=\"iconfont icon-daochu10\" size=\"mini\"\n              >导出</el-button\n            >\n          </span>\n          <el-dropdown-menu slot=\"dropdown\" style=\"margin-top:10px;\">\n            <el-dropdown-item @click.native=\"exportOrder(1)\"\n              >导出Excel文件</el-dropdown-item\n            >\n            <el-dropdown-item @click.native=\"exportOrder(2)\"\n              >导出CSV逗号分隔</el-dropdown-item\n            >\n          </el-dropdown-menu>\n        </el-dropdown>\n      </div>\n      <div>\n        <xTable\n          :ajax=\"{ url: 'getPriceContentList', params: params }\"\n          ref=\"xTable\"\n          :tableColumn=\"tableColumn\"\n          :footerMethod=\"footerMethod\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { paramsModule, tableModule } from \"./config/shoplowPriceSearch\";\nexport default {\n  mixins: [tableModule],\n  name: \"shoplowPriceList\",\n  data() {\n    return {\n      policyMonth: [], // 策略年月\n      params: this.$publicFution.deepCopy(paramsModule)\n    };\n  },\n  methods: {\n    onReset() {\n      this.policyMonth = [];\n      this.params = this.$publicFution.deepCopy(paramsModule);\n      this.$refs.cascader.clear();\n      this.onSearch(1);\n    },\n    shopChange(val) {\n      this.params.goods_type_id = val[val.length - 1];\n    },\n    exportOrder(scheduleType) {\n      // 导出库存收发明细表导出URL\n      let s = Object.assign({}, this.params, {\n        export_type: scheduleType\n      });\n      this.$axios({\n        method: \"get\",\n        params: s,\n        url: this.$api.exportShopPrice\n      }).then(res => {\n        if (res.data.code == 200) {\n          window.location.href = res.data.data.url;\n        }\n      });\n    },\n    onSearch(number) {\n      if (Array.isArray(this.policyMonth)) {\n        this.params.effective_start_time = this.policyMonth[0]\n          ? this.policyMonth[0] + \"-01\"\n          : \"\";\n        this.params.effective_end_time = this.policyMonth[1]\n          ? this.policyMonth[1] + \"-01\"\n          : \"\";\n      } else {\n        this.params.effective_start_time = \"\";\n        this.params.effective_end_time = \"\";\n      }\n      this.$refs.xTable._getData(number);\n    }\n  },\n  activated() {\n    this.onSearch(window.goPage);\n  }\n};\n</script>\n\n<style></style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shoplowPriceSearch.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shoplowPriceSearch.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./shoplowPriceSearch.vue?vue&type=template&id=ec15bb96&\"\nimport script from \"./shoplowPriceSearch.vue?vue&type=script&lang=js&\"\nexport * from \"./shoplowPriceSearch.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}