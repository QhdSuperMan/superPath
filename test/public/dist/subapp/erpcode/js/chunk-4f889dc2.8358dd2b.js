(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-4f889dc2"],{"0cb2":function(e,t,a){var r=a("e330"),o=a("7b0b"),i=Math.floor,s=r("".charAt),n=r("".replace),l=r("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,a,r,h,b){var d=a+e.length,f=r.length,_=u;return void 0!==h&&(h=o(h),_=c),n(b,_,(function(o,n){var c;switch(s(n,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,a);case"'":return l(t,d);case"<":c=h[l(n,1,-1)];break;default:var u=+n;if(0===u)return o;if(u>f){var b=i(u/10);return 0===b?o:b<=f?void 0===r[b-1]?s(n,1):r[b-1]+s(n,1):o}c=r[u-1]}return void 0===c?"":c}))}},4965:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"seePage"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("采购管理")]),a("el-breadcrumb-item",{staticClass:"attrbute"},[a("span",{on:{click:e.goBack}},[e._v("厂家返利管理")])]),a("el-breadcrumb-item",[e._v("查看厂家返利单")])],1),a("div",{staticClass:"search_container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.rebateInfo}},[a("el-form-item",{attrs:{label:"采购组织：",size:"mini"}},[e._v(" "+e._s(e.rebateInfo.company_name)+" ")]),a("el-form-item",{attrs:{label:"部门：",size:"mini"}},[e._v(" "+e._s(e.rebateInfo.department_name)+" ")]),a("el-form-item",{attrs:{label:"采购员：",size:"mini"}},[e._v(" "+e._s(e.rebateInfo.buyer_name)+" ")]),a("el-form-item",{attrs:{label:"业务日期：",size:"mini"}},[e._v(" "+e._s(e.rebateInfo.business_time)+" ")]),a("el-form-item",{attrs:{label:"单据号：",size:"mini"}},[e._v(" "+e._s(e.rebateInfo.rebate_sn)+" ")]),a("el-form-item",{attrs:{label:"供应商(厂家)：",size:"mini"}},[e._v(" "+e._s(e.rebateInfo.supplier_name)+" ")]),a("el-form-item",{attrs:{label:"品牌：",size:"mini"}},[e._v(" "+e._s(e.rebateInfo.brand_name)+" ")]),a("el-form-item",{attrs:{label:"返利金额",size:"mini"}},[e._v(" （"+e._s(e.rebateInfo.share_mode_name)+"）："+e._s(e._f("priceFormatNone")(e.rebateInfo.total_price))+" 元 ")]),a("el-form-item",{attrs:{label:"返利类型：",size:"mini"}},[e._v(" "+e._s(e.rebateInfo.rebate_type_name)+" ")]),a("el-form-item",{attrs:{label:"返利周期：",size:"mini"}},[e._v(" "+e._s(e.rebateInfo.cycle_name)+" ")]),a("el-form-item",{attrs:{label:"审核状态：",size:"mini"}},[e._v(" "+e._s(e.rebateInfo.auditor_status_name)+" ")]),a("el-form-item",{attrs:{label:"备注：",size:"mini"}},[e._v(" "+e._s(e.rebateInfo.remark)+" ")])],1)],1),a("div",{staticClass:"table_container"},[a("div",{staticClass:"table_container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:e.tableData,"show-summary":"","summary-method":e.getSummaries,"max-height":"600"}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"instorage_sn",label:"单据号","min-width":"180"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_id",label:"商品编号","min-width":"160"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_name",label:"商品名称","min-width":"500"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("pre",[e._v(e._s(t.row.goods_name))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"purchase_price",label:"采购价格","min-width":"160",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("pre",[e._v(e._s(e._f("priceFormatNone")(t.row.purchase_price)))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_num",label:"入库数量","min-width":"120",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"subtotal_price",label:"入库金额",align:"right","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("pre",[e._v(e._s(e._f("priceFormatNone")(t.row.subtotal_price)))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"business_time",label:"业务日期","min-width":"130"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"add_time",label:"单据时间","min-width":"160"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"type_name",label:"入库类型","min-width":"120"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"rebate_price",label:"分摊返利金额","min-width":"120",align:"right"}})],1)],1),a("p",{staticClass:"other_p"},[e._v("返利总金额："+e._s(e.rebateInfo.total_price))]),a("div",{staticClass:"refundauditFoot"},[""!=e.rebateInfo.update_user_name?a("span",[e._v("修改人："+e._s(e.rebateInfo.update_user_name))]):e._e(),""==e.rebateInfo.update_user_name?a("span",[e._v("创建人："+e._s(e.rebateInfo.add_user_name))]):e._e(),""!=e.rebateInfo.update_time?a("span",[e._v("修改时间："+e._s(e.rebateInfo.update_time))]):e._e(),""==e.rebateInfo.update_time?a("span",[e._v("创建时间："+e._s(e.rebateInfo.add_time))]):e._e()]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[1==e.rebateInfo.auditor_status?[1==e.authority.b_pass?a("el-button",{attrs:{type:"primary"},on:{click:e.examineForm}},[e._v("审 核")]):e._e(),1==e.authority.b_invalid?a("el-button",{on:{click:e.abolishForm}},[e._v("作 废")]):e._e(),a("el-button",{on:{click:e.goBack}},[e._v("返 回")])]:e._e(),2==e.rebateInfo.auditor_status||3==e.rebateInfo.auditor_status||1!=e.authority.b_invalid&&1!=e.authority.b_pass?[3!=e.rebateInfo.auditor_status?a("el-button",{attrs:{plain:""},on:{click:e.AUDIT_GET}},[e._v("弃审")]):e._e(),a("el-button",{on:{click:e.goBack}},[e._v("返 回")])]:e._e()],2)])],1)},o=[],i=a("5530"),s=(a("d3b7"),a("159b"),a("d81d"),a("a9e3"),a("ac1f"),a("5319"),a("25f0"),a("b680"),a("2f62")),n={name:"purchaseSearchRebatemanage",data:function(){return{authority:{},rebateInfo:{},tableData:[],checkPage:"",rebate_id:""}},computed:Object(i["a"])({},Object(s["c"])(["purchaseSearch_showGet"])),methods:Object(i["a"])(Object(i["a"])({},Object(s["b"])(["purchaseDefault_show","rebateauditDefault_show","rebatefindDefault_show"])),{},{AUDIT_GET:function(){var e=this,t=this.purchaseSearch_showGet.rebate_id;this.$axMethod.auidtorNoPassRebatemanage({rebate_id:t}).then((function(t){200==t.data.code&&(e.$message({message:t.data.data,type:"success"}),e.goBack())}))},examineForm:function(){var e=this;this.$axios({method:"post",url:this.$api.rebateAuditorPass,data:{rebate_id:this.rebate_id}}).then((function(t){200==t.data.code&&(e.$message({message:t.data.msg,type:"success"}),e.goBack())}))},abolishForm:function(){var e=this;this.$axios({method:"post",url:this.$api.rebateAuditorInvalid,data:{rebate_id:this.rebate_id}}).then((function(t){200==t.data.code&&(e.$message({message:t.data.data,type:"success"}),e.goBack())}))},goBack:function(){"rebateauditPage"==this.checkPage?(this.rebateauditDefault_show({}),this.$router.push({path:"/purchase/rebatemanage"})):"rebatefindPage"==this.checkPage?(this.rebatefindDefault_show({}),this.$router.push({path:"/purchase/rebatemanage"})):(this.purchaseDefault_show({params:this.purchaseSearch_showGet.params,goPage:this.purchaseSearch_showGet.goPage,pageSize:this.purchaseSearch_showGet.pageSize}),this.$router.push({path:"/purchase/rebatemanage"}))},getSummaries:function(e){var t=this,a=e.columns,r=e.data,o=[];return a.forEach((function(e,a){if(1!==a){if("subtotal_price"===e.property){var i=r.map((function(t){return Number(t[e.property])}));o[a]=i.reduce((function(e,t){Number(t);return e+t}),0),t.totalPrice=Number(o[a]||0),o[a]=Number(o[a]||0).toFixed(2).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}"rebate_price"===e.property&&(o[a]=t.rebateInfo.total_price)}else o[a]="合计"})),o}}),mounted:function(){var e=this;this.authority=JSON.parse(localStorage.getItem("authority"));this.$axios({method:"get",url:this.$api.getRebateInfo,params:{rebate_id:this.purchaseSearch_showGet.rebate_id}}).then((function(t){var a=t.data;200==a.code&&(e.rebateInfo=a.data.rebateInfo,e.$set(e,"tableData",a.data.rebateGoodsInfo))})),this.checkPage=this.purchaseSearch_showGet.checkPage,this.rebate_id=this.purchaseSearch_showGet.rebate_id}},l=n,c=a("2877"),u=Object(c["a"])(l,r,o,!1,null,"1a0b5d90",null);t["default"]=u.exports},5319:function(e,t,a){"use strict";var r=a("2ba4"),o=a("c65b"),i=a("e330"),s=a("d784"),n=a("d039"),l=a("825a"),c=a("1626"),u=a("5926"),h=a("50c4"),b=a("577e"),d=a("1d80"),f=a("8aa5"),_=a("dc4a"),m=a("0cb2"),p=a("14c3"),v=a("b622"),g=v("replace"),w=Math.max,I=Math.min,y=i([].concat),$=i([].push),k=i("".indexOf),S=i("".slice),x=function(e){return void 0===e?e:String(e)},z=function(){return"$0"==="a".replace(/./,"$0")}(),P=function(){return!!/./[g]&&""===/./[g]("a","$0")}(),N=!n((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));s("replace",(function(e,t,a){var i=P?"$":"$0";return[function(e,a){var r=d(this),i=void 0==e?void 0:_(e,g);return i?o(i,e,r,a):o(t,b(r),e,a)},function(e,o){var s=l(this),n=b(e);if("string"==typeof o&&-1===k(o,i)&&-1===k(o,"$<")){var d=a(t,s,n,o);if(d.done)return d.value}var _=c(o);_||(o=b(o));var v=s.global;if(v){var g=s.unicode;s.lastIndex=0}var z=[];while(1){var P=p(s,n);if(null===P)break;if($(z,P),!v)break;var N=b(P[0]);""===N&&(s.lastIndex=f(n,h(s.lastIndex),g))}for(var D="",F=0,G=0;G<z.length;G++){P=z[G];for(var C=b(P[0]),O=w(I(u(P.index),n.length),0),B=[],j=1;j<P.length;j++)$(B,x(P[j]));var A=P.groups;if(_){var E=y([C],B,O,n);void 0!==A&&$(E,A);var M=b(r(o,void 0,E))}else M=m(C,n,O,B,A,o);O>=F&&(D+=S(n,F,O)+M,F=O+C.length)}return D+S(n,F)}]}),!N||!z||P)},b680:function(e,t,a){"use strict";var r=a("23e7"),o=a("da84"),i=a("e330"),s=a("5926"),n=a("408a"),l=a("1148"),c=a("d039"),u=o.RangeError,h=o.String,b=Math.floor,d=i(l),f=i("".slice),_=i(1..toFixed),m=function(e,t,a){return 0===t?a:t%2===1?m(e,t-1,a*e):m(e*e,t/2,a)},p=function(e){var t=0,a=e;while(a>=4096)t+=12,a/=4096;while(a>=2)t+=1,a/=2;return t},v=function(e,t,a){var r=-1,o=a;while(++r<6)o+=t*e[r],e[r]=o%1e7,o=b(o/1e7)},g=function(e,t){var a=6,r=0;while(--a>=0)r+=e[a],e[a]=b(r/t),r=r%t*1e7},w=function(e){var t=6,a="";while(--t>=0)if(""!==a||0===t||0!==e[t]){var r=h(e[t]);a=""===a?r:a+d("0",7-r.length)+r}return a},I=c((function(){return"0.000"!==_(8e-5,3)||"1"!==_(.9,0)||"1.25"!==_(1.255,2)||"1000000000000000128"!==_(0xde0b6b3a7640080,0)}))||!c((function(){_({})}));r({target:"Number",proto:!0,forced:I},{toFixed:function(e){var t,a,r,o,i=n(this),l=s(e),c=[0,0,0,0,0,0],b="",_="0";if(l<0||l>20)throw u("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return h(i);if(i<0&&(b="-",i=-i),i>1e-21)if(t=p(i*m(2,69,1))-69,a=t<0?i*m(2,-t,1):i/m(2,t,1),a*=4503599627370496,t=52-t,t>0){v(c,0,a),r=l;while(r>=7)v(c,1e7,0),r-=7;v(c,m(10,r,1),0),r=t-1;while(r>=23)g(c,1<<23),r-=23;g(c,1<<r),v(c,1,1),g(c,2),_=w(c)}else v(c,0,a),v(c,1<<-t,0),_=w(c)+d("0",l);return l>0?(o=_.length,_=b+(o<=l?"0."+d("0",l-o)+_:f(_,0,o-l)+"."+f(_,o-l))):_=b+_,_}})}}]);
//# sourceMappingURL=chunk-4f889dc2.8358dd2b.js.map