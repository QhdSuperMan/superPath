(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-7e2fe070"],{"11e0":function(t,e,a){},"28ae":function(t,e,a){},"7b2e":function(t,e,a){"use strict";a("11e0")},"93db":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"search_container"},[a("el-form",{ref:"filterFormRef",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.params}},[a("el-form-item",{attrs:{label:"库存组织",size:"mini",rules:t.rules.company_id,prop:"company_id"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:"","filter-method":t.companyFilter},on:{change:t.companyChange,focus:t.getCompany},model:{value:t.params.company_id,callback:function(e){t.$set(t.params,"company_id",e)},expression:"params.company_id"}},t._l(t.companyList,(function(e){return a("el-option",{key:e.company_id,attrs:{label:e.company_name,value:e.company_id}},[a("span",{class:1==e.type?"optionStyle":""},[t._v(t._s(e.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"仓库名称",size:"mini"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择"},on:{focus:t.getWarehouse,change:t.warehouseChangeId},model:{value:t.params.warehouse_id,callback:function(e){t.$set(t.params,"warehouse_id",e)},expression:"params.warehouse_id"}},t._l(t.warehouseList.options,(function(t){return a("el-option",{key:t.warehouse_id,attrs:{label:t.warehouse_name,value:t.warehouse_id}})})),1)],1),a("el-form-item",{attrs:{label:"货位名称",size:"mini"}},[a("erpAllocation",{attrs:{searchParams:{company_id:t.params.company_id,warehouse_id:t.params.warehouse_id,is_incomplete:3}},model:{value:t.params.allocation_id,callback:function(e){t.$set(t.params,"allocation_id",e)},expression:"params.allocation_id"}})],1),a("el-form-item",{attrs:{label:"商品名称",size:"mini"}},[a("v-GoodsList",{attrs:{scopes:{row:t.params},isFuzzy:!0,vxeParams:{company_id:t.params.company_id},changeGoods:t.handleSelect,showObj:{goods_id:"商品编号",goods_name:"商品名称"}}})],1),a("el-form-item",{attrs:{label:"年周/批次",size:"mini"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择"},on:{focus:t.getBatchListInvok},model:{value:t.params.batch,callback:function(e){t.$set(t.params,"batch",e)},expression:"params.batch"}},t._l(t.batchList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.batch,value:t.batch}})})),1)],1),a("el-form-item",{attrs:{label:"业务日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:""},on:{change:t.change},model:{value:t.params.timeValue,callback:function(e){t.$set(t.params,"timeValue",e)},expression:"params.timeValue"}})],1),a("el-form-item",{attrs:{label:"审核日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.timeValue1,callback:function(e){t.timeValue1=e},expression:"timeValue1"}})],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.onSearch("filterFormRef")}}},[t._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.onReset}},[t._v("重置")])],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.authority.b_export&&t.listShow,expression:"authority.b_export==1 && listShow"}],staticClass:"add_delet"},[a("el-dropdown",{attrs:{placement:"bottom-start"}},[a("span",{staticStyle:{cursor:"pointer",color:"#4e90e2"},attrs:{"split-button":""}},[a("el-button",{attrs:{plain:"",icon:"iconfont icon-daochu10",size:"mini"}},[t._v("导出")])],1),a("el-dropdown-menu",{staticStyle:{"margin-top":"10px"},attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(e){return t.exportOrder(1)}}},[t._v("导出Excel文件")]),a("el-dropdown-item",{nativeOn:{click:function(e){return t.exportOrder(2)}}},[t._v("导出CSV逗号分隔")])],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"table_container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading1,expression:"loading1"}],ref:"table1",staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"max-height":t.tableHeight,"tooltip-effect":"light",border:"",data:t.TableData.tableData,"summary-method":t.getSummaries,"show-summary":""}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"company_name",width:"150",label:"组织名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"warehouse_name",width:"138",label:"仓库名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"allocation_name",width:"180",label:"货位名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"brand_name",width:"120",label:"品牌名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_id",width:"202",label:"商品编号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_name","min-width":"500",label:"商品名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("pre",[t._v(t._s(e.row.goods_name))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"batch",width:"138",label:"年周/批次"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"early_num",width:"138px",label:"期初数量",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"early_price",width:"138px",label:"期初金额",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"income_num",width:"138px;",label:"入库数量",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"income_price",width:"138px;",label:"入库金额",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("priceFormat")(e.row.income_price))+" ")]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"sell_num",width:"138px;",label:"出库数量",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"sell_price",width:"138px;",label:"出库金额",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"end_num",width:"138px;",label:"期末数量",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"end_price",width:"138px;",label:"期末金额",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"auxiliary_unit_early_num",width:"138px",label:"辅助单位期初",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"auxiliary_unit_income_num",width:"138px",label:"辅助单位入库",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"auxiliary_unit_sell_num",width:"138px",label:"辅助单位出库",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"auxiliary_unit_end_num",width:"138px",label:"辅助单位结存",align:"right"}})],1),a("div",{ref:"table_sum",staticClass:"table_sum"},[a("ul",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingsum,expression:"loadingsum"}],staticStyle:{overflow:"hidden",width:"3100px"},attrs:{"element-loading-custom-class":"loaddings","element-loading-text":"总计数据加载中"}},[a("li",{staticStyle:{width:"150px","text-align":"right"}}),a("li",{staticStyle:{width:"138px","text-align":"left","padding-left":"6px"}},[t._v(" 总计 ")]),a("li",{staticStyle:{width:"180px","text-align":"right"}}),a("li",{staticStyle:{width:"120px","text-align":"right"}}),a("li",{staticStyle:{width:"202px","text-align":"right"}}),a("li",{staticStyle:{width:"500px","text-align":"right"}}),a("li",{staticStyle:{width:"138px","text-align":"left","padding-left":"6px"}}),a("li",{staticStyle:{width:"138px","text-align":"right"}},[t._v(t._s(t.TableDataSum.total_early_num))]),a("li",{staticStyle:{width:"138px","text-align":"right"}},[t._v(t._s(t.TableDataSum.total_early_price))]),a("li",{staticStyle:{width:"138px","text-align":"right"}},[t._v(t._s(t.TableDataSum.total_income_num))]),a("li",{staticStyle:{width:"138px","text-align":"right"}},[t._v(t._s(t.TableDataSum.total_income_price))]),a("li",{staticStyle:{width:"138px","text-align":"right"}},[t._v(t._s(t.TableDataSum.total_sell_num))]),a("li",{staticStyle:{width:"138px","text-align":"right"}},[t._v(t._s(t._f("priceFormatNone")(t.TableDataSum.total_sell_price)))]),a("li",{staticStyle:{width:"138px","text-align":"right"}},[t._v(t._s(t.TableDataSum.total_end_num))]),a("li",{staticStyle:{width:"138px","text-align":"right"}},[t._v(t._s(t._f("priceFormatNone")(t.TableDataSum.total_end_price)))])])]),a("div",{staticClass:"table_info"},[a("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[a("el-col",{attrs:{span:12}},[a("div",[t._v("生成时间："+t._s(t.TableData.allList.add_time))])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"textAr"},[t._v("制表人："+t._s(t.TableData.allList.user_name))])])],1),a("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[a("el-col",{attrs:{span:12}},[a("div",[t._v("业务日期起始:"+t._s(t.params.start_time))])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"textAr"},[t._v("业务日期截止:"+t._s(t.params.end_time))])])],1)],1),a("div",{staticClass:"page_container"},[a("div",{staticClass:"pageNumber"},[t._v("每页显示")]),a("el-pagination",{staticClass:"erp-pagination",attrs:{"current-page":t.goPage,"page-size":t.pageSize1,"page-sizes":t.per_page,layout:"total,sizes, prev, pager, next,jumper",prevText:"上一页",nextText:"下一页",total:t.TableData.total},on:{"size-change":t.handleSizeChange,"update:currentPage":function(e){t.goPage=e},"update:current-page":function(e){t.goPage=e},"current-change":t.handleCurrentChange}})],1)],1)])},s=[],l=(a("a9e3"),a("d3b7"),a("159b"),a("d81d"),a("caad"),a("ac1f"),a("5319"),a("25f0"),a("b680"),a("a15b"),a("65b0")),o=(a("c9b7"),{name:"reportInventorydetrpt",data:function(){return{authority:{},timeValue1:[],params:{},searchParams:{},listShow:!1,loadingsum:!1,TableDataSum:{},exportType:null,warehouseList:{options:[]},TableData:{allList:{},tableData:[]},departmentList:{options:[]},companyList:[],goPage:1,pageSize:30,per_page:[30,50,100,500],loading:!1,options4:[],list:[],tableHeight:600,timeValue:[(new Date).setTime((new Date).getTime()-2592e6),new Date]}},methods:{companyChange:function(t){this.$set(this.params,"warehouse_id",""),this.$set(this.params,"goods_name"," "),this.$set(this.params,"goods_id",""),this.$set(this.params,"allocation_id",""),this.$set(this.params,"batch","")},warehouseChangeId:function(t){this.$set(this.params,"allocation_id",""),this.$set(this.params,"goods_name",""),this.$set(this.params,"goods_id",""),this.$set(this.params,"batch","")},allocationChangeId:function(t){this.$set(this.params,"goods_name",""),this.$set(this.params,"goods_id",""),this.$set(this.params,"batch","")},change:function(t){t?(this.params.start_time=this.formData(t[0]),this.params.end_time=this.formData(t[1])):this.params.start_time=this.params.end_time=""},onReset:function(){this.$set(this,"params",{company_id:Number(localStorage.company_id)}),this.params.start_time="",this.params.end_time="",this.timeValue=[],this.timeValue1=[],this.$set(this,"searchParams",{params:{},TableData:this.TableData,API:"v2GetReceiveInfoList",vm:this}),Object.assign(this.searchParams.params,this.params,{page:1})},handleSelect:function(t){this.$set(this.params,"goods_id",t.goods_id),this.$set(this.params,"batch","")},exportOrder:function(t){if(0==this.listShow)return this.$message({message:"请查询需要导出的数据",type:"error"}),!1;var e=Object.assign(this.params,{export_type:t});e=Object.assign({},e),this.$axMethod.exportReceiveSummaryUrl(e).then((function(t){200==t.data.code&&(window.location.href=t.data.data.url)}))},getSummaries:function(t){var e=t.columns,a=t.data,i=[];return e.forEach((function(t,e){if(1!==e)if(0!==e){var s=a.map((function(e){return Number(e[t.property])}));s.every((function(t){return isNaN(t)}))?i[e]="":(i[e]=s.reduce((function(t,e){var a=Number(e);return isNaN(a)?t:t+e}),0),["early_num","income_num","sell_num","end_num"].includes(t.property)?i[e]=i[e]:["early_price","income_price","sell_price","end_price"].includes(t.property)?i[e]=Number(i[e]).toFixed(2).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):i[e]="")}else i[e]="";else i[e]="合计"})),i},onSearch:function(t){var e=this;this.timeValue1?(this.params.auditor_start_time=this.timeValue1[0],this.params.auditor_end_time=this.timeValue1[1]):this.params.auditor_start_time=this.params.auditor_end_time="";this.$refs[t].validate((function(t){if(t)if(e.params.company_id){e.listShow=!0,e.loadingsum=!0,e.$set(e,"searchParams",{params:{},TableData:e.TableData,API:"v2GetReceiveInfoList",vm:e});var a=Object.assign({},e.params);e.$axMethod.getAllInventoryInfoList(a).then((function(t){200==t.data.code&&(e.TableDataSum=t.data.data,e.loadingsum=!1)})),Object.assign(e.searchParams.params,e.params,{page:1}),Object(l["g"])(e.searchParams,2,l["o"].bind(e))}else;}))},formData:function(t){var e=new Date(t),a=""+(e.getMonth()+1),i=""+e.getDate(),s=e.getFullYear();return a.length<2&&(a="0"+a),i.length<2&&(i="0"+i),[s,a,i].join("-")},handleSizeChange:function(t){Object.assign(this.searchParams.params,{per_page:t,page:1}),Object(l["g"])(this.searchParams)},handleCurrentChange:function(t){Object.assign(this.searchParams.params,{page:t}),Object(l["g"])(this.searchParams)},companyFilter:function(t){var e={type:1,company_name:t};Object(l["k"])(this,e)},getCompany:function(){var t={type:1,company_name:null};Object(l["k"])(this,t)},getWarehouse:function(){this.$common.options("getWarehouseListOption",this.warehouseList,{company_id:this.params.company_id})}},mounted:function(){this.authority=JSON.parse(localStorage.getItem("authority"));var t=this.$refs.table1.$el.getElementsByClassName("el-table__body-wrapper")[0],e=this.$refs.table_sum;t.addEventListener("scroll",(function(){e.scrollLeft=this.scrollLeft})),l["o"].bind(this)(),window.onresize=l["o"].bind(this),this.params.start_time=this.formData(this.timeValue[0]),this.params.end_time=this.formData(this.timeValue[1]),this.$set(this,"params",{company_id:Number(localStorage.company_id),timeValue:[this.params.start_time,this.params.end_time],start_time:this.formData(this.timeValue[0]),end_time:this.formData(this.timeValue[1])}),Object(l["l"])(this,localStorage)}}),r=o,n=(a("9dc5"),a("7b2e"),a("2877")),m=Object(n["a"])(r,i,s,!1,null,"587b2be2",null);e["default"]=m.exports},"9dc5":function(t,e,a){"use strict";a("28ae")}}]);
//# sourceMappingURL=chunk-7e2fe070.f4e9e59c.js.map