(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-2d2384b1"],{ff83:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"params"},[a("div",{attrs:{id:"leixin"}},[a("div",{staticClass:"search_container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.params}},[a("el-form-item",{attrs:{label:"库存组织",size:"mini",prop:"company_id"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{change:t.companyChange,focus:t.companyListInvok},model:{value:t.params.company_id,callback:function(e){t.$set(t.params,"company_id",e)},expression:"params.company_id"}},t._l(t.companyList,(function(e){return a("el-option",{key:e.company_id,attrs:{label:e.company_name,value:e.company_id}},[a("span",{class:1==e.type?"optionStyle":""},[t._v(t._s(e.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"业务日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.timeValue,callback:function(e){t.timeValue=e},expression:"timeValue"}})],1),a("el-form-item",{attrs:{label:"单据号",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.params.outstock_sn,callback:function(e){t.$set(t.params,"outstock_sn",e)},expression:"params.outstock_sn"}})],1),a("el-form-item",{attrs:{label:"部门",size:"mini",prop:"department_id"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{change:t.departmentChange,focus:t.DepartmentListInvok},model:{value:t.params.department_id,callback:function(e){t.$set(t.params,"department_id",e)},expression:"params.department_id"}},t._l(t.departmentList,(function(t){return a("el-option",{key:t.department_id,attrs:{label:t.department_name,value:t.department_id}})})),1)],1),a("el-form-item",{attrs:{label:"审核状态",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.params.auditor_status,callback:function(e){t.$set(t.params,"auditor_status",e)},expression:"params.auditor_status"}},[a("el-option",{attrs:{label:"全部",value:0}},[t._v("全部")]),a("el-option",{attrs:{label:"未审核",value:1}},[t._v("未审核")]),a("el-option",{attrs:{label:"已审核",value:2}},[t._v("已审核")]),a("el-option",{attrs:{label:"作废",value:3}},[t._v("作废")])],1)],1),a("el-form-item",{attrs:{label:"客户名称",prop:"customer_id",size:"mini"}},[a("el-select",{attrs:{filterable:"",placeholder:"请输入",clearable:"",loading:t.loading,remote:"","remote-method":t.clienteleListInvok},on:{focus:t.clienteleListInvok,change:t.customerListChange},model:{value:t.params.customer_id,callback:function(e){t.$set(t.params,"customer_id",e)},expression:"params.customer_id"}},[a("ul",{staticClass:"customer customer-ul4 customer-ul2"},[a("li",[t._v("客户编号")]),a("li",[t._v("客户名称")]),a("li",[t._v("联系人")]),a("li",[t._v("联系电话")]),a("li",[t._v("区域")])]),t._l(t.customerList,(function(e){return a("el-option",{key:e.customer_id,attrs:{label:e.customer_name,value:e.customer_id}},[a("ul",{staticClass:"customer customer-ul4"},[a("li",{attrs:{title:e.customer_id}},[t._v(t._s(e.customer_id))]),a("li",{attrs:{title:e.customer_name}},[t._v(t._s(e.customer_name))]),a("li",{attrs:{title:e.contact_name}},[t._v(t._s(e.contact_name))]),a("li",{attrs:{title:e.customer_mobile}},[t._v(t._s(e.customer_mobile))]),a("li",[t._v(t._s(e.province_name)+"/"+t._s(e.city_name)+"/"+t._s(e.area_name))])])])}))],2)],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.onSearch}},[t._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.onReset}},[t._v("重置")])],1)],1)],1),a("div",{staticClass:"add_delet"},[1==t.authority.b_add?a("el-button",{staticClass:"addBtn",attrs:{icon:"el-icon-circle-plus-outline",type:"primary",size:"mini"},on:{click:t.addF}},[t._v("新增")]):t._e(),1==t.authority.b_del?a("el-button",{attrs:{plain:"",icon:"el-icon-delete",size:"mini"},on:{click:t.deletes}},[t._v("删除")]):t._e(),1==t.authority.b_pass?a("el-button",{attrs:{icon:"iconfont icon-pass",type:"primary",size:"mini"},on:{click:t.audit}},[t._v("审核")]):t._e(),1==t.authority.b_nopass?a("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.AUDIT_GET}},[t._v("弃审")]):t._e(),1==t.authority.b_invalid?a("el-button",{attrs:{plain:"",icon:"iconfont icon-zuofei",size:"mini"},on:{click:t.cancellation}},[t._v("作废")]):t._e()],1),a("div",{staticClass:"table_container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading1,expression:"loading1"}],staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:t.TableData.tableData,"max-height":"600"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",fixed:"left",align:"center",width:"44"}}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==t.authority.b_info?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.seeDetail(e,e.row)}}},[t._v(" 查看 ")]):t._e(),1==e.row.auditor_status&&1==t.authority.b_edit?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.addF(e,e.row)}}},[t._v(" 修改 ")]):a("el-button",{attrs:{disabled:"",type:"text",size:"small"},on:{click:function(a){return t.addF(e,e.row)}}},[t._v(" 修改 ")])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"company_name",width:"150",label:"库存组织"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"outstock_sn",width:"180",label:"出库单号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"customer_name",width:"120",label:"客户名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"add_user_name",width:"150",label:"操作员"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"auditor_status_name",width:"100",label:"审核状态"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"auditor_name",width:"150",label:"审核人"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"business_time",width:"180",label:"业务日期"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"add_time",width:"180",label:"单据时间"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"auditor_time",width:"180",label:"审核时间"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"abstract",label:"备注"}})],1)],1),a("div",{staticClass:"page_container"},[a("div",{staticClass:"pageNumber"},[t._v("每页显示")]),a("el-pagination",{staticClass:"erp-pagination",attrs:{"current-page":t.goPage,"page-size":t.pageSize1,"page-sizes":t.per_page,layout:"total,sizes, prev, pager, next,jumper",prevText:"上一页",nextText:"下一页",total:t.TableData.total},on:{"size-change":t.handleSizeChange,"update:currentPage":function(e){t.goPage=e},"update:current-page":function(e){t.goPage=e},"current-change":t.handleCurrentChange}})],1)])])},s=[],o=a("5530"),r=(a("4de4"),a("d3b7"),a("99af"),a("65b0")),l=a("2f62"),n={name:"instorageOldtyresstorageTirebackstorageIndex",data:function(){return{lock:0,pages:1,loading:!1,showDepartment:!0}},computed:Object(o["a"])({},Object(l["c"])(["tirebackstorageIndexGet"])),methods:Object(o["a"])(Object(o["a"])({},Object(l["b"])(["tirebackstorageAdd","tirebackstorageSee","tirebackIndexACT"])),{},{departmentChange:function(t){""!=t&&(this.params.department_name=this.departmentList.filter((function(e){return e.department_id===t}))[0].department_name)},customerListChange:function(t){t&&(this.params.customer_name=this.customerList.filter((function(e){return e.customer_id===t}))[0].customer_name)},onReset:function(){this.$set(this,"params",{outstock_type_id:10008,auditor_status:0}),this.timeValue=[],this.$set(this,"searchParams",{params:{outstock_type_id:10008,auditor_status:0},TableData:this.TableData,API:"getOutstockList",vm:this}),this.onSearch()},AUDIT_GET:function(){var t=this;if(this.multipleSelection.length<1)return this.$message({message:"请选择需要弃审的信息",type:"warning"}),!1;for(var e=[],a=0;a<this.multipleSelection.length;a++)e.push(this.multipleSelection[a].outstock_id);var i=e.toString();this.$baseData.checkCarDoctor({bill_type:15,bill_id:i,operation_type:5}).then((function(){t.$axMethod.oldTireAuditorNoPass({outstock_id:i}).then((function(e){200==e.data.code&&(t.$message({message:e.data.msg,type:"success"}),Object(r["g"])(t.searchParams))}))}))},handleSelectionChange:function(t){this.multipleSelection=t},companyChange:function(t){""!=t&&(this.params.company_name=this.companyList.filter((function(e){return e.company_id===t}))[0].company_name),Object(r["a"])(this,this.params)},onSearch:function(){this.timeValue&&2==this.timeValue.length?(this.params.business_start_time=this.timeValue[0],this.params.business_end_time=this.timeValue[1]):this.params.business_start_time=this.params.business_end_time="",Object.assign(this.searchParams.params,this.params,{page:1}),this.tirebackIndexACT({goPage:this.goPage,params:this.params,pageSize:this.pageSize}),Object(r["g"])(this.searchParams)},audit:function(){var t=this;if(this.multipleSelection.length<1)return this.$message({message:"请选择需要审核的信息",type:"warning"}),!1;for(var e=[],a=0;a<this.multipleSelection.length;a++)e.push(this.multipleSelection[a].outstock_id);var i=e.toString(),s={examineID:"outstock_id",eachData:{outstock_id:i},examineApi:"getauidtorPass",list:{UrlApi:"getOutstockList",data:this.TableData,esData:this.searchParams.params}};this.$baseData.checkCarDoctor({bill_type:15,bill_id:i,operation_type:4}).then((function(){t.$common.examineFun(s)}))},cancellation:function(){var t=this;if(this.multipleSelection.length<1)return this.$message({message:"请选择需要作废的信息",type:"warning"}),!1;for(var e=[],a=0;a<this.multipleSelection.length;a++)e.push(this.multipleSelection[a].outstock_id);var i=e.toString(),s={examineID:"outstock_id",eachData:{outstock_id:i},examineApi:"getauditorInvalid",list:{UrlApi:"getOutstockList",data:this.TableData,esData:this.searchParams.params}};this.$baseData.checkCarDoctor({bill_type:15,bill_id:i,operation_type:6}).then((function(){t.$common.examineFun(s)}))},deletes:function(){var t=this;if(this.multipleSelection.length<1)return this.$message({message:"请选择需要作废的信息",type:"warning"}),!1;for(var e=[],a=0;a<this.multipleSelection.length;a++)e.push(this.multipleSelection[a].outstock_id);var i=e.toString(),s={deleID:"outstock_id",deleSelect:this.multipleSelection,deleApi:"getdelOutstock",list:{UrlApi:"getOutstockList",data:this.TableData,esData:this.searchParams.params}};this.$baseData.checkCarDoctor({bill_type:15,bill_id:i,operation_type:3}).then((function(){t.$common.deletes(s,"删除",t)}))},addF:function(t,e){if(e&&1==e.is_execute)return this.$message.error("wms系统正在操作此单据，暂不支持单据修改"),!1;this.$router.push({path:"/inventory/tireback/tirebackAdd"}),this.tirebackstorageAdd({goPage:this.goPage,params:this.params,pageSize:this.pageSize,outstock_id:e?e.outstock_id:""})},seeDetail:function(t,e){this.$router.push({path:"/inventory/tireback/tirebackSee"}),this.tirebackstorageSee({outstock_id:e.outstock_id,goPage:this.goPage,params:this.params,pageSize:this.pageSize})}}),mounted:function(){if(this.$set(this,"params",{outstock_type_id:10008,auditor_status:0}),this.tirebackstorageIndexGet&&this.tirebackstorageIndexGet.params){if(this.tirebackstorageIndexGet.params.business_start_time){var t=this.tirebackstorageIndexGet.params,e=t.business_start_time,a=t.business_end_time;this.timeValue=this.timeValue.concat([e,a])}this.$set(this,"params",this.tirebackstorageIndexGet.params),Object(r["l"])(this,this.tirebackstorageIndexGet.params)}this.tirebackstorageIndexGet.goPage&&(this.params.page=this.tirebackstorageIndexGet.goPage,this.params.per_page=this.tirebackstorageIndexGet.pageSize),this.$set(this,"searchParams",{params:this.params,TableData:this.TableData,API:"getOutstockList",vm:this}),Object(r["g"])(this.searchParams)}},c=n,m=a("2877"),p=Object(m["a"])(c,i,s,!1,null,"41e4001a",null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d2384b1.7cfe9697.js.map