{"version":3,"sources":["webpack://erpcode-[name]/./src/components/element/purchase/shoplowPrice/shoplowPriceAdd.vue?365d","webpack://erpcode-[name]/src/components/element/purchase/shoplowPrice/shoplowPriceAdd.vue","webpack://erpcode-[name]/./src/components/element/purchase/shoplowPrice/shoplowPriceAdd.vue?43b6","webpack://erpcode-[name]/./src/components/element/purchase/shoplowPrice/shoplowPriceAdd.vue","webpack://erpcode-[name]/./src/components/element/purchase/shoplowPrice/shoplowPriceAdd.vue?18aa","webpack://erpcode-[name]/./node_modules/core-js/modules/es.number.to-fixed.js","webpack://erpcode-[name]/./src/components/element/purchase/shoplowPrice/config/policyContent.js","webpack://erpcode-[name]/./src/components/element/purchase/shoplowPrice/config/shoplowPriceAdd.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","on","goBack","_s","$route","query","id","ref","params","required","message","trigger","editType","companyChange","model","value","callback","$$v","$set","expression","brandChange","timeConfig","policyMonthChange","policyMonth","$event","computedContent","staticStyle","infoTableData","cellClassName","editRules","isEdit","infoTableColumn","spanMethod","computedShopList","tableColumn","sumbit","staticRenderFns","name","mixins","data","currentYear","contentDisabled","shopDisabled","onPick","time","minDate","disabledDate","$publicFution","deepCopy","methods","tableData","$refs","xTable","map","_proxy","getNumber","isNaN","Number","val","computedShop","row","purchase_price","gross_profit","sales_price","headquarters_management_price","order_pass_price","toFixed","comprehensive_tax_price","profit_before_tax","factory_annual_task","sales_gross_profit","validate","valid","tableBox","length","Object","assign","effective_start_time","effective_end_time","goods_json","JSON","stringify","api","method","url","code","goPage","$router","push","mounted","$axios","$api","getPriceStrategyInfo","i","component","$","global","uncurryThis","toIntegerOrInfinity","thisNumberValue","$repeat","fails","RangeError","String","floor","Math","repeat","stringSlice","slice","un$ToFixed","pow","x","n","acc","log","x2","multiply","c","index","c2","divide","dataToString","s","t","FORCED","target","proto","forced","fractionDigits","e","z","j","k","number","fractDigits","sign","result","policyContent","type","project","unit_name","price","computePriceInfo","ratio","ratioCycle","tableConfig","0","title","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","paramsModule","company_id","localStorage","getItem","company_name","price_strategy_name","tableHead","field","width","headerAlign","align","editRender","autoselect","formatter","getOutSlots","$rowIndex","a","events","change","children","remark","getRowPrice","key","getRow","brand_id","$axMethod","getInventoryGoodsList","start_time","end_time","then","getRenderRow","Array","isArray","column","property","scope","rowIndex","rowspanNum","computedSapn","colspanNum","rowspan","colspan","end","start","step","computedPurchasePrice","computedGrossProfit","zhRabio","renderShop","fullData","concat","avg_purchase_price","obj","forEach"],"mappings":"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","file":"js/chunk-89df1c2e.928d02bb.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',[_vm._v(\"销售管理\")]),_c('el-breadcrumb-item',{staticClass:\"attrbute\"},[_c('span',{on:{\"click\":_vm.goBack}},[_vm._v(\"商品底价策略\")])]),_c('el-breadcrumb-item',[_vm._v(_vm._s(_vm.$route.query && _vm.$route.query.id ? '修改' : '新增')+\"商品底价策略\")])],1),_c('div',{staticClass:\"editOrderbox\"},[_c('h5',{staticClass:\"baseTitle\"},[_vm._v(\"基本信息\")]),_c('el-form',{ref:\"params\",staticClass:\"demo-form-inline\",attrs:{\"inline\":true,\"model\":_vm.params}},[_c('el-form-item',{attrs:{\"label\":\"组织名称\",\"size\":\"mini\",\"prop\":\"company_id\",\"rules\":{required: true, message: \"请选择公司名称\",trigger: \"change\"}}},[_c('erpCompanyList',{attrs:{\"disabled\":_vm.editType === 2,\"fatherParams\":_vm.params},on:{\"change\":_vm.companyChange},model:{value:(_vm.params.company_id),callback:function ($$v) {_vm.$set(_vm.params, \"company_id\", $$v)},expression:\"params.company_id\"}})],1),_c('el-form-item',{attrs:{\"label\":\"策略名称\",\"size\":\"mini\",\"prop\":\"price_strategy_name\",\"rules\":{required: true, message: \"请填写策略名称\",trigger: \"change\"}}},[_c('el-input',{attrs:{\"maxlength\":\"100\",\"placeholder\":\"请输入策略名称\",\"clearable\":\"\"},model:{value:(_vm.params.price_strategy_name),callback:function ($$v) {_vm.$set(_vm.params, \"price_strategy_name\", $$v)},expression:\"params.price_strategy_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"品牌\",\"size\":\"mini\",\"prop\":\"brand_id\",\"rules\":{required: true, message: \"请选择品牌\",trigger: \"change\"}}},[_c('getBrand',{attrs:{\"fatherParams\":_vm.params},on:{\"change\":_vm.brandChange},model:{value:(_vm.params.brand_id),callback:function ($$v) {_vm.$set(_vm.params, \"brand_id\", $$v)},expression:\"params.brand_id\"}})],1),_c('el-form-item',{attrs:{\"label\":\"策略有效年月\",\"size\":\"mini\",\"prop\":\"effective_start_time\",\"rules\":{required: true, message: \"请选择策略有效年月\",trigger: \"change\"}}},[_c('el-date-picker',{attrs:{\"picker-options\":_vm.timeConfig,\"type\":\"monthrange\",\"value-format\":\"yyyy-MM\",\"range-separator\":\"至\",\"start-placeholder\":\"开始月份\",\"end-placeholder\":\"结束月份\"},on:{\"change\":_vm.policyMonthChange},model:{value:(_vm.policyMonth),callback:function ($$v) {_vm.policyMonth=$$v},expression:\"policyMonth\"}})],1)],1),_c('h5',{staticClass:\"baseTitle\"},[_vm._v(\"策略内容\")]),_c('div',{staticClass:\"add_delet\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.computedContent()}}},[_vm._v(\"计算\")]),_c('span',{staticStyle:{\"font-size\":\"14px\",\"color\":\"#7F7F7F\",\"vertical-align\":\"bottom\"}},[_vm._v(\" 提示：在策略内容表格中，输入数据后，请点击【计算】按钮，计算整个表格的数据 \")])],1),_c('div',{staticClass:\"table_container policyContent\"},[_c('xTable',{ref:\"content\",attrs:{\"xData\":_vm.infoTableData,\"cell-class-name\":_vm.cellClassName,\"editRules\":_vm.editRules,\"isEdit\":_vm.isEdit,\"tableColumn\":_vm.infoTableColumn,\"span-method\":_vm.spanMethod}})],1),_c('h5',{staticClass:\"baseTitle\"},[_vm._v(\"商品信息\")]),_c('div',{staticClass:\"add_delet\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.computedShopList}},[_vm._v(\"计算\")]),_c('span',{staticStyle:{\"font-size\":\"14px\",\"color\":\"#7F7F7F\",\"vertical-align\":\"bottom\"}},[_vm._v(\" 提示：在商品信息中，点击【计算】按钮后，计算整个表格的数据 \")])],1),_c('div',{staticClass:\"table_container\"},[_c('xTable',{ref:\"xTable\",attrs:{\"tableColumn\":_vm.tableColumn}})],1),_c('div',{staticClass:\"add_delet\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.sumbit}},[_vm._v(\"保存\")]),_c('el-button',{attrs:{\"plain\":\"\",\"size\":\"small\"},on:{\"click\":_vm.goBack}},[_vm._v(\"取消\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- 采购申请新增修改 -->\n  <div class='container'>\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item>销售管理</el-breadcrumb-item>\n      <el-breadcrumb-item class=\"attrbute\">\n        <span @click=\"goBack\">商品底价策略</span>\n      </el-breadcrumb-item>\n      <el-breadcrumb-item>{{$route.query && $route.query.id ? '修改' : '新增'}}商品底价策略</el-breadcrumb-item>\n    </el-breadcrumb>\n    <div class='editOrderbox'>\n      <h5 class=\"baseTitle\">基本信息</h5>\n      <el-form :inline=\"true\" :model=\"params\" class=\"demo-form-inline\" ref=\"params\">\n        <el-form-item label=\"组织名称\" size=\"mini\" prop=\"company_id\" :rules='{required: true, message: \"请选择公司名称\",trigger: \"change\"}'>\n          <erpCompanyList v-model='params.company_id' :disabled=\"editType === 2\" :fatherParams='params' @change=\"companyChange\" />\n        </el-form-item>\n        <el-form-item label=\"策略名称\" size=\"mini\" prop=\"price_strategy_name\" :rules='{required: true, message: \"请填写策略名称\",trigger: \"change\"}'>\n          <el-input v-model=\"params.price_strategy_name\" maxlength=\"100\" placeholder=\"请输入策略名称\" clearable></el-input>\n        </el-form-item>\n        <el-form-item label=\"品牌\" size=\"mini\" prop=\"brand_id\" :rules='{required: true, message: \"请选择品牌\",trigger: \"change\"}'>\n          <getBrand v-model='params.brand_id' :fatherParams='params' @change=\"brandChange\" />\n        </el-form-item>\n        <el-form-item label=\"策略有效年月\" size=\"mini\" prop=\"effective_start_time\" :rules='{required: true, message: \"请选择策略有效年月\",trigger: \"change\"}'>\n          <el-date-picker v-model=\"policyMonth\" :picker-options='timeConfig' @change=\"policyMonthChange\" type=\"monthrange\" value-format='yyyy-MM' range-separator=\"至\" start-placeholder=\"开始月份\" end-placeholder=\"结束月份\"></el-date-picker>\n        </el-form-item>\n      </el-form>\n      <h5 class=\"baseTitle\">策略内容</h5>\n      <div class=\"add_delet\">\n        <el-button type=\"primary\" size=\"small\" @click=\"computedContent()\">计算</el-button>\n        <span style='font-size: 14px;color:#7F7F7F;vertical-align:bottom;'>\n          提示：在策略内容表格中，输入数据后，请点击【计算】按钮，计算整个表格的数据\n        </span>\n      </div>\n      <div class=\"table_container policyContent\">\n        <xTable :xData='infoTableData' ref='content' :cell-class-name='cellClassName' :editRules='editRules' :isEdit='isEdit' :tableColumn='infoTableColumn' :span-method='spanMethod' />\n      </div>\n      <h5 class=\"baseTitle\">商品信息</h5>\n      <div class=\"add_delet\">\n        <el-button type=\"primary\" size=\"small\" @click=\"computedShopList\">计算</el-button>\n        <span style='font-size: 14px;color:#7F7F7F;vertical-align:bottom;'>\n          提示：在商品信息中，点击【计算】按钮后，计算整个表格的数据\n        </span>\n      </div>\n      <div class=\"table_container\">\n        <xTable ref='xTable' :tableColumn='tableColumn' />\n      </div>\n\n      <!-- <div>\n        <div style='margin-bottom: 5px;'>\n          <el-input v-model=\"params.remark\">\n            <template slot=\"prepend\">单据备注</template>\n          </el-input>\n        </div>\n        <p class=\"operationInformation\">\n          <span>创建人：{{params.add_user_name}}</span>\n          <span>创建时间：{{params.add_time_name}}</span>\n          <span>修改人：{{params.update_user_name||\"\"}}</span>\n          <span>修改时间：{{params.update_time_name||\"\"}}</span>\n        </p>\n      </div> -->\n      <div class=\"add_delet\">\n        <el-button type=\"primary\" @click=\"sumbit\" size=\"small\">保存</el-button>\n        <el-button plain @click=\"goBack\" size=\"small\">取消</el-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { paramsModule, tableHead } from \"./config/shoplowPriceAdd\";\nexport default {\n  name: \"shoplowPrice/shoplowPriceAdd\",\n  mixins: [tableHead],\n  data() {\n    return {\n      currentYear: \"\",\n      contentDisabled: true, // 策略禁止提交\n      shopDisabled: true, // 商品禁止提交\n      timeConfig: {\n        onPick: time => {\n          if (time.minDate) {\n            this.currentYear = time.minDate.getFullYear();\n          }\n        },\n        disabledDate: time => {\n          if (this.currentYear && this.currentYear !== time.getFullYear()) {\n            return true;\n          }\n        }\n      },\n      policyMonth: [],\n      params: this.$publicFution.deepCopy(paramsModule),\n      editType: 1 // 操作类型 1是新增  2是编辑\n    };\n  },\n  methods: {\n    computedShopList() {\n      var tableData = this.$refs.xTable\n        ._proxy(\"getTableData\")\n        .fullData.concat([]);\n      tableData = tableData.map(val => {\n        return this.computedShop(val);\n      });\n      this.$refs.xTable._proxy(\"loadData\", tableData);\n      this.shopDisabled = false;\n    },\n    // 获取价格\n    getNumber(val) {\n      return isNaN(Number(val)) ? 0 : Number(val);\n    },\n    // 计算商品列表价格\n    // 计算底价毛利 （（固定费用+仓储费用+物流费用+资金成本）+采购金额*（比率（总部管理费）+比率（订单通奖励）+比率（税前利润））/（1-1/1.13*13%*1.12-（比率（总部管理费）+比率（订单通奖励）+比率（税前利润）））\n    computedShop(row) {\n      row.purchase_price = (\n        this.getNumber(row.factory_annual_task) *\n        this.getNumber(row.avg_purchase_price)\n      ).toFixed(2); // 计算采购价格\n      row.gross_profit = (\n        (this.getNumber(row.manpower_price) +\n          this.getNumber(row.travel_price) +\n          this.getNumber(row.trainning_price) +\n          this.getNumber(row.depreciation_price) +\n          this.getNumber(row.warehousing_price) +\n          this.getNumber(row.logistics_price) +\n          this.getNumber(row.capital_price) +\n          this.getNumber(row.purchase_price) * (0.01 + 0.01 + 0.02)) /\n        (1 - (1 / 1.13) * 0.13 * 1.12 - (0.01 + 0.01 + 0.02))\n      ).toFixed(2); // 计算底价毛利\n      row.sales_price = (\n        this.getNumber(row.gross_profit) + this.getNumber(row.purchase_price)\n      ).toFixed(2); // 计算销售价格\n      row.headquarters_management_price = (\n        this.getNumber(row.sales_price) * 0.01\n      ).toFixed(2); // 总部管理费\n      row.order_pass_price = (this.getNumber(row.sales_price) * 0.01).toFixed(\n        2\n      ); // 订单通奖励\n      // 综合税金 = 销售金额 * （ 低价毛利 / 销售金额 / 1.13 * 0.1456 ）\n      // toFixed(4) 的目的是为了计算结果与页面呈现保持一致\n      if (this.getNumber(row.sales_price) !== 0) {\n        row.comprehensive_tax_price = (this.getNumber(row.sales_price) * (((this.getNumber(row.gross_profit) / this.getNumber(row.sales_price)).toFixed(4) / 1.13) *  0.1456).toFixed(4)).toFixed(2); // 综合税金\n      } else {\n        row.comprehensive_tax_price = 0;\n      }\n      row.profit_before_tax = (this.getNumber(row.sales_price) * 0.02).toFixed(\n        2\n      ); // 税前利润\n      if (this.getNumber(row.factory_annual_task) !== 0) {\n        row.sales_gross_profit = (\n          this.getNumber(row.sales_price) /\n          this.getNumber(row.factory_annual_task)\n        ).toFixed(2); // 销售底价金额\n      } else {\n        row.sales_gross_profit = 0;\n      }\n      return row;\n    },\n\n    // 计算合计\n    sumbit() {\n      this.$refs.params.validate(valid => {\n        if (valid) {\n          var tableBox = this.$refs.xTable\n            ._proxy(\"getTableData\")\n            .fullData.concat([]);\n          if (tableBox.length === 0) {\n            this.$message.warning(\"请完善商品信息表格！\");\n            return;\n          }\n          if (this.contentDisabled) {\n            this.$message.warning(\n              \"“策略内容表格中，仍有需要计算数据，请点击【计算】按钮，重新计算后，才能保存单据！”\"\n            );\n            return;\n          }\n          if (this.shopDisabled) {\n            this.$message.warning(\n              \"商品信息表格中，仍有需要计算数据，请点击【计算】按钮，重新计算后，才能保存单据！\"\n            );\n            return;\n          }\n          var params = Object.assign({}, this.params, this.getRenderRow());\n          params.effective_start_time += \"-01\";\n          params.effective_end_time += \"-01\";\n          params.goods_json = JSON.stringify(tableBox);\n          var api = \"addPriceStrategy\";\n          if (this.$route.query && this.$route.query.id) {\n            api = \"editPriceStrategy\";\n          }\n          this.$axios({\n            method: \"post\",\n            url: this.$api[api],\n            data: params\n          }).then(({ data }) => {\n            if (data.code === 200) {\n              this.$message.success(data.msg);\n              this.goBack();\n            }\n          });\n        }\n      });\n    },\n    goBack() {\n      this.$publicFution.goPage(this.$route.query && this.$route.query.id);\n      this.$router.push(\"/purchase/shoplowPrice\");\n    }\n  },\n  mounted() {\n    if (this.$route.query && this.$route.query.id) {\n      this.editType = 2;\n      this.$axios({\n        method: \"get\",\n        params: { price_strategy_id: this.$route.query.id },\n        url: this.$api.getPriceStrategyInfo\n      }).then(({ data }) => {\n        if (data.code === 200) {\n          this.params = data.data.info;\n          for (var i in this.tableConfig) {\n            this.infoTableData[i].price = this.params[\n              this.tableConfig[i].value\n            ];\n          }\n          this.computedContent(true);\n          this.policyMonth.push(this.params.effective_start_time.slice(0, 7));\n          this.policyMonth.push(this.params.effective_end_time.slice(0, 7));\n          this.params.effective_start_time = this.params.effective_start_time.slice(\n            0,\n            7\n          );\n          this.params.effective_end_time = this.params.effective_end_time.slice(\n            0,\n            7\n          );\n          this.contentDisabled = false; // 策略禁止提交\n          this.shopDisabled = false; // 商品禁止提交\n          this.$refs.xTable._proxy(\"loadData\", data.data.goods_list);\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style scoped lang='less'>\n.policyContent {\n  /deep/ .vxe-table .vxe-body--row.row--current {\n    background-color: white !important;\n  }\n}\n</style>","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shoplowPriceAdd.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shoplowPriceAdd.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./shoplowPriceAdd.vue?vue&type=template&id=37cd120e&scoped=true&\"\nimport script from \"./shoplowPriceAdd.vue?vue&type=script&lang=js&\"\nexport * from \"./shoplowPriceAdd.vue?vue&type=script&lang=js&\"\nimport style0 from \"./shoplowPriceAdd.vue?vue&type=style&index=0&id=37cd120e&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"37cd120e\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shoplowPriceAdd.vue?vue&type=style&index=0&id=37cd120e&scoped=true&lang=less&\"","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar thisNumberValue = require('../internals/this-number-value');\nvar $repeat = require('../internals/string-repeat');\nvar fails = require('../internals/fails');\n\nvar RangeError = global.RangeError;\nvar String = global.String;\nvar floor = Math.floor;\nvar repeat = uncurryThis($repeat);\nvar stringSlice = uncurryThis(''.slice);\nvar un$ToFixed = uncurryThis(1.0.toFixed);\n\nvar pow = function (x, n, acc) {\n  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);\n};\n\nvar log = function (x) {\n  var n = 0;\n  var x2 = x;\n  while (x2 >= 4096) {\n    n += 12;\n    x2 /= 4096;\n  }\n  while (x2 >= 2) {\n    n += 1;\n    x2 /= 2;\n  } return n;\n};\n\nvar multiply = function (data, n, c) {\n  var index = -1;\n  var c2 = c;\n  while (++index < 6) {\n    c2 += n * data[index];\n    data[index] = c2 % 1e7;\n    c2 = floor(c2 / 1e7);\n  }\n};\n\nvar divide = function (data, n) {\n  var index = 6;\n  var c = 0;\n  while (--index >= 0) {\n    c += data[index];\n    data[index] = floor(c / n);\n    c = (c % n) * 1e7;\n  }\n};\n\nvar dataToString = function (data) {\n  var index = 6;\n  var s = '';\n  while (--index >= 0) {\n    if (s !== '' || index === 0 || data[index] !== 0) {\n      var t = String(data[index]);\n      s = s === '' ? t : s + repeat('0', 7 - t.length) + t;\n    }\n  } return s;\n};\n\nvar FORCED = fails(function () {\n  return un$ToFixed(0.00008, 3) !== '0.000' ||\n    un$ToFixed(0.9, 0) !== '1' ||\n    un$ToFixed(1.255, 2) !== '1.25' ||\n    un$ToFixed(1000000000000000128.0, 0) !== '1000000000000000128';\n}) || !fails(function () {\n  // V8 ~ Android 4.3-\n  un$ToFixed({});\n});\n\n// `Number.prototype.toFixed` method\n// https://tc39.es/ecma262/#sec-number.prototype.tofixed\n$({ target: 'Number', proto: true, forced: FORCED }, {\n  toFixed: function toFixed(fractionDigits) {\n    var number = thisNumberValue(this);\n    var fractDigits = toIntegerOrInfinity(fractionDigits);\n    var data = [0, 0, 0, 0, 0, 0];\n    var sign = '';\n    var result = '0';\n    var e, z, j, k;\n\n    if (fractDigits < 0 || fractDigits > 20) throw RangeError('Incorrect fraction digits');\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (number != number) return 'NaN';\n    if (number <= -1e21 || number >= 1e21) return String(number);\n    if (number < 0) {\n      sign = '-';\n      number = -number;\n    }\n    if (number > 1e-21) {\n      e = log(number * pow(2, 69, 1)) - 69;\n      z = e < 0 ? number * pow(2, -e, 1) : number / pow(2, e, 1);\n      z *= 0x10000000000000;\n      e = 52 - e;\n      if (e > 0) {\n        multiply(data, 0, z);\n        j = fractDigits;\n        while (j >= 7) {\n          multiply(data, 1e7, 0);\n          j -= 7;\n        }\n        multiply(data, pow(10, j, 1), 0);\n        j = e - 1;\n        while (j >= 23) {\n          divide(data, 1 << 23);\n          j -= 23;\n        }\n        divide(data, 1 << j);\n        multiply(data, 1, 1);\n        divide(data, 2);\n        result = dataToString(data);\n      } else {\n        multiply(data, 0, z);\n        multiply(data, 1 << -e, 0);\n        result = dataToString(data) + repeat('0', fractDigits);\n      }\n    }\n    if (fractDigits > 0) {\n      k = result.length;\n      result = sign + (k <= fractDigits\n        ? '0.' + repeat('0', fractDigits - k) + result\n        : stringSlice(result, 0, k - fractDigits) + '.' + stringSlice(result, k - fractDigits));\n    } else {\n      result = sign + result;\n    } return result;\n  }\n});\n","export const policyContent = [\n  {\n    type: '采购',\n    project: '工厂年度任务',\n    unit_name: '条',\n    price: '',\n    computePriceInfo: '手动填写',\n    ratio: '不适用',\n    ratioCycle: '不适用'\n  },\n  {\n    type: '采购',\n    project: '平均含税进价',\n    unit_name: '元/条',\n    price: '',\n    computePriceInfo: '手动填写',\n    ratio: '不适用',\n    ratioCycle: '不适用'\n  },\n  {\n    type: '采购',\n    project: '采购金额',\n    unit_name: '元',\n    price: '',\n    computePriceInfo: '工厂年度任务*平均含税进价',\n    ratio: '不适用',\n    ratioCycle: '不适用'\n  },\n  {\n    type: '固定费用',\n    project: '人力费用',\n    unit_name: '元',\n    price: '',\n    computePriceInfo: '手动填写',\n    ratio: '0.0',\n    ratioCycle: '人力费用/销售金额'\n  },\n  {\n    type: '固定费用',\n    project: '差旅费',\n    unit_name: '元',\n    price: '',\n    computePriceInfo: '手动填写',\n    ratio: '0.0',\n    ratioCycle: '差旅费/销售金额'\n  },\n  {\n    type: '固定费用',\n    project: '培训费',\n    unit_name: '元',\n    price: '',\n    computePriceInfo: '手动填写',\n    ratio: '0.0',\n    ratioCycle: '培训费/销售金额'\n  },\n  {\n    type: '固定费用',\n    project: '模具折旧',\n    unit_name: '元',\n    price: '',\n    computePriceInfo: '手动填写',\n    ratio: '0.0',\n    ratioCycle: '模具折旧/销售金额'\n  },\n  {\n    type: '变动费用',\n    project: '仓储费用',\n    unit_name: '元',\n    price: '',\n    computePriceInfo: '手动填写',\n    ratio: '0.0',\n    ratioCycle: '仓储费用/销售金额'\n  },\n  {\n    type: '变动费用',\n    project: '物流费用',\n    unit_name: '元',\n    price: '',\n    computePriceInfo: '手动填写',\n    ratio: '0.0',\n    ratioCycle: '物流费用/销售金额'\n  },\n  {\n    type: '变动费用',\n    project: '资金成本',\n    unit_name: '元',\n    price: '',\n    computePriceInfo: '手动填写',\n    ratio: '0.0',\n    ratioCycle: '资金成本/销售金额'\n  },\n  {\n    type: '变动费用',\n    project: '总部管理费',\n    unit_name: '元',\n    price: '',\n    computePriceInfo: '销售金额*比率',\n    ratio: '固定1.0',\n    ratioCycle: '固定值'\n  },\n  {\n    type: '变动费用',\n    project: '订单通奖励',\n    unit_name: '元',\n    price: '',\n    computePriceInfo: '销售金额*比率',\n    ratio: '固定1.0',\n    ratioCycle: '固定值'\n  },\n  {\n    type: '变动费用',\n    project: '综合税金',\n    unit_name: '元',\n    price: '',\n    computePriceInfo: '销售金额*比率',\n    ratio: '实际0.0',\n    ratioCycle: '固比率（底价毛利）/1.13*0.1456定值'\n  },\n  {\n    type: '税前利润',\n    project: '税前利润',\n    unit_name: '元',\n    price: '',\n    computePriceInfo: '销售金额*比率',\n    ratio: '固定2.0',\n    ratioCycle: '固定值'\n  },\n  {\n    type: '销售',\n    project: '销售金额',\n    unit_name: '元',\n    price: '',\n    computePriceInfo: '采购金额+底价毛利',\n    ratio: '不适用',\n    ratioCycle: '不适用'\n  },\n  {\n    type: '销售',\n    project: '销售底价毛利金额',\n    unit_name: '元',\n    price: '',\n    computePriceInfo: '（（固定费用+仓储费用+物流费用+资金成本）+采购金额*（比率（总部管理费）+比率（订单通奖励）+比率（税前利润））/（1-1/1.13*13%*1.12-（比率（总部管理费）+比率（订单通奖励）+比率（税前利润）））',\n    ratio: 0.0,\n    ratioCycle: '底价毛利/销售金额'\n  },\n  {\n    type: '销售',\n    project: '平均含税售价',\n    unit_name: '元/条',\n    price: '',\n    computePriceInfo: '销售金额/工厂年度任务',\n    ratio: '不适用',\n    ratioCycle: '不适用'\n  },\n]\n\nexport const tableConfig = {\n  0: {\n    value: 'factory_annual_task',\n    isEdit: true,\n    title: '工厂年度任务'\n  },\n  1: {\n    value: 'avg_purchase_price',\n    isEdit: true,\n    title: '平均含税进价'\n  },\n  2: {\n    value: 'purchase_price',\n    isEdit: false,\n    title: '采购金额'\n  },\n  3: {\n    value: 'manpower_price',\n    isEdit: true,\n    title: '人力费用'\n  },\n  4: {\n    value: 'travel_price',\n    isEdit: true,\n    title: '差旅费'\n  },\n  5: {\n    value: 'trainning_price',\n    isEdit: true,\n    title: '培训费'\n  },\n  6: {\n    value: 'depreciation_price',\n    isEdit: true,\n    title: '模具折旧'\n  },\n  7: {\n    value: 'warehousing_price',\n    isEdit: true,\n    title: '仓储费用'\n  },\n  8: {\n    value: 'logistics_price',\n    isEdit: true,\n    title: '物流费用'\n  },\n  9: {\n    value: 'capital_price',\n    isEdit: true,\n    title: '资金成本'\n  },\n  10: {\n    value: 'headquarters_management_price',\n    isEdit: false,\n    title: '总部管理费'\n  },\n  11: {\n    value: 'order_pass_price',\n    isEdit: false,\n    title: '订单通奖励'\n  },\n  12: {\n    value: 'comprehensive_tax_price',\n    isEdit: false,\n    title: '综合税金'\n  },\n  13: {\n    value: 'profit_before_tax',\n    isEdit: false,\n    title: '税前利润'\n  },\n  14: {\n    value: 'sales_price',\n    isEdit: false,\n    title: '销售金额'\n  },\n  15: {\n    value: 'gross_profit',\n    isEdit: false,\n    title: '底价毛利'\n  },\n  16: {\n    value: 'sales_gross_profit',\n    isEdit: false,\n    title: '平均含税售价'\n  },\n}","import { policyContent, tableConfig } from './policyContent'\n// params 模板\nexport const paramsModule = {\n  company_id: localStorage.getItem(\"company_id\"),// int(11) unsigned NOT NULL DEFAULT '0' COMMENT '集采公司id（冗余字段，目前只有scm下集采公司）',\n  company_name: localStorage.getItem(\"company_name\"),// varchar(100) NOT NULL DEFAULT '' COMMENT '集采公司名称（冗余字段，目前只有scm下集采公司）',\n  price_strategy_name: '',\n  effective_start_time: '',\n  effective_end_time: '',\n}\nexport const sumbitParams = {\n  purchase_in_storage_id: '',\n  company_id: localStorage.getItem(\"purchase_center_company_id\"),\n  purchase_order_id: '',\n  purchase_order_sn: '',\n  supplier_id: '',\n  payment_method: '',\n  transaction_type: '',\n  remark: ''\n}\n// 渲染行数据模板\nexport const rowModule = {\n\n}\nexport const tableHead = {\n  data() {\n    return {\n      editRules: {\n        price: [\n          { required: true, message: '数量输入请在0-99999999之间' }\n        ]\n      },\n      infoTableData: this.$publicFution.deepCopy(policyContent), // 策略内容表格数据\n      tableConfig: tableConfig,// 策略内容配置\n      infoTableColumn: [//策略内容\n        {\n          title: '类型',\n          field: 'type',\n          width: 200\n        },\n        {\n          title: '项目',\n          field: 'project',\n          width: 200\n        },\n        {\n          title: '单位',\n          field: 'unit_name',\n          width: 80\n        },\n        {\n          title: '金额',\n          field: 'price',\n          headerAlign: \"right\", // 表头对齐方式\n          align: \"right\", // 列对齐方式\n          width: 100,\n          editRender: {\n            name: 'Vinput',\n            autoselect: true,\n            formatter: 'Positive',\n            getOutSlots: ({ $rowIndex }) => {\n              var a = ''\n              if (this.tableConfig[$rowIndex].isEdit) {\n                a = [<i style='margin-left: 2px;color:#5CADFF' class='el-icon-edit'></i>]\n              }\n              return a\n            },\n            events: {\n              change: () => {\n                this.contentDisabled = true\n              }\n            }\n          }\n        },\n        {\n          title: '金额计算说明',\n          field: 'computePriceInfo',\n          width: 300,\n        },\n        {\n          title: '比率',\n          field: 'ratio',\n          headerAlign: \"right\", // 表头对齐方式\n          align: \"right\", // 列对齐方式\n          width: 120,\n          editRender: {\n            name: 'Vinput',\n            getOutSlots: ({ row }) => {\n              if (row.ratio !== '不适用') {\n                return [\n                  <span>%</span>\n                ]\n              }\n            }\n          }\n        },\n        {\n          title: '比率计算说明',\n          field: 'ratioCycle',\n        }\n      ],\n      tableColumn: [// 商品信息\n        {\n          title: '商品类型',\n          field: 'goods_type_name',\n          width: 100\n        },\n        {\n          title: '品牌',\n          field: 'unit_name',\n          width: 100\n        },\n        {\n          title: '商品编号',\n          field: 'goods_id',\n          width: 100\n        },\n        {\n          title: '商品名称',\n          field: 'goods_name',\n          width: 400\n        },\n        {\n          title: '工厂代码',\n          field: 'factory_code',\n          width: 100\n        },\n        {\n          title: '单位',\n          field: 'unit_name',\n          width: 100\n        },\n        {\n          title: '采购',\n          width: 100,\n          children: [\n            {\n              title: '工厂年度任务',\n              field: 'factory_annual_task',\n              width: 100\n            },\n            {\n              title: '平均进货价',\n              field: 'avg_purchase_price',\n              editRender: {\n                name: 'Vinput',\n                formatter: 'Positive',\n                events: {\n                  change: ({ row }) => {\n                    this.shopDisabled = true\n                    row.remark = '手动修改进价'\n                  }\n                }\n              },\n              width: 100\n            },\n            {\n              title: '采购金额',\n              field: 'purchase_price',\n              width: 100\n            },\n          ]\n        },\n        {\n          title: '固定费用',\n          width: 100,\n          children: [\n            {\n              title: '人力费用',\n              field: 'manpower_price',\n              width: 100\n            },\n            {\n              title: '差旅费',\n              field: 'travel_price',\n              width: 100\n            },\n            {\n              title: '培训费',\n              field: 'trainning_price',\n              width: 100\n            },\n            {\n              title: '模具折旧',\n              field: 'depreciation_price',\n              width: 100\n            },\n          ]\n        },\n        {\n          title: '变动费用',\n          width: 100,\n          children: [\n            {\n              title: '仓储费用',\n              field: 'warehousing_price',\n              width: 100\n            },\n            {\n              title: '物流费用',\n              field: 'logistics_price',\n              width: 100\n            },\n            {\n              title: '资金成本',\n              field: 'capital_price',\n              width: 100\n            },\n            {\n              title: '总部管理费',\n              field: 'headquarters_management_price',\n              width: 100\n            },\n            {\n              title: '订单通奖励',\n              field: 'order_pass_price',\n              width: 100\n            },\n            {\n              title: '综合税金',\n              field: 'comprehensive_tax_price',\n              width: 100\n            }\n          ]\n        },\n        {\n          title: '税前利润',\n          field: 'profit_before_tax',\n          width: 100\n        },\n        {\n          title: '销售',\n          width: 100,\n          children: [\n            {\n              title: '销售金额',\n              field: 'sales_price',\n              width: 100\n            },\n            {\n              title: '底价毛利',\n              field: 'gross_profit',\n              width: 100\n            },\n            {\n              title: '销售底价金额',\n              field: 'sales_gross_profit',\n              width: 100\n            },\n          ]\n        },\n        {\n          title: '备注',\n          field: 'remark',\n          width: 100\n        }\n      ]\n    }\n  },\n  methods: {\n    // 获取到指定的row价格\n    getRowPrice(key) {\n      for (var i in this.tableConfig) {\n        if (this.tableConfig[i].value === key) {\n          return isNaN(Number(this.infoTableData[i].price))\n            ? 0\n            : Number(this.infoTableData[i].price);\n        }\n      }\n    },\n    // 获取到指定的row\n    getRow(key) {\n      for (var i in this.tableConfig) {\n        if (this.tableConfig[i].value === key) {\n          return this.infoTableData[i];\n        }\n      }\n    },\n    // 品牌改变\n    brandChange(val) {\n      if (val.brand_id) {\n        this.$axMethod\n          .getInventoryGoodsList({\n            company_id: this.params.company_id,\n            brand_id: val.brand_id,\n            start_time: this.params.effective_start_time ? this.params.effective_start_time += \"-01\" : '',\n            end_time: this.params.effective_end_time ? this.params.effective_end_time += \"-01\" : ''\n          })\n          .then(({ data }) => {\n            this.$refs.xTable._proxy(\"loadData\", data.data);\n          });\n      }\n    },\n    // 渲染商品信息\n    getRenderRow() {\n      var row = {};\n      for (var i in this.tableConfig) {\n        row[this.tableConfig[i].value] = this.getRowPrice(\n          this.tableConfig[i].value\n        );\n      }\n      return row;\n    },\n    // 有效期改变\n    policyMonthChange(val) {\n      this.currentYear = null\n      if (Array.isArray(val)) {\n        this.params.effective_start_time = val[0];\n        this.params.effective_end_time = val[1];\n      } else {\n        this.params.effective_start_time = \"\";\n        this.params.effective_end_time = \"\";\n      }\n      this.brandChange(this.params)\n    },\n    isEdit({ column, $rowIndex }) {\n      if (!this.tableConfig[$rowIndex].isEdit) {\n        return false\n      }\n      if (column.property === 'ratio') {\n        return false\n      }\n      return true\n    },\n    cellClassName({ row, column }) {\n      if (row.project === '销售底价毛利金额' && column.property === 'computePriceInfo') {\n        return 'vxe-nowrap'\n      }\n    },\n    // 合并单元格\n    spanMethod(scope) {\n      var { row, rowIndex, column, data } = scope;\n      if (\n        column.property === \"type\" ||\n        column.property === \"ratio\" ||\n        column.property === \"ratioCycle\"\n      ) {\n        if (\n          (data[rowIndex - 1] &&\n            data[rowIndex - 1][column.property] !== row[column.property]) ||\n          rowIndex === 0\n        ) {\n          var rowspanNum = this.computedSapn(scope, (column.property === \"ratio\" || column.property === 'ratioCycle') ? 3 : null);\n          var colspanNum = 1;\n          if (row.type === row.project && column.property === \"type\") {\n            colspanNum = 2;\n          }\n          return { rowspan: rowspanNum, colspan: colspanNum };\n        } else {\n          var rowspan = 0\n          if ((column.property === \"ratio\" ||\n            column.property === \"ratioCycle\") && rowIndex > 2) {\n            rowspan = 1\n          }\n          return { rowspan: rowspan, colspan: 1 };\n        }\n      }\n      // (column.property === \"ratio\" || column.property === 'ratioCycle')\n      if (column.property === \"project\") {\n        // 是否是type 一行\n        if (row.type === row.project) {\n          return { rowspan: 0, colspan: 0 };\n        }\n      }\n      return { rowspan: 1, colspan: 1 };\n    },\n    // 计算合并单元行\n    computedSapn({ row, rowIndex, data, column }, end) {\n      var start = 1;\n      var length = end ? end : data.length\n      for (var i = rowIndex + 1; i < length; i++) {\n        if (data[i][column.property] === row[column.property]) {\n          start++;\n        } else {\n          return start;\n        }\n      }\n      return start;\n    },\n    // 计算策略内容\n    computedContent(step) {\n      // 计算采购单价\n      this.computedPurchasePrice();\n      // 计算底价毛利\n      this.computedGrossProfit();\n      this.getRow(\"headquarters_management_price\").price = (\n        this.getRowPrice(\"sales_price\") * 0.01\n      ).toFixed(2); // 总部管理费\n      this.getRow(\"order_pass_price\").price = (\n        this.getRowPrice(\"sales_price\") * 0.01\n      ).toFixed(2); // 订单通奖励\n      var zhRabio = (this.getRow(\"gross_profit\").ratio / 100 / 1.13) * 0.1456; // 综合税金的比率\n      this.getRow(\"comprehensive_tax_price\").ratio = (zhRabio * 100).toFixed(2);\n      this.getRow(\"comprehensive_tax_price\").price = (\n        this.getRowPrice(\"sales_price\") * zhRabio.toFixed(4)\n      ).toFixed(2); // 综合税金\n      this.getRow(\"profit_before_tax\").price = (\n        this.getRowPrice(\"sales_price\") * 0.02\n      ).toFixed(2); // 税前利润\n      if (this.getRowPrice(\"factory_annual_task\") !== 0) {\n        this.getRow(\"sales_gross_profit\").price = (\n          this.getRowPrice(\"sales_price\") /\n          this.getRowPrice(\"factory_annual_task\")\n        ).toFixed(2); // 平均含税售价\n      } else {\n        this.getRow(\"sales_gross_profit\").price = 0;\n      }\n      // 算比率\n      if (this.getRowPrice(\"sales_price\") !== 0) {\n        this.getRow(\"manpower_price\").ratio = (\n          (this.getRowPrice(\"manpower_price\") /\n            this.getRowPrice(\"sales_price\")) *\n          100\n        ).toFixed(2); // 人力比率\n        this.getRow(\"travel_price\").ratio = (\n          (this.getRowPrice(\"travel_price\") / this.getRowPrice(\"sales_price\")) *\n          100\n        ).toFixed(2); // 差率费\n        this.getRow(\"trainning_price\").ratio = (\n          (this.getRowPrice(\"trainning_price\") /\n            this.getRowPrice(\"sales_price\")) *\n          100\n        ).toFixed(2); // 培训费\n        this.getRow(\"depreciation_price\").ratio = (\n          (this.getRowPrice(\"depreciation_price\") /\n            this.getRowPrice(\"sales_price\")) *\n          100\n        ).toFixed(2); // 模具折旧比率\n        this.getRow(\"warehousing_price\").ratio = (\n          (this.getRowPrice(\"warehousing_price\") /\n            this.getRowPrice(\"sales_price\")) *\n          100\n        ).toFixed(2); // 仓储费用比率\n        this.getRow(\"logistics_price\").ratio = (\n          (this.getRowPrice(\"logistics_price\") /\n            this.getRowPrice(\"sales_price\")) *\n          100\n        ).toFixed(2); // 物流比率\n        this.getRow(\"capital_price\").ratio = (\n          (this.getRowPrice(\"capital_price\") /\n            this.getRowPrice(\"sales_price\")) *\n          100\n        ).toFixed(2); // 资金成本比率\n      } else {\n        this.getRow(\"manpower_price\").ratio = 0;\n        this.getRow(\"travel_price\").ratio = 0;\n        this.getRow(\"trainning_price\").ratio = 0;\n        this.getRow(\"depreciation_price\").ratio = 0;\n        this.getRow(\"warehousing_price\").ratio = 0;\n        this.getRow(\"logistics_price\").ratio = 0;\n        this.getRow(\"capital_price\").ratio = 0;\n      }\n      if (step !== true) {\n        this.renderShop();\n      }\n      this.contentDisabled = false\n      this.shopDisabled = true\n    },\n    // 渲染商品信息\n    renderShop() {\n      var tableData = this.$refs.xTable\n        ._proxy(\"getTableData\")\n        .fullData.concat([]);\n      var length = tableData.length;\n      var row = this.getRenderRow();\n      delete row.avg_purchase_price;\n      var obj = {};\n      [\n        // 列表中工厂年度任务、人力费用、差旅费、培训费、模具折旧、仓储费用、物流费用、资金成本，这些字段根据“策略内容”列表中这些字段的金额，按照该品牌下商品编号的数量，拆分到每个商品上\n        // 金额除以数量\n        \"manpower_price\",\n        \"travel_price\",\n        \"trainning_price\",\n        \"depreciation_price\",\n        \"warehousing_price\",\n        \"logistics_price\",\n        \"capital_price\",\n        \"factory_annual_task\"\n      ].forEach(val => {\n        obj[val] = (row[val] / length).toFixed(2);\n      });\n      tableData = tableData.map(val => {\n        var result = Object.assign({}, val, obj);\n        return result;\n      });\n      this.$refs.xTable._proxy(\"loadData\", tableData);\n    },\n    computedPurchasePrice() {\n      var result = (\n        this.getRowPrice(\"factory_annual_task\") *\n        this.getRowPrice(\"avg_purchase_price\")\n      ).toFixed(2);\n      this.getRow(\"purchase_price\").price = result;\n    },\n    // 计算底价毛利 （（固定费用+仓储费用+物流费用+资金成本）+采购金额*（比率（总部管理费）+比率（订单通奖励）+比率（税前利润））/（1-1/1.13*13%*1.12-（比率（总部管理费）+比率（订单通奖励）+比率（税前利润）））\n    computedGrossProfit() {\n      var result =\n        (this.getRowPrice(\"manpower_price\") +\n          this.getRowPrice(\"travel_price\") +\n          this.getRowPrice(\"trainning_price\") +\n          this.getRowPrice(\"depreciation_price\") +\n          this.getRowPrice(\"warehousing_price\") +\n          this.getRowPrice(\"logistics_price\") +\n          this.getRowPrice(\"capital_price\") +\n          (this.getRowPrice(\"purchase_price\") * (0.01 + 0.01 + 0.02))) /\n        (1 - (1 / 1.13) * 0.13 * 1.12 - (0.01 + 0.01 + 0.02));\n      result = result.toFixed(2);\n      this.getRow(\"gross_profit\").price = result;\n      this.getRow(\"sales_price\").price = (\n        this.getRowPrice(\"purchase_price\") + this.getRowPrice(\"gross_profit\")\n      ).toFixed(2);\n      if (this.getRowPrice(\"sales_price\") !== 0) {\n        this.getRow(\"gross_profit\").ratio = (\n          (this.getRowPrice(\"gross_profit\") / this.getRowPrice(\"sales_price\")) *\n          100\n        ).toFixed(2); // 计算销售低价比率\n      }\n    },\n  }\n}"],"sourceRoot":""}