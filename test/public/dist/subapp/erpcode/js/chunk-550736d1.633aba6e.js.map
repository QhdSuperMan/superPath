{"version":3,"sources":["webpack://erpcode-[name]/./src/components/element/inventory/inventoryWarning/stockEarlyWarningMinxin.js","webpack://erpcode-[name]/./src/components/element/inventory/inventoryWarning/stockEarlyWarningQuery.vue?4608","webpack://erpcode-[name]/./src/components/element/inventory/inventoryWarning/stockEarlyWarningQuery.js","webpack://erpcode-[name]/src/components/element/inventory/inventoryWarning/stockEarlyWarningQuery.vue","webpack://erpcode-[name]/./src/components/element/inventory/inventoryWarning/stockEarlyWarningQuery.vue?63e3","webpack://erpcode-[name]/./src/components/element/inventory/inventoryWarning/stockEarlyWarningQuery.vue","webpack://erpcode-[name]/./src/components/element/inventory/inventoryWarning/stockEarlyWarningQuery.vue?ecfa"],"names":["mixin","data","downLoading","goodsList","computed","allWarehouseList","_warehouseList","this","warehouseList","length","unshift","relation_warehouse_id","warehouse_id","warehouse_name","methods","moduleHandleSizeChange","val","Object","assign","searchParams","params","per_page","page","getTableList","moduleHandleCurrentChange","companyChange","$set","messageTip","msg","type","undefined","_messageBox","forEach","item","close","_message","$message","message","push","messageBox","title","tipMsg","conBtnText","canBtnText","cancelMsg","callBack","$confirm","confirmButtonText","cancelButtonText","showCancelButton","dangerouslyUseHTMLString","then","catch","mounted","_table","$refs","tableName","_table_sum","table_sum","elTable1","$el","getElementsByClassName","addEventListener","scrollLeft","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","value","callback","$$v","expression","on","warehouseInvok","_l","key","row","beforeGetList","company_id","goods_id","goods_name","staticStyle","onSearch","_v","onReset","turnToPurchasing","_e","authority","b_export","slot","nativeOn","$event","exportOrder","footerMethod","theme","TableData","tableData","tableColumn","goPage","pageSize1","total","dialogVisible","turnToType","goReturnTo","staticRenderFns","mixins","align","width","field","showOverflow","slots","default","dom","setCellClass","quantity_adjusted","explain","getSelectRecords","selectTion","xTable","getCheckboxRecords","map","_XID","updateTableFooter","updateFooter","columns","column","columnIndex","includes","property","$utils","sum","allList","total_ceiling_inventory","total_lower_inventory","total_available_stocks","total_stocks","total_quantity_adjusted","name","loading","components","warning","_params","API","vm","export_type","scheduleType","addr","i","selectArr","price_id","rebateArr","toString","initHeaderValue","early_warning_type","company_name","calculation_formula","quantity_adjusted_zero","is_disabled","setTimeout","_num","isNaN","_remark","_obj","color","formSearch","validate","valid","str","stock_early_warning_id","portParams","_selection","transferType","$router","path","created","activated","$route","component"],"mappings":"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","file":"js/chunk-550736d1.633aba6e.js","sourcesContent":["const mixin = {\n    data() {\n        return {\n            downLoading: false, // 表头下拉加载\n            goodsList: [] // 保存商品名称下拉列表\n        }\n    },\n    computed: {\n        // 处理仓库 下拉\n        allWarehouseList() {\n            let _warehouseList = this.warehouseList\n            if (_warehouseList.length > 0) {\n                _warehouseList.unshift({\n                    relation_warehouse_id: 0,\n                    warehouse_id: -1,\n                    warehouse_name: \"全部仓库\"\n                })\n            }\n            return _warehouseList\n        }\n    },\n    methods: {\n        // 分页操作 - 切换请求条数\n        moduleHandleSizeChange(val) {\n            Object.assign(this.searchParams.params, {\n                per_page: val,\n                page: 1\n            });\n            this.getTableList(this.searchParams);\n        },\n        // 分页操作 - 切换请求页\n        moduleHandleCurrentChange(val) {\n            // 分页操作\n            Object.assign(this.searchParams.params, {\n                page: val\n            });\n            this.getTableList(this.searchParams);\n        },\n        // 表头 公司组织change 事件\n        companyChange(val) {\n            // 切换 组织时清空仓库\n            if (this.params.warehouse_id != -1) {\n                this.$set(this.params, \"warehouse_id\", \"\");\n            }\n        },\n        // message 弹框提示\n        messageTip(msg = \"tip\", type = \"warning\") {\n            if (this._messageBox == undefined) {\n                this._messageBox = [];\n            } else {\n                this._messageBox.forEach(item => {\n                    item.close();\n                });\n            }\n            let _message = this.$message({\n                message: msg,\n                type: type\n            });\n            this._messageBox.push(_message);\n        },\n        // messageBox 询问弹框\n        messageBox(params) {\n            let {\n                title = \"提示\", // 弹框提示title\n                    tipMsg = \"\", // 弹框提示语\n                    type = \"warning\", // 弹框默认提示类型\n                    conBtnText = \"确定\", // 确认按钮显示文字\n                    canBtnText = \"取消\", // 取消按钮显示文字\n                    cancelMsg, // 点击取消后弹框提示语\n                    callBack // 点击确定按钮后的回调\n            } = params;\n            this.$confirm(tipMsg, {\n                    title: title,\n                    confirmButtonText: conBtnText,\n                    cancelButtonText: canBtnText,\n                    showCancelButton: canBtnText ? true : false,\n                    dangerouslyUseHTMLString: true,\n                    type: type\n                })\n                .then(() => {\n                    callBack && callBack();\n                })\n                .catch(() => {\n                    if (cancelMsg) {\n                        this.$message({\n                            type: \"info\",\n                            message: cancelMsg\n                        });\n                    }\n                });\n        },\n    },\n    mounted() {\n        let _table = this.$refs.tableName,\n            _table_sum = this.$refs.table_sum;\n        if (_table && _table_sum) {\n            const elTable1 = _table.$el.getElementsByClassName(\n                \"el-table__body-wrapper\"\n            )[0];\n            elTable1.addEventListener(\"scroll\", function () {\n                _table_sum.scrollLeft = this.scrollLeft;\n            });\n        }\n    },\n}\nexport default mixin;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"stock_alarm_search\"},[_c('div',{staticClass:\"search_container\"},[_c('el-form',{ref:\"formSearch\",attrs:{\"inline\":true,\"model\":_vm.params}},[_c('el-form-item',{attrs:{\"label\":\"库存组织\",\"size\":\"mini\",\"prop\":\"company_id\"}},[_c('erpCompanyList',{ref:\"erpCompanyList\",attrs:{\"fatherParams\":_vm.params},model:{value:(_vm.params.company_id),callback:function ($$v) {_vm.$set(_vm.params, \"company_id\", $$v)},expression:\"params.company_id\"}})],1),_c('el-form-item',{attrs:{\"label\":\"仓库\",\"size\":\"mini\",\"prop\":\"warehouse_id\"}},[_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\"},on:{\"focus\":_vm.warehouseInvok},model:{value:(_vm.params.warehouse_id),callback:function ($$v) {_vm.$set(_vm.params, \"warehouse_id\", $$v)},expression:\"params.warehouse_id\"}},_vm._l((_vm.allWarehouseList),function(item){return _c('el-option',{key:item.warehouse_id,attrs:{\"label\":item.warehouse_name,\"value\":item.warehouse_id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"预警类型\",\"size\":\"mini\"}},[_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.params.early_warning_type),callback:function ($$v) {_vm.$set(_vm.params, \"early_warning_type\", $$v)},expression:\"params.early_warning_type\"}},[_c('el-option',{attrs:{\"label\":\"全部\",\"value\":\"\"}}),_c('el-option',{attrs:{\"label\":\"上限预警\",\"value\":\"ceiling\"}}),_c('el-option',{attrs:{\"label\":\"安全库存预警\",\"value\":\"lower\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"商品编号\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入\"},model:{value:(_vm.params.goods_sn),callback:function ($$v) {_vm.$set(_vm.params, \"goods_sn\", $$v)},expression:\"params.goods_sn\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品名称\",\"size\":\"mini\"}},[_c('v-GoodsList',{attrs:{\"scopes\":{row: _vm.params },\"beforeGetList\":_vm.beforeGetList,\"updateArray\":['goods_id'],\"vxeParams\":{company_id: _vm.params.company_id},\"showObj\":{goods_id: '商品编号' , goods_name: '商品名称'}}})],1),_c('el-form-item',{attrs:{\"label\":\"品牌\",\"size\":\"mini\"}},[_c('getBrand',{model:{value:(_vm.params.brand_id),callback:function ($$v) {_vm.$set(_vm.params, \"brand_id\", $$v)},expression:\"params.brand_id\"}})],1),_c('el-form-item',{staticStyle:{\"width\":\"190px\"},attrs:{\"size\":\"mini\",\"label\":\"建议调整量为0的商品\",\"label-width\":\"170px\"}},[_c('el-checkbox',{staticStyle:{\"margin\":\"0px\"},attrs:{\"true-label\":1},model:{value:(_vm.params.quantity_adjusted_zero),callback:function ($$v) {_vm.$set(_vm.params, \"quantity_adjusted_zero\", $$v)},expression:\"params.quantity_adjusted_zero\"}})],1),_c('el-form-item',{staticStyle:{\"width\":\"130px\"},attrs:{\"size\":\"mini\",\"label\":\"显示停用商品\",\"label-width\":\"100px\"}},[_c('el-checkbox',{staticStyle:{\"margin\":\"0px\"},attrs:{\"true-label\":1},model:{value:(_vm.params.is_disabled),callback:function ($$v) {_vm.$set(_vm.params, \"is_disabled\", $$v)},expression:\"params.is_disabled\"}})],1),_c('el-form-item',{staticClass:\"search-style search\",attrs:{\"size\":\"mini\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":_vm.onSearch}},[_vm._v(\"查询\")]),_c('el-button',{attrs:{\"plain\":\"\",\"size\":\"mini\"},on:{\"click\":_vm.onReset}},[_vm._v(\"重置\")])],1)],1)],1),_c('div',{staticClass:\"add_delet\"},[(_vm.authority)?_c('el-button',{staticClass:\"addBtn\",attrs:{\"size\":\"mini\"},on:{\"click\":_vm.turnToPurchasing}},[_vm._v(\"转采购\")]):_vm._e(),(_vm.authority.b_export==1)?_c('el-dropdown',{staticClass:\"margin-lf-10\",attrs:{\"placement\":\"bottom-start\"}},[_c('span',{staticStyle:{\"cursor\":\"pointer\",\"color\":\"#4e90e2\"},attrs:{\"split-button\":\"\"}},[_c('el-button',{attrs:{\"plain\":\"\",\"icon\":\"iconfont icon-daochu10\",\"size\":\"mini\"}},[_vm._v(\"导出\")])],1),_c('el-dropdown-menu',{staticStyle:{\"margin-top\":\"10px\"},attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{nativeOn:{\"click\":function($event){return _vm.exportOrder(1)}}},[_vm._v(\"导出Excel文件\")]),_c('el-dropdown-item',{nativeOn:{\"click\":function($event){return _vm.exportOrder(2)}}},[_vm._v(\"导出CSV逗号分隔\")])],1)],1):_vm._e(),_c('div',{staticClass:\"operate_right\",staticStyle:{\"float\":\"right\",\"width\":\"270px\"}},[_c('span',{staticStyle:{\"font-size\":\"13px\"}},[_vm._v(\"建议调整量=\")]),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.params.calculation_formula),callback:function ($$v) {_vm.$set(_vm.params, \"calculation_formula\", $$v)},expression:\"params.calculation_formula\"}},[_c('el-option',{attrs:{\"label\":\"安全库存/库存上限-在库库存\",\"value\":\"stocks\"}}),_c('el-option',{attrs:{\"label\":\"安全库存/库存上限-可用库存\",\"value\":\"available_stocks\"}})],1)],1)],1),_c('div',{staticClass:\"table_container\"},[_c('vxe-grid',{ref:\"xTable\",attrs:{\"border\":\"\",\"show-header-overflow\":true,\"show-overflow\":\"tooltip\",\"show-footer\":\"true\",\"footer-method\":_vm.footerMethod,\"tooltip-config\":{theme: 'light'},\"data\":_vm.TableData.tableData,\"columns\":_vm.tableColumn,\"size\":\"mini\",\"resizable\":\"\",\"max-height\":380}}),_c('div',{staticClass:\"page_container\"},[_c('div',{staticClass:\"pageNumber\"},[_vm._v(\"每页显示\")]),_c('el-pagination',{staticClass:\"erp-pagination\",attrs:{\"current-page\":_vm.goPage,\"page-size\":_vm.pageSize1,\"page-sizes\":_vm.per_page,\"layout\":\"total,sizes, prev, pager, next,jumper\",\"prevText\":\"上一页\",\"nextText\":\"下一页\",\"total\":_vm.TableData.total},on:{\"size-change\":_vm.moduleHandleSizeChange,\"current-change\":_vm.moduleHandleCurrentChange,\"update:currentPage\":function($event){_vm.goPage=$event},\"update:current-page\":function($event){_vm.goPage=$event}}})],1)],1),_c('el-dialog',{attrs:{\"title\":\"选择单据\",\"visible\":_vm.dialogVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-radio-group',{model:{value:(_vm.turnToType),callback:function ($$v) {_vm.turnToType=$$v},expression:\"turnToType\"}},[_c('div',{staticStyle:{\"margin-bottom\":\"15px\"}},[_c('el-radio',{attrs:{\"label\":3}},[_vm._v(\"采购计划\")])],1),_c('div',{staticStyle:{\"margin-bottom\":\"15px\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"采购订单\")])],1),_c('div',[_c('el-radio',{attrs:{\"label\":2}},[_vm._v(\"采购入库单\")])],1)]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.goReturnTo}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const mixins = {\r\n  data() {\r\n    return {\r\n      tableColumn: [{\r\n        type: 'checkbox',\r\n        align: 'center',\r\n        width: 50\r\n      },\r\n      {\r\n        type: 'index',\r\n        title: '序号',\r\n        width: 60\r\n      },\r\n      {\r\n        field: 'company_name',\r\n        title: '库存组织',\r\n        width: 200,\r\n        showOverflow: true\r\n      },\r\n      {\r\n        field: 'goods_id',\r\n        title: '商品编号',\r\n        width: 150,\r\n        showOverflow: true\r\n      },\r\n      {\r\n        field: 'factory_code',\r\n        title: '工厂代码',\r\n        width: 100,\r\n        showOverflow: true\r\n      },\r\n      {\r\n        field: 'goods_name',\r\n        title: '商品名称',\r\n        width: 300,\r\n        showOverflow: true\r\n      },\r\n      {\r\n        field: 'warehouse_name',\r\n        title: '预警仓库',\r\n        width: 200,\r\n        showOverflow: true,\r\n      },\r\n      {\r\n        field: 'unit_name',\r\n        title: '计量单位',\r\n        width: 80,\r\n        showOverflow: true,\r\n      },\r\n      {\r\n        field: 'brand_name',\r\n        title: '品牌',\r\n        width: 100,\r\n        showOverflow: true,\r\n      },\r\n      {\r\n        field: 'ceiling_inventory',\r\n        title: '库存上限',\r\n        width: 100,\r\n        showOverflow: true,\r\n      },\r\n      {\r\n        field: 'lower_inventory',\r\n        title: '安全库存',\r\n        width: 100,\r\n        showOverflow: true,\r\n      },\r\n      {\r\n        field: 'stocks',\r\n        title: '在库库存',\r\n        width: 100,\r\n        showOverflow: true\r\n      },\r\n      {\r\n        field: 'available_stocks',\r\n        title: '可用库存',\r\n        width: 100,\r\n        showOverflow: true\r\n      },\r\n      {\r\n        field: 'quantity_adjusted',\r\n        title: '建议调整数量',\r\n        width: 100,\r\n        showOverflow: true,\r\n        slots: {\r\n          default: ({\r\n            row,\r\n          }) => {\r\n            const dom = <span style={this.setCellClass(row, 'quantity_adjusted')}>{row.quantity_adjusted}</span>\r\n            return [dom]\r\n          }\r\n        }\r\n      },\r\n      {\r\n        field: 'explain',\r\n        title: '说明',\r\n        width: 120,\r\n        showOverflow: true,\r\n        slots: {\r\n          default: ({\r\n            row,\r\n          }) => {\r\n            const dom = <span style={this.setCellClass(row, 'quantity_adjusted')}>{row.explain}</span>\r\n            return [dom]\r\n          }\r\n        }\r\n      }\r\n      ],\r\n      tableData: [],\r\n    }\r\n  },\r\n  methods: {\r\n    // 获取选中项\r\n    getSelectRecords() {\r\n      let selectTion = this.$refs.xTable.getCheckboxRecords()\r\n      selectTion = selectTion.map(item => {\r\n        item._XID && delete item._XID\r\n        return item\r\n      })\r\n      return selectTion\r\n    },\r\n    // 刷新table footer\r\n    updateTableFooter() {\r\n      this.$refs.xTable.updateFooter()\r\n    },\r\n    // 合计/页小计\r\n    footerMethod({\r\n      columns,\r\n      data\r\n    }) {\r\n      return [\r\n        columns.map((column, columnIndex) => {\r\n          if (columnIndex === 1) {\r\n            return \"页小计\";\r\n          }\r\n          if (\r\n            [\"ceiling_inventory\", \"lower_inventory\", \"available_stocks\", \"stocks\", \"quantity_adjusted\"].includes(\r\n              column.property\r\n            )\r\n          ) {\r\n            return this.$utils.sum(data, column.property);\r\n          }\r\n          return null;\r\n        }),\r\n        columns.map((column, columnIndex) => {\r\n          if (columnIndex === 1) {\r\n            return \"合计\";\r\n          }\r\n          if (this.TableData.allList) {\r\n            if (column['property'] == 'ceiling_inventory') { // 库存上限 总合计\r\n              return this.TableData.allList.total_ceiling_inventory;\r\n            } else if (column['property'] == 'lower_inventory') { // 库存下限 总合计\r\n              return this.TableData.allList.total_lower_inventory;\r\n            } else if (column['property'] == 'available_stocks') { // 可用库存 总合计\r\n              return this.TableData.allList.total_available_stocks;\r\n            } else if (column['property'] == 'stocks') { // 在库库存 总合计\r\n              return this.TableData.allList.total_stocks;\r\n            } else if (column['property'] == 'quantity_adjusted') { // 建议调整数量 总合计\r\n              return this.TableData.allList.total_quantity_adjusted;\r\n            }\r\n          }\r\n          return null;\r\n        })\r\n      ];\r\n    }\r\n  }\r\n}\r\nexport default mixins","<!-- 库存上安全库存报警查询 -->\n<template>\n  <div class=\"stock_alarm_search\">\n    <div class=\"search_container\">\n      <el-form :inline=\"true\" :model=\"params\" ref=\"formSearch\">\n        <el-form-item label=\"库存组织\" size=\"mini\" prop=\"company_id\">\n          <erpCompanyList v-model=\"params.company_id\" ref='erpCompanyList' :fatherParams=\"params\" />\n        </el-form-item>\n        <el-form-item label=\"仓库\" size=\"mini\" prop=\"warehouse_id\">\n          <el-select clearable v-model=\"params.warehouse_id\" placeholder=\"请选择\" @focus=\"warehouseInvok\">\n            <el-option :label=\"item.warehouse_name\" :value=\"item.warehouse_id\" :key=\"item.warehouse_id\" v-for=\"item in allWarehouseList\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"预警类型\" size=\"mini\">\n          <el-select clearable v-model=\"params.early_warning_type\" placeholder=\"请选择\">\n            <el-option label=\"全部\" value=\"\"></el-option>\n            <el-option label=\"上限预警\" value=\"ceiling\"></el-option>\n            <el-option label=\"安全库存预警\" value=\"lower\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"商品编号\" size=\"mini\">\n          <el-input type=\"text\" v-model=\"params.goods_sn\" placeholder=\"请输入\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"商品名称\" size=\"mini\">\n          <v-GoodsList :scopes='{row: params }' :beforeGetList='beforeGetList' :updateArray=\"['goods_id']\" :vxeParams='{company_id: params.company_id}' :showObj=\"{goods_id: '商品编号' , goods_name: '商品名称'}\" />\n        </el-form-item>\n        <el-form-item label=\"品牌\" size=\"mini\">\n          <getBrand v-model='params.brand_id' />\n        </el-form-item>\n        <el-form-item size=\"mini\" label=\"建议调整量为0的商品\" style=\"width: 190px;\" label-width=\"170px\">\n          <el-checkbox v-model=\"params.quantity_adjusted_zero\" :true-label=\"1\" style=\"margin:0px\"></el-checkbox>\n        </el-form-item>\n        <el-form-item size=\"mini\" label=\"显示停用商品\" style=\"width: 130px;\" label-width=\"100px\">\n          <el-checkbox v-model=\"params.is_disabled\" :true-label=\"1\" style=\"margin:0px\"></el-checkbox>\n        </el-form-item>\n        <el-form-item size=\"mini\" class=\"search-style search\">\n          <el-button @click=\"onSearch\" size=\"mini\" type=\"primary\">查询</el-button>\n          <el-button plain @click=\"onReset\" size=\"mini\">重置</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n    <div class=\"add_delet\">\n      <el-button @click=\"turnToPurchasing\" class=\"addBtn\" size=\"mini\" v-if=\"authority\">转采购</el-button>\n      <el-dropdown placement=\"bottom-start\" class=\"margin-lf-10\" v-if=\"authority.b_export==1\">\n        <span split-button style=\"cursor:pointer;color:#4e90e2\">\n          <el-button plain icon=\"iconfont icon-daochu10\" size=\"mini\">导出</el-button>\n        </span>\n        <el-dropdown-menu slot=\"dropdown\" style=\"margin-top:10px;\">\n          <el-dropdown-item @click.native=\"exportOrder(1)\">导出Excel文件</el-dropdown-item>\n          <el-dropdown-item @click.native=\"exportOrder(2)\">导出CSV逗号分隔</el-dropdown-item>\n        </el-dropdown-menu>\n      </el-dropdown>\n      <div class=\"operate_right\" style=\"float: right; width: 270px;\">\n        <span style=\"font-size: 13px;\">建议调整量=</span>\n        <el-select v-model=\"params.calculation_formula\" placeholder=\"请选择\">\n          <el-option label=\"安全库存/库存上限-在库库存\" value=\"stocks\"></el-option>\n          <el-option label=\"安全库存/库存上限-可用库存\" value=\"available_stocks\"></el-option>\n        </el-select>\n      </div>\n    </div>\n    <div class=\"table_container\">\n      <vxe-grid border ref=\"xTable\" :show-header-overflow='true' show-overflow='tooltip' show-footer=\"true\" :footer-method=\"footerMethod\" :tooltip-config=\"{theme: 'light'}\" :data=\"TableData.tableData\" :columns=\"tableColumn\" size=\"mini\" resizable :max-height=\"380\"></vxe-grid>\n      <div class=\"page_container\">\n        <div class=\"pageNumber\">每页显示</div>\n        <el-pagination class=\"erp-pagination\" @size-change=\"moduleHandleSizeChange\" @current-change=\"moduleHandleCurrentChange\" :current-page.sync=\"goPage\" :page-size=\"pageSize1\" :page-sizes=\"per_page\" layout=\"total,sizes, prev, pager, next,jumper\" prevText=\"上一页\" nextText=\"下一页\" :total=\"TableData.total\">\n        </el-pagination>\n      </div>\n    </div>\n    <!-- 转单弹框 -->\n    <el-dialog title=\"选择单据\" :visible.sync=\"dialogVisible\" width=\"30%\">\n      <el-radio-group v-model=\"turnToType\">\n        <div style=\"margin-bottom: 15px;\">\n          <el-radio :label=\"3\">采购计划</el-radio>\n        </div>\n        <div style=\"margin-bottom: 15px;\">\n          <el-radio :label=\"1\">采购订单</el-radio>\n        </div>\n        <div>\n          <el-radio :label=\"2\">采购入库单</el-radio>\n        </div>\n\n      </el-radio-group>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"goReturnTo\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport mixin from \"./stockEarlyWarningMinxin.js\";\nimport stockEarlyWarningQuery from \"./stockEarlyWarningQuery.js\";\nimport {\n  exportFile, // 导出\n  getData, // 请求列表\n} from \"common/utils/public_function/commonUtils\";\nexport default {\n  name: \"inventoryWarningStockEarlyWarningQuery\",\n  mixins: [mixin, stockEarlyWarningQuery],\n  data() {\n    return {\n      loading: false,\n      dialogVisible: false, //\n      turnToType: 3, // 选择转单类型 1 采购订单 2 采购入库单 3 采购计划\n    };\n  },\n\n  components: {},\n\n  methods: {\n    // getCompanyList(list) {\n    //   list.unshift({\n    //     company_id: -1,\n    //     company_name: \"全部公司\"\n    //   });\n    //   console.log(list)\n    // },\n    beforeGetList() {\n      if (!this.params.company_id) {\n        this.$message.warning(\n          \"所有公司商品数量过大，请选择单一库存组织，筛选商品\"\n        );\n        return false;\n      }\n    },\n    // 接口 请求列表\n    getTableList(params) {\n      let _params = params;\n      _params.TableData = this.TableData;\n      _params.API = \"getStockEarlyWarningQueryList\";\n      _params.vm = this;\n      getData(_params, 2, (res) => {\n        this.$nextTick(() => {\n          this.updateTableFooter();\n        });\n      });\n    },\n    // 接口 导出\n    exportOrder(scheduleType) {\n      Object.assign(this.params, {\n        export_type: scheduleType,\n      });\n      var addr = [];\n      let selectArr = this.getSelectRecords();\n      for (var i = 0; i < selectArr.length; i++) {\n        addr.push(selectArr[i].price_id);\n      }\n      var rebateArr = addr.toString();\n      let arg = {\n        params: {\n          ...this.params,\n          price_id: rebateArr,\n        },\n        API: \"exportStockEarlyWarningQueryUrl\",\n      };\n      exportFile(arg);\n    },\n    // 初始化表头值\n    initHeaderValue() {\n      this.searchParams.params = {};\n      // 设置默认值\n      this.$set(this, \"params\", {\n        early_warning_type: \"\",\n        warehouse_id: \"\",\n        company_id: \"\",\n        company_name: \"\",\n        calculation_formula: \"available_stocks\",\n        quantity_adjusted_zero: 0,\n        is_disabled: 0,\n      });\n      setTimeout(() => {\n        this.$refs.erpCompanyList._setList({\n          company_id: \"\",\n          company_name: \"全部\",\n        });\n      }, 500);\n      this.warehouseList = [\n        {\n          warehouse_id: -1,\n          warehouse_name: \"全部仓库\",\n        },\n      ];\n    },\n    // 设置cell class\n    setCellClass(row, field) {\n      let _num = Number(row[field]);\n      let _remark = \"\",\n        _obj = \"\";\n      if (_num && !isNaN(_num)) {\n        if (_num > 0) {\n          _remark = \"库存数量低于安全库存\";\n          _obj = {\n            color: \"red\",\n          };\n        } else if (_num < 0) {\n          _remark = \"库存数量高于上限\";\n        }\n        this.$set(row, \"explain\", _remark);\n      }\n      return _obj;\n    },\n    // 表头点击搜索\n    onSearch() {\n      this.$refs.formSearch.validate((valid) => {\n        if (valid) {\n          Object.assign(this.searchParams.params, this.params, {\n            page: 1,\n          });\n          this.getTableList(this.searchParams);\n        }\n      });\n    },\n    // 表头点击重置\n    onReset() {\n      this.initHeaderValue(); // 重置表头\n      Object.assign(this.searchParams.params, this.params, {\n        page: 1,\n      });\n      this.getTableList(this.searchParams);\n    },\n    // 转采购\n    turnToPurchasing() {\n      let selectArr = this.getSelectRecords();\n      // 判断是否有勾选中得行\n      if (selectArr.length <= 0) {\n        this.messageTip(\"请勾选明细信息\");\n        return;\n      }\n      this.turnToType = 3; // 设置默认转单\n      this.dialogVisible = true;\n    },\n    // 点击 确定去转单\n    goReturnTo() {\n      let selectArr = this.getSelectRecords();\n      // 获取选中项\n      let _selection = selectArr.map((item) => {\n        return item.stock_early_warning_id;\n      });\n      var str;\n      for (var i = 0; i < selectArr.length; i++) {\n        if (str && str !== selectArr[i].company_id) {\n          this.$message.warning(\"请选择同一家公司进行转单\");\n          return;\n        }\n        str = selectArr[i].company_id;\n      }\n      let _params = {\n        portParams: {\n          stock_early_warning_id: _selection.toString(),\n          calculation_formula: this.params.calculation_formula,\n        },\n      };\n      this.dialogVisible = false; // 关闭弹框\n      switch (this.turnToType) {\n        case 1: // 转采购订单\n          _params.transferType = 1; // 转单类型（采购订单）\n          this.$router.push({\n            path: \"/purchase/order/orderAdd\",\n            name: \"orderAdd\",\n            params: _params,\n          });\n          break;\n        case 2: // 转采购入库单\n          _params.transferType = 2; // 转单类型（采购入库）\n          this.$router.push({\n            path: \"/purchase/instorage/instorageAdd\",\n            name: \"instorageAdd\",\n            params: _params,\n          });\n          break;\n        case 3: // 转采购计划单\n          _params.transferType = this.turnToType; // 转单类型（采购计划）\n          this.$router.push({\n            path: \"/purchase/plan/planAdd\",\n            name: \"planAdd\",\n            params: _params,\n          });\n          break;\n      }\n    },\n  },\n  created() {\n    // 初始化表头\n    this.initHeaderValue();\n    Object.assign(this.searchParams.params, this.params, {\n      page: 1,\n    });\n  },\n  activated() {\n    if (this.$route.params && this.$route.params.type === 1) {\n      this.params.company_id = \"\";\n      this.params.calculation_formula = \"available_stocks\";\n      this.params.warehouse_id = \"\";\n      this.params.early_warning_type = \"lower\";\n      setTimeout(() => {\n        this.$refs.erpCompanyList._setList({\n          company_id: \"\",\n          company_name: \"全部\",\n        });\n      }, 500);\n    }\n    Object.assign(this.searchParams.params, this.params, {\n      page: 1,\n    });\n    this.getTableList(this.searchParams);\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n.stock_alarm_search {\n  /deep/ .vxe-grid {\n    .vxe-cell {\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n  }\n  .table_sum {\n    width: 100%;\n    overflow: hidden;\n    background: #f5f7fa;\n    .table_ul {\n      overflow: auto;\n      li {\n        float: left;\n        border: 1px solid #edf0f9;\n        border-top: none;\n        font-size: 12px;\n        color: #1f2d3d;\n        line-height: 23px;\n        text-align: left;\n        height: 23px;\n        box-sizing: border-box;\n        padding: 0px 6px;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./stockEarlyWarningQuery.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./stockEarlyWarningQuery.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./stockEarlyWarningQuery.vue?vue&type=template&id=0a086170&scoped=true&\"\nimport script from \"./stockEarlyWarningQuery.vue?vue&type=script&lang=js&\"\nexport * from \"./stockEarlyWarningQuery.vue?vue&type=script&lang=js&\"\nimport style0 from \"./stockEarlyWarningQuery.vue?vue&type=style&index=0&id=0a086170&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a086170\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./stockEarlyWarningQuery.vue?vue&type=style&index=0&id=0a086170&lang=less&scoped=true&\""],"sourceRoot":""}