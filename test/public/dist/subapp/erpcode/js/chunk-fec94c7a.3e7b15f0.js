(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-fec94c7a"],{"0f1b":function(e,a,t){},"69c7":function(e,a,t){},9128:function(e,a,t){"use strict";t("0f1b")},aa65:function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{attrs:{id:"leixin"}},[t("div",{staticClass:"search_container"},[t("el-form",{ref:"filterFormRef",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[t("el-form-item",{attrs:{label:"库存组织",size:"mini"}},[t("erpCompanyList",{attrs:{fatherParams:e.params},on:{change:e.companyChange},model:{value:e.params.company_id,callback:function(a){e.$set(e.params,"company_id",a)},expression:"params.company_id"}})],1),t("el-form-item",{attrs:{label:"部门",size:"mini"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.DepartmentListInvok},model:{value:e.params.department_id,callback:function(a){e.$set(e.params,"department_id",a)},expression:"params.department_id"}},e._l(e.departmentList,(function(e){return t("el-option",{key:e.department_id,attrs:{label:e.department_name,value:e.department_id}})})),1)],1),t("el-form-item",{attrs:{label:"业务员",size:"mini"}},[t("el-select",{attrs:{clearable:"",filterable:""},on:{focus:e.EmployeeListInvok},model:{value:e.params.business_id,callback:function(a){e.$set(e.params,"business_id",a)},expression:"params.business_id"}},e._l(e.employeeList,(function(e){return t("el-option",{key:e.employee_id,attrs:{label:e.employee_name,value:e.employee_id}})})),1)],1),t("el-form-item",{attrs:{label:"业务日期",size:"mini"}},[t("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.timeValue,callback:function(a){e.timeValue=a},expression:"timeValue"}})],1),t("el-form-item",{attrs:{label:"单据类型",size:"mini"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.params.order_type,callback:function(a){e.$set(e.params,"order_type",a)},expression:"params.order_type"}},[t("el-option",{attrs:{label:"全部",value:0}}),t("el-option",{attrs:{label:"良品转不良品",value:1}}),t("el-option",{attrs:{label:"不良品转良品",value:2}})],1)],1),t("el-form-item",{attrs:{label:"单据号",size:"mini"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.params.conversion_sn,callback:function(a){e.$set(e.params,"conversion_sn",a)},expression:"params.conversion_sn"}})],1),t("el-form-item",{attrs:{label:"审核日期",size:"mini"}},[t("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.AuditDate,callback:function(a){e.AuditDate=a},expression:"AuditDate"}})],1),t("el-form-item",{attrs:{label:"单据状态",size:"mini"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.params.auditor_status,callback:function(a){e.$set(e.params,"auditor_status",a)},expression:"params.auditor_status"}},[t("el-option",{attrs:{label:"全部",value:0}},[e._v("全部")]),t("el-option",{attrs:{label:"未审核",value:1}},[e._v("未审核")]),t("el-option",{attrs:{label:"已审核",value:2}},[e._v("已审核")]),t("el-option",{attrs:{label:"作废",value:3}},[e._v("作废")])],1)],1),t("el-form-item",{attrs:{label:"来源",size:"mini"}},[t("el-select",{attrs:{clearable:""},model:{value:e.params.form_type,callback:function(a){e.$set(e.params,"form_type",a)},expression:"params.form_type"}},[t("el-option",{attrs:{label:"全部",value:0}},[e._v("全部")]),t("el-option",{attrs:{label:"WMS",value:1}},[e._v("WMS")]),t("el-option",{attrs:{label:"ERP",value:2}},[e._v("ERP")])],1)],1),t("el-form-item",{attrs:{label:"商品编号",size:"mini"}},[t("el-input",{model:{value:e.params.goods_id,callback:function(a){e.$set(e.params,"goods_id",a)},expression:"params.goods_id"}})],1),t("el-form-item",{attrs:{label:"商品名称",size:"mini"}},[t("v-GoodsList",{attrs:{scopes:{row:e.params},vxeParams:{company_id:e.params.company_id},showObj:{goods_id:"商品编号",goods_name:"商品名称"}}})],1),t("el-form-item",{attrs:{label:"调出仓库",size:"mini"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:"",loading:e.paramsLoading},on:{focus:e.getWarehouseFouse,change:function(a){e.params.allocation_id=""}},model:{value:e.params.warehouse_id,callback:function(a){e.$set(e.params,"warehouse_id",a)},expression:"params.warehouse_id"}},e._l(e.warehouseList,(function(e){return t("el-option",{key:e.warehouse_id,attrs:{label:e.warehouse_name,value:e.warehouse_id}})})),1)],1),t("el-form-item",{attrs:{label:"调出货位",size:"mini"}},[t("erpAllocation",{attrs:{disabled:!e.params.warehouse_id,searchParams:{warehouse_id:e.params.warehouse_id,is_incomplete:3}},model:{value:e.params.allocation_id,callback:function(a){e.$set(e.params,"allocation_id",a)},expression:"params.allocation_id"}})],1),t("el-form-item",{attrs:{label:"调入仓库",size:"mini"}},[t("erpWarehouse",{attrs:{searchParams:{company_id:e.params.company_id}},on:{change:function(a){e.params.after_allocation_id=""}},model:{value:e.params.after_warehouse_id,callback:function(a){e.$set(e.params,"after_warehouse_id",a)},expression:"params.after_warehouse_id"}})],1),t("el-form-item",{attrs:{label:"调入货位",size:"mini"}},[t("erpAllocation",{attrs:{disabled:!e.params.after_warehouse_id,searchParams:{warehouse_id:e.params.after_warehouse_id,is_incomplete:3}},model:{value:e.params.after_allocation_id,callback:function(a){e.$set(e.params,"after_allocation_id",a)},expression:"params.after_allocation_id"}})],1),t("el-form-item",{attrs:{label:"年周/批次",size:"mini"}},[t("erpBatch",{attrs:{fatherParams:e.params,searchParams:{goods_id:e.params.goods_id,warehouse_id:e.params.warehouse_id,allocation_id:e.params.allocation_id,company_id:e.params.company_id}},model:{value:e.params.batch_id,callback:function(a){e.$set(e.params,"batch_id",a)},expression:"params.batch_id"}})],1),t("el-form-item",{staticClass:"search-style",attrs:{size:"mini"}},[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.onSearch(1)}}},[e._v("查询")]),t("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1),t("div",{staticClass:"add_delet"},[1==e.authority.b_export?t("el-dropdown",{staticStyle:{margin:"0 10px"}},[t("span",{staticStyle:{cursor:"pointer",color:"#4e90e2"},attrs:{"split-button":""}},[t("el-button",{attrs:{plain:"",icon:"iconfont icon-daochu10",size:"mini"}},[e._v("导出")])],1),t("el-dropdown-menu",{staticStyle:{"margin-top":"10px"},attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{nativeOn:{click:function(a){return e.exportOrder(1)}}},[e._v("导出Excel文件")]),t("el-dropdown-item",{nativeOn:{click:function(a){return e.exportOrder(2)}}},[e._v("导出CSV逗号分隔")])],1)],1):e._e()],1),t("div",{staticClass:"table_container"},[t("xTable",{ref:"xTable",attrs:{isShowTool:!0,ajax:{url:"DefectiveProductGetOrderDetailed",params:e.params},footerMethod:e.footerMethod,tableColumn:e.tableColumn},on:{getData:e.getTableData}})],1)])])},s=[],o=(t("a9e3"),t("d81d"),t("caad"),{data:function(){return{tableColumn:[{type:"seq",title:"序号",width:50},{title:"库存组织",field:"company_name",width:180},{title:"单据号",field:"conversion_sn",width:150},{title:"部门",field:"department_name",width:110},{title:"创建人",field:"add_user_name",width:150},{title:"业务日期",field:"business_time",width:100},{title:"单据类型",field:"order_type",width:132},{title:"商品编号",field:"goods_id",width:100},{title:"商品名称",field:"goods_name",width:250},{title:"调出仓库",field:"warehouse_name",width:120},{title:"调出货位",field:"allocation_name",width:120},{title:"调入仓库",field:"after_warehouse_name",width:120},{title:"调入货位",field:"after_allocation_name",width:120},{title:"年周/批次",field:"batch",width:120},{title:"商品单价",field:"goods_price",width:120},{title:"不良品数量",field:"goods_num",width:120},{title:"商品成本",field:"goods_cost_price",width:120},{title:"单据时间",field:"add_time",width:150},{title:"来源",field:"form_type",width:120},{title:"审核状态",field:"auditor_status",width:120},{title:"审核人",field:"auditor_name",width:120},{title:"审核时间",field:"auditor_time",width:150},{title:"修改人",field:"update_user_name",width:120},{title:"修改时间",field:"update_time",width:150},{title:"原因",field:"reason",width:120}]}},methods:{footerMethod:function(e){var a=this,t=e.columns,i=e.data;return[t.map((function(e,t){if(2===t)return"页小计";if(["goods_num","goods_cost_price"].includes(e.property)){var s=a.$utils.sum(i,e.property);if("goods_num"===e.property)return a.$publicFution.priceFormatNone(s,0);if("goods_cost_price"===e.property)return a.$publicFution.priceFormatNone(s)}return null})),t.map((function(e,t){return 2===t?"合计":"goods_num"===e.property&&a.TableDataSum.num?a.$publicFution.priceFormatNone(a.TableDataSum.num,0):"goods_cost_price"===e.property&&a.TableDataSum.cost_price?a.$publicFution.priceFormatNone(a.TableDataSum.cost_price):null}))]}}}),r=t("65b0"),l={name:"ScheduleIncomplete",mixins:[o],data:function(){return{timeValue:[],AuditDate:[],loadingsum:!0,loading:!1,TableDataSum:{},warehouseLists:[],allocationLists:[],paramsLoading:!1,params:{order_type:0,company_id:Number(localStorage.company_id),company_name:localStorage.getItem("company_name")}}},methods:{companyChange:function(e){Object(r["a"])(this,this.params),this.params.after_warehouse_id="",this.params.after_allocation_name=""},getWarehouseFouse:function(e){var a=this,t=!(e instanceof Object);this.$set(this.params,t?"after_warehouse_id":"warehouse_id",""),this.paramsLoading=!0,this.$axMethod.getWarehouseFocus({company_id:t?this.params.after_company_id:this.params.company_id,type:t?1:""}).then((function(e){var i=e.data;200==i.code&&(t?a.$set(a,"warehouseLists",i.data):a.$set(a,"warehouseList",i.data),a.paramsLoading=!1)}))},getTableData:function(e){this.TableDataSum=e.data.data.desc?e.data.data.desc:{}},allocationFocus:function(e){var a=this;this.paramsLoading=!0;var t=!(e instanceof Object);this.$set(this.params,t?"after_allocation_id":"allocation_id",""),this.$axMethod.allocationInventoryList({warehouse_id:t?this.params.after_warehouse_id:this.params.warehouse_id}).then((function(e){var i=e.data;"200"==i.code&&(t?a.$set(a,"allocationLists",i.data):a.$set(a,"allocationList",i.data),a.paramsLoading=!1)}))},onReset:function(){this.timeValue=[],this.AuditDate=[],this.$set(this,"params",{order_type:0,company_id:Number(localStorage.company_id)}),this.onSearch(1)},onSearch:function(e){this.AuditDate?(this.params.start_auditor_time=this.AuditDate[0],this.params.end_auditor_time=this.AuditDate[1]):this.params.start_auditor_time=this.params.end_auditor_time="",this.timeValue?(this.params.start_business_time=this.timeValue[0],this.params.end_business_time=this.timeValue[1]):this.params.start_business_time=this.params.end_business_time="",this.$refs.xTable._getData(e)},exportOrder:function(e){var a=Object.assign(this.params,{export_type:e});this.$axMethod.DefectiveProductExportOrderDetailed(a).then((function(e){200==e.data.code&&(window.location.href=e.data.data.url)}))}},mounted:function(){Object(r["l"])(this,window.localStorage),this.authority=JSON.parse(localStorage.getItem("authority"))}},n=l,d=(t("bf62"),t("9128"),t("2877")),m=Object(d["a"])(n,i,s,!1,null,"74dac8de",null);a["default"]=m.exports},bf62:function(e,a,t){"use strict";t("69c7")}}]);
//# sourceMappingURL=chunk-fec94c7a.3e7b15f0.js.map