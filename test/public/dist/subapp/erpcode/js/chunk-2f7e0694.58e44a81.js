(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-2f7e0694"],{"0cb2":function(e,t,a){var i=a("e330"),r=a("7b0b"),n=Math.floor,l=i("".charAt),s=i("".replace),o=i("".slice),d=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,a,i,m,u){var p=a+e.length,h=i.length,f=c;return void 0!==m&&(m=r(m),f=d),s(u,f,(function(r,s){var d;switch(l(s,0)){case"$":return"$";case"&":return e;case"`":return o(t,0,a);case"'":return o(t,p);case"<":d=m[o(s,1,-1)];break;default:var c=+s;if(0===c)return r;if(c>h){var u=n(c/10);return 0===u?r:u<=h?void 0===i[u-1]?l(s,1):i[u-1]+l(s,1):r}d=i[c-1]}return void 0===d?"":d}))}},"0f33f":function(e,t,a){"use strict";a("e961")},"3cb3":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"params"},[a("div",{attrs:{id:"leixin"}},[a("div",{staticClass:"search_container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"采购组织",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.companyListInvok,change:e.companyChange},model:{value:e.params.company_id,callback:function(t){e.$set(e.params,"company_id",t)},expression:"params.company_id"}},e._l(e.companyList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[a("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"业务日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}})],1),a("el-form-item",{attrs:{label:"单据号",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.params.order_sn,callback:function(t){e.$set(e.params,"order_sn",t)},expression:"params.order_sn"}})],1),a("el-form-item",{attrs:{label:"供应商(厂家)",size:"mini"}},[a("el-select",{attrs:{clearable:"",maxlength:"100","filter-method":e.supplierListInvok,filterable:"",placeholder:"请选择"},on:{focus:e.supplierListInvok,change:e.supplierChange},model:{value:e.params.supplier_id,callback:function(t){e.$set(e.params,"supplier_id",t)},expression:"params.supplier_id"}},e._l(e.supplierList,(function(e){return a("el-option",{key:e.supplier_id,attrs:{label:e.supplier_name,value:e.supplier_id}})})),1)],1),a("el-form-item",{attrs:{label:"来源单号",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.params.plan_sn,callback:function(t){e.$set(e.params,"plan_sn",t)},expression:"params.plan_sn"}})],1),a("el-form-item",{attrs:{label:"部门",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{change:e.departmentChange,focus:e.DepartmentListInvok},model:{value:e.params.department_id,callback:function(t){e.$set(e.params,"department_id",t)},expression:"params.department_id"}},e._l(e.departmentList,(function(e){return a("el-option",{key:e.department_id,attrs:{label:e.department_name,value:e.department_id}})})),1)],1),a("el-form-item",{attrs:{label:"采购员",size:"mini"}},[a("erpEmployee",{attrs:{title:"请选择采购员",searchParams:{company_id:e.params.company_id}},model:{value:e.params.buyer_id,callback:function(t){e.$set(e.params,"buyer_id",t)},expression:"params.buyer_id"}})],1),a("el-form-item",{attrs:{label:"审核状态",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.params.auditor_status,callback:function(t){e.$set(e.params,"auditor_status",t)},expression:"params.auditor_status"}},[a("el-option",{attrs:{label:"全部",value:0}},[e._v("全部")]),a("el-option",{attrs:{label:"未审核",value:1}},[e._v("未审核")]),a("el-option",{attrs:{label:"已审核",value:2}},[e._v("已审核")]),a("el-option",{attrs:{label:"作废",value:3}},[e._v("作废")]),a("el-option",{attrs:{label:"关闭",value:4}},[e._v("关闭")])],1)],1),a("el-form-item",{attrs:{label:"商品编号",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入",maxLength:"7",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.params.goods_id,callback:function(t){e.$set(e.params,"goods_id",t)},expression:"params.goods_id"}})],1),a("el-form-item",{attrs:{label:"商品名称",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.params.goods_name,callback:function(t){e.$set(e.params,"goods_name",t)},expression:"params.goods_name"}})],1),a("el-form-item",{attrs:{label:"工厂代码",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.params.factory_code,callback:function(t){e.$set(e.params,"factory_code",t)},expression:"params.factory_code"}})],1),a("el-form-item",{attrs:{label:"付款方式",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{focus:e.receivablesInvok,change:e.receivablesChange},model:{value:e.params.receivables_mode_id,callback:function(t){e.$set(e.params,"receivables_mode_id",t)},expression:"params.receivables_mode_id"}},e._l(e.receivablesList,(function(e){return a("el-option",{key:e.receivables_mode_id,attrs:{label:e.receivables_mode_name,value:e.receivables_mode_id}})})),1)],1),a("el-form-item",{attrs:{label:"审核日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:""},model:{value:e.timeValue1,callback:function(t){e.timeValue1=t},expression:"timeValue1"}})],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"add_delet"},[a("el-dropdown",{attrs:{placement:"bottom-start"}},[a("span",{staticStyle:{cursor:"pointer",color:"#4e90e2"},attrs:{"split-button":""}},[a("el-button",{attrs:{plain:"",icon:"iconfont icon-daochu10",size:"mini"}},[e._v("导出")])],1),a("el-dropdown-menu",{staticStyle:{"margin-top":"10px"},attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){return e.exportOrder(1)}}},[e._v("导出Excel文件")]),a("el-dropdown-item",{nativeOn:{click:function(t){return e.exportOrder(2)}}},[e._v("导出CSV逗号分隔")])],1)],1)],1),a("div",{staticClass:"table_container"},[a("xTable",{ref:"xTable",attrs:{ajax:{url:"getPurchassOrderDetail",params:e.params},footerMethod:e.footerMethod,tableColumn:e.tableColumn,xData:e.tableData},on:{getData:e.getTableData}})],1),a("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[a("el-col",{attrs:{span:12}},[a("div",[e._v("生成时间："+e._s(e.addTIME))])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"textAr"},[e._v("制表人："+e._s(e.realname))])])],1)],1)])},r=[],n=a("5530"),l=(a("4de4"),a("d3b7"),a("99af"),a("65b0")),s=a("2f62"),o=(a("d81d"),a("caad"),a("ac1f"),a("5319"),a("25f0"),a("b680"),a("8ba4"),a("a9e3"),{data:function(){return{footerData:{},tableColumn:[{type:"index",title:"序号",width:50},{title:"采购组织",field:"company_name",width:150},{title:"单据号",field:"order_sn",width:160},{title:"供应商(厂家)",field:"supplier_name",width:150},{title:"商品编号",field:"goods_id",width:100},{title:"商品名称",field:"goods_name",width:500},{title:"工厂代码",field:"factory_code",width:100},{title:"单位",field:"unit_name",width:130},{title:"商品数量",field:"goods_num",headerAlign:"right",align:"right",width:100},{title:"采购价格",field:"purchase_price",headerAlign:"right",align:"right",formatter:"priceFormatNone",width:100},{title:"小计金额",field:"subtotal_price",headerAlign:"right",align:"right",formatter:"priceFormatNone",width:100},{title:"商品备注",field:"remark",width:100},{title:"单据备注",field:"rremark",width:100},{title:"未入库数量",field:"remaining_goods_num",headerAlign:"right",align:"right",width:100},{title:"已入库数量",field:"reference_goods_num",headerAlign:"right",align:"right",width:100},{title:"退货数量",field:"refund_num",headerAlign:"right",align:"right",width:100},{title:"来源单号（采购计划单号）",field:"plan_sn",width:150},{title:"部门",field:"buyer_ndepartment_nameame",width:100},{title:"采购员",field:"buyer_name",width:100},{title:"业务日期",field:"business_time",width:130},{title:"单据时间",field:"add_time",width:145},{title:"创建人",field:"add_user_name",width:130},{title:"修改人",field:"update_user_name",width:130},{title:"修改时间",field:"update_time",width:145},{title:"审核状态",field:"auditor_status_name",width:130},{title:"审核人",field:"auditor_name",width:130},{title:"审核时间",field:"auditor_time",width:145},{title:"付款方式",field:"receivables_mode_name",width:100}]}},methods:{footerMethod:function(e){var t=this,a=e.columns,i=e.data;return[a.map((function(e,a){if(1===a)return"页小计";if(["goods_num","subtotal_price"].includes(e.property)){var r=t.$utils.sum(i,e.property);return"goods_price"===e.property?r.toFixed(2).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):Number.isInteger(r)?r:r.toFixed(2)}return null})),a.map((function(e,a){return 1===a?"合计":"goods_num"===e.property&&t.footerData.total_goods_num?t.footerData.total_goods_num:"subtotal_price"===e.property&&t.footerData.total_total_price?t.footerData.total_total_price:null}))]},getTableData:function(e){200===e.data.code&&(this.footerData=e.data.data.desc)}}}),d={mixins:[o],name:"purchaseOrderdetail",data:function(){return{timeValue1:[],defaultArea:[0],addTIME:this.$publicFution.formatData(new Date),realname:localStorage.realname,outerVisible:!1,searchParams:{},loading:!0,timeValue:[],is_shop:0}},methods:Object(n["a"])(Object(n["a"])({},Object(s["b"])(["orderdetailIndexACT"])),{},{exportOrder:function(e){Object.assign(this.params,{export_type:e});this.$axMethod.exportPurchaseOrderDetailUrl(this.params).then((function(e){200==e.data.code&&(window.location.href=e.data.data.url)}))},supplierChange:function(e){e&&(this.params.supplier_name=this.supplierList.filter((function(t){return t.supplier_id===e}))[0].supplier_name)},departmentChange:function(e){e&&(this.params.department_name=this.departmentList.filter((function(t){return t.department_id===e}))[0].department_name),this.$set(this.params,"business_id","")},employeeChange:function(e){e&&(this.params.buyer_name=this.employeeList.filter((function(t){return t.employee_id===e}))[0].employee_name)},receivablesChange:function(e){e&&(this.params.receivables_mode_name=this.receivablesList.filter((function(t){return t.receivables_mode_id===e}))[0].receivables_mode_name)},seeF:function(e){1==this.authority.b_info?this.customreSee({moduleName:"customreSee",order_id:e.order_id}):this.$message.warning("抱歉，您没有查看订单的权限，请找管理员开通！")},companyChange:function(e){e&&(this.params.company_name=this.companyList.filter((function(t){return t.company_id===e}))[0].company_name),this.$set(this.params,"supplier_id",""),this.$set(this.params,"department_id",""),this.$set(this.params,"business_id","")},onReset:function(){this.defaultArea=[0],this.$set(this,"params",{auditor_status:0}),this.timeValue=[],this.timeValue1=[],this.onSearch()},onSearch:function(){this.timeValue?(this.params.start_time=this.timeValue[0],this.params.end_time=this.timeValue[1]):this.params.start_time=this.params.end_time="",this.timeValue1?(this.params.start_auditor_time=this.timeValue1[0],this.params.end_auditor_time=this.timeValue1[1]):this.params.start_auditor_time=this.params.end_auditor_time="",this.$refs.xTable._getData(1)}}),computed:Object(n["a"])({},Object(s["c"])(["orderDetailGet"])),mounted:function(){if(this.authority=JSON.parse(localStorage.getItem("authority")),this.orderDetailGet&&this.orderDetailGet.params){if(this.orderDetailGet.params.start_time){var e=this.orderDetailGet.params,t=e.start_time,a=e.end_time;this.timeValue=this.timeValue.concat([t,a])}Object.assign(this.orderDetailGet.params,{employee_id:this.orderDetailGet.params.buyer_id,employee_name:this.orderDetailGet.params.buyer_name}),this.$set(this,"params",this.orderDetailGet.params),Object(l["l"])(this,this.orderDetailGet.params)}this.orderDetailGet.goPage&&(this.params.page=this.orderDetailGet.goPage,this.params.per_page=this.orderDetailGet.pageSize),this.onSearch()}},c=d,m=(a("0f33f"),a("2877")),u=Object(m["a"])(c,i,r,!1,null,"1109cc14",null);t["default"]=u.exports},5319:function(e,t,a){"use strict";var i=a("2ba4"),r=a("c65b"),n=a("e330"),l=a("d784"),s=a("d039"),o=a("825a"),d=a("1626"),c=a("5926"),m=a("50c4"),u=a("577e"),p=a("1d80"),h=a("8aa5"),f=a("dc4a"),_=a("0cb2"),b=a("14c3"),v=a("b622"),g=v("replace"),y=Math.max,k=Math.min,w=n([].concat),x=n([].push),$=n("".indexOf),D=n("".slice),O=function(e){return void 0===e?e:String(e)},C=function(){return"$0"==="a".replace(/./,"$0")}(),S=function(){return!!/./[g]&&""===/./[g]("a","$0")}(),V=!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));l("replace",(function(e,t,a){var n=S?"$":"$0";return[function(e,a){var i=p(this),n=void 0==e?void 0:f(e,g);return n?r(n,e,i,a):r(t,u(i),e,a)},function(e,r){var l=o(this),s=u(e);if("string"==typeof r&&-1===$(r,n)&&-1===$(r,"$<")){var p=a(t,l,s,r);if(p.done)return p.value}var f=d(r);f||(r=u(r));var v=l.global;if(v){var g=l.unicode;l.lastIndex=0}var C=[];while(1){var S=b(l,s);if(null===S)break;if(x(C,S),!v)break;var V=u(S[0]);""===V&&(l.lastIndex=h(s,m(l.lastIndex),g))}for(var z="",I=0,M=0;M<C.length;M++){S=C[M];for(var L=u(S[0]),G=y(k(c(S.index),s.length),0),A=[],E=1;E<S.length;E++)x(A,O(S[E]));var j=S.groups;if(f){var N=w([L],A,G,s);void 0!==j&&x(N,j);var F=u(i(r,void 0,N))}else F=_(L,s,G,A,j,r);G>=I&&(z+=D(s,I,G)+F,I=G+L.length)}return z+D(s,I)}]}),!V||!C||S)},"8ba4":function(e,t,a){var i=a("23e7"),r=a("eac5");i({target:"Number",stat:!0},{isInteger:r})},b680:function(e,t,a){"use strict";var i=a("23e7"),r=a("da84"),n=a("e330"),l=a("5926"),s=a("408a"),o=a("1148"),d=a("d039"),c=r.RangeError,m=r.String,u=Math.floor,p=n(o),h=n("".slice),f=n(1..toFixed),_=function(e,t,a){return 0===t?a:t%2===1?_(e,t-1,a*e):_(e*e,t/2,a)},b=function(e){var t=0,a=e;while(a>=4096)t+=12,a/=4096;while(a>=2)t+=1,a/=2;return t},v=function(e,t,a){var i=-1,r=a;while(++i<6)r+=t*e[i],e[i]=r%1e7,r=u(r/1e7)},g=function(e,t){var a=6,i=0;while(--a>=0)i+=e[a],e[a]=u(i/t),i=i%t*1e7},y=function(e){var t=6,a="";while(--t>=0)if(""!==a||0===t||0!==e[t]){var i=m(e[t]);a=""===a?i:a+p("0",7-i.length)+i}return a},k=d((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!d((function(){f({})}));i({target:"Number",proto:!0,forced:k},{toFixed:function(e){var t,a,i,r,n=s(this),o=l(e),d=[0,0,0,0,0,0],u="",f="0";if(o<0||o>20)throw c("Incorrect fraction digits");if(n!=n)return"NaN";if(n<=-1e21||n>=1e21)return m(n);if(n<0&&(u="-",n=-n),n>1e-21)if(t=b(n*_(2,69,1))-69,a=t<0?n*_(2,-t,1):n/_(2,t,1),a*=4503599627370496,t=52-t,t>0){v(d,0,a),i=o;while(i>=7)v(d,1e7,0),i-=7;v(d,_(10,i,1),0),i=t-1;while(i>=23)g(d,1<<23),i-=23;g(d,1<<i),v(d,1,1),g(d,2),f=y(d)}else v(d,0,a),v(d,1<<-t,0),f=y(d)+p("0",o);return o>0?(r=f.length,f=u+(r<=o?"0."+p("0",o-r)+f:h(f,0,r-o)+"."+h(f,r-o))):f=u+f,f}})},e961:function(e,t,a){},eac5:function(e,t,a){var i=a("861d"),r=Math.floor;e.exports=Number.isInteger||function(e){return!i(e)&&isFinite(e)&&r(e)===e}}}]);
//# sourceMappingURL=chunk-2f7e0694.58e44a81.js.map