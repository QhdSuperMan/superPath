(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-f76a8e6a"],{"079c":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"seePage"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("库存管理")]),a("el-breadcrumb-item",{staticClass:"attrbute"},[a("span",{on:{click:t.goBack}},[t._v("其他入库管理")])]),a("el-breadcrumb-item",[t._v("查看其他入库单")])],1),a("div",{staticClass:"search_container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"库存组织：",size:"mini"}},[a("span",[t._v(t._s(t.TableData.instoragList.company_name))])]),a("el-form-item",{attrs:{label:"单据号：",size:"mini"}},[a("p",[t._v(t._s(t.TableData.instoragList.instorage_sn))])]),a("el-form-item",{attrs:{label:"业务日期：",size:"mini"}},[a("span",[t._v(t._s(t.TableData.instoragList.business_time))])]),a("el-form-item",{attrs:{label:"仓库名称：",size:"mini"}},[a("span",[t._v(t._s(t.TableData.instoragList.warehouse_name))])]),a("el-form-item",{attrs:{label:"入库类型：",size:"mini"}},[a("span",[t._v(t._s(t.TableData.instoragList.type_name))])]),a("el-form-item",{attrs:{label:"供应商(厂家)：",size:"mini"}},[a("span",[t._v(t._s(t.TableData.instoragList.supplier_name))])]),a("el-form-item",{attrs:{label:"部门：",size:"mini"}},[a("span",[t._v(t._s(t.TableData.instoragList.department_name))])]),a("el-form-item",{attrs:{label:"采购员：",size:"mini"}},[a("span",[t._v(t._s(t.TableData.instoragList.buyer_name))])]),a("el-form-item",{attrs:{label:"分摊方式：",size:"mini"}},[a("span",[t._v(t._s(t.TableData.instoragList.other_price_type_name))])]),a("el-form-item",{attrs:{label:"付款方式：",size:"mini"}},[a("span",[t._v(t._s(t.TableData.instoragList.receivables_mode_name))])]),a("el-form-item",{attrs:{label:"其他费用：",size:"mini"}},[a("span",[t._v(t._s(t.TableData.instoragList.other_price))])]),a("el-form-item",{attrs:{label:"关联单据号：",size:"mini"}},[a("span",[t._v(t._s(t.TableData.instoragList.order_sn))])]),a("el-form-item",{attrs:{label:"厂家发货单号：",size:"mini"}},[a("span",[t._v(t._s(t.TableData.instoragList.factorysend_sn))])]),a("el-form-item",{attrs:{label:"厂家发货日期：",size:"mini"}},[a("span",[t._v(t._s(t.TableData.instoragList.factorysend_time))])]),a("el-form-item",{attrs:{label:"打印次数：",size:"mini"}},[a("span",[t._v(t._s(t.TableData.instoragList.print_times))])]),a("el-form-item",{attrs:{label:"审核状态：",size:"mini"}},[a("span",[t._v(t._s(t.TableData.instoragList.auditor_status_name))])])],1)],1),a("div",{staticClass:"table_container"},[a("xTable",{ref:"xTable",attrs:{ajax:{url:"otherStorageInfoInStorage",params:{instorage_id:t.$route.query.instorage_id},result:"data.data.goodsList"},isPage:!1,sign:t.indexSign,footerMethod:t.footerMethod,tableColumn:t.tableColumn},on:{getData:t.getTableData}}),a("div",{staticClass:"refundauditFoot"},[a("div",{staticStyle:{margin:"15px 0"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"300",disabled:""},model:{value:t.TableData.instoragList.remark,callback:function(e){t.$set(t.TableData.instoragList,"remark",e)},expression:"TableData.instoragList.remark"}},[a("template",{slot:"prepend"},[t._v("备注")])],2)],1),a("span",[t._v("创建人："+t._s(t.TableData.instoragList.add_user_name))]),a("span",[t._v("创建时间："+t._s(t.TableData.instoragList.add_time))]),a("span",[t._v("审核人："+t._s(t.TableData.instoragList.auditor_name))]),a("span",[t._v("审核时间："+t._s(t.TableData.instoragList.auditor_time))]),a("span",[t._v("修改人："+t._s(t.TableData.instoragList.update_user_name))]),a("span",[t._v("修改时间："+t._s(t.TableData.instoragList.update_time))])])],1),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","margin-top":"20px"}},[1==t.$route.query.after_auditor_print_status?[1==t.authority.b_print&&2==t.TableData.instoragList.auditor_status?a("el-button",{attrs:{type:"primary"},on:{click:t.printSheet}},[t._v("打印")]):t._e()]:t._e(),2==t.TableData.instoragList.auditor_status&&1==t.authority.b_nopass?[a("el-button",{attrs:{plain:""},on:{click:function(e){return t.AUDIT_GET()}}},[t._v("弃审")])]:t._e(),1==t.TableData.instoragList.auditor_status?[1==t.authority.b_pass?a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.audit("otherStorageAuditorPassInStorage")}}},[t._v("审核")]):t._e(),1==t.authority.b_invalid?a("el-button",{on:{click:function(e){return t.audit("otherStorageAuditorInvalidInStorage")}}},[t._v("作废")]):t._e()]:t._e(),3==t.TableData.instoragList.auditor_status||2==t.TableData.instoragList.auditor_status||1!=t.authority.b_invalid&&1!=t.authority.b_pass?[a("el-button",{on:{click:t.goBack}},[t._v("返回")])]:a("el-button",{on:{click:t.goBack}},[t._v("取消")])],2),a("errorDialog",{attrs:{errorData:t.trunErrTable,errorState:t.errorState,titleName:[{field:"serial",title:" 行号/单据号",width:200},{field:"msg",title:"失败原因"}]}}),t.printingStatusGet?a("div",[a("lodopDelivery",{ref:"lodopDelivery",attrs:{title:t.title}})],1):t._e()],1)},r=[],n=a("5530"),s=(a("d3b7"),a("159b"),a("a9e3"),a("4de4"),a("caad"),a("78d2")),o=(a("d81d"),a("ac1f"),a("5319"),a("25f0"),a("b680"),a("8ba4"),{data:function(){return{tableColumn:[{type:"index",title:"序号",width:50},{title:"商品编号",field:"goods_id",width:80},{title:"商品名称",field:"goods_name",width:400},{title:"年周/批次",field:"batch",width:88},{title:"生产日期",field:"production_time",width:88},{title:"单位",field:"unit_name",width:88},{title:"入库数量",field:"goods_num",width:70},{title:"采购价",field:"purchase_price",formatter:"priceFormat",headerAlign:"right",align:"right",width:100},{title:"小计金额",field:"subtotal_price",formatter:"priceFormat",headerAlign:"right",align:"right",width:100},{title:"仓库",field:"warehouse_name",width:100},{title:"货位",field:"allocation_name",width:130},{title:"其他费用",field:"other_price",headerAlign:"right",align:"right",formatter:"priceFormat",width:100},{title:"备注",field:"remark"}]}},methods:{footerMethod:function(t){var e=this,a=t.columns,i=t.data;return[a.map((function(t,a){if(2===a)return"页小计";if(["goods_num","subtotal_price","other_price"].includes(t.property)){var r=e.$utils.sum(i,t.property);return"goods_num"===t.property?r.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):"subtotal_price"===t.property?r.toFixed(2).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):"other_price"===t.property?r.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):Number.isInteger(r)?r:r.toFixed(2)}return null}))]},getTableData:function(t){var e=t.data;200===e.code&&(this.TableData=e.data)}}}),l=a("2f62"),u=a("9d20"),d={name:"instorageOtheninstorageInstorageSee",mixins:[o],data:function(){return{authority:{},indexSign:{},trunErrTable:{},title:"",errorState:!1,TableData:{instoragList:{},goodsList:[]},chaid:!1}},components:{lodopDelivery:s["a"],errorDialog:u["a"]},computed:Object(n["a"])({},Object(l["c"])(["printingStatusGet"])),methods:Object(n["a"])(Object(n["a"])({},Object(l["b"])(["printingStatus"])),{},{goBack:function(){this.$router.push({path:"/inventory/otheninstorage"})},printSheet:function(){var t=this;this.printingStatus(!0),this.$set(this,"title","otherStoragePrint"),this.$nextTick((function(){t.$refs.lodopDelivery.printPdf({instorage_id:t.$route.query.instorage_id})}))},AUDIT_GET:function(){var t=this;this.$baseData.checkCarDoctor({bill_type:this.TableData.instoragList.type,bill_id:this.$route.query.instorage_id,operation_type:5}).then((function(){t.$axios({method:"post",url:t.$api.otherStorageUnAuditorPass,data:{instorage_id:t.$route.query.instorage_id,is_list:2}}).then((function(e){if(200==e.data.code){var a=e.data.data;if(a.length){var i=[];a.forEach((function(t){i.push(Number(t.serial))}));var r=t.TableData.goodsList.filter((function(t){return 1==i.includes(t.serial_number)}));t.indexSign={arr:r,str:"serial_number"},t.trunErrTable={data:a,msg:e.data.msg},t.errorState=!0}else{var n=e.data.msg?e.data.msg:a;t.$message({message:n,type:"success"}),t.goBack()}}}))}))},audit:function(t){var e=this;this.$baseData.checkCarDoctor({bill_type:this.TableData.instoragList.type,bill_id:this.$route.query.instorage_id,operation_type:"otherStorageAuditorPassInStorage"===t?4:6}).then((function(){e.$axios({method:"post",url:e.$api[t],data:{instorage_id:e.$route.query.instorage_id}}).then((function(t){200==t.data.code&&(e.$message({message:t.data.msg?t.data.msg:t.data.data,type:"success"}),e.goBack())}))}))}}),mounted:function(){this.authority=JSON.parse(localStorage.getItem("authority"))}},c=d,m=a("2877"),g=Object(m["a"])(c,i,r,!1,null,"396ef226",null);e["default"]=g.exports},"0cb2":function(t,e,a){var i=a("e330"),r=a("7b0b"),n=Math.floor,s=i("".charAt),o=i("".replace),l=i("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,d=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,a,i,c,m){var g=a+t.length,f=i.length,_=d;return void 0!==c&&(c=r(c),_=u),o(m,_,(function(r,o){var u;switch(s(o,0)){case"$":return"$";case"&":return t;case"`":return l(e,0,a);case"'":return l(e,g);case"<":u=c[l(o,1,-1)];break;default:var d=+o;if(0===d)return r;if(d>f){var m=n(d/10);return 0===m?r:m<=f?void 0===i[m-1]?s(o,1):i[m-1]+s(o,1):r}u=i[d-1]}return void 0===u?"":u}))}},5319:function(t,e,a){"use strict";var i=a("2ba4"),r=a("c65b"),n=a("e330"),s=a("d784"),o=a("d039"),l=a("825a"),u=a("1626"),d=a("5926"),c=a("50c4"),m=a("577e"),g=a("1d80"),f=a("8aa5"),_=a("dc4a"),p=a("0cb2"),b=a("14c3"),h=a("b622"),v=h("replace"),D=Math.max,y=Math.min,T=n([].concat),$=n([].push),w=n("".indexOf),S=n("".slice),L=function(t){return void 0===t?t:String(t)},x=function(){return"$0"==="a".replace(/./,"$0")}(),k=function(){return!!/./[v]&&""===/./[v]("a","$0")}(),z=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}));s("replace",(function(t,e,a){var n=k?"$":"$0";return[function(t,a){var i=g(this),n=void 0==t?void 0:_(t,v);return n?r(n,t,i,a):r(e,m(i),t,a)},function(t,r){var s=l(this),o=m(t);if("string"==typeof r&&-1===w(r,n)&&-1===w(r,"$<")){var g=a(e,s,o,r);if(g.done)return g.value}var _=u(r);_||(r=m(r));var h=s.global;if(h){var v=s.unicode;s.lastIndex=0}var x=[];while(1){var k=b(s,o);if(null===k)break;if($(x,k),!h)break;var z=m(k[0]);""===z&&(s.lastIndex=f(o,c(s.lastIndex),v))}for(var I="",C=0,A=0;A<x.length;A++){k=x[A];for(var N=m(k[0]),O=D(y(d(k.index),o.length),0),j=[],E=1;E<k.length;E++)$(j,L(k[E]));var F=k.groups;if(_){var q=T([N],j,O,o);void 0!==F&&$(q,F);var M=m(i(r,void 0,q))}else M=p(N,o,O,j,F,r);O>=C&&(I+=S(o,C,O)+M,C=O+N.length)}return I+S(o,C)}]}),!z||!x||k)},"8ba4":function(t,e,a){var i=a("23e7"),r=a("eac5");i({target:"Number",stat:!0},{isInteger:r})},9374:function(t,e,a){},"9d20":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"errorDialog"},[a("vxe-modal",{attrs:{width:"520",showHeader:"false","mask-closable":"true"},on:{close:t.close},model:{value:t.errorState,callback:function(e){t.errorState=e},expression:"errorState"}},[a("div",{staticClass:"titles"},[t._v("提示:"+t._s(t.errorData.msg))]),a("vxe-grid",{attrs:{height:"200","show-overflow":"tooltip",border:"",columns:t.titleName,size:"mini",data:t.errorData.data}})],1)],1)},r=[],n={props:{errorData:{type:Object,default:function(){return{}}},errorState:{type:Boolean,default:!1},titleName:{type:Array,default:function(){return[{type:"seq",title:"序号",width:50},{field:"serial",width:200,title:"单据号"},{field:"msg",title:"失败原因"}]}}},methods:{close:function(){this.$parent.errorState=!1}}},s=n,o=(a("fa01"),a("a43d"),a("2877")),l=Object(o["a"])(s,i,r,!1,null,"21c7364e",null);e["a"]=l.exports},a43d:function(t,e,a){"use strict";a("9374")},b680:function(t,e,a){"use strict";var i=a("23e7"),r=a("da84"),n=a("e330"),s=a("5926"),o=a("408a"),l=a("1148"),u=a("d039"),d=r.RangeError,c=r.String,m=Math.floor,g=n(l),f=n("".slice),_=n(1..toFixed),p=function(t,e,a){return 0===e?a:e%2===1?p(t,e-1,a*t):p(t*t,e/2,a)},b=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},h=function(t,e,a){var i=-1,r=a;while(++i<6)r+=e*t[i],t[i]=r%1e7,r=m(r/1e7)},v=function(t,e){var a=6,i=0;while(--a>=0)i+=t[a],t[a]=m(i/e),i=i%e*1e7},D=function(t){var e=6,a="";while(--e>=0)if(""!==a||0===e||0!==t[e]){var i=c(t[e]);a=""===a?i:a+g("0",7-i.length)+i}return a},y=u((function(){return"0.000"!==_(8e-5,3)||"1"!==_(.9,0)||"1.25"!==_(1.255,2)||"1000000000000000128"!==_(0xde0b6b3a7640080,0)}))||!u((function(){_({})}));i({target:"Number",proto:!0,forced:y},{toFixed:function(t){var e,a,i,r,n=o(this),l=s(t),u=[0,0,0,0,0,0],m="",_="0";if(l<0||l>20)throw d("Incorrect fraction digits");if(n!=n)return"NaN";if(n<=-1e21||n>=1e21)return c(n);if(n<0&&(m="-",n=-n),n>1e-21)if(e=b(n*p(2,69,1))-69,a=e<0?n*p(2,-e,1):n/p(2,e,1),a*=4503599627370496,e=52-e,e>0){h(u,0,a),i=l;while(i>=7)h(u,1e7,0),i-=7;h(u,p(10,i,1),0),i=e-1;while(i>=23)v(u,1<<23),i-=23;v(u,1<<i),h(u,1,1),v(u,2),_=D(u)}else h(u,0,a),h(u,1<<-e,0),_=D(u)+g("0",l);return l>0?(r=_.length,_=m+(r<=l?"0."+g("0",l-r)+_:f(_,0,r-l)+"."+f(_,r-l))):_=m+_,_}})},c1ac:function(t,e,a){},eac5:function(t,e,a){var i=a("861d"),r=Math.floor;t.exports=Number.isInteger||function(t){return!i(t)&&isFinite(t)&&r(t)===t}},fa01:function(t,e,a){"use strict";a("c1ac")}}]);
//# sourceMappingURL=chunk-f76a8e6a.922381f6.js.map