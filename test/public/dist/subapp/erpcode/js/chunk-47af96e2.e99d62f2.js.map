{"version":3,"sources":["webpack://erpcode-[name]/./src/components/element/purchase/rebate/paymanage/paymanage_add.vue?7942","webpack://erpcode-[name]/src/components/element/purchase/rebate/paymanage/paymanage_add.vue","webpack://erpcode-[name]/./src/components/element/purchase/rebate/paymanage/paymanage_add.vue?9b20","webpack://erpcode-[name]/./src/components/element/purchase/rebate/paymanage/paymanage_add.vue","webpack://erpcode-[name]/./src/components/element/purchase/rebate/paymanage/paymanage_add.vue?1f0f","webpack://erpcode-[name]/./node_modules/core-js/modules/es.number.to-fixed.js","webpack://erpcode-[name]/./src/components/element/purchase/rebate/paymanage/paymanage_add.vue?caf3"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","staticClass","on","goBack","_s","title","ref","params","rules","company_id","isDisabled","companyChange","companyListInvok","model","value","callback","$$v","$set","expression","_l","item","key","company_name","class","type","factory_accounts_type_id","staticStyle","required","message","trigger","supplierListInvok","$event","getHeXiaoData","getSupplier","supplier_id","supplier_name","_e","balance","principal_name","principal_mobile","business_time","accountsTypeChange","getFactoryAccountInvok","factory_accounts_type_name","department_id","DepartmentListInvok","department_name","business_id","EmployeeListInvok","employee_id","employee_name","logistics_id","changeLogistics","logisticsInvok","logistics_name","addPaymangeFun","delFun","_m","TableData","tableData","getSummaries","handleSelectionChange","scopedSlots","_u","fn","scope","clearingFormLoading","event","portGetCollectionList","$index","receivables","row","receivables_mode_id","receivables_mode_name","banktitle","brand_id","String","bankListLoading","portGetCollectingBankList","getBanklist","bank_id","bank_name","getNum","handleEdit","directives","name","rawName","exportDataEvent","isArrow","isDel","isTab","isEdit","getrelationTableSummaries","selected","mode","checkStrictly","SelectionChange","cellMouseenterEvent","cellMouseleaveEvent","editClosedEvent","Boolean","is_company_service","slot","submitForm","staticRenderFns","data","authority","loading","jshj","cxhj","sumBill_price","isChecked","multipleSelection","is_disabled","methods","bankList","some","accounts_type_id","$axMethod","order_by","column","$refs","xTip","toVisible","cell","close","xTableReloadData","xTable","reloadData","arr","xTableGetData","xTableUpdateFooter","$nextTick","xTableSelection","setCheckboxRow","xTableGetSelectRecords","getSelectRecords","exportData","filename","original","isHeader","isFooter","bill_price","Number","rest_price","toFixed","commonPriceIsZero","xTableSelection_list","forEach","clearSelection","price","val","getRebatePrice","newOBJ","then","code","_this","rebate_balance","reomeve","editlist","payment_id","$route","query","purchaseEditPayment","parns","tabledata","length","is_detail","tick","filetes","msg","datalist","flag","purchaseAddPayment","cellClass","columnIndex","selection","companyList","push","finance_company_id","finance_company_name","validate","numberSun","reduce","num","bill_priceSum","checked","portParams","filterJsonField","tableDataArr","obj","filter_json_info","json_info","cancelDataArr","filter_json_list","json_list","JSON","stringify","formName","valid","isPass","_valid","_XID","json_obj","auditor_status","remark","parnam","$router","ruleForm","$message","warning","columns","index","values","every","sums","isNaN","prev","curr","parseFloat","mounted","purchaseGetPaymentInfo","datataple","list","paymentCommonList","fieldArr","localStorage","company_admin_id","$publicFution","formatData","Date","component","$","global","uncurryThis","toIntegerOrInfinity","thisNumberValue","$repeat","fails","RangeError","floor","Math","repeat","stringSlice","slice","un$ToFixed","pow","x","n","acc","log","x2","multiply","c","c2","divide","dataToString","s","t","FORCED","target","proto","forced","fractionDigits","e","z","j","k","number","fractDigits","sign","result"],"mappings":"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","file":"js/chunk-47af96e2.e99d62f2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',[_vm._v(\"采购管理\")]),_c('el-breadcrumb-item',[_vm._v(\"厂家往来\")]),_c('el-breadcrumb-item',{staticClass:\"attrbute\"},[_c('span',{on:{\"click\":_vm.goBack}},[_vm._v(\"厂家付款单管理\")])]),_c('el-breadcrumb-item',[_vm._v(_vm._s(_vm.title)+\"付款单\")])],1),_c('div',{staticClass:\"search_container\"},[_c('el-form',{ref:\"params\",staticClass:\"demo-form-inline\",attrs:{\"inline\":true,\"model\":_vm.params}},[_c('el-form-item',{attrs:{\"label\":\"财务组织\",\"size\":\"mini\",\"prop\":\"company_id\",\"rules\":_vm.rules.company_id}},[_vm._v(\" \"+_vm._s((function(){if(_vm.params.company_id == 0){ _vm.params.company_id = null }})())+\" \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\",\"filterable\":\"\",\"disabled\":_vm.isDisabled},on:{\"change\":_vm.companyChange,\"focus\":_vm.companyListInvok},model:{value:(_vm.params.company_id),callback:function ($$v) {_vm.$set(_vm.params, \"company_id\", $$v)},expression:\"params.company_id\"}},_vm._l((_vm.companyList),function(item){return _c('el-option',{key:item.company_id,attrs:{\"label\":item.company_name,\"value\":item.company_id}},[_c('span',{class:item.type==1 ? 'optionStyle': ''},[_vm._v(_vm._s(item.company_name))])])}),1)],1),_c('el-form-item',{attrs:{\"label\":\"单据号\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"disabled\":\"\"},model:{value:(_vm.params.payment_sn),callback:function ($$v) {_vm.$set(_vm.params, \"payment_sn\", $$v)},expression:\"params.payment_sn\"}})],1),(_vm.params.factory_accounts_type_id!=20002)?_c('div',{staticStyle:{\"display\":\"inline\"}},[_c('el-form-item',{attrs:{\"label\":\"供应商(厂家)\",\"size\":\"mini\",\"prop\":\"supplier_id\",\"rules\":[{ required: true, message: '请选择', trigger: 'change' }]}},[_c('el-select',{attrs:{\"disabled\":_vm.isDisabled,\"maxlength\":\"100\",\"filter-method\":_vm.supplierListInvok,\"filterable\":\"\",\"placeholder\":\"请选择\"},on:{\"focus\":_vm.supplierListInvok,\"change\":function($event){_vm.getHeXiaoData(),_vm.getSupplier($event)}},model:{value:(_vm.params.supplier_id),callback:function ($$v) {_vm.$set(_vm.params, \"supplier_id\", $$v)},expression:\"params.supplier_id\"}},_vm._l((_vm.supplierList),function(item){return _c('el-option',{key:item.supplier_id,attrs:{\"label\":item.supplier_name,\"value\":item.supplier_id}})}),1)],1)],1):_vm._e(),_c('el-form-item',{attrs:{\"label\":\"应付余额\",\"size\":\"mini\"}},[_c('span',[_vm._v(_vm._s(_vm.params.balance||0.00))])]),_c('el-form-item',{attrs:{\"label\":\"联系人\",\"size\":\"mini\"}},[_c('span',[_vm._v(_vm._s(_vm.params.principal_name||''))])]),_c('el-form-item',{attrs:{\"label\":\"联系电话\",\"size\":\"mini\"}},[_c('span',[_vm._v(_vm._s(_vm.params.principal_mobile||''))])]),_c('el-divider'),_c('el-form-item',{attrs:{\"label\":\"业务日期\",\"size\":\"mini\",\"prop\":\"business_time\",\"rules\":_vm.rules.business_time}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"选择日期\",\"value-format\":\"yyyy-MM-dd\",\"disabled\":_vm.isDisabled},model:{value:(_vm.params.business_time),callback:function ($$v) {_vm.$set(_vm.params, \"business_time\", $$v)},expression:\"params.business_time\"}})],1),_c('el-form-item',{attrs:{\"label\":\"往来类型\",\"size\":\"mini\",\"prop\":\"factory_accounts_type_id\",\"rules\":_vm.rules.factory_accounts_type_id}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\",\"filterable\":\"\",\"disabled\":_vm.isDisabled},on:{\"change\":_vm.accountsTypeChange,\"focus\":_vm.getFactoryAccountInvok},model:{value:(_vm.params.factory_accounts_type_id),callback:function ($$v) {_vm.$set(_vm.params, \"factory_accounts_type_id\", $$v)},expression:\"params.factory_accounts_type_id\"}},_vm._l((_vm.factoryAccountsList),function(item){return _c('el-option',{key:item.factory_accounts_type_id,attrs:{\"label\":item.factory_accounts_type_name,\"value\":item.factory_accounts_type_id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"部门\",\"size\":\"mini\"}},[_vm._v(\" \"+_vm._s((function(){if(_vm.params.department_id == 0){ _vm.params.department_id = null }})())+\" \"),_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\",\"filterable\":\"\",\"disabled\":_vm.isDisabled},on:{\"change\":_vm.getHeXiaoData,\"focus\":_vm.DepartmentListInvok},model:{value:(_vm.params.department_id),callback:function ($$v) {_vm.$set(_vm.params, \"department_id\", $$v)},expression:\"params.department_id\"}},_vm._l((_vm.departmentList),function(item){return _c('el-option',{key:item.department_id,attrs:{\"label\":item.department_name,\"value\":item.department_id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"业务员\",\"size\":\"mini\"}},[_vm._v(\" \"+_vm._s((function(){if(_vm.params.business_id == 0){ _vm.params.business_id = null }})())+\" \"),_c('el-select',{attrs:{\"clearable\":\"\",\"filterable\":\"\",\"disabled\":_vm.isDisabled},on:{\"focus\":_vm.EmployeeListInvok,\"change\":_vm.getHeXiaoData},model:{value:(_vm.params.business_id),callback:function ($$v) {_vm.$set(_vm.params, \"business_id\", $$v)},expression:\"params.business_id\"}},_vm._l((_vm.employeeList),function(item){return _c('el-option',{key:item.employee_id,attrs:{\"label\":item.employee_name,\"value\":item.employee_id}})}),1)],1),(_vm.params.factory_accounts_type_id==20002)?_c('div',{staticStyle:{\"display\":\"inline\"}},[_c('el-form-item',{attrs:{\"label\":\"物流公司\",\"size\":\"mini\",\"prop\":\"logistics_id\",\"rules\":_vm.rules.logistics_id}},[_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\",\"filterable\":\"\",\"disabled\":_vm.isDisabled},on:{\"change\":_vm.changeLogistics,\"focus\":_vm.logisticsInvok},model:{value:(_vm.params.logistics_id),callback:function ($$v) {_vm.$set(_vm.params, \"logistics_id\", $$v)},expression:\"params.logistics_id\"}},_vm._l((_vm.logisticsList),function(item){return _c('el-option',{key:item.logistics_id,attrs:{\"label\":item.logistics_name,\"value\":item.logistics_id}})}),1)],1)],1):_vm._e(),_c('el-form-item',{attrs:{\"label\":\"备注\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"maxlength\":\"300\"},model:{value:(_vm.params.remark),callback:function ($$v) {_vm.$set(_vm.params, \"remark\", $$v)},expression:\"params.remark\"}})],1)],1),_c('div',{staticClass:\"add_delet\"},[_c('el-button',{staticClass:\"addBtn\",attrs:{\"icon\":\"el-icon-circle-plus-outline\",\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.addPaymangeFun('params')}}},[_vm._v(\"增行\")]),_c('el-button',{attrs:{\"plain\":\"\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":_vm.delFun}},[_vm._v(\"删除\")])],1)],1),_vm._m(0),_c('div',{staticClass:\"table_container\"},[_c('el-form',{ref:\"formTable\",staticClass:\"form_table\",attrs:{\"model\":_vm.TableData}},[_c('el-table',{ref:\"table\",staticStyle:{\"width\":\"100%\"},attrs:{\"highlight-current-row\":true,\"tooltip-effect\":\"light\",\"border\":\"\",\"data\":_vm.TableData.tableData,\"summary-method\":_vm.getSummaries,\"show-summary\":\"\",\"max-height\":\"600\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"show-overflow-tooltip\":true,\"type\":\"selection\",\"fixed\":\"left\",\"align\":\"center\",\"width\":\"80\"}}),_c('el-table-column',{attrs:{\"show-overflow-tooltip\":true,\"property\":\"receivables_mode_id\",\"label\":\"结算方式\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-select',{staticClass:\"shortInput\",attrs:{\"clearable\":\"\",\"loading\":_vm.clearingFormLoading},on:{\"focus\":function (event) {_vm.portGetCollectionList(scope, scope.$index)},\"change\":function($event){return _vm.receivables(scope.row,scope.$index)}},model:{value:(scope.row.receivables_mode_id),callback:function ($$v) {_vm.$set(scope.row, \"receivables_mode_id\", $$v)},expression:\"scope.row.receivables_mode_id\"}},_vm._l((scope.row.clearingForm),function(item){return _c('el-option',{key:item.receivables_mode_id,attrs:{\"label\":item.receivables_mode_name,\"value\":item.receivables_mode_id}})}),1)]}}])}),_c('el-table-column',{attrs:{\"show-overflow-tooltip\":true,\"property\":\"bank_id\",\"label\":_vm.banktitle},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s((function(){if(scope.row.brand_id == 0) { scope.row.brand_id=String(-1); }})())+\" \"),(scope.row.receivables_mode_id!=10007)?_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"prop\":(\"tableData.\" + (scope.$index) + \".bank_id\"),\"rules\":[{ required: scope.row.receivables_mode_id==10009, message: \"请选择\", trigger: \"change\" }],\"size\":\"mini\"}},[_c('el-select',{key:\"1\",staticClass:\"shortInput\",attrs:{\"loading\":_vm.bankListLoading,\"clearable\":\"\"},on:{\"focus\":function (event) {_vm.portGetCollectingBankList(scope, scope.$index)},\"change\":function (value) { return _vm.getBanklist(scope.row, scope.$index, value); }},model:{value:(scope.row.bank_id),callback:function ($$v) {_vm.$set(scope.row, \"bank_id\", $$v)},expression:\"scope.row.bank_id\"}},_vm._l((scope.row.bankList),function(item){return _c('el-option',{key:item.bank_id,attrs:{\"label\":item.bank_name,\"value\":item.bank_id}})}),1)],1):_c('getBrand',{staticClass:\"shortInput\",attrs:{\"fatherParams\":scope.row},on:{\"change\":function($event){return _vm.getNum(scope.row.brand_id,scope.row)}},model:{value:(scope.row.brand_id),callback:function ($$v) {_vm.$set(scope.row, \"brand_id\", $$v)},expression:\"scope.row.brand_id\"}})]}}])}),_c('el-table-column',{attrs:{\"show-overflow-tooltip\":true,\"property\":\"bank_number\",\"label\":\"银行账号\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{staticClass:\"editor\",attrs:{\"size\":\"small\",\"type\":\"number\",\"disabled\":\"disabled\"},model:{value:(scope.row.bank_number),callback:function ($$v) {_vm.$set(scope.row, \"bank_number\", $$v)},expression:\"scope.row.bank_number\"}})]}}])}),_c('el-table-column',{attrs:{\"show-overflow-tooltip\":true,\"property\":\"common_price\",\"label\":\"金额\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{staticClass:\"editor\",attrs:{\"size\":\"small\",\"type\":\"number\",\"suffix-icon\":\"el-icon-edit-outline\"},on:{\"change\":function($event){return _vm.handleEdit(scope)}},model:{value:(scope.row.common_price),callback:function ($$v) {_vm.$set(scope.row, \"common_price\", $$v)},expression:\"scope.row.common_price\"}})]}}])}),_c('el-table-column',{attrs:{\"show-overflow-tooltip\":true,\"property\":\"remark\",\"label\":\"备注\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{staticClass:\"editor\",attrs:{\"maxlength\":\"300\",\"suffix-icon\":\"el-icon-edit-outline\"},model:{value:(scope.row.remark),callback:function ($$v) {_vm.$set(scope.row, \"remark\", $$v)},expression:\"scope.row.remark\"}})]}}])})],1)],1)],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.is_disabled),expression:\"is_disabled\"}],staticClass:\"aboutList\"},[_c('div',{staticClass:\"paymanageTitle fcsb\"},[_c('span',[_vm._v(\"核销明细\")]),_c('el-link',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.exportDataEvent}},[_vm._v(\"导出核销明细\")])],1),_c('div',{staticClass:\"table_container\"},[_c('div',[_c('vxe-tooltip',{ref:\"xTip\"}),_c('vxe-table',{ref:\"xTable\",attrs:{\"border\":\"\",\"show-overflow\":\"\",\"show-header-overflow\":\"\",\"size\":\"mini\",\"keyboard-config\":{isArrow: true, isDel: false, isTab: true, isEdit: true},\"show-footer\":\"\",\"footer-method\":_vm.getrelationTableSummaries,\"align\":\"center\",\"highlight-cell\":\"\",\"max-height\":\"500\",\"highlight-hover-row\":\"\",\"highlight-current-row\":\"\",\"resizable\":\"\",\"mouse-config\":{selected: true},\"edit-config\":{trigger: 'dblclick', mode: 'cell'},\"checkbox-config\":{checkStrictly: true}},on:{\"select-change\":_vm.SelectionChange,\"cell-mouseenter\":_vm.cellMouseenterEvent,\"cell-mouseleave\":_vm.cellMouseleaveEvent,\"edit-closed\":_vm.editClosedEvent}},[_c('vxe-table-column',{attrs:{\"type\":\"checkbox\",\"width\":\"50\",\"tree-node\":\"\"}}),_c('vxe-table-column',{attrs:{\"type\":\"seq\",\"width\":\"60\",\"title\":\"序号\"}}),_c('vxe-table-column',{attrs:{\"field\":\"bill_sn\",\"min-width\":\"120\",\"title\":\"单据号\"}}),_c('vxe-table-column',{attrs:{\"field\":\"type_name\",\"width\":\"120\",\"title\":\"单据类型\"}}),_c('vxe-table-column',{attrs:{\"field\":\"supplier_name\",\"min-width\":\"150\",\"title\":\"供应商(厂家)\"}}),_c('vxe-table-column',{attrs:{\"field\":\"instorage_num\",\"width\":\"120\",\"title\":\"采购数量\"}}),(_vm.params.factory_accounts_type_id==20001)?_c('vxe-table-column',{attrs:{\"field\":\"order_price\",\"width\":\"120\",\"title\":\"采购金额\"}}):_vm._e(),_c('vxe-table-column',{attrs:{\"field\":\"rebate_price\",\"width\":\"120\",\"title\":\"使用返利\",\"visible\":Boolean(_vm.is_company_service)}}),_c('vxe-table-column',{attrs:{\"field\":\"payable_price\",\"width\":\"120\",\"title\":\"实际应付金额\",\"visible\":Boolean(_vm.is_company_service)}}),(_vm.params.factory_accounts_type_id==20002)?_c('vxe-table-column',{attrs:{\"field\":\"order_price\",\"width\":\"120\",\"title\":\"其它金额\"}}):_vm._e(),_c('vxe-table-column',{attrs:{\"field\":\"business_time\",\"min-width\":\"200\",\"title\":\"业务日期\"}}),_c('vxe-table-column',{attrs:{\"field\":\"add_time\",\"min-width\":\"200\",\"title\":\"单据时间\"}}),_c('vxe-table-column',{attrs:{\"field\":\"price\",\"width\":\"130\",\"title\":\"已付款金额\"}}),_c('vxe-table-column',{attrs:{\"field\":\"rest_price\",\"width\":\"130\",\"title\":\"未付款金额\"}}),_c('vxe-table-column',{attrs:{\"field\":\"bill_price\",\"title\":\"本次付款金额\",\"width\":\"130\",\"edit-render\":{name: 'vNumber'}}})],1)],1)])]),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.goBack}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('params')}}},[_vm._v(\"确 定\")])],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"paymanageTitle\"},[_c('span',[_vm._v(\"结算明细\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item>采购管理</el-breadcrumb-item>\n      <el-breadcrumb-item>厂家往来</el-breadcrumb-item>\n      <el-breadcrumb-item class=\"attrbute\">\n        <span @click=\"goBack\">厂家付款单管理</span>\n      </el-breadcrumb-item>\n      <el-breadcrumb-item>{{title}}付款单</el-breadcrumb-item>\n    </el-breadcrumb>\n    <div class=\"search_container\">\n      <el-form :inline=\"true\" class=\"demo-form-inline\" :model=\"params\" ref=\"params\">\n        <el-form-item label=\"财务组织\" size=\"mini\" prop=\"company_id\" :rules=\"rules.company_id\">\n          {{(function(){if(params.company_id == 0)params.company_id = null})()}}\n          <el-select v-model=\"params.company_id\" placeholder=\"请选择\" @change=\"companyChange\" filterable @focus=\"companyListInvok\" :disabled=\"isDisabled\">\n            <el-option v-for=\"item in companyList\" :key=\"item.company_id\" :label=\"item.company_name\" :value=\"item.company_id\">\n              <span :class=\"item.type==1 ? 'optionStyle': ''\">{{ item.company_name }}</span>\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"单据号\" size=\"mini\">\n          <el-input type=\"text\" v-model=\"params.payment_sn\" disabled></el-input>\n        </el-form-item>\n        <div v-if=\"params.factory_accounts_type_id!=20002\" style=\"display:inline;\">\n          <el-form-item label=\"供应商(厂家)\" size=\"mini\" prop=\"supplier_id\" :rules=\"[{ required: true, message: '请选择', trigger: 'change' }]\">\n            <!-- getSupplier -->\n            <el-select v-model=\"params.supplier_id\" :disabled=\"isDisabled\" maxlength=\"100\" :filter-method=\"supplierListInvok\" @focus=\"supplierListInvok\" @change=\"getHeXiaoData(),getSupplier($event)\" filterable placeholder=\"请选择\">\n              <el-option v-for=\"item in supplierList\" :label=\"item.supplier_name\" :value=\"item.supplier_id\" :key=\"item.supplier_id\">\n              </el-option>\n            </el-select>\n          </el-form-item>\n        </div>\n        <el-form-item label=\"应付余额\" size=\"mini\">\n          <span>{{params.balance||0.00}}</span>\n        </el-form-item>\n        <el-form-item label=\"联系人\" size=\"mini\">\n          <span>{{params.principal_name||''}}</span>\n        </el-form-item>\n        <el-form-item label=\"联系电话\" size=\"mini\">\n          <span>{{params.principal_mobile||''}}</span>\n        </el-form-item>\n        <el-divider></el-divider>\n        <el-form-item label=\"业务日期\" size=\"mini\" prop=\"business_time\" :rules=\"rules.business_time\">\n          <el-date-picker type=\"date\" v-model=\"params.business_time\" placeholder=\"选择日期\" value-format=\"yyyy-MM-dd\" :disabled=\"isDisabled\">\n          </el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"往来类型\" size=\"mini\" prop=\"factory_accounts_type_id\" :rules=\"rules.factory_accounts_type_id\">\n          <el-select v-model=\"params.factory_accounts_type_id\" placeholder=\"请选择\" @change=\"accountsTypeChange\" filterable :disabled=\"isDisabled\" @focus=\"getFactoryAccountInvok\">\n            <el-option :label=\"item.factory_accounts_type_name\" :value=\"item.factory_accounts_type_id\" :key=\"item.factory_accounts_type_id\" v-for=\"item in factoryAccountsList\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"部门\" size=\"mini\">\n          {{(function(){if(params.department_id == 0)params.department_id = null})()}}\n          <el-select clearable v-model=\"params.department_id\" placeholder=\"请选择\" @change=\"getHeXiaoData\" filterable :disabled=\"isDisabled\" @focus=\"DepartmentListInvok\">\n            <el-option :label=\"item.department_name\" :value=\"item.department_id\" :key=\"item.department_id\" v-for=\"item in departmentList\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"业务员\" size=\"mini\">\n          {{(function(){if(params.business_id == 0)params.business_id = null})()}}\n          <el-select clearable v-model=\"params.business_id\" filterable :disabled=\"isDisabled\" @focus=\"EmployeeListInvok\" @change=\"getHeXiaoData\">\n            <el-option :label=\"item.employee_name\" :value=\"item.employee_id\" :key=\"item.employee_id\" v-for=\"item in employeeList\"></el-option>\n          </el-select>\n        </el-form-item>\n        <div v-if=\"params.factory_accounts_type_id==20002\" style=\"display:inline;\">\n          <el-form-item label=\"物流公司\" size=\"mini\" prop=\"logistics_id\" :rules=\"rules.logistics_id\">\n            <el-select clearable v-model=\"params.logistics_id\" placeholder=\"请选择\" filterable @change=\"changeLogistics\" :disabled=\"isDisabled\" @focus=\"logisticsInvok\">\n              <el-option :label=\"item.logistics_name\" :value=\"item.logistics_id\" :key=\"item.logistics_id\" v-for=\"item in logisticsList\"></el-option>\n            </el-select>\n          </el-form-item>\n        </div>\n        <el-form-item label=\"备注\" size=\"mini\">\n          <el-input v-model=\"params.remark\" type=\"text\" maxlength=\"300\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div class=\"add_delet\">\n        <el-button icon=\"el-icon-circle-plus-outline\" type=\"primary\" class=\"addBtn\" size=\"mini\" @click=\"addPaymangeFun('params')\">增行</el-button>\n        <el-button plain icon=\"el-icon-delete\" size=\"mini\" @click=\"delFun\">删除</el-button>\n      </div>\n    </div>\n    <div class=\"paymanageTitle\">\n      <span>结算明细</span>\n    </div>\n    <div class=\"table_container\">\n      <el-form class=\"form_table\" :model=\"TableData\" ref=\"formTable\">\n        <el-table :highlight-current-row=\"true\" ref=\"table\" tooltip-effect=\"light\" border :data=\"TableData.tableData\" @selection-change=\"handleSelectionChange\" style=\"width: 100%\" :summary-method=\"getSummaries\" show-summary max-height=\"600\">\n          <el-table-column :show-overflow-tooltip=\"true\" type=\"selection\" fixed=\"left\" align=\"center\" width=\"80\"></el-table-column>\n          <el-table-column :show-overflow-tooltip=\"true\" property=\"receivables_mode_id\" label=\"结算方式\">\n            <template slot-scope=\"scope\">\n              <el-select clearable :loading=\"clearingFormLoading\" v-model=\"scope.row.receivables_mode_id\" @focus=\"event => {portGetCollectionList(scope, scope.$index)}\" class=\"shortInput\" @change=\"receivables(scope.row,scope.$index)\">\n                <el-option v-for=\"item in scope.row.clearingForm\" :label=\"item.receivables_mode_name\" :value=\"item.receivables_mode_id\" :key=\"item.receivables_mode_id\">\n                </el-option>\n              </el-select>\n            </template>\n          </el-table-column>\n          <el-table-column :show-overflow-tooltip=\"true\" property=\"bank_id\" :label=\"banktitle\">\n            <template slot-scope=\"scope\">\n              {{(function(){if(scope.row.brand_id == 0) scope.row.brand_id=String(-1);})()}}\n              <el-form-item style=\"width:100%;\" :prop=\"`tableData.${scope.$index}.bank_id`\" :rules='[{ required: scope.row.receivables_mode_id==10009, message: \"请选择\", trigger: \"change\" }]' size=\"mini\" v-if=\"scope.row.receivables_mode_id!=10007\">\n                <el-select key=\"1\" :loading=\"bankListLoading\" clearable v-model=\"scope.row.bank_id\" class=\"shortInput\" @focus=\"event => {portGetCollectingBankList(scope, scope.$index)}\" @change=\"value => getBanklist(scope.row, scope.$index, value)\">\n                  <el-option v-for=\"item in scope.row.bankList\" :label=\"item.bank_name\" :value=\"item.bank_id\" :key=\"item.bank_id\">\n                  </el-option>\n                </el-select>\n              </el-form-item>\n              <!-- 如果是返利冲账 则展示品牌下拉 -->\n\n              <getBrand  class=\"shortInput\" v-else v-model=\"scope.row.brand_id\" :fatherParams='scope.row' @change=\"getNum(scope.row.brand_id,scope.row)\"  />\n            </template>\n          </el-table-column>\n          <el-table-column :show-overflow-tooltip=\"true\" property=\"bank_number\" label=\"银行账号\">\n            <template slot-scope=\"scope\">\n              <el-input size=\"small\" type=\"number\" disabled=\"disabled\" class=\"editor\" v-model=\"scope.row.bank_number\"></el-input>\n            </template>\n          </el-table-column>\n          <el-table-column :show-overflow-tooltip=\"true\" property=\"common_price\" label=\"金额\">\n            <template slot-scope=\"scope\">\n              <!-- @keyup.enter.native=\"changePrice(scope.row,scope.$index)\" -->\n              <el-input size=\"small\" type=\"number\" class=\"editor\" v-model=\"scope.row.common_price\" @change=\"handleEdit(scope)\" suffix-icon=\"el-icon-edit-outline\"></el-input>\n            </template>\n          </el-table-column>\n          <el-table-column :show-overflow-tooltip=\"true\" property=\"remark\" label=\"备注\">\n            <template slot-scope=\"scope\">\n              <el-input v-model=\"scope.row.remark\" maxlength=\"300\" class=\"editor\" suffix-icon=\"el-icon-edit-outline\"></el-input>\n            </template>\n          </el-table-column>\n        </el-table>\n      </el-form>\n    </div>\n    <!-- <span class=\"attention\">*输入金额后请按Enter键进行确认</span> -->\n    <div class=\"aboutList\" v-show=\"is_disabled\">\n      <div class=\"paymanageTitle fcsb\">\n        <span>核销明细</span>\n        <el-link type=\"primary\" @click=\"exportDataEvent\">导出核销明细</el-link>\n      </div>\n      <div class=\"table_container\">\n        <div>\n          <vxe-tooltip ref=\"xTip\"></vxe-tooltip>\n          <vxe-table border @select-change=\"SelectionChange\" @cell-mouseenter=\"cellMouseenterEvent\" @cell-mouseleave=\"cellMouseleaveEvent\" show-overflow show-header-overflow size=\"mini\" :keyboard-config=\"{isArrow: true, isDel: false, isTab: true, isEdit: true}\" show-footer :footer-method=\"getrelationTableSummaries\" @edit-closed=\"editClosedEvent\" align=\"center\" highlight-cell max-height=\"500\" highlight-hover-row highlight-current-row resizable ref=\"xTable\" :mouse-config=\"{selected: true}\" :edit-config=\"{trigger: 'dblclick', mode: 'cell'}\" :checkbox-config=\"{checkStrictly: true}\">\n            <vxe-table-column type=\"checkbox\" width=\"50\" tree-node></vxe-table-column>\n            <vxe-table-column type=\"seq\" width=\"60\" title=\"序号\"></vxe-table-column>\n            <vxe-table-column field=\"bill_sn\" min-width=\"120\" title=\"单据号\"></vxe-table-column>\n            <vxe-table-column field=\"type_name\" width=\"120\" title=\"单据类型\"></vxe-table-column>\n            <vxe-table-column field=\"supplier_name\" min-width=\"150\" title=\"供应商(厂家)\"></vxe-table-column>\n            <vxe-table-column field=\"instorage_num\" width=\"120\" title=\"采购数量\"></vxe-table-column>\n            <vxe-table-column v-if=\"params.factory_accounts_type_id==20001\" field=\"order_price\" width=\"120\" title=\"采购金额\"></vxe-table-column>\n            <vxe-table-column field=\"rebate_price\" width=\"120\" title=\"使用返利\" :visible=\"Boolean(is_company_service)\">\n            </vxe-table-column>\n            <vxe-table-column field=\"payable_price\" width=\"120\" title=\"实际应付金额\" :visible=\"Boolean(is_company_service)\"></vxe-table-column>\n            <vxe-table-column v-if=\"params.factory_accounts_type_id==20002\" field=\"order_price\" width=\"120\" title=\"其它金额\"></vxe-table-column>\n            <vxe-table-column field=\"business_time\" min-width=\"200\" title=\"业务日期\"></vxe-table-column>\n            <vxe-table-column field=\"add_time\" min-width=\"200\" title=\"单据时间\"></vxe-table-column>\n            <vxe-table-column field=\"price\" width=\"130\" title=\"已付款金额\"></vxe-table-column>\n            <vxe-table-column field=\"rest_price\" width=\"130\" title=\"未付款金额\"></vxe-table-column>\n            <vxe-table-column field=\"bill_price\" title=\"本次付款金额\" width=\"130\" :edit-render=\"{name: 'vNumber'}\">\n            </vxe-table-column>\n          </vxe-table>\n        </div>\n      </div>\n    </div>\n\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"goBack\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"submitForm('params')\">确 定</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { opthionList } from \"common/utils/public_function/commonUtils\";\nimport { mapActions, mapGetters } from \"vuex\";\nexport default {\n  name: \"purchasePaymanage_add\",\n  data() {\n    return {\n      authority: {},\n      clearingFormLoading: false, // 结算方式是否加载\n      bankListLoading: false, // 开户银行是否加载\n      title: \"添加\",\n      loading: false,\n      params: {},\n      banktitle: \"开户银行\",\n      jshj: 0, //结算金额合计 null (不允许选择核销明细列)\n      cxhj: 0, //核销明细合计\n      sumBill_price: null, // 保存累加已填入的本次付款金额\n      isChecked: false, // 是否允许选中（核销明细）\n      TableData: {\n        tableData: [],\n      },\n      multipleSelection: [],\n      isDisabled: false,\n      is_disabled: false,\n    };\n  },\n  methods: {\n    // ...mapActions([\"paymanageIndexACT\"]),\n    // 切换开户银行后\n    getBanklist(row, index, value) {\n      // 循环遍历 bankList\n      row.bankList.some((item) => {\n        if (item.bank_id == value) {\n          this.$set(row, \"bank_number\", item.bank_number);\n          return true;\n        }\n      });\n    },\n    // 接口 获取结算明细中的 结算方式 列的下拉\n    portGetCollectionList(scope, index) {\n      let { row } = scope;\n      let params = {\n        accounts_type_id: this.params.accounts_type_id,\n        company_id: this.params.company_id ? this.params.company_id : \"\",\n        type: 1,\n      };\n      this.clearingFormLoading = true;\n      this.$axMethod\n        .getCollectionList(params)\n        .then(({ data }) => {\n          this.clearingFormLoading = false;\n          if (data.code == 200) {\n            let result = data.data;\n            this.$set(row, `clearingForm`, result);\n          }\n        })\n        .catch((error) => {\n          this.clearingFormLoading = false;\n        });\n    },\n    // 接口 获取结算明细中的 开户银行 列的下拉\n    portGetCollectingBankList(scope, index) {\n      let { row } = scope;\n      //收款银行下拉\n      let params = {\n        company_id: this.params.company_id ? this.params.company_id : \"\",\n        order_by: 1,\n      };\n      this.bankListLoading = true; // 启用加载\n      this.$axMethod\n        .getCollectingBankList(params)\n        .then(({ data }) => {\n          this.bankListLoading = false; // 关闭加载\n          if (data.code == 200) {\n            let result = data.data;\n            this.$set(row, `bankList`, result);\n          }\n        })\n        .catch((error) => {\n          this.bankListLoading = false; // 关闭加载\n        });\n    },\n    /* 关于 xTable 的API start */\n    cellMouseenterEvent({ row, column, cell }) {\n      if (column.type == \"selection\" && this.jshj == null) {\n        this.$refs.xTip.toVisible(cell, `请先输入金额`);\n      }\n    },\n    cellMouseleaveEvent({ row, column, cell }) {\n      this.$refs.xTip.close();\n    },\n    // 核销明细 大数据核销明细数据 渲染\n    xTableReloadData(arr = []) {\n      // 加载更新数据\n      this.$refs.xTable.reloadData(arr);\n    },\n    // 核销明细 获取大数据列表数据 Arr\n    xTableGetData() {\n      let { tableData = [] } = this.$refs.xTable.getTableData();\n      return tableData;\n    },\n    // 核销明细 刷新结算明细 table footer\n    xTableUpdateFooter() {\n      this.$nextTick(() => {\n        if (this.$refs.xTable) {\n          this.$refs.xTable.updateFooter(); // 刷新结算明细 footer\n          let sumeveny = this.$refs.xTable.footerData[0]; // 获取table footer 数据\n          this.cxhj = sumeveny[sumeveny.length - 1]; // 获取核销明细 合计\n        }\n      });\n    },\n    // 核销明细 设置选中项setSelection\n    xTableSelection(row, isChecked = true) {\n      this.$refs.xTable.setCheckboxRow(row, isChecked);\n    },\n    // 核销明细 获取选中行数据\n    xTableGetSelectRecords() {\n      return this.$refs.xTable.getSelectRecords();\n    },\n    // 核销明细 导出文件\n    exportDataEvent() {\n      this.$refs.xTable.exportData({\n        filename: \"核销明细\",\n        type: \"csv\",\n        original: true,\n        isHeader: false,\n        isFooter: false,\n      });\n    },\n    /* 关于 xTable 的API end */\n\n    // 关闭表格 编辑状态\n    editClosedEvent({ row }, event) {\n      if (row.bill_price > 0) {\n        if (Number(row.rest_price) < 0) {\n          row.bill_price = \"0.00\";\n        }\n        row.bill_price = Number(row.bill_price).toFixed(2);\n      } else {\n        if (Number(row.rest_price) > 0) {\n          row.bill_price = \"0.00\";\n        }\n      }\n      if (this.jshj) {\n        // let selectionArr = this.xTableSelection();\n        // 如果合计不为null\n        this.xTableSelection(row);\n        // this.$refs.xTable.toggleRowSelection(row, true);\n      }\n      this.xTableUpdateFooter(); // 刷新table footer\n    },\n    // 计算金额小于等于0的处理\n    commonPriceIsZero() {\n      if (this.jshj <= 0) {\n        // 重置选中项的本次付款金额\n        let xTableSelection_list = this.xTableGetSelectRecords(); // 获取已选中项(核销明细表)\n        xTableSelection_list.forEach((item) => {\n          this.$set(item, \"bill_price\", \"0.00\");\n        });\n        this.xTableUpdateFooter(); // 刷新table footer\n        this.$refs.xTable.clearSelection(); // 清除选中项\n      }\n    },\n    // 操作编辑了\n    handleEdit(scope) {\n      let { row, column } = scope;\n      let key = column[\"property\"];\n      if (key == \"common_price\") {\n        let price = isNaN(Number(row[key])) ? \"\" : Number(row[key]).toFixed(2);\n        row[key] != 0 && this.$set(row, key, price);\n        this.$nextTick(() => {\n          this.commonPriceIsZero();\n        });\n      } else {\n        this.xTableUpdateFooter(); // 刷新table footer\n      }\n    },\n    getNum(val, row) {\n      //选择品牌以后\n      let _this = this;\n      let newOBJ = {\n        brand_id: val,\n        supplier_id: this.params.supplier_id,\n        company_id: this.params.company_id,\n      };\n      this.$axMethod.getRebatePrice(newOBJ).then(({ data }) => {\n        if (data.code == 200) {\n          _this.$set(row, \"common_price\", data.data.rebate_balance);\n        }\n      });\n    },\n    reomeve() {\n      this.$set(this.TableData, \"tableData\", []);\n      // this.$set(this, \"relationTable\", []);\n      this.xTableReloadData();\n      this.$set(this.params, \"supplier_id\", \"\");\n    },\n    // 接口 编辑\n    editlist(val) {\n      let par = {\n        payment_id: this.$route.query.payment_id,\n      };\n      let parns = Object.assign(val, par);\n      this.$axMethod.purchaseEditPayment(parns).then(({ data }) => {\n        if (data.code == 200) {\n          let tabledata = data.data;\n          if (!!tabledata.length) {\n            this.$set(this, \"is_disabled\", true);\n          }\n          if (val.is_detail) {\n            let filetes = tabledata.filter((val) => {\n              return val.tick == 1;\n            });\n            // 加载数据\n            this.xTableReloadData(data.data);\n            // 设置选中项\n            this.$nextTick(() => {\n              filetes.forEach((row) => {\n                this.xTableSelection(row); // selection 选中\n              });\n            });\n          } else {\n            this.$message({\n              message: data.msg || data.data,\n              type: \"success\",\n            });\n            this.goBack();\n          }\n        }\n      });\n    },\n    // 接口 新增\n    datalist(val) {\n      let {\n        company_id,\n        factory_accounts_type_id,\n        supplier_id,\n        logistics_id,\n      } = this.params; //必填项\n      let flag = true;\n      if (factory_accounts_type_id) {\n        switch (factory_accounts_type_id) {\n          case 20001: //采购付款\n          case 20003: //预付款\n          case 20004: //其他付款\n            if (!(company_id && supplier_id)) flag = false;\n            break;\n          case 20002: //运费付款\n            if (!(company_id && logistics_id)) flag = false;\n            break;\n          default:\n            break;\n        }\n      } else {\n        flag = false;\n      }\n      if (!flag) return false;\n\n      this.$axMethod.purchaseAddPayment(val).then(({ data }) => {\n        if (data.code == 200) {\n          let tabledata = data.data;\n          if (tabledata.length) {\n            this.$set(this, \"is_disabled\", true);\n          }\n          if (val.is_detail) {\n            this.xTableReloadData(data.data);\n            return;\n          }\n          this.$message({\n            message: data.msg || data.data,\n            type: \"success\",\n          });\n          this.goBack();\n        }\n      });\n    },\n    cellClass(row) {\n      if (row.columnIndex == 0) {\n        return \"Disabledselection\";\n      }\n    },\n    SelectionChange({ selection, row, checked }) {\n      let numberSun = [];\n      if (selection.length) {\n        if (this.params.accounts_type_id == 10002 && !this.params.company_id) {\n          this.companyList = [];\n          this.companyList.push({\n            company_id: selection[0].finance_company_id,\n            company_name: selection[0].finance_company_name,\n          });\n          this.$set(this.params, \"company_id\", selection[0].finance_company_id);\n          this.companyChange(selection[0].finance_company_id);\n          this.$refs[\"params\"].validate((valid) => {});\n        }\n        selection.forEach((item) => {\n          if (!item.bill_price) {\n            item.bill_price = 0;\n          }\n          numberSun.push(Number(item.bill_price));\n        });\n        this.sumBill_price = numberSun.reduce((num, item) => {\n          return num + item;\n        });\n        // 结算合计减去按勾选顺序的各行中【本次冲销金额】\n        var bill_priceSum = this.jshj - this.sumBill_price;\n      }\n      if (checked) {\n        if (this.jshj >= 0) {\n          //为正数或者为0\n          if (Number(row.rest_price) > 0) {\n            if (bill_priceSum >= Number(row.rest_price)) {\n              //如果A>=B\n              row.bill_price = Number(row.rest_price).toFixed(2);\n            } else if (\n              //如果A>0并且A<B\n              bill_priceSum >= 0 &&\n              bill_priceSum < Number(row.rest_price)\n            ) {\n              row.bill_price = Number(bill_priceSum).toFixed(2);\n            } else if (\n              //如果A<0并且A<B\n              bill_priceSum < 0 &&\n              bill_priceSum < Number(row.rest_price)\n            ) {\n              row.bill_price = 0;\n            } else {\n              //都不满足直接等于A\n              row.bill_price = Number(bill_priceSum).toFixed(2);\n            }\n          } else {\n            row.bill_price = Number(row.rest_price).toFixed(2);\n          }\n        } else {\n          //结算合计为负数\n          if (Number(row.rest_price) > 0) {\n            //勾选的正数行\n            if (bill_priceSum > 0 && bill_priceSum >= Number(row.rest_price)) {\n              row.bill_price = Number(row.rest_price).toFixed(2);\n            } else if (\n              bill_priceSum >= 0 &&\n              bill_priceSum < Number(row.rest_price)\n            ) {\n              row.bill_price = Number(bill_priceSum).toFixed(2);\n            } else if (\n              bill_priceSum < 0 &&\n              bill_priceSum < Number(row.rest_price)\n            ) {\n              row.bill_price = 0;\n            }\n          } else {\n            if (bill_priceSum >= Number(row.rest_price) && bill_priceSum < 0) {\n              row.bill_price = Number(bill_priceSum).toFixed(2);\n            } else if (\n              bill_priceSum < 0 &&\n              bill_priceSum < Number(row.rest_price)\n            ) {\n              row.bill_price = Number(row.rest_price).toFixed(2);\n            } else if (bill_priceSum >= 0) {\n              row.bill_price = Number(row.rest_price).toFixed(2);\n            }\n          }\n        }\n      } else {\n        row.bill_price = 0;\n      }\n\n      this.xTableUpdateFooter(); // 刷新table footer\n      // 弃用 调用接口方法去计算金额 改为前端计算\n    },\n    receivables(val, index = \"\") {\n      //收款方式\n      if (val.receivables_mode_id == 10007) {\n        this.$set(val, \"bank_number\", \"\");\n        this.banktitle = \"返利品牌\";\n      } else {\n        this.banktitle = \"开户银行\";\n      }\n      this.$nextTick(() => {\n        this.$refs.table.bodyWrapper.scrollTop =\n          this.$refs.table.bodyWrapper.scrollHeight + 33;\n      });\n    },\n    getSupplier(val) {\n      this.$axMethod\n        .getSupplierInfo({\n          company_id: this.params.company_id,\n          supplier_id: val,\n        })\n        .then(({ data }) => {\n          if (data.code == 200) {\n            [\n              \"associated_supplier_id\",\n              \"balance\",\n              \"principal_mobile\",\n              \"principal_name\",\n            ].forEach((item) => {\n              this.$set(this.params, item, data.data[item]);\n            });\n          }\n        });\n    },\n    getHeXiaoData(val) {\n      // this.relationTable = [];\n      this.xTableReloadData(); // 初始化 核销明细表\n      let factory_accounts_type_id = this.params.factory_accounts_type_id;\n      let portParams = {\n        company_id: this.params.company_id, // 组织ID\n        factory_accounts_type_id: factory_accounts_type_id, // 往来类型ID\n        supplier_id: this.params.supplier_id, // 供应商ID\n        department_id: this.params.department_id || 0, // 部门ID\n        is_detail: 1, // 获取核销明细列表\n      };\n      if (\n        factory_accounts_type_id == 20001 ||\n        factory_accounts_type_id == 20002\n      ) {\n        if (!!this.$route.query.payment_id) {\n          this.editlist(portParams);\n        } else {\n          this.datalist(portParams);\n        }\n      }\n    },\n    // json 开头的字段过滤数据\n    filterJsonField() {\n      let tableDataArr = this.TableData.tableData, // 获取明细列表数组\n        cancelDataArr = this.xTableGetSelectRecords(); // 获取核销明细列表数组\n      // 接口 字段json_info 数组中需要的数组对象字段（结算明细）\n      let filter_json_info = {\n          common_price: \"\", // 金额\n          receivables_mode_id: 0, // 结算方式\n          bank_id: 0, // 开户银行\n          brand_id: 0, // 品牌\n          remark: \"\", // 备注\n        },\n        // 接口 字段json_list 数组中需要的数组对象字段（核销明细）\n        filter_json_list = {\n          bill_id: 0, // 单据号id\n          bill_sn: \"\", // 单据号\n          supplier_id: 0, // 供应商（厂家）id\n          supplier_name: \"\", // 供应伤（厂家）name\n          buyer_id: 0, //采购员Id\n          buyer_name: \"\", // 采购员名称\n          instorage_num: \"\", // 入库数量\n          order_price: \"\", // 入库金额\n          price: \"\", // 已冲销金额\n          rebate_price: \"\",\n          rest_price: \"\", // 为冲销金额\n          business_time: \"\", // 业务时间\n          add_time: \"\", // 单据时间\n          payable_price: \"\", //实际应付金额\n          type_id: \"\", // 单据类型\n          bill_price: \"\", // 本次冲销金额\n        };\n      let json_list = [], // 核销明细\n        json_info = []; // 结算明细\n      // 计算明细\n      tableDataArr.forEach((item) => {\n        let obj = {};\n        for (let key in filter_json_info) {\n          if (item[key] || item[key] == 0) {\n            obj[key] = item[key];\n          } else {\n            obj[key] = filter_json_info[key];\n          }\n        }\n        json_info.push(obj);\n      });\n      // 核销明细\n      cancelDataArr.forEach((item) => {\n        let obj = {};\n        for (let key in filter_json_list) {\n          if (item[key] || item[key] == 0) {\n            obj[key] = item[key];\n          } else {\n            obj[key] = filter_json_list[key];\n          }\n        }\n        json_list.push(obj);\n      });\n      return {\n        json_info: JSON.stringify(json_info),\n        json_list: JSON.stringify(json_list),\n      };\n    },\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          let relationTable = this.xTableGetData(); // 获取列表数据\n          let getSelectRecords = this.xTableGetSelectRecords(); // 获取列表选中行\n          let isPass = true; // 是否可以提交\n          // 验证结算明细列表 是否通过验证\n          this.$refs[\"formTable\"].validate((_valid) => {\n            isPass = _valid;\n          });\n          if (!isPass) return;\n          getSelectRecords.forEach((item) => {\n            item.tick = 1;\n            item._XID && delete item._XID; // 去除框架带的多余字段\n          });\n          if (\n            getSelectRecords.length <= 0 &&\n            [20001, 20002].includes(this.params.factory_accounts_type_id)\n          ) {\n            this.$message.warning(\"请选择至少一条核销明细\");\n            return false;\n          }\n          if (this.TableData.tableData.length < 1) {\n            this.$message.warning(\"结算明细不能为空\");\n            return false;\n          }\n          // 验证结算明细是否已经完善了\n          let flag = this.TableData.tableData.every((item) => {\n            return (\n              !!item.receivables_mode_id && toString(item.common_price) != \"\"\n            );\n          });\n          if (!flag) {\n            this.$message.warning(\"请完善 结算明细 表体信息\");\n            return false;\n          }\n          // 往来类型 为 运费付款 提示\n          if (this.params.factory_accounts_type_id == 20002) {\n            let cxhj = Number(this.cxhj),\n              jshj = Number(this.jshj);\n            if (cxhj != jshj) {\n              this.$message.warning(\"运费付款，冲销金额合计必须等于收款总额\");\n              return;\n            }\n          }\n          // 核销明细合计不能大于结算明细（暂定）(采购付款/运费付款)\n          if (\n            this.params.factory_accounts_type_id == 20001 ||\n            this.params.factory_accounts_type_id == 20002\n          ) {\n            if (this.is_company_service) {\n              if (Number(this.cxhj) != Number(this.jshj)) {\n                this.$message.warning(\n                  \"创建付款单据失败，请核查填写的金额是否在“本次付款金额”列下全部付款\"\n                );\n                return;\n              }\n            } else {\n              if (Number(this.cxhj) > Number(this.jshj)) {\n                this.$message.warning(\"核销明细合计 不能大于 结算明细合计\");\n                return;\n              }\n            }\n          }\n          let json_obj = this.filterJsonField();\n          let parnam = Object.assign({}, this.params, {\n            json_info: json_obj.json_info, // 结算明细\n            is_detail: 0,\n            json_list: json_obj.json_list, // list 字段改成 json_list 字段 核销明细\n          });\n\n          if (!!this.$route.query.payment_id) {\n            // 对提交的数据进行过滤\n            let objField = {\n              payment_id: \"\",\n              supplier_id: 0,\n              logistics_id: 0,\n              factory_accounts_type_id: 0,\n              department_id: 0,\n              company_id: 0,\n              business_time: \"\",\n              auditor_status: \"\",\n              remark: \"\",\n              json_info: \"[]\",\n              json_list: \"[]\",\n            };\n            let portParams = { is_detail: 0 };\n            for (let key in objField) {\n              if (parnam[key]) {\n                portParams[key] = parnam[key];\n              }\n            }\n            // 过滤往后台传的参数\n            this.editlist(portParams);\n          } else {\n            if (this.params.factory_accounts_type_id) {\n              this.datalist(parnam);\n            }\n          }\n        }\n      });\n    },\n    changeLogistics(val) {\n      this.getHeXiaoData();\n    },\n    goBack() {\n      this.$router.push({ path: \"/purchase/paymanage\" });\n    },\n    addPaymangeFun(ruleForm) {\n      this.$refs[ruleForm].validate((valid) => {\n        if (valid) {\n          this.TableData.tableData.push({});\n        }\n      });\n    },\n    delFun() {\n      //删除\n      if (this.multipleSelection.length < 1) {\n        this.$message.warning(\"请选择要删除的数据\");\n        return false;\n      }\n      this.multipleSelection.forEach((val) => {\n        let index = this.TableData.tableData.indexOf(val);\n        return this.TableData.tableData.splice(index, 1);\n      });\n      if (this.TableData.tableData.length <= 0) {\n        this.jshj = null;\n      }\n    },\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    accountsTypeChange(val) {\n      // 预付款和其他付款下面隐藏\n      if (val == 20004 || val == 20003) {\n        this.$set(this, \"is_disabled\", false);\n      } else {\n        this.$set(this, \"is_disabled\", true);\n      }\n      if (val == 20001 || val == 20004) {\n        this.$set(this.TableData, \"tableData\", []);\n        // this.$set(this, \"relationTable\", []);\n        this.xTableReloadData();\n        this.getHeXiaoData();\n        return;\n      }\n      this.reomeve();\n      if (this.params.logistics_id || this.params.supplier_id) {\n        this.$set(this.params, \"logistics_id\", \"\");\n        this.$set(this.params, \"supplier_id\", \"\");\n      }\n    },\n    companyChange(val) {\n      this.$set(this.params, \"department_id\", \"\");\n      this.reomeve();\n    },\n    // 合计行（结算明细）\n    getSummaries(param) {\n      const { columns, data } = param;\n      const sums = [];\n      columns.forEach((column, index) => {\n        if (index === 1) {\n          sums[index] = \"总计\";\n          return;\n        }\n        const values = data.map((item) => Number(item[column.property]));\n        if (!values.every((value) => isNaN(value))) {\n          sums[index] = values.reduce((prev, curr) => {\n            const value = Number(curr);\n            if (!isNaN(value)) {\n              return prev + curr;\n            } else {\n              return prev;\n            }\n          }, 0);\n          if (index == 4) {\n            sums[index] = parseFloat(sums[index]).toFixed(2);\n            this.jshj = parseFloat(sums[index]).toFixed(2);\n          } else {\n            sums[index] = \"\";\n          }\n        } else {\n          sums[index] = \"\";\n        }\n      });\n\n      return sums;\n    },\n    // 核销明细 合计\n    getrelationTableSummaries(param) {\n      const { columns, data } = param;\n      return [\n        columns.map((column, columnIndex) => {\n          if (columnIndex === 1) {\n            return \"合计\";\n          }\n          if ([\"price\", \"rest_price\", \"bill_price\"].includes(column.property)) {\n            this.cxhj = this.$utils.sum(data, column.property); // 获取核销明细 合计\n            return this.$utils.sum(data, column.property).toFixed(2);\n          }\n          return null;\n        }),\n      ];\n    },\n  },\n  mounted() {\n    this.title = !this.$route.query.payment_id ? \"添加\" : \"修改\";\n    if (Boolean(this.$route.query.payment_id)) {\n      this.isDisabled = true;\n      let obj = {\n        payment_id: this.$route.query.payment_id,\n      };\n      this.$axMethod.purchaseGetPaymentInfo(obj).then(({ data }) => {\n        if (data.code == 200) {\n          let datataple = data.data;\n          if (datataple.list.length) {\n            this.$set(this, \"is_disabled\", true);\n          }\n          this.$set(this.TableData, \"tableData\", datataple.paymentCommonList);\n          datataple.paymentCommonList.forEach((item, index, arr) => {\n            if (item.brand_id == 0) {\n              item.brand_id = -1;\n            }\n            if (item.bank_id == 0) item.bank_id = \"\";\n            this.receivables(datataple.paymentCommonList[index]);\n            this.$set(arr[index], \"clearingForm\", [\n              {\n                receivables_mode_id: arr[index].receivables_mode_id,\n                receivables_mode_name: arr[index].receivables_mode_name,\n              },\n            ]);\n            this.$set(arr[index], \"bankList\", [\n              {\n                bank_id: arr[index].bank_id,\n                bank_number: arr[index].bank_number,\n                bank_name: arr[index].bank_name,\n              },\n            ]);\n            let fieldArr = [\"bank_id\", \"bank_number\", \"bank_name\"];\n            fieldArr.forEach((key) => {\n              this.$set(this.TableData.tableData[index], key, arr[index][key]);\n            });\n            this.$set(this.TableData.tableData[index], \"brandArry\", [\n              {\n                brand_id: datataple.paymentCommonList[index].brand_id,\n                brand_name: datataple.paymentCommonList[index].brand_name,\n              },\n            ]);\n          });\n          opthionList(this, datataple.paymentInfo);\n          this.$set(this, \"params\", datataple.paymentInfo);\n          this.getSupplier(datataple.paymentInfo.supplier_id);\n          this.$set(this.TableData, \"tableData\", datataple.paymentCommonList);\n          this.getHeXiaoData(); // 请求核销明细\n        }\n      });\n    } else {\n      this.$set(this, \"params\", {\n        company_id: Number(localStorage.company_id),\n        // business_id: Number(localStorage.employee_id),\n        company_admin_id: Number(localStorage.company_admin_id),\n        business_time: this.$publicFution.formatData(new Date()),\n      });\n      opthionList(this, localStorage);\n    }\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.paymanageTitle {\n  height: 20px;\n  line-height: 20px;\n  padding-left: 33px;\n  padding-right: 33px;\n  position: relative;\n  font-size: 14px;\n  font-weight: bold;\n  margin-bottom: 7px;\n  color: #343434;\n}\n\n.aboutList {\n  margin-top: 30px;\n}\n\n.table_title_current {\n  color: #45c1c8;\n}\n\n.attention {\n  color: red;\n  font-size: 12px;\n}\n.table_container {\n  /deep/ .form_table {\n    .el-input {\n      width: 100%;\n    }\n    .el-table {\n      .el-table__row {\n        td {\n          vertical-align: text-top;\n        }\n      }\n    }\n  }\n}\n</style>\n<style lang=\"less\">\n.el-table .Disabledselection .el-checkbox__input {\n  display: none;\n  position: relative;\n}\n.el-table .Disabledselection .cell::before {\n  content: \"选择\";\n  right: 11px;\n}\n</style>\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./paymanage_add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./paymanage_add.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./paymanage_add.vue?vue&type=template&id=5ae7e876&scoped=true&\"\nimport script from \"./paymanage_add.vue?vue&type=script&lang=js&\"\nexport * from \"./paymanage_add.vue?vue&type=script&lang=js&\"\nimport style0 from \"./paymanage_add.vue?vue&type=style&index=0&id=5ae7e876&lang=less&scoped=true&\"\nimport style1 from \"./paymanage_add.vue?vue&type=style&index=1&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5ae7e876\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./paymanage_add.vue?vue&type=style&index=1&lang=less&\"","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar thisNumberValue = require('../internals/this-number-value');\nvar $repeat = require('../internals/string-repeat');\nvar fails = require('../internals/fails');\n\nvar RangeError = global.RangeError;\nvar String = global.String;\nvar floor = Math.floor;\nvar repeat = uncurryThis($repeat);\nvar stringSlice = uncurryThis(''.slice);\nvar un$ToFixed = uncurryThis(1.0.toFixed);\n\nvar pow = function (x, n, acc) {\n  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);\n};\n\nvar log = function (x) {\n  var n = 0;\n  var x2 = x;\n  while (x2 >= 4096) {\n    n += 12;\n    x2 /= 4096;\n  }\n  while (x2 >= 2) {\n    n += 1;\n    x2 /= 2;\n  } return n;\n};\n\nvar multiply = function (data, n, c) {\n  var index = -1;\n  var c2 = c;\n  while (++index < 6) {\n    c2 += n * data[index];\n    data[index] = c2 % 1e7;\n    c2 = floor(c2 / 1e7);\n  }\n};\n\nvar divide = function (data, n) {\n  var index = 6;\n  var c = 0;\n  while (--index >= 0) {\n    c += data[index];\n    data[index] = floor(c / n);\n    c = (c % n) * 1e7;\n  }\n};\n\nvar dataToString = function (data) {\n  var index = 6;\n  var s = '';\n  while (--index >= 0) {\n    if (s !== '' || index === 0 || data[index] !== 0) {\n      var t = String(data[index]);\n      s = s === '' ? t : s + repeat('0', 7 - t.length) + t;\n    }\n  } return s;\n};\n\nvar FORCED = fails(function () {\n  return un$ToFixed(0.00008, 3) !== '0.000' ||\n    un$ToFixed(0.9, 0) !== '1' ||\n    un$ToFixed(1.255, 2) !== '1.25' ||\n    un$ToFixed(1000000000000000128.0, 0) !== '1000000000000000128';\n}) || !fails(function () {\n  // V8 ~ Android 4.3-\n  un$ToFixed({});\n});\n\n// `Number.prototype.toFixed` method\n// https://tc39.es/ecma262/#sec-number.prototype.tofixed\n$({ target: 'Number', proto: true, forced: FORCED }, {\n  toFixed: function toFixed(fractionDigits) {\n    var number = thisNumberValue(this);\n    var fractDigits = toIntegerOrInfinity(fractionDigits);\n    var data = [0, 0, 0, 0, 0, 0];\n    var sign = '';\n    var result = '0';\n    var e, z, j, k;\n\n    if (fractDigits < 0 || fractDigits > 20) throw RangeError('Incorrect fraction digits');\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (number != number) return 'NaN';\n    if (number <= -1e21 || number >= 1e21) return String(number);\n    if (number < 0) {\n      sign = '-';\n      number = -number;\n    }\n    if (number > 1e-21) {\n      e = log(number * pow(2, 69, 1)) - 69;\n      z = e < 0 ? number * pow(2, -e, 1) : number / pow(2, e, 1);\n      z *= 0x10000000000000;\n      e = 52 - e;\n      if (e > 0) {\n        multiply(data, 0, z);\n        j = fractDigits;\n        while (j >= 7) {\n          multiply(data, 1e7, 0);\n          j -= 7;\n        }\n        multiply(data, pow(10, j, 1), 0);\n        j = e - 1;\n        while (j >= 23) {\n          divide(data, 1 << 23);\n          j -= 23;\n        }\n        divide(data, 1 << j);\n        multiply(data, 1, 1);\n        divide(data, 2);\n        result = dataToString(data);\n      } else {\n        multiply(data, 0, z);\n        multiply(data, 1 << -e, 0);\n        result = dataToString(data) + repeat('0', fractDigits);\n      }\n    }\n    if (fractDigits > 0) {\n      k = result.length;\n      result = sign + (k <= fractDigits\n        ? '0.' + repeat('0', fractDigits - k) + result\n        : stringSlice(result, 0, k - fractDigits) + '.' + stringSlice(result, k - fractDigits));\n    } else {\n      result = sign + result;\n    } return result;\n  }\n});\n","export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./paymanage_add.vue?vue&type=style&index=0&id=5ae7e876&lang=less&scoped=true&\""],"sourceRoot":""}