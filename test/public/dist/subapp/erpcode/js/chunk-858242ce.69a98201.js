(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-858242ce"],{"129f":function(t,a){t.exports=Object.is||function(t,a){return t===a?0!==t||1/t===1/a:t!=t&&a!=a}},"2b19":function(t,a,e){var i=e("23e7"),s=e("129f");i({target:"Object",stat:!0},{is:s})},7630:function(t,a,e){},"783d":function(t,a,e){"use strict";e("7630")},eff5:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"search_container"},[e("el-form",{ref:"TableDataRef",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.params}},[e("el-form-item",{attrs:{label:"财务组织",size:"mini"}},[e("el-select",{attrs:{clearable:"",multiple:"","collapse-tags":"",placeholder:"请选择",filterable:""},on:{change:t.companyChange,focus:t.getCompanyFoucs},model:{value:t.params.company_id,callback:function(a){t.$set(t.params,"company_id",a)},expression:"params.company_id"}},t._l(t.companyList,(function(a){return e("el-option",{key:a.company_id,attrs:{label:a.company_name,value:a.company_id}},[e("span",{class:1==a.type?"optionStyle":""},[t._v(t._s(a.company_name))])])})),1)],1),e("el-form-item",{attrs:{label:"创建人",size:"mini"}},[e("el-select",{attrs:{filterable:"",multiple:"","collapse-tags":""},on:{focus:t.getBusinessListFocus},model:{value:t.params.add_user_id,callback:function(a){t.$set(t.params,"add_user_id",a)},expression:"params.add_user_id"}},t._l(t.addUserList.options,(function(t){return e("el-option",{key:t.user_id,attrs:{label:t.realname,value:t.user_id}})})),1)],1),e("el-form-item",{attrs:{label:"业务日期",size:"mini"}},[e("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:""},on:{change:t.change},model:{value:t.timeValue1,callback:function(a){t.timeValue1=a},expression:"timeValue1"}})],1),e("el-form-item",{attrs:{label:"审核日期",size:"mini"}},[e("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:""},on:{change:t.change},model:{value:t.timeValue,callback:function(a){t.timeValue=a},expression:"timeValue"}})],1),e("el-form-item",{attrs:{label:"结算方式",size:"mini"}},[e("el-select",{attrs:{clearable:""},on:{focus:t.getPayment},model:{value:t.params.receivables_mode_id,callback:function(a){t.$set(t.params,"receivables_mode_id",a)},expression:"params.receivables_mode_id"}},t._l(t.payment.options,(function(t){return e("el-option",{key:t.receivables_mode_id,attrs:{label:t.receivables_mode_name,value:t.receivables_mode_id}})})),1)],1),e("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.onSearch("TableDataRef")}}},[t._v("查询")]),e("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.onReset}},[t._v("重置")])],1)],1)],1),1==t.authority.b_export&&t.listShow?e("div",{staticClass:"add_delet"},[e("el-dropdown",{attrs:{placement:"bottom-start"}},[e("span",{staticStyle:{cursor:"pointer",color:"#4e90e2"},attrs:{"split-button":""}},[e("el-button",{attrs:{plain:"",icon:"iconfont icon-daochu10",size:"mini"}},[t._v("导出")])],1),e("el-dropdown-menu",{staticStyle:{"margin-top":"10px"},attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{nativeOn:{click:function(a){return t.exportOrder(1)}}},[t._v("导出Excel文件")]),e("el-dropdown-item",{nativeOn:{click:function(a){return t.exportOrder(2)}}},[t._v("导出CSV逗号分隔")])],1)],1)],1):t._e(),t.listShow?e("div",{staticClass:"table_container"},[e("table",{attrs:{cellspacing:"0"}},[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("结算方式")]),e("th",{staticStyle:{"text-align":"left","min-width":"120px"}},[t._v("开户银行")]),e("th",{staticStyle:{"text-align":"left"}},[t._v("银行账号后四位")]),t._l(t.TableData.company_list,(function(a){return e("th",{key:a.id,attrs:{align:"right"}},[t._v(t._s(a.company_name))])})),e("th",[t._v("合计")])],2)]),e("tbody",[t._l(t.TableData.tableData,(function(a,i){return e("tr",{key:i},[1!=a.receivables_mode_namedis?e("td",{attrs:{rowspan:a.receivables_mode_namespan}},[t._v(t._s(a.receivables_mode_name))]):t._e(),e("td",[t._v(t._s(a.bank_name))]),e("td",[t._v(t._s(a.bank_number))]),t._l(a.list,(function(a,i){return e("td",{key:i,attrs:{align:"right"}},[t._v(t._s(t._f("priceFormatNone")(a)))])})),e("td",{attrs:{align:"right"}},[t._v(t._s(t._f("priceFormatNone")(a.sum)))])],2)})),e("tr",{staticStyle:{background:"#f8f9fa"}},[e("td",{staticStyle:{"font-weight":"700"},attrs:{colspan:"3"}},[t._v("合计")]),t._l(t.TableData.tableData.totalNum,(function(a,i){return e("td",{key:i,staticStyle:{"font-weight":"700"},attrs:{align:"right"}},[t._v(t._s(t._f("priceFormatNone")(a))+" ")])})),e("td",{staticStyle:{"font-weight":"700"},attrs:{align:"right"}},[t._v(t._s(t._f("priceFormatNone")(t.TableData.tableData.totalSum)))])],2)],2)]),e("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[e("el-col",{attrs:{span:12}},[e("div",[t._v("生成时间："+t._s(t.allList.add_time))])]),e("el-col",{attrs:{span:12}},[e("div",{staticClass:"textAr"},[t._v("制表人："+t._s(t.allList.add_user_name))])])],1),e("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[e("el-col",{attrs:{span:12}},[e("div",{staticClass:"report_row"},[t._v("业务日期起始:"+t._s(t.params.business_start_time))])]),e("el-col",{attrs:{span:12}},[e("div",{staticClass:"textAr"},[t._v("业务日期起始:"+t._s(t.params.business_end_time))])])],1)],1):t._e()])},s=[],n=e("2909"),r=(e("a15b"),e("d81d"),e("d3b7"),e("159b"),e("2b19"),e("a9e3"),e("65b0")),l={name:"reportReceiptsumrpt",data:function(){return{authority:{},params:{},addUserList:{options:[]},searchParams:{},listShow:!1,timeValue:[],timeValue1:[],exportType:null,warehouseList:{options:[]},allList:{},departmentList:{options:[]},employeeList:{options:[]},companyList:[],loading:!0,company:"",TableData:{tableData:[],company_list:[]},tableCompanyList:[],payment:{options:[]}}},methods:{getCompanyFoucs:function(){Object(r["k"])(this,{type:2})},getBusinessListFocus:function(){this.$common.options("getReceiptListXl",this.addUserList,{company_id:this.params.company_id})},companyChange:function(){this.$set(this.params,"add_user_id",[]),this.$set(this.params,"receivables_mode_id",null)},change:function(t){this.params.start_time=t[0],this.params.end_time=t[1]},onReset:function(){var t=this;this.$set(this.params,"company_id",[]),this.$set(this.params,"add_user_id",[]),this.$set(this.params,"receivables_mode_id",null),this.timeValue=[],this.timeValue1=[],this.timeValue&&2==this.timeValue.length?(this.params.start_time=this.timeValue[0],this.params.end_time=this.timeValue[1]):this.params.start_time=this.params.end_time="",this.timeValue1&&2==this.timeValue1.length?(this.params.business_start_time=this.timeValue1[0],this.params.business_end_time=this.timeValue1[1]):this.params.business_start_time=this.params.business_end_time="";var a=Object.assign({},this.params);a.company_id=this.params.company_id.join(","),a.add_user_id=this.params.add_user_id.join(",");var e=this;this.$axios({method:"get",url:this.$api.getReceiptCommonList,params:a}).then((function(a){var i=a.data;if(200==i.code){e.allList=i.data.desc,e.TableData.tableData=i.data.list,e.TableData.company_list=i.data.company_list;var s=[],r=i.data.list.map((function(t){var a=Object.assign({},t,{receivables_name:t.receivables_name});return delete a.data,Object(n["a"])(t.data)}));r.forEach((function(t){s.push.apply(s,Object(n["a"])(t))}));var l=t.$publicFution.combineCell(s);l.totalNum={},l.totalSum=0,l.forEach((function(t){var a={};for(var e in t)Object.is(Number(e),NaN)||(a[e]=t[e]);for(var i in t.list=a,t.list)l.totalNum[String(i)]=0})),l.forEach((function(t){for(var a in t.list)l.totalNum[String(a)]+=Number(t.list[a]);l.totalSum+=t.sum})),e.TableData.tableData=l}}))},exportOrder:function(t){Object.assign(this.params,{export_type:t});var a=Object.assign({},this.params);a.company_id=this.params.company_id.join(","),a.add_user_id=this.params.add_user_id.join(","),this.$axMethod.exportReceiptCommonUrl(a).then((function(t){200==t.data.code&&(window.location.href=t.data.data.url)}))},onSearch:function(){var t=this;this.listShow=!0,this.timeValue&&2==this.timeValue.length?(this.params.start_time=this.timeValue[0],this.params.end_time=this.timeValue[1]):this.params.start_time=this.params.end_time="",this.timeValue1?(this.params.business_start_time=this.timeValue1[0],this.params.business_end_time=this.timeValue1[1]):this.params.business_start_time=this.params.business_end_time="";var a=Object.assign({},this.params);a.company_id=this.params.company_id.join(","),a.add_user_id=this.params.add_user_id.join(",");var e=this;this.$axios({method:"get",url:this.$api.getReceiptCommonList,params:a}).then((function(a){var i=a.data;if(200==i.code){e.allList=i.data.desc,e.TableData.tableData=i.data.list,e.TableData.company_list=i.data.company_list;var s=[],r=i.data.list.map((function(t){var a=Object.assign({},t,{receivables_name:t.receivables_name});return delete a.data,Object(n["a"])(t.data)}));r.forEach((function(t){s.push.apply(s,Object(n["a"])(t))}));var l=t.$publicFution.combineCell(s);l.totalNum={},l.totalSum=0,l.forEach((function(t){var a={};for(var e in t)Object.is(Number(e),NaN)||(a[e]=t[e]);for(var i in t.list=a,t.list)l.totalNum[String(i)]=0})),l.forEach((function(t){for(var a in t.list)l.totalNum[String(a)]+=Number(t.list[a]);l.totalSum+=t.sum})),e.TableData.tableData=l}}))},getPayment:function(){0==this.params.company_id.length?this.payment.options=[]:this.$common.options("getCollectionListOption",this.payment,{company_id:this.params.company_id})}},created:function(){this.authority=JSON.parse(localStorage.getItem("authority"))}},o=l,m=(e("783d"),e("2877")),c=Object(m["a"])(o,i,s,!1,null,"04500971",null);a["default"]=c.exports}}]);
//# sourceMappingURL=chunk-858242ce.69a98201.js.map