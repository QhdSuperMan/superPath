{"version":3,"sources":["webpack://erpcode-[name]/./src/components/element/purchase/purchaseplan/plan/planAdd.vue?1181","webpack://erpcode-[name]/src/components/element/purchase/purchaseplan/plan/planAdd.vue","webpack://erpcode-[name]/./src/components/element/purchase/purchaseplan/plan/planAdd.vue?a32e","webpack://erpcode-[name]/./src/components/element/purchase/purchaseplan/plan/planAdd.vue","webpack://erpcode-[name]/./src/components/element/purchase/purchaseplan/plan/config/planAdd.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","staticClass","on","goBack","_s","title","ref","params","formRules","company_id","companyListInvok","companyChange","model","value","callback","$$v","$set","expression","_l","item","key","company_name","class","type","supplierListInvok","supplier_id","supplier_name","warehouseInvok","warehouse_id","warehouse_name","required","staticStyle","buyer_id","EmployeeListInvok","employee_id","employee_name","department_id","departmentChange","DepartmentListInvok","department_name","addRow","deleteRow","signObj","editRules","isEdit","tableColumn","$event","isShowShopPop","confirm","_e","submit","staticRenderFns","name","mixins","data","isJc","$publicFution","deepCopy","sumbitRow","goods_id","goods_name","goods_sn","factory_code","purchase_price","goods_num","remark","subtotal_price","arr","str","methods","$refs","xTable","_proxy","getIsJc","$axMethod","goPage","$route","query","id","$router","push","tableData","formName","validate","valid","length","Object","assign","filter","val","auditor_status","map","goods_json","JSON","stringify","box","activated","initTurnOrder","mounted","plan_id","$axios","method","url","$api","getPlanInfo","res","code","result","goods_list","forEach","info","buyer_name","includes","Number","company_admin_id","localStorage","employeeList","component","sumbitRowModule","paramsModule","plan_sn","requirement_delivery_time","delivery_status_name","tableHead","message","purchase_total_price","is_invoices_name","width","align","field","editRender","getParams","row","showObj","unit_name","brand_name","specification_type","getIcon","icon","iconMethod","i","events","change","handleEdit","column","property","headerAlign","autoselect","input","showOverflow","modelKey","list","label","formatter","obj","num","price","goodsPrice","computeTotal","$message","warning","undefined","error","_routeParams","transferType","stockEarlyWarningChangeOrderInfo","portParams","then","abstract","Date","companyList"],"mappings":"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","file":"js/chunk-7a2ad47e.e7484e62.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',[_vm._v(\"采购管理\")]),_c('el-breadcrumb-item',{staticClass:\"attrbute\"},[_c('span',{on:{\"click\":_vm.goBack}},[_vm._v(\"采购计划\")])]),_c('el-breadcrumb-item',[_vm._v(_vm._s(_vm.title)+\"采购计划\")])],1),_c('div',{staticClass:\"search_container\"},[_c('el-form',{ref:\"ruleForm\",staticClass:\"demo-form-inline\",attrs:{\"inline\":true,\"model\":_vm.params,\"rules\":_vm.formRules}},[_c('el-form-item',{attrs:{\"label\":\"采购组织\",\"size\":\"mini\",\"prop\":\"company_id\"}},[_vm._v(\" \"+_vm._s((function(){if(_vm.params.company_id == 0){ _vm.params.company_id = null }})())+\" \"),_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\",\"filterable\":\"\"},on:{\"focus\":_vm.companyListInvok,\"change\":_vm.companyChange},model:{value:(_vm.params.company_id),callback:function ($$v) {_vm.$set(_vm.params, \"company_id\", $$v)},expression:\"params.company_id\"}},_vm._l((_vm.companyList),function(item){return _c('el-option',{key:item.company_id,attrs:{\"label\":item.company_name,\"value\":item.company_id}},[_c('span',{class:item.type==1 ? 'optionStyle': ''},[_vm._v(_vm._s(item.company_name))])])}),1)],1),_c('el-form-item',{attrs:{\"label\":\"单据号:\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"maxlength\":\"300\",\"disabled\":\"\"},model:{value:(_vm.params.plan_sn),callback:function ($$v) {_vm.$set(_vm.params, \"plan_sn\", $$v)},expression:\"params.plan_sn\"}})],1),_c('el-form-item',{attrs:{\"label\":\"供应商(厂家)\",\"size\":\"mini\"}},[_c('el-select',{attrs:{\"clearable\":\"\",\"filter-method\":_vm.supplierListInvok,\"filterable\":\"\",\"placeholder\":\"请选择\"},on:{\"focus\":_vm.supplierListInvok},model:{value:(_vm.params.supplier_id),callback:function ($$v) {_vm.$set(_vm.params, \"supplier_id\", $$v)},expression:\"params.supplier_id\"}},_vm._l((_vm.supplierList),function(item){return _c('el-option',{key:item.supplier_id,attrs:{\"label\":item.supplier_name,\"value\":item.supplier_id}})}),1)],1),(_vm.isJc)?_c('el-form-item',{attrs:{\"label\":\"仓库名称\",\"size\":\"mini\",\"prop\":\"warehouse_id\"}},[_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\",\"filterable\":true},on:{\"focus\":_vm.warehouseInvok},model:{value:(_vm.params.warehouse_id),callback:function ($$v) {_vm.$set(_vm.params, \"warehouse_id\", $$v)},expression:\"params.warehouse_id\"}},_vm._l((_vm.warehouseList),function(item){return _c('el-option',{key:item.warehouse_id,attrs:{\"label\":item.warehouse_name,\"value\":item.warehouse_id}})}),1)],1):_c('el-form-item',{attrs:{\"label\":\"仓库名称\",\"size\":\"mini\",\"prop\":\"warehouse_id\",\"rules\":{ required: false }}},[_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\",\"filterable\":true},on:{\"focus\":_vm.warehouseInvok},model:{value:(_vm.params.warehouse_id),callback:function ($$v) {_vm.$set(_vm.params, \"warehouse_id\", $$v)},expression:\"params.warehouse_id\"}},_vm._l((_vm.warehouseList),function(item){return _c('el-option',{key:item.warehouse_id,attrs:{\"label\":item.warehouse_name,\"value\":item.warehouse_id}})}),1)],1),(_vm.isJc)?_c('el-form-item',{attrs:{\"label\":\"交货日期\",\"size\":\"mini\",\"prop\":\"requirement_delivery_time\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"160px\"},attrs:{\"value-format\":\"yyyy-MM-dd\",\"type\":\"date\",\"placeholder\":\"选择日期\"},model:{value:(_vm.params.requirement_delivery_time),callback:function ($$v) {_vm.$set(_vm.params, \"requirement_delivery_time\", $$v)},expression:\"params.requirement_delivery_time\"}})],1):_c('el-form-item',{attrs:{\"label\":\"交货日期\",\"size\":\"mini\",\"prop\":\"requirement_delivery_time\",\"rules\":{ required: false }}},[_c('el-date-picker',{staticStyle:{\"width\":\"160px\"},attrs:{\"value-format\":\"yyyy-MM-dd\",\"type\":\"date\",\"placeholder\":\"选择日期\"},model:{value:(_vm.params.requirement_delivery_time),callback:function ($$v) {_vm.$set(_vm.params, \"requirement_delivery_time\", $$v)},expression:\"params.requirement_delivery_time\"}})],1),_c('el-form-item',{attrs:{\"label\":\"采购员\",\"size\":\"mini\",\"prop\":\"buyer_id\"}},[_vm._v(\" \"+_vm._s((function(){if(_vm.params.buyer_id == 0){ _vm.params.buyer_id = null }})())+\" \"),_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\",\"filterable\":true},on:{\"focus\":_vm.EmployeeListInvok},model:{value:(_vm.params.buyer_id),callback:function ($$v) {_vm.$set(_vm.params, \"buyer_id\", $$v)},expression:\"params.buyer_id\"}},_vm._l((_vm.employeeList),function(item){return _c('el-option',{key:item.employee_id,attrs:{\"label\":item.employee_name,\"value\":item.employee_id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"所属部门\",\"size\":\"mini\"}},[_vm._v(\" \"+_vm._s((function(){if(_vm.params.department_id == 0){ _vm.params.department_id = null }})())+\" \"),_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\",\"filterable\":\"\"},on:{\"change\":_vm.departmentChange,\"focus\":_vm.DepartmentListInvok},model:{value:(_vm.params.department_id),callback:function ($$v) {_vm.$set(_vm.params, \"department_id\", $$v)},expression:\"params.department_id\"}},_vm._l((_vm.departmentList),function(item){return _c('el-option',{key:item.department_id,attrs:{\"label\":item.department_name,\"value\":item.department_id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"收货状态\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"maxlength\":\"300\",\"disabled\":\"\"},model:{value:(_vm.params.delivery_status_name),callback:function ($$v) {_vm.$set(_vm.params, \"delivery_status_name\", $$v)},expression:\"params.delivery_status_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"审核状态\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"maxlength\":\"300\",\"disabled\":\"\"},model:{value:(_vm.params.auditor_status_name),callback:function ($$v) {_vm.$set(_vm.params, \"auditor_status_name\", $$v)},expression:\"params.auditor_status_name\"}})],1)],1)],1),_c('div',{staticClass:\"add_delet\"},[_c('el-button',{staticClass:\"addBtn\",attrs:{\"icon\":\"el-icon-circle-plus-outline\",\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.addRow}},[_vm._v(\"增行\")]),_c('el-button',{attrs:{\"plain\":\"\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":_vm.deleteRow}},[_vm._v(\"删行\")])],1),_c('div',{staticClass:\"table_container\"},[_c('xTable',{ref:\"xTable\",attrs:{\"sign\":_vm.signObj,\"edit-rules\":_vm.editRules,\"isEdit\":_vm.isEdit,\"tableColumn\":_vm.tableColumn,\"totalArray\":['goods_num','subtotal_price']}})],1),_c('div',[_c('div',[_vm._v(\" 单据备注: \"),_c('span',{staticStyle:{\"display\":\"inline-block\",\"width\":\"90%\",\"margin-bottom\":\"5px\"}},[_c('el-input',{model:{value:(_vm.params.remark),callback:function ($$v) {_vm.$set(_vm.params, \"remark\", $$v)},expression:\"params.remark\"}})],1)]),_c('el-form',{ref:\"paramsFooter\",staticClass:\"demo-form-inline\",attrs:{\"inline\":true,\"model\":_vm.params}},[_c('el-form-item',{attrs:{\"label\":\"创建人：\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"maxlength\":\"100\",\"disabled\":\"\"},model:{value:(_vm.params.add_user_name),callback:function ($$v) {_vm.$set(_vm.params, \"add_user_name\", $$v)},expression:\"params.add_user_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"创建时间：\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"maxlength\":\"100\",\"disabled\":\"\"},model:{value:(_vm.params.add_time_name),callback:function ($$v) {_vm.$set(_vm.params, \"add_time_name\", $$v)},expression:\"params.add_time_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"修改人：\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"maxlength\":\"100\",\"disabled\":\"\"},model:{value:(_vm.params.update_user_name),callback:function ($$v) {_vm.$set(_vm.params, \"update_user_name\", $$v)},expression:\"params.update_user_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"修改时间：\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"maxlength\":\"100\",\"disabled\":\"\"},model:{value:(_vm.params.update_time_name),callback:function ($$v) {_vm.$set(_vm.params, \"update_time_name\", $$v)},expression:\"params.update_time_name\"}})],1)],1)],1),(_vm.isShowShopPop)?_c('goodsPopout',{attrs:{\"width\":900,\"ExcloudParams\":['specification_type','pattern','is_stocks','is_available_stocks','warehouse'],\"incloudTop\":['goods_num','factory_code'],\"rowId\":\"goods_id\",\"url\":\"getGoodsListDropdown\",\"searchParams\":{company_id:_vm.params.company_id}},on:{\"close\":function($event){_vm.isShowShopPop = false},\"submit\":_vm.confirm}}):_vm._e(),_c('div',{staticClass:\"dialog-footer\",staticStyle:{\"text-align\":\"center\",\"margin-top\":\"20px\"}},[_c('el-button',{on:{\"click\":_vm.goBack}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submit('ruleForm')}}},[_vm._v(\"确 定\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item>采购管理</el-breadcrumb-item>\n      <el-breadcrumb-item class=\"attrbute\">\n        <span @click=\"goBack\">采购计划</span>\n      </el-breadcrumb-item>\n      <el-breadcrumb-item>{{title}}采购计划</el-breadcrumb-item>\n    </el-breadcrumb>\n    <div class=\"search_container\">\n      <el-form :inline=\"true\" :model=\"params\" ref=\"ruleForm\" class=\"demo-form-inline\" :rules='formRules'>\n        <el-form-item label=\"采购组织\" size=\"mini\" prop=\"company_id\">\n          {{(function(){if(params.company_id == 0)params.company_id = null})()}}\n          <el-select clearable v-model=\"params.company_id\" placeholder=\"请选择\" @focus=\"companyListInvok\" @change=\"companyChange\" filterable>\n            <el-option v-for=\"item in companyList\" :key=\"item.company_id\" :label=\"item.company_name\" :value=\"item.company_id\">\n              <span :class=\"item.type==1 ? 'optionStyle': '' \">{{ item.company_name }}</span>\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"单据号:\" size=\"mini\">\n          <el-input type=\"text\" v-model=\"params.plan_sn\" maxlength=\"300\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"供应商(厂家)\" size=\"mini\">\n          <el-select clearable v-model=\"params.supplier_id\" :filter-method=\"supplierListInvok\" @focus=\"supplierListInvok\" filterable placeholder=\"请选择\">\n            <el-option v-for=\"item in supplierList\" :label=\"item.supplier_name\" :value=\"item.supplier_id\" :key=\"item.supplier_id\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"仓库名称\" size=\"mini\" v-if='isJc' prop=\"warehouse_id\">\n          <el-select clearable v-model=\"params.warehouse_id\" placeholder=\"请选择\" @focus=\"warehouseInvok\" :filterable='true'>\n            <el-option :label=\"item.warehouse_name\" :value=\"item.warehouse_id\" :key=\"item.warehouse_id\" v-for=\"item in warehouseList\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"仓库名称\" size=\"mini\" v-else prop=\"warehouse_id\" :rules=\"{ required: false }\">\n          <el-select clearable v-model=\"params.warehouse_id\" placeholder=\"请选择\" @focus=\"warehouseInvok\" :filterable='true'>\n            <el-option :label=\"item.warehouse_name\" :value=\"item.warehouse_id\" :key=\"item.warehouse_id\" v-for=\"item in warehouseList\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"交货日期\" size=\"mini\" v-if='isJc' prop=\"requirement_delivery_time\">\n          <el-date-picker style='width: 160px' v-model=\"params.requirement_delivery_time\" value-format=\"yyyy-MM-dd\" type=\"date\" placeholder=\"选择日期\"></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"交货日期\" size=\"mini\" v-else prop=\"requirement_delivery_time\" :rules=\"{ required: false }\">\n          <el-date-picker style='width: 160px' v-model=\"params.requirement_delivery_time\" value-format=\"yyyy-MM-dd\" type=\"date\" placeholder=\"选择日期\"></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"采购员\" size=\"mini\" prop=\"buyer_id\">\n          {{(function(){if(params.buyer_id == 0)params.buyer_id = null})()}}\n          <el-select clearable v-model=\"params.buyer_id\" @focus=\"EmployeeListInvok\" placeholder=\"请选择\" :filterable='true'>\n            <el-option :label=\"item.employee_name\" :value=\"item.employee_id\" :key=\"item.employee_id\" v-for=\"item in employeeList\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"所属部门\" size=\"mini\">\n          {{(function(){if(params.department_id == 0)params.department_id = null})()}}\n          <el-select clearable v-model=\"params.department_id\" placeholder=\"请选择\" @change=\"departmentChange\" @focus=\"DepartmentListInvok\" filterable>\n            <el-option :label=\"item.department_name\" :value=\"item.department_id\" :key=\"item.department_id\" v-for=\"item in departmentList\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"收货状态\" size=\"mini\">\n          <el-input type=\"text\" v-model=\"params.delivery_status_name\" maxlength=\"300\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"审核状态\" size=\"mini\">\n          <el-input type=\"text\" v-model=\"params.auditor_status_name\" maxlength=\"300\" disabled></el-input>\n        </el-form-item>\n      </el-form>\n    </div>\n    <div class=\"add_delet\">\n      <el-button icon=\"el-icon-circle-plus-outline\" type=\"primary\" @click=\"addRow\" class=\"addBtn\" size=\"mini\">增行</el-button>\n      <el-button plain icon=\"el-icon-delete\" @click=\"deleteRow\" size=\"mini\">删行</el-button>\n    </div>\n    <div class=\"table_container\">\n      <xTable ref='xTable' :sign='signObj' :edit-rules='editRules' :isEdit='isEdit' :tableColumn='tableColumn' :totalArray=\"['goods_num','subtotal_price']\" />\n    </div>\n    <div>\n      <div>\n        单据备注: <span style='display:inline-block;width: 90%;margin-bottom: 5px;'>\n          <el-input v-model=\"params.remark\"></el-input>\n        </span>\n      </div>\n      <el-form :inline=\"true\" :model=\"params\" class=\"demo-form-inline\" ref=\"paramsFooter\">\n        <el-form-item label=\"创建人：\" size=\"mini\">\n          <el-input v-model=\"params.add_user_name\" maxlength=\"100\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"创建时间：\" size=\"mini\">\n          <el-input v-model=\"params.add_time_name\" maxlength=\"100\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"修改人：\" size=\"mini\">\n          <el-input v-model=\"params.update_user_name\" maxlength=\"100\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"修改时间：\" size=\"mini\">\n          <el-input v-model=\"params.update_time_name\" maxlength=\"100\" disabled></el-input>\n        </el-form-item>\n      </el-form>\n    </div>\n    <goodsPopout v-if='isShowShopPop' :width='900' :ExcloudParams=\"['specification_type','pattern','is_stocks','is_available_stocks','warehouse']\" :incloudTop=\"['goods_num','factory_code']\" rowId='goods_id' @close='isShowShopPop = false' url='getGoodsListDropdown' :searchParams='{company_id:params.company_id}' @submit=\"confirm\" />\n\n    <div class=\"dialog-footer\" style=\"text-align:center;margin-top:20px;\">\n      <el-button @click=\"goBack\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"submit('ruleForm')\">确 定</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { opthionList } from \"common/utils/public_function/commonUtils\";\nimport { tableHead, sumbitRowModule, paramsModule } from \"./config/planAdd\";\nexport default {\n  name: \"purchasePlanAdd\",\n  mixins: [tableHead],\n  data() {\n    return {\n      title: \"添加\",\n      isJc: 0,\n      params: this.$publicFution.deepCopy(paramsModule),\n      sumbitRow: {\n        // 后台要的数据\n        goods_id: \"\",\n        goods_name: \"\",\n        goods_sn: \"\",\n        factory_code: \"\",\n        purchase_price: \"\",\n        goods_num: \"\",\n        remark: \"\",\n        subtotal_price: \"\"\n      },\n      signObj: {\n        arr: [],\n        str: \"plan_goods_id\"\n      },\n      isShowShopPop: false\n    };\n  },\n  methods: {\n    companyChange() {\n      this.$set(this.params, \"supplier_id\", \"\");\n      this.$set(this.params, \"department_id\", \"\");\n      this.$set(this.params, \"buyer_id\", \"\");\n      this.$set(this.params, \"warehouse_id\", \"\");\n      this.$refs.xTable._proxy(\"loadData\", []);\n      this.getIsJc();\n    },\n    getIsJc() {\n      this.$axMethod\n        .getCompanyListDefalut({\n          company_id: this.params.company_id\n        })\n        .then(({ data }) => {\n          if (data.code === 200) {\n            if (data.data.company_list && data.data.company_list[0]) {\n              this.isJc = data.data.company_list[0].is_purchase_center;\n            } else {\n              this.isJc = data.data.is_purchase_center;\n            }\n          }\n          if (this.isJc) {\n            this.editRules.is_invoices_name = [\n              {\n                required: true,\n                message: \"请选择是否带票\"\n              }\n            ];\n          } else {\n            this.editRules.is_invoices_name = [\n              {\n                required: false,\n                message: \"请选择是否带票\"\n              }\n            ];\n          }\n          this.$nextTick(() => {\n            this.$refs.ruleForm.validate();\n          });\n        });\n    },\n    goBack() {\n      this.$publicFution.goPage(this.$route.query.id);\n      this.$router.push({ path: \"/purchase/plan\" });\n    },\n    departmentChange(val) {\n      this.$set(this.params, \"buyer_id\", \"\");\n    },\n    submit(formName) {\n      //修改或新增提交\n      var tableData = this.$refs.xTable\n        ._proxy(\"getTableData\")\n        .fullData.concat([]);\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          if (tableData.length < 1) {\n            this.$message.warning(\"请完善表格数据\");\n            return;\n          }\n          this.$refs.xTable._proxy(\"validate\", tableData).then(errMap => {\n            var params = Object.assign({}, this.params);\n            tableData = tableData.filter(val => {\n              // 只传给后台未审核和驳回的订单\n              if (val.auditor_status === 1 || val.auditor_status === 3) {\n                return val;\n              }\n            });\n            tableData = tableData.map(val => {\n              return this.$publicFution.filter(sumbitRowModule, val);\n            });\n\n            params.goods_json = JSON.stringify(tableData);\n            this.$message.closeAll(); // 防止一次出现多个弹框\n            this.$baseData\n              .checkComputation(tableData, {\n                goods_num: \"goods_num\",\n                total_price: \"subtotal_price\",\n                goods_price: \"purchase_price\"\n              })\n              .then(() => {\n                this.$axios({\n                  method: \"post\",\n                  url: this.plan_id ? this.$api.editPlan : this.$api.addPlan,\n                  data: params\n                }).then(res => {\n                  if (res.data.code == 200) {\n                    this.$message.success(res.data.msg);\n                    setTimeout(() => {\n                      this.goBack();\n                    });\n                  } else {\n                    this.$message({\n                      dangerouslyUseHTMLString: true,\n                      message: res.data.msg,\n                      duration: 7000,\n                      type: \"error\"\n                    });\n                  }\n                });\n              });\n          });\n        }\n      });\n    },\n    // 测试\n    confirm(arr) {\n      var box = arr.map(val => {\n        val.auditor_status = 1; // 新增的单据行按照未审核处理\n        this.handleEdit({ row: val, column: { property: \"goods_num\" } });\n        return val;\n      });\n      this.$refs.xTable._proxy(\n        \"loadData\",\n        this.$refs.xTable._proxy(\"getTableData\").fullData.concat(box)\n      );\n      this.isShowShopPop = false;\n    }\n  },\n  activated() {\n    this.initTurnOrder();\n  },\n  mounted() {\n    /** 采购计划详情 */\n    if (this.$route.query && this.$route.query.id) {\n      this.plan_id = this.$route.query.id;\n      this.title = \"修改\";\n      this.$axios({\n        method: \"get\",\n        url: this.$api.getPlanInfo,\n        params: {\n          plan_id: this.plan_id\n        }\n      }).then(res => {\n        if (res.data.code == 200) {\n          var result = res.data.data.goods_list;\n          this.$refs.xTable._proxy(\"loadData\", result);\n          this.signObj.arr = [];\n          result.forEach(val => {\n            // 不是未审核和驳回不允许修改\n            if (val.auditor_status !== 1 && val.auditor_status !== 3) {\n              this.signObj.arr.push(val);\n            }\n          });\n          this.$set(this, \"params\", res.data.data.info);\n          this.params.requirement_delivery_time = this.params.requirement_delivery_time_name;\n          Object.assign(res.data.data.info, {\n            employee_id: res.data.data.info.buyer_id,\n            employee_name: res.data.data.info.buyer_name\n          });\n          opthionList(this, res.data.data.info);\n          this.getIsJc();\n        }\n      });\n    } else {\n      let { employee_id, company_admin_id } = localStorage;\n      if ([0, 1, 2].includes(Number(employee_id)) || company_admin_id > 0) {\n        this.params.company_id = localStorage.company_id;\n      } else {\n        this.params.company_id = Number(localStorage.company_id);\n        this.params.department_id = Number(localStorage.department_id);\n        this.params.buyer_id = Number(localStorage.employee_id);\n      }\n      Object.assign(this.employeeList, {\n        employee_id: Number(localStorage.employee_id),\n        employee_name: Number(localStorage.employee_name)\n      });\n      opthionList(this, localStorage);\n      this.getIsJc();\n    }\n  }\n};\n</script>\n\n<style scoped>\n</style>\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./planAdd.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./planAdd.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./planAdd.vue?vue&type=template&id=7d25faf6&scoped=true&\"\nimport script from \"./planAdd.vue?vue&type=script&lang=js&\"\nexport * from \"./planAdd.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7d25faf6\",\n  null\n  \n)\n\nexport default component.exports","\n// 提交行数据模板\nexport const sumbitRowModule = {\n  \"goods_id\": '',\n  \"goods_name\": '',\n  \"purchase_price\": '',\n  \"goods_num\": '',\n  \"goods_sn\": '',\n  \"subtotal_price\": '',\n  \"is_invoices\": '',\n  \"remark\": \"\"\n}\n// 提交行数据模板\nexport const paramsModule = {\n  remark: '',\n  company_id: '',\n  company_name: '',\n  plan_sn: '',\n  supplier_id: '',\n  supplier_name: '',\n  warehouse_id: '',\n  warehouse_name: '',\n  requirement_delivery_time: '',\n  buyer_id: '',\n  department_id: '',\n  delivery_status_name: ''\n}\n// 渲染行数据模板\nexport const rowModule = {\n  \"goods_name\": '',\n  \"goods_id\": '',\n  \"goods_sn\": '',\n  \"goods_num\": '', // 申请数量\n  \"purchase_price\": '', // 申请采购价\n  \"is_invoices\": '',// 是否带票\n  \"is_invoices_name\": '',// 是否带票\n  \"requirement_delivery_time\": '',// 要求交货日期\n  \"remark\": \"\"\n}\nexport const tableHead = {\n  data() {\n    return {\n      formRules: {\n        company_id: [\n          { required: true, message: '请选择采购组织跟' }\n        ],\n        warehouse_id: [\n          { required: true, message: '请选择仓库' }\n        ],\n        requirement_delivery_time: [\n          { required: true, message: '请选择交货日期' }\n        ],\n        buyer_id: [\n          { required: true, message: '请选择采购员' }\n        ]\n      },\n      editRules: {\n        goods_num: [\n          { required: true, message: '数量输入请在0-99999999之间' }\n        ],\n        goods_name: [\n          { required: true, message: '请选择商品' }\n        ],\n        purchase_price: [\n          { required: true, message: '请输入采购价' }\n        ],\n        purchase_total_price: [\n          { required: true, message: '请输入采购金额' }\n        ],\n        is_invoices_name: [\n          {\n            required: true,\n            message: \"请选择是否带票\"\n          }\n        ]\n      },\n      tableColumn: [{\n        type: \"checkbox\",\n        width: 44,\n        align: 'center'\n      },\n      {\n        title: '序号',\n        type: \"seq\",\n        width: 50\n      },\n      {\n        title: '商品编号',\n        field: 'goods_id',\n        width: 80\n      },\n      {\n        title: '商品名称',\n        field: 'goods_name',\n        width: 400,\n        editRender: {\n          name: 'vGoods',\n          getParams: ({ row }) => {\n            return {\n              params: {\n                company_id: this.params.company_id\n              },\n              showObj: {\n                goods_id: \"商品编号\",\n                goods_name: \"商品名称\",\n                unit_name: \"单位\",\n                brand_name: \"品牌\",\n                specification_type: \"规格型号\",\n                factory_code: \"工厂代码\"\n              },\n              getIcon: () => {\n                if (row.goods_name) {\n                  return [{\n                    icon: 'el-icon-close',\n                    title: '删除商品',\n                    iconMethod: () => {\n                      for (var i in row) {\n                        row[i] = ''\n                      }\n                    }\n                  }]\n                } else {\n                  return []\n                }\n              }\n            }\n          },\n          events: {\n            change: (value, { row }) => {\n              row.brand_name = value.brand_name\n              row.unit_name = value.unit_name\n              row.goods_id = value.goods_id\n              row.specification_type = value.specification_type\n              row.goods_sn = value.goods_sn\n              row.factory_code = value.factory_code\n              row.purchase_price = value.purchase_price;\n              this.handleEdit({ row: row, column: { property: 'purchase_price' } })\n            },\n          }\n        }\n      },\n      {\n        title: '工厂代码',\n        field: 'factory_code',\n        width: 100\n      },\n      // {\n      //   title: '品牌',\n      //   field: 'brand_name',\n      //   width: 100\n      // },\n      // {\n      //   title: '规格型号',\n      //   field: 'specification_type',\n      //   width: 100\n      // },\n      // {\n      //   title: '单位',\n      //   field: 'unit_name',\n      //   width: 60\n      // },\n      {\n        title: '申请数量',\n        field: 'goods_num',\n        width: 132,\n        headerAlign: \"right\", // 表头对齐方式\n        align: \"right\", // 列对齐方式\n        editRender: {\n          name: 'number',\n          autoselect: true,\n          events: {\n            input: this.handleEdit\n          }\n        }\n      },\n      {\n        title: '申请采购价',\n        headerAlign: \"right\", // 表头对齐方式\n        align: \"right\", // 列对齐方式\n        field: 'purchase_price',\n        width: 132,\n        editRender: {\n          name: 'Vinput',\n          autoselect: true,\n          events: {\n            input: this.handleEdit\n          }\n        }\n      },\n      {\n        title: '申请金额',\n        headerAlign: \"right\", // 表头对齐方式\n        align: \"right\", // 列对齐方式\n        field: 'subtotal_price',\n        width: 132,\n        editRender: {\n          name: 'Vinput',\n          autoselect: true,\n          events: {\n            input: this.handleEdit\n          }\n        }\n      },\n      // {\n      //   title: '仓库名称',\n      //   field: 'warehouse_name',\n      //   width: 150,\n      //   showOverflow: true,\n      //   editRender: {\n      //     name: 'vSelect',\n      //     getParams: () => {\n      //       return {\n      //         url: 'getWarehouseListJC',\n      //         params: { customer_id: this.params.customer_id },\n      //         returnString: 'data.data.data',\n      //         itemObj: {\n      //           id: 'warehouse_id',\n      //           name: 'warehouse_name'\n      //         }\n      //       }\n      //     }\n      //   }\n      // },\n      {\n        title: '是否带票',\n        field: 'is_invoices_name',\n        width: 150,\n        showOverflow: true,\n        editRender: {\n          name: 'vSelect',\n          getParams: () => {\n            return {\n              modelKey: 'is_invoices',\n              list: [\n                {\n                  value: 1,\n                  label: '带票'\n                },\n                {\n                  value: 2,\n                  label: '不带票'\n                }\n              ]\n            }\n          }\n        }\n      },\n      {\n        title: '已收货数量',\n        field: 'delivery_num',\n        width: 132,\n        headerAlign: \"right\", // 表头对齐方式\n        align: \"right\", // 列对齐方式\n      },\n      {\n        title: '收货状态',\n        field: 'delivery_status_name',\n        width: 132,\n      },\n      {\n        title: '审批状态',\n        field: 'auditor_status_name',\n        width: 132,\n      },\n      {\n        title: '审批人',\n        field: 'auditor_user_name',\n        width: 132,\n      },\n      {\n        title: '审批时间',\n        field: 'auditor_time_name',\n        width: 160,\n      },\n      // {\n      //   title: '审批意见',\n      //   field: 'auditor_content',\n      //   width: 132,\n      // },\n      {\n        title: '商品备注',\n        field: 'remark',\n        width: 200,\n        editRender: {\n          name: 'Vinput',\n          formatter: 'String'\n        }\n      }\n      ]\n    }\n  },\n  methods: {\n    // 计算\n    handleEdit({ row, column }) {\n      var obj = {\n        num: \"goods_num\", // 商品数量的key\n        price: \"purchase_price\", // 商品价格的key\n        goodsPrice: \"subtotal_price\" // 商品总金额的key  数量 * 单价\n      };\n      this.$publicFution.computeTotal(row, obj, column.property, this);\n      this.$refs.xTable._proxy(\"updateFooter\");\n    },\n    isEdit({ row }) {\n      if (row.auditor_status && row.auditor_status !== 1 && row.auditor_status !== 3) {\n        this.$message.warning('只能修改未审核和驳回的单据行！')\n        return false\n      }\n      return true\n    },\n    // 删行\n    deleteRow() {\n      if (this.$refs.xTable._proxy(\"getSelectRecords\").length) {\n        this.$refs.xTable._proxy(\"removeSelecteds\");\n      } else {\n        this.$message.warning(\"请先选择要删除的商品！\");\n      }\n    },\n    // 增行\n    addRow() {\n      if (this.params.company_id == undefined || this.params.company_id == \"\") {\n        this.$message.error(\"请选择采购组织\");\n        return false;\n      }\n      this.isShowShopPop = true;\n    },\n    // 初始化转单\n    initTurnOrder() {\n      let _routeParams = this.$route.params\n      if (_routeParams.transferType) { // 如果是通过库存预警过来转单的则执行\n        this.$axMethod.stockEarlyWarningChangeOrderInfo(_routeParams.portParams).then(({ data }) => {\n          if (data.code === 200) {\n            this.params.company_id = data.data.info.company_id\n            this.params.company_name = data.data.info.company_name\n            this.params.remark = data.data.info.abstract\n            this.params.requirement_delivery_time = new Date()\n            data.data.goods_list.map(val => {\n              this.handleEdit({ row: val, column: { property: 'goods_num' } })\n              return val\n            })\n            this.companyList = [{\n              company_id: this.params.company_id,\n              company_name: this.params.company_name,\n            }]\n            this.$refs.xTable._proxy(\"loadData\", data.data.goods_list)\n          }\n        })\n      }\n    }\n  }\n}"],"sourceRoot":""}