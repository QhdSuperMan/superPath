(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-aa230422"],{"403b":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search_container"},[a("el-form",{ref:"TableDataRef",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"库存组织",size:"mini",rules:e.rules.company_id,prop:"company_id"}},[a("el-select",{attrs:{placeholder:"请选择","filterable:filter-method":"companyFilter"},on:{focus:e.getCompany},model:{value:e.params.company_id,callback:function(t){e.$set(e.params,"company_id",t)},expression:"params.company_id"}},e._l(e.companyList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[a("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"仓库",size:"mini"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{focus:e.getWwarehouse},model:{value:e.params.warehouse_id,callback:function(t){e.$set(e.params,"warehouse_id",t)},expression:"params.warehouse_id"}},e._l(e.warehouseList.options,(function(e){return a("el-option",{key:e.warehouse_id,attrs:{label:e.warehouse_name,value:e.warehouse_id}})})),1)],1),a("el-form-item",{attrs:{label:"业务日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:""},on:{change:e.change},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}})],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.onSearch("TableDataRef")}}},[e._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"add_delet"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.params.exportType,callback:function(t){e.$set(e.params,"exportType",t)},expression:"params.exportType"}},[a("el-option",{attrs:{label:"CSV逗号分隔",value:2}},[e._v("CSV逗号分隔")]),a("el-option",{attrs:{label:"Excel文件",value:1}},[e._v("Excel文件")])],1),1==e.authority.b_export?a("el-button",{staticClass:"exporT",attrs:{plain:"",size:"mini",icon:"iconfont icon-daochu10"},on:{click:e.exportOrder}},[e._v("导出")]):e._e()],1),e.listShow?a("div",{staticClass:"table_container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading1,expression:"loading1"}],staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:e.tableData,"max-height":"500","summary-method":e.getSummaries,"show-summary":""}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"warehouse_name",label:"仓库名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"early_num",label:"期初数量",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"early_price",label:"期初金额",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("priceFormatNone")(t.row.early_price))+" ")]}}],null,!1,2983379601)}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"income_num",label:"入库数量",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"income_price",label:"入库金额",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("priceFormatNone")(t.row.income_price))+" ")]}}],null,!1,1557417745)}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"sell_num",label:"出库数量",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"sell_price",label:"出库金额",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("priceFormatNone")(t.row.sell_price))+" ")]}}],null,!1,1773733092)}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"end_num",label:"期末数量",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"end_price",label:"期末金额",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("priceFormatNone")(t.row.end_price))+" ")]}}],null,!1,2252480701)})],1),a("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[a("el-col",{attrs:{span:12}},[a("div",[e._v("生成时间："+e._s(e.allList.add_time))])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"textAr"},[e._v("制表人："+e._s(e.allList.user_name))])])],1),a("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[a("el-col",{attrs:{span:12}},[a("div",[e._v("业务日期起始:"+e._s(e.params.start_time))])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"textAr"},[e._v("业务日期截止:"+e._s(e.params.end_time))])])],1)],1):e._e()])},l=[],r=(a("d3b7"),a("159b"),a("d81d"),a("a9e3"),a("65b0")),i={name:"reportInventorysumrpt",data:function(){return{authority:{},params:{},searchParams:{},listShow:!1,timeValue:[],exportType:null,warehouseList:{options:[]},allList:{},tableData:[],departmentList:{options:[]},companyList:[],loading:!0}},methods:{change:function(e){this.params.start_time=e[0],this.params.end_time=e[1]},getSummaries:function(e){var t=this,a=e.columns,o=e.data,l=[];return a.forEach((function(e,a){if(0!==a){var r=o.map((function(t){return Number(t[e.property])}));r.every((function(e){return isNaN(e)}))?l[a]="":(l[a]=r.reduce((function(e,t){var a=Number(t);return isNaN(a)?e:e+t}),0),1==a?l[a]=t.allList.total_early_num:2===a?l[a]=t.allList.total_early_price:3===a?l[a]=t.allList.total_income_num:4===a?l[a]=t.allList.total_income_price:5==a?l[a]=t.allList.total_sell_num:6===a?l[a]=t.allList.total_sell_price:7===a?l[a]=t.allList.total_end_num:8==a&&(l[a]=t.allList.total_end_price))}else l[a]="合计"})),l},onReset:function(){this.$set(this,"params",{company_id:""}),this.timeValue=[],this.listShow=!1},exportOrder:function(){return this.params.exportType?0==this.listShow?(this.$message({message:"请查询需要导出的数据",type:"warning"}),!1):void this.$axMethod.exportReceiveUrl(this.params).then((function(e){200==e.data.code&&(window.location.href=e.data.data.url)})):(this.$message({message:"请选择导出格式",type:"warning"}),!1)},onSearch:function(){var e=this;void 0==this.params.company_id?this.$message({message:"请先选择库存组织",type:"error"}):(this.listShow=!0,this.$axMethod.getReceiveCollecList(this.params).then((function(t){200==t.data.code&&(e.loading=!1,e.tableData=t.data.data.goods_list,e.allList=t.data.data.list)})))},initData:function(){},companyFilter:function(e){var t={type:1,company_name:e};Object(r["k"])(this,t)},getCompany:function(){var e={type:1,company_name:null};Object(r["k"])(this,e)},getWwarehouse:function(){this.$common.options("getWarehouseListOption",this.warehouseList,{company_id:this.params.company_id})}},created:function(){this.authority=JSON.parse(localStorage.getItem("authority"))}},s=i,n=(a("9609"),a("2877")),c=Object(n["a"])(s,o,l,!1,null,"465ee84f",null);t["default"]=c.exports},9609:function(e,t,a){"use strict";a("fa84")},fa84:function(e,t,a){}}]);
//# sourceMappingURL=chunk-aa230422.90ca554c.js.map