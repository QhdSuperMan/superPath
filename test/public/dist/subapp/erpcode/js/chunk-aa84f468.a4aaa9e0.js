(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-aa84f468"],{"03fc":function(e,t,a){"use strict";a("655d")},"2c60":function(e,t,a){"use strict";a.r(t);var i,s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v(e._s(e.jurisdiction.moduName))]),a("el-breadcrumb-item",{staticClass:"attrbute"},[a("span",{on:{click:e.goBack}},[e._v(e._s(e.jurisdiction.goBackName))])]),a("el-breadcrumb-item",[e._v(e._s(e.jurisdiction.atName))])],1),a("div",{staticClass:"customerInfoAdd errorItem  errorItemMl"},[a("div",{staticClass:"dialog-box"},[a("p",{staticStyle:{"text-align":"center",background:"#3a8ee6",color:"#fff","font-size":"14px","font-weight":"200",height:"40px","line-height":"40px"}},[e._v("授信客户信息")]),a("el-form",{ref:"params",staticClass:"table_pad",attrs:{model:e.params}},[a("el-form-item",{attrs:{label:"销售组织",prop:"company_id",rules:[{required:!0,message:"请选择销售组织",trigger:"change"}]}},[e._v(" "+e._s(function(){0==e.params.company_id&&(e.params.company_id=null)}())+" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.companyListInvok},model:{value:e.params.company_id,callback:function(t){e.$set(e.params,"company_id",t)},expression:"params.company_id"}},e._l(e.companyList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[a("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"授信客户",prop:"customer_id",rules:[{required:!0,message:"请选择授信客户",trigger:"change"}]}},[a("el-select",{attrs:{filterable:"",placeholder:"请输入",clearable:"","value-key":"customer_id",loading:e.loading,remote:"","remote-method":e.clienteleListInvok},on:{focus:e.clienteleListInvok,change:e.changeCustomer},model:{value:e.params.customer_id,callback:function(t){e.$set(e.params,"customer_id",t)},expression:"params.customer_id"}},[a("ul",{staticClass:"customer customer-ul4 customer-ul2"},[a("li",[e._v("客户编号")]),a("li",[e._v("客户名称")]),a("li",[e._v("联系人")]),a("li",[e._v("联系电话")]),a("li",[e._v("区域")])]),e._l(e.customerList,(function(t){return a("el-option",{key:t.customer_id,attrs:{label:t.customer_name,value:t.customer_id}},[a("ul",{staticClass:"customer customer-ul4"},[a("li",{attrs:{title:t.customer_id}},[e._v(e._s(t.customer_id))]),a("li",{attrs:{title:t.customer_name}},[e._v(e._s(t.customer_name))]),a("li",{attrs:{title:t.contact_name}},[e._v(e._s(t.contact_name))]),a("li",{attrs:{title:t.customer_mobile}},[e._v(e._s(t.customer_mobile))]),a("li",[e._v(e._s(t.province_name)+"/"+e._s(t.city_name)+"/"+e._s(t.area_name))])])])}))],2)],1),a("el-form-item",{attrs:{label:"客户分类"}},[a("span",{staticStyle:{"padding-left":"15px"}},[e._v(e._s(e.params.customer_type))])]),a("el-form-item",{staticClass:"radio-box",attrs:{label:"授信类型",prop:"credit_type",rules:[{required:!0,message:"请选择授信类型",trigger:"change"}]}},[a("el-radio-group",{attrs:{disabled:e.disabled},on:{change:e.changeCreditType},model:{value:e.params.credit_type,callback:function(t){e.$set(e.params,"credit_type",t)},expression:"params.credit_type"}},[a("el-radio",{attrs:{label:1}},[e._v("固定额度")]),a("el-radio",{attrs:{label:3}},[e._v("临时")])],1)],1),3==e.params.credit_type?a("el-form-item",{attrs:{label:"有效截止日期",rules:[{required:!0,message:"请选择截止日期",trigger:"change"}]}},[a("el-date-picker",{staticStyle:{width:"199px"},attrs:{type:"date",placeholder:"选择日期","picker-options":e.pickerOptions0},model:{value:e.params.credit_end_time,callback:function(t){e.$set(e.params,"credit_end_time",t)},expression:"params.credit_end_time"}})],1):e._e(),a("el-form-item",{attrs:{label:"授信额度(元)",prop:"credit_limit",rules:[{required:!0,message:"请输入授信额度",trigger:"blur"}]}},[a("el-input",{staticStyle:{width:"199px"},model:{value:e.params.credit_limit,callback:function(t){e.$set(e.params,"credit_limit",t)},expression:"params.credit_limit"}})],1),a("el-form-item",{staticClass:"heightLabel",attrs:{label:"备注",prop:"remark"}},[a("el-input",{staticStyle:{width:"250px",resize:"none"},attrs:{size:"small",type:"text","suffix-icon":"el-icon-edit-outline",maxlength:300},model:{value:e.params.remark,callback:function(t){e.$set(e.params,"remark",t)},expression:"params.remark"}})],1)],1)],1)]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.goBack}},[e._v("取 消")]),"作废"!=e.params.auditor_status_name?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("params")}}},[e._v("确 定")]):e._e()],1)],1)},r=[],d=a("ade3"),o=a("5530"),c=(a("4de4"),a("d3b7"),a("65b0"),a("2f62")),m=(i={name:"customeCreditmanageAdd",data:function(){return{pickerOptions0:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},authority:{},jurisdiction:{moduName:"客户管理",goBackName:"信用（授信）管理",atName:"添加客户授信"},params:{customer_type:"",credit_type:1,is_disabled:0},loading:!1,companyList:[],disabled:!1,disabledInput:!1,isDisabled:!1}},computed:Object(o["a"])({},Object(c["c"])(["creditmanageAdd_showGet"])),methods:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["creditmanageDefault_show","creditmanageSearch_show","creditmanageIndexACT","threeorderAdd","salesorderAdd"])),{},{changeRadio:function(){"已审核"==this.params.auditor_status_name&&(this.disabled=!0,this.isDisabled!=this.params.is_disabled?this.disabledInput=!1:this.disabledInput=!0)},changeCreditType:function(){},goBack:function(){this.creditmanageIndexACT({params:this.creditmanageAdd_showGet.params,goPage:this.creditmanageAdd_showGet.goPage,pageSize:this.creditmanageAdd_showGet.pageSize}),this.$router.push({path:"/custom/creditmanage"})},changeCustomer:function(e){var t=this,a=this.customerList.filter((function(t){return t.customer_id===e}))[0].associated_customer_id;this.$axios({method:"get",url:this.$api.getCustomerInfo,params:{customer_id:this.params.customer_id,associated_customer_id:a}}).then((function(e){var a=e.data;200==a.code&&(t.params.customer_type=a.data.customer_type_name)}))},submitForm:function(e){var t=this,a=this,i=new Date(this.params.credit_end_time),s=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate();this.params.credit_end_time=s,this.$refs[e].validate((function(e){if(e){if(a.params.credit_limit<0)return t.$message.error("授信额度不能小于0"),!1;void 0==a.params.credit_id?a.$axios({method:"post",url:a.$api.addCredit,data:{customer_id:a.params.customer_id,company_id:a.params.company_id,credit_type:a.params.credit_type,credit_limit:a.params.credit_limit,is_disabled:a.params.is_disabled,credit_end_time:"NaN-NaN-NaN"==a.params.credit_end_time?"":a.params.credit_end_time,remark:void 0==a.params.remark?"":a.params.remark}}).then((function(e){200==e.data.code?(t.$message({message:e.data.data,type:"success"}),t.goBack()):t.$set(t,"params",{credit_end_time:t.$publicFution.formatData(new Date)})})):a.$axios({method:"post",url:a.$api.editCredit,data:a.params}).then((function(e){200==e.data.code&&(t.$message({message:e.data.data,type:"success"}),t.goBack(),t.creditmanageIndexACT({commont:"creditmanageDefault"}))}))}}))}})},Object(d["a"])(i,"computed",Object(o["a"])({},Object(c["c"])(["creditmanageAdd_showGet"]))),Object(d["a"])(i,"created",(function(){var e=this;2==this.creditmanageAdd_showGet.jurisdiction?(this.jurisdiction={moduName:"公司三包",goBackName:"新增/修改三包订单",atName:"添加客户授信"},this.goBack=function(){e.threeorderAdd({moduleName:"threeorderAdd"})}):1==this.creditmanageAdd_showGet.jurisdiction&&(this.jurisdiction={moduName:"客户管理",goBackName:"信用（授信）管理",atName:"添加客户授信"},this.goBack=function(){e.salesorderAdd({moduleName:"salesorderAdd"})});var t=this;void 0!=this.creditmanageAdd_showGet.credit_id&&(this.$axios({method:"get",url:this.$api.getCreditInfo,params:{credit_id:this.creditmanageAdd_showGet.credit_id}}).then((function(a){var i=a.data;200==i.code&&(e.$set(e,"params",i.data),e.companyList=[{company_name:i.data.company_name,company_id:i.data.company_id}],e.customerList=[{customer_id:i.data.customer_id,customer_name:i.data.customer_name,contact_name:i.data.contact_name,customer_mobile:i.data.customer_mobile,address:i.data.address}],t.params.is_disabled=""+i.data.is_disabled,e.isDisabled=e.params.is_disabled,t.params.credit_type=i.data.credit_type,t.params.customer_type=i.data.customer_type_name,t.params.credit_end_time=i.data.credit_end_time,"已审核"==i.data.auditor_status_name&&(e.disabledInput=!0))})),this.jurisdiction={moduName:"客户管理",goBackName:"信用（授信）管理",atName:"修改客户授信"},this.disabled=!0)})),Object(d["a"])(i,"mounted",(function(){})),i),n=m,l=(a("03fc"),a("2877")),u=Object(l["a"])(n,s,r,!1,null,"daa351be",null);t["default"]=u.exports},"655d":function(e,t,a){}}]);
//# sourceMappingURL=chunk-aa84f468.a4aaa9e0.js.map