(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-a6e27caa"],{"082a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"params"},[a("div",{attrs:{id:"leixin"}},[a("div",{staticClass:"search_container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"所属公司",size:"mini"}},[a("erpCompanyList",{model:{value:e.params.company_id,callback:function(t){e.$set(e.params,"company_id",t)},expression:"params.company_id"}})],1),a("el-form-item",{attrs:{label:"所属部门",size:"mini"}},[a("erpDepartment",{attrs:{searchParams:{company_id:e.params.company_id}},model:{value:e.params.department_id,callback:function(t){e.$set(e.params,"department_id",t)},expression:"params.department_id"}})],1),a("el-form-item",{attrs:{label:"仓库名称",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(1)}},model:{value:e.params.warehouse_name,callback:function(t){e.$set(e.params,"warehouse_name",t)},expression:"params.warehouse_name"}})],1),a("el-form-item",{attrs:{label:"仓库类型",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.getWarehouseType},model:{value:e.params.warehouse_type_id,callback:function(t){e.$set(e.params,"warehouse_type_id",t)},expression:"params.warehouse_type_id"}},e._l(e.warehouseType,(function(e){return a("el-option",{key:e.warehouse_type_id,attrs:{label:e.warehouse_type_name,value:e.warehouse_type_id}})})),1)],1),a("el-form-item",{attrs:{label:"负责人",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(1)}},model:{value:e.params.principal_name,callback:function(t){e.$set(e.params,"principal_name",t)},expression:"params.principal_name"}})],1),a("el-form-item",{attrs:{label:"",size:"mini"}},[a("el-checkbox",{staticStyle:{"padding-left":"112px"},attrs:{"false-label":0,"true-label":1,name:"type"},model:{value:e.params.is_disabled,callback:function(t){e.$set(e.params,"is_disabled",t)},expression:"params.is_disabled"}},[e._v("停用")])],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.onSearch(1)}}},[e._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"add_delet"},[1==e.authority.b_add?a("el-button",{staticClass:"addBtn",attrs:{icon:"el-icon-circle-plus-outline",type:"primary",size:"mini"},on:{click:function(t){return e.edit({})}}},[e._v("新增")]):e._e(),1==e.authority.b_del?a("el-button",{attrs:{plain:"",icon:"el-icon-delete",size:"mini"},on:{click:e.deletes}},[e._v("删除")]):e._e()],1),a("xTable",{ref:"xTable",attrs:{ajax:{url:"getmanageList",params:e.params},tableColumn:e.tableColumn}})],1),e.dialogFormVisible?a("editWarehouse",{attrs:{row:e.row},on:{getData:e.onSearch,close:function(t){e.dialogFormVisible=!1}}}):e._e()],1)},r=[],l=(a("d81d"),a("caad"),a("8ba4"),a("a9e3"),a("b680"),{company_id:"",department_id:"",warehouse_name:"",warehouse_type_id:"",principal_name:"",is_disabled:0}),n={is_default:"",is_ec:0,is_ec_warehouse:0,is_market:"",is_disabled:"",department_id:"",warehouse_type_id:"",cityList:"",instorage_push_opportunity:0},s={data:function(){var e=this,t=this.$createElement;return{dialogArryrow:null,tableColumn:[{type:"checkbox",width:40},{width:60,title:"操作",fixed:"right",slots:{default:function(a){var i=a.row;return[t("el-button",{on:{click:function(){e.edit(i)}},attrs:{type:"text",size:"small"}},["修改"])]}}},{field:"company_name",title:"所属组织",width:150},{field:"department_name",title:"所属部门",width:100},{field:"warehouse_name",title:"仓库名称",width:160},{field:"warehouse_id",title:"仓库编号",width:80},{field:"logogram",title:"助记码",width:100},{field:"defaultAreaName",title:"所属区域",width:100,formatter:function(e){var t=e.row;return t.defaultAreaName?t.defaultAreaName:""}},{field:"address",title:"地址",width:200},{field:"phone",title:"电话",width:120},{field:"principal_name",title:"负责人",width:130},{field:"mobile",title:"负责人手机",width:120},{field:"remark",title:"备注",width:200},{field:"warehouse_type_name",title:"仓库类型",width:160},{field:"is_default",title:"是否默认仓库",width:120,formatter:function(e){var t=e.row;return 0==t.is_default?"否":1==t.is_default?"是":void 0}},{field:"is_disabled",title:"是否停用",width:120,formatter:function(e){var t=e.row;return 0==t.is_disabled?"否":1==t.is_disabled?"是":void 0}},{field:"is_market",title:"不参与销售",width:120,formatter:function(e){var t=e.row;return 0==t.is_market?"否":1==t.is_market?"是":void 0}},{field:"safety_inventory",title:"安全库存",width:105},{field:"check_stock",title:"在库校验",width:105,formatter:function(e){var t=e.row;return 1==t.check_stock?"单据保存时校验":2==t.is_market?"单据审核时校验":void 0}},{field:"document_warning",title:"单据预警",width:105,formatter:function(e){var t=e.row;return 1==t.document_warning?"强制不通过":2==t.document_warning?"仅预警提示":void 0}},{field:"is_ec_name",title:"是否电商仓库",width:105},{field:"is_wms",title:"是否WMS仓库",width:105},{field:"is_wms",title:"入库推送WMS",formatter:function(e){var t=e.row;return 1==t.instorage_push_opportunity?"采购订单推送":"采购入库单推送"},width:120},{field:"add_user_name",title:"创建人",width:105},{field:"add_time",title:"创建时间",width:180},{field:"update_user_name",title:"修改人",width:105},{field:"update_time",title:"修改时间",width:180}],tableData:[]}},methods:{footerMethod:function(e){var t=this,a=e.columns,i=e.data;return[a.map((function(e,a){if(1===a)return"合计";if(["total_price","discount_price","real_num"].includes(e.property)){"total_price"==e.property&&(t.totalPrice=t.$utils.sum(i,e.property),t.countSettlementPrice());var r=t.$utils.sum(i,e.property);return Number.isInteger(r)?r:r.toFixed(2)}return null}))]}}},o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"params"},[a("vxe-modal",{attrs:{title:"仓库维护",id:"inReceiptSelectOrder",width:"850","esc-closable":!0,"destroy-on-close":"",height:"800","min-width":"600","min-height":"100",resize:"",remember:"",storage:"",transfer:""},on:{hide:e.close},model:{value:e.isShowDialog,callback:function(t){e.isShowDialog=t},expression:"isShowDialog"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"warehouseMaintenance"},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"label-width":"106px"}},[a("p",{staticClass:"title"},[e._v("基础信息")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属公司",prop:"company_id",maxlength:"50",rules:[{required:!0,message:"请选择所属公司",trigger:"change"}]}},[a("erpCompanyList",{attrs:{fatherParams:e.ruleForm,disabled:e.ruleForm.warehouse_id},on:{change:e.companyChange},model:{value:e.ruleForm.company_id,callback:function(t){e.$set(e.ruleForm,"company_id",t)},expression:"ruleForm.company_id"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属部门",size:"mini"}},[a("erpDepartment",{attrs:{fatherParams:e.ruleForm,searchParams:{company_id:e.ruleForm.company_id}},model:{value:e.ruleForm.department_id,callback:function(t){e.$set(e.ruleForm,"department_id",t)},expression:"ruleForm.department_id"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"名称",prop:"warehouse_name",maxlength:"50",rules:[{required:!0,message:"请输入编辑属性名称",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.ruleForm.warehouse_name,callback:function(t){e.$set(e.ruleForm,"warehouse_name",t)},expression:"ruleForm.warehouse_name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"仓库类型",prop:"warehouse_type_id",rules:e.rules.warehouse_type_id}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{focus:e.getWarehouseType},model:{value:e.ruleForm.warehouse_type_id,callback:function(t){e.$set(e.ruleForm,"warehouse_type_id",t)},expression:"ruleForm.warehouse_type_id"}},e._l(e.warehouseType,(function(e){return a("el-option",{key:e.warehouse_type_id,attrs:{label:e.warehouse_type_name,value:e.warehouse_type_id}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属区域",prop:"province_id",rules:[{required:!0,message:"请选择所属区域",trigger:"change"}]}},[e.defaultArea&&e.defaultArea.length?a("getAreaList",{attrs:{prop:e.prop,defaultArea:e.defaultArea},on:{changeDefaultArea:e.changeDefaultArea},model:{value:e.cityList,callback:function(t){e.cityList=t},expression:"cityList"}}):e._e()],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"详细地址",prop:"address",rules:[{required:!0,message:"请输入详细地址",trigger:"blur"}],size:"mini"}},[a("el-input",{attrs:{size:"mini",type:"text",placeholder:"请输入",maxlength:300},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1)],1)],1),a("p",{staticClass:"title"},[e._v("仓库设置")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"30px"}},[a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.ruleForm.is_default,callback:function(t){e.$set(e.ruleForm,"is_default",t)},expression:"ruleForm.is_default"}},[e._v("默认仓库")]),a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.ruleForm.is_market,callback:function(t){e.$set(e.ruleForm,"is_market",t)},expression:"ruleForm.is_market"}},[e._v("不参与销售")]),a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.ruleForm.is_disabled,callback:function(t){e.$set(e.ruleForm,"is_disabled",t)},expression:"ruleForm.is_disabled"}},[e._v("停用")])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"安全库存"}},[a("el-input",{attrs:{maxlength:12,placeholder:"请最多输入12个字符"},nativeOn:{keyup:function(t){return e.changeAllocationType.apply(null,arguments)}},model:{value:e.ruleForm.safety_inventory,callback:function(t){e.$set(e.ruleForm,"safety_inventory",t)},expression:"ruleForm.safety_inventory"}})],1)],1)],1),e.ruleForm.safety_inventory>0?a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"在库校验",prop:"check_stock",rules:[{required:!0,message:"请选择",trigger:"blur"}]}},[a("el-radio-group",{model:{value:e.ruleForm.check_stock,callback:function(t){e.$set(e.ruleForm,"check_stock",t)},expression:"ruleForm.check_stock"}},[a("el-radio",{attrs:{label:1}},[e._v(" 单据保存时校验")]),a("el-radio",{attrs:{label:2}},[e._v(" 单据审核时校验")])],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"单据预警",prop:"document_warning",rules:[{required:!0,message:"请选择",trigger:"blur"}]}},[a("el-radio-group",{model:{value:e.ruleForm.document_warning,callback:function(t){e.$set(e.ruleForm,"document_warning",t)},expression:"ruleForm.document_warning"}},[a("el-radio",{attrs:{label:1}},[e._v(" 强制不通过")]),a("el-radio",{attrs:{label:2}},[e._v(" 仅预警提示")])],1)],1)],1)],1):e._e(),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电商仓库"}},[a("el-radio",{attrs:{label:0},on:{change:function(t){e.ruleForm.is_ec_warehouse=0}},model:{value:e.ruleForm.is_ec,callback:function(t){e.$set(e.ruleForm,"is_ec",t)},expression:"ruleForm.is_ec"}},[e._v(" 否")]),a("el-radio",{attrs:{label:1},model:{value:e.ruleForm.is_ec,callback:function(t){e.$set(e.ruleForm,"is_ec",t)},expression:"ruleForm.is_ec"}},[e._v(" 是")]),1===e.ruleForm.is_ec?a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.ruleForm.is_ec_warehouse,callback:function(t){e.$set(e.ruleForm,"is_ec_warehouse",t)},expression:"ruleForm.is_ec_warehouse"}},[e._v(" 默认电商仓库")]):e._e()],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"wms仓库"}},[e._v(" "+e._s("是"==e.ruleForm.is_wms?"是":"否")+" ")])],1)],1),"是"===e.ruleForm.is_wms?a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"入库推送WMS"}},[a("el-radio",{attrs:{label:1},model:{value:e.ruleForm.instorage_push_opportunity,callback:function(t){e.$set(e.ruleForm,"instorage_push_opportunity",t)},expression:"ruleForm.instorage_push_opportunity"}},[e._v(" 采购订单推送")]),a("el-radio",{attrs:{label:0},model:{value:e.ruleForm.instorage_push_opportunity,callback:function(t){e.$set(e.ruleForm,"instorage_push_opportunity",t)},expression:"ruleForm.instorage_push_opportunity"}},[e._v(" 采购入库单推送")])],1)],1)],1):e._e(),a("p",{staticClass:"title"},[e._v("发货区域")]),a("areaselect",{ref:"area",attrs:{selectedObject:e.selectedObject,selectAllHasId:!1}}),a("p",{staticClass:"title"},[e._v("其它信息")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"负责人"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.ruleForm.principal_name,callback:function(t){e.$set(e.ruleForm,"principal_name",t)},expression:"ruleForm.principal_name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"负责人电话",prop:"phone",rules:e.rules.telephone}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"负责人手机号",prop:"mobile",rules:e.rules.notphone}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.ruleForm.mobile,callback:function(t){e.$set(e.ruleForm,"mobile",t)},expression:"ruleForm.mobile"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注",size:"medium"}},[a("el-input",{attrs:{type:"text",maxlength:"300",placeholder:"请输入"},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确定")]),a("el-button",{on:{click:function(t){return e.close()}}},[e._v("取 消")])],1)])],1)},c=[],u=(a("a15b"),a("d12c")),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"areaSelectionClass"},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),a("br"),a("div",{staticClass:"areaSelection"},[e._l(e.regionalData,(function(t,i){return a("div",{key:i,staticClass:"provinces"},[a("el-checkbox",{class:{borderStyle:e.currentIndex===i},attrs:{indeterminate:t.partChecked,label:t.area_id},on:{change:function(t){e.saveSelection(t,i)}},model:{value:t.Checked,callback:function(a){e.$set(t,"Checked",a)},expression:"itme.Checked"}},[a("span",{staticStyle:{width:"80px"},on:{click:function(t){return t.preventDefault(),e.requestCity(i)}}},[e._v(e._s(t.area_name)+" "),a("i",{staticClass:"el-icon-arrow-down"})])])],1)})),e.start?a("div",{staticClass:"cityBounc"},e._l(e.regionalData[e.currentIndex].son,(function(t){return a("el-checkbox",{key:t.area_id,attrs:{label:t.area_id},on:{change:function(t){return e.areaSelection(e.currentIndex)}},model:{value:t.Checked,callback:function(a){e.$set(t,"Checked",a)},expression:"value.Checked"}},[a("span",{staticClass:"inNameThe",attrs:{title:t.area_name}},[e._v(e._s(t.area_name)+" ")])])})),1):e._e()],2)],1)])},h=[],m=(a("b1f0"),a("3c64"),a("42aa"),a("c07b"),a("410a"),a("6f78"),a("1e09"),a("e3df"),a("e326"),a("3736"),{name:"areaSelection",data:function(){return{regionalData:[],checkAll:null,isIndeterminate:!1,start:!1,currentIndex:null}},props:{selectAllHasId:{type:Boolean,default:!0},selectedObject:{type:Object,default:function(){return{}}}},watch:{selectedObject:function(){this.initialize()}},methods:{hide:function(e){var t=document.querySelector(".areaSelectionClass");t&&(t.contains(e.target)||(this.start=!1))},requestCity:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e==this.currentIndex?a||(this.start=!this.start):this.start=!0,this.currentIndex=e,this.$nextTick((function(){if(t.start){var a=document.querySelectorAll(".areaSelection .el-checkbox")[e],i=document.querySelector(".cityBounc").style;i.left=a.offsetLeft>410?a.offsetLeft-450+"px":a.offsetLeft+"px",i.top=a.offsetTop+32+"px"}}))},submitQuery:function(){var e={is_national_delivery:0,delivery_city:[]};return this.checkAll?(e.is_national_delivery=1,this.selectAllHasId&&this.regionalData.forEach((function(t){t.son.forEach((function(t){t.Checked&&e.delivery_city.push(t.area_id)}))}))):this.isIndeterminate?this.regionalData.forEach((function(t){t.son.forEach((function(t){t.Checked&&e.delivery_city.push(t.area_id)}))})):e.is_national_delivery=0,e},handleCheckAllChange:function(e){var t=this;this.start=!1,this.isIndeterminate=!1,e?this.regionalData.forEach((function(e){t.$set(e,"Checked",!0),t.$set(e,"partChecked",!1),e.son.forEach((function(e){t.$set(e,"Checked",!0)}))})):this.regionalData.forEach((function(e){t.$set(e,"Checked",!1),t.$set(e,"partChecked",!1),e.son.forEach((function(e){t.$set(e,"Checked",!1)}))})),console.log(this.regionalData)},allmethons:function(){var e=this.regionalData.filter((function(e){return!0===e.Checked})),t=this.regionalData.filter((function(e){return!0===e.partChecked}));this.checkAll=e.length==this.regionalData.length,console.log(this.checkAll),t.length?this.$set(this,"isIndeterminate",!0):this.$set(this,"isIndeterminate",e.length>0&&e.length<this.regionalData.length)},saveSelection:function(e,t){var a=this;this.requestCity(t,!0),e?this.regionalData[t].son.forEach((function(e){a.$set(e,"Checked",!0)})):this.regionalData[t].son.forEach((function(e){a.$set(e,"Checked",!1)})),this.$set(this.regionalData[t],"partChecked",!1),this.$emit("proChange",e),this.allmethons()},areaSelection:function(e){var t=this.regionalData[e].son.filter((function(e){return!0===e.Checked})),a=t.length;this.regionalData[e].Checked=a==this.regionalData[e].son.length,this.$set(this.regionalData[e],"partChecked",a>0&&a<this.regionalData[e].son.length),this.$emit("areaChange",t),this.allmethons()},initialize:function(){var e=this,t=Object.keys(this.selectedObject);if(t.length)if(this.selectedObject.is_national_delivery)this.handleCheckAllChange(!0),this.checkAll=!0;else{var a=this.selectedObject.delivery_city.split(","),i=a.map(Number);this.regionalData.forEach((function(t,a){e.$set(t,"Checked",!1),t.son.forEach((function(t){i.includes(t.area_id)&&(e.$set(t,"Checked",!0),e.areaSelection(a))}))}))}}},mounted:function(){var e=this;this.$axios({method:"get",url:"v2/open/area/getAreaList"}).then((function(t){var a=t.data;200==a.code&&(e.regionalData=a.data,e.initialize())}))}}),p=m,f=(a("4e47"),a("2877")),_=Object(f["a"])(p,d,h,!1,null,"69835ee0",null),v=_.exports,b=a("65b0"),g={data:function(){return{isShowDialog:!0,ruleForm:this.$publicFution.deepCopy(n),defaultArea:[0],warehouseType:[],loading:!1,prop:{value:"value",children:"cities",checkStrictly:!0},selectedObject:{}}},props:{value:null,row:{type:Object,default:function(){}}},methods:{childMethos:function(e){this.$refs.area&&this.$refs.area.hide(e)},changeDefaultArea:function(e){this.ruleForm.cityList=e.join(","),this.ruleForm.province_id=e[0],this.ruleForm.city_id=e[1],this.ruleForm.area_id=e[2],this.$refs.ruleForm.validate()},companyChange:function(e){var t=this;this.ruleForm.warehouse_type_id="",this.ruleForm.department_id="",e&&this.$axMethod.manageInfoWarehouse({company_id:e.company_id}).then((function(e){200==e.data.code&&(e.data.data.success?t.ruleForm.is_default=1:t.ruleForm.is_default=0)}))},getWarehouseType:function(){var e=this;this.$axMethod.getWarehouseTypeList({company_id:this.ruleForm.company_id}).then((function(t){var a=t.data;e.warehouseType=a.data}))},submit:function(){var e=this,t=this.$refs.area.submitQuery(),a=t.delivery_city,i=t.is_national_delivery,r={delivery_city:a.join(","),is_national_delivery:i};this.$refs.ruleForm.validate((function(t){if(t){var a=Object.assign({},e.ruleForm,r);delete a.is_wms;var i=e.$api.addmanagement;e.ruleForm.warehouse_id&&(i=e.$api.editmanagement),e.loading=!0,e.$axios({method:"post",url:i,data:a,params:{hideLoding:!0}}).then((function(t){var a=t.data;200===a.code&&(e.$message.success(a.msg),e.$parent.onSearch(),e.close()),e.loading=!1})).catch((function(){e.loading=!1}))}}))},changeAllocationType:function(){this.ruleForm.safety_inventory>0&&this.$nextTick((function(){this.$set(this.ruleForm,"check_stock",1),this.$set(this.ruleForm,"document_warning",2)}))},getData:function(e){this.ruleForm=e,this.selectedObject={delivery_city:e.delivery_city,is_national_delivery:e.is_national_delivery},Object(b["l"])(this,e),this.defaultArea=[e.province_id,e.city_id,e.area_id],this.warehouseType=[{warehouse_type_id:e.warehouse_type_id,warehouse_type_name:e.warehouse_type_name}]},close:function(){this.isShowDialog=!0,this.$emit("close")}},created:function(){this.row.warehouse_id&&this.getData(this.row)},components:{areaselect:v,getAreaList:u["a"]}},y=g,w=(a("99a4"),Object(f["a"])(y,o,c,!1,null,null,null)),k=w.exports,F={name:"systemInfoSalesRepertorymanage",mixins:[s],data:function(){return{authority:{},companyLists:[],departmentLists:[],dialogFormVisible:!1,warehouseType:[],row:null,params:this.$publicFution.deepCopy(l),multipleSelection:[]}},components:{editWarehouse:k},methods:{onReset:function(){this.params=this.$publicFution.deepCopy(l),this.onSearch(1)},edit:function(e){var t=this;e.warehouse_id?this.$axMethod.getWarehouseInfo({warehouse_id:e.warehouse_id}).then((function(e){var a=e.data;t.row=a.data,t.dialogFormVisible=!0})):(this.row={},this.dialogFormVisible=!0)},deletes:function(){var e={deleID:"warehouse_id",deleSelect:this.multipleSelection,deleApi:"delManagement",list:{UrlApi:"getmanageList",data:this.TableData}};this.$common.deletes(e,"删除",this)},getWarehouseType:function(){var e=this;this.$axMethod.getWarehouseTypeList({company_id:this.params.company_id}).then((function(t){var a=t.data;e.warehouseType=a.data}))},onSearch:function(e){this.$refs.xTable._getData(e)}}},x=F,$=Object(f["a"])(x,i,r,!1,null,"7fc98e59",null);t["default"]=$.exports},"11f0":function(e,t,a){},"4e47":function(e,t,a){"use strict";a("11f0")},"8ba4":function(e,t,a){var i=a("23e7"),r=a("eac5");i({target:"Number",stat:!0},{isInteger:r})},"99a4":function(e,t,a){"use strict";a("d2f4")},b680:function(e,t,a){"use strict";var i=a("23e7"),r=a("da84"),l=a("e330"),n=a("5926"),s=a("408a"),o=a("1148"),c=a("d039"),u=r.RangeError,d=r.String,h=Math.floor,m=l(o),p=l("".slice),f=l(1..toFixed),_=function(e,t,a){return 0===t?a:t%2===1?_(e,t-1,a*e):_(e*e,t/2,a)},v=function(e){var t=0,a=e;while(a>=4096)t+=12,a/=4096;while(a>=2)t+=1,a/=2;return t},b=function(e,t,a){var i=-1,r=a;while(++i<6)r+=t*e[i],e[i]=r%1e7,r=h(r/1e7)},g=function(e,t){var a=6,i=0;while(--a>=0)i+=e[a],e[a]=h(i/t),i=i%t*1e7},y=function(e){var t=6,a="";while(--t>=0)if(""!==a||0===t||0!==e[t]){var i=d(e[t]);a=""===a?i:a+m("0",7-i.length)+i}return a},w=c((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!c((function(){f({})}));i({target:"Number",proto:!0,forced:w},{toFixed:function(e){var t,a,i,r,l=s(this),o=n(e),c=[0,0,0,0,0,0],h="",f="0";if(o<0||o>20)throw u("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return d(l);if(l<0&&(h="-",l=-l),l>1e-21)if(t=v(l*_(2,69,1))-69,a=t<0?l*_(2,-t,1):l/_(2,t,1),a*=4503599627370496,t=52-t,t>0){b(c,0,a),i=o;while(i>=7)b(c,1e7,0),i-=7;b(c,_(10,i,1),0),i=t-1;while(i>=23)g(c,1<<23),i-=23;g(c,1<<i),b(c,1,1),g(c,2),f=y(c)}else b(c,0,a),b(c,1<<-t,0),f=y(c)+m("0",o);return o>0?(r=f.length,f=h+(r<=o?"0."+m("0",o-r)+f:p(f,0,r-o)+"."+p(f,r-o))):f=h+f,f}})},d12c:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-cascader",{attrs:{filterable:e.filterable,placeholder:"请选择",options:e.options,clearable:"",size:"mini",props:e.prop},on:{change:e.changes,"expand-change":e.handleItemChange},model:{value:e.newDefaultArea,callback:function(t){e.newDefaultArea=t},expression:"newDefaultArea"}})],1)},r=[],l=(a("e3df"),a("42aa"),a("b1f0"),{data:function(){return{options:[],newDefaultArea:[]}},props:{defaultArea:{type:Array},filterable:{type:Boolean,default:!1},Level:{type:Number,default:3},prop:{type:Object,default:function(){return{value:"value",children:"cities"}}}},methods:{changes:function(e){var t=this;this.$nextTick((function(){t.$emit("changeDefaultArea",t.newDefaultArea)}))},handleItemChange:function(e){var t,a=this;1==e.length&&(t=e[0]),2==e.length&&(t=e[1]),this.$axios({method:"get",url:this.$api.getAreaListOption,params:{p_id:t,is_page:1}}).then((function(t){for(var i in a.options){if(1==e.length&&a.options[i].value==e[0]&&!a.options[i].cities.length)for(var r in t.data.data){var l={};l.label=t.data.data[r].area_name,l.value=t.data.data[r].area_id,3==a.Level&&(l.cities=[]),a.options[i].cities.push(l)}if(2==e.length&&3==a.Level)for(var n in a.options[i].cities)if(a.options[i].cities[n].value==e[1]&&!a.options[i].cities[n].cities.length)for(var s in t.data.data){var o={};o.label=t.data.data[s].area_name,o.value=t.data.data[s].area_id,a.options[i].cities[n].cities.push(o)}}}))},initAddress:function(){var e=this,t={level:2},a=this;a.$axMethod.getAreaList(t).then((function(t){var i={};for(var r in t.data.data){i={label:t.data.data[r].area_name,value:t.data.data[r].area_id,cities:[]};a.options.push(i)}if(e.defaultArea.length<=1)return!1;var l={level:3,p_id:a.defaultArea[0]};a.$axMethod.getAreaList(l).then((function(t){for(var i in a.options)if(a.options[i].value==l.p_id&&!a.options[i].cities.length)for(var r in t.data.data){var n={label:t.data.data[r].area_name,value:t.data.data[r].area_id,cities:[]};a.options[i].cities.push(n)}if(e.defaultArea.length<=2)return!1;var s={level:4,p_id:a.defaultArea[1]};a.$axMethod.getAreaList(s).then((function(e){for(var t in a.options)for(var i in a.options[t].cities)if(a.options[t].cities[i].value==s.p_id&&!a.options[t].cities[i].cities.length)for(var r in e.data.data){var l={label:e.data.data[r].area_name,value:e.data.data[r].area_id};a.options[t].cities[i].cities.push(l)}}))}))}))}},mounted:function(){var e=this;if(this.defaultArea.length>1)this.newDefaultArea=this.defaultArea.filter((function(e){return e})),this.initAddress();else{var t={level:2};this.$axMethod.getAreaList(t).then((function(t){var a={};for(var i in t.data.data){a={label:t.data.data[i].area_name,value:t.data.data[i].area_id,cities:[]};e.options.push(a)}}))}},watch:{defaultArea:{handler:function(e,t){this.options=[],this.newDefaultArea=this.defaultArea,this.initAddress()},deep:!0}}}),n=l,s=a("2877"),o=Object(s["a"])(n,i,r,!1,null,null,null);t["a"]=o.exports},d2f4:function(e,t,a){},eac5:function(e,t,a){var i=a("861d"),r=Math.floor;e.exports=Number.isInteger||function(e){return!i(e)&&isFinite(e)&&r(e)===e}}}]);
//# sourceMappingURL=chunk-a6e27caa.8f164168.js.map