(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-2d0b611a"],{"1c1c":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"goodsattribute"},[a("div",{attrs:{id:"leixin"}},[a("div",{staticClass:"search_container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.goodsattribute}},[a("el-form-item",{attrs:{label:"所属公司",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{change:e.companyChange},model:{value:e.goodsattribute.company_id,callback:function(t){e.$set(e.goodsattribute,"company_id",t)},expression:"goodsattribute.company_id"}},e._l(e.companyList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[a("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"仓库名称",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{focus:e.getWarehouses,change:e.warehouseChangeId},model:{value:e.goodsattribute.warehouse_id,callback:function(t){e.$set(e.goodsattribute,"warehouse_id",t)},expression:"goodsattribute.warehouse_id"}},e._l(e.warehouseList.options,(function(e){return a("el-option",{key:e.warehouse_id,attrs:{label:e.warehouse_name,value:e.warehouse_id}})})),1)],1),a("el-form-item",{attrs:{label:"货位名称",size:"mini"}},[a("el-select",{staticClass:"el_slect",attrs:{clearable:"",placeholder:"请选择",size:"mini"},on:{focus:e.getAllocation},model:{value:e.goodsattribute.allocation_id,callback:function(t){e.$set(e.goodsattribute,"allocation_id",t)},expression:"goodsattribute.allocation_id"}},e._l(e.allocationInventoryList,(function(e){return a("el-option",{key:e.allocation_id,attrs:{label:e.allocation_name,value:e.allocation_id}})})),1)],1),a("el-form-item",{attrs:{label:"货位类型",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.goodsattribute.allocation_type,callback:function(t){e.$set(e.goodsattribute,"allocation_type",t)},expression:"goodsattribute.allocation_type"}},[a("el-option",{attrs:{value:0,label:"全部"}}),a("el-option",{attrs:{value:1,label:"固定货位"}}),a("el-option",{attrs:{value:2,label:"流动货位"}})],1)],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"add_delet"},[1==e.authority.b_add?a("el-button",{staticClass:"addBtn",attrs:{icon:"el-icon-circle-plus-outline",type:"primary",size:"mini"},on:{click:e.addF}},[e._v("新增")]):e._e(),1==e.authority.b_del?a("el-button",{attrs:{plain:"",icon:"el-icon-delete",size:"mini"},on:{click:e.deletes}},[e._v("删除")]):e._e()],1),a("div",{staticClass:"table_container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading1,expression:"loading1"}],staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:e.TableData.tableData,resizable:"","max-height":"600"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",fixed:"left",align:"center",width:"44"}}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"54"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v(" 修改 ")])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"company_name","min-width":"150",label:"所属组织"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"warehouse_name","min-width":"150",label:"仓库名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"allocation_id","min-width":"150",label:"货位编号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"allocation_name","min-width":"150",label:"货位名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"allocation_type",label:"货位类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.allocation_type?a("span",[e._v("固定货位")]):e._e(),2==t.row.allocation_type?a("span",[e._v("流动货位")]):e._e()]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"is_system",label:"默认货位"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.is_system?a("span",[e._v("是")]):e._e(),0==t.row.is_system?a("span",[e._v("否")]):e._e()]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"remark",label:"备注",width:"150"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"max_num",width:"150",label:"货位最大商品数",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"add_user_name",label:"操作员"},scopedSlots:e._u([{key:"default",fn:function(t){return[""!=t.row.update_user_name?a("span",[e._v(e._s(t.row.update_user_name))]):a("span",[e._v(e._s(t.row.add_user_name))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"add_time",label:"添加日期",width:"180"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"update_time",label:"修改日期",width:"180"}})],1)],1),a("div",{staticClass:"page_container"},[a("div",{staticClass:"pageNumber"},[e._v("每页显示")]),a("el-pagination",{staticClass:"erp-pagination",attrs:{"current-page":e.goPage,"page-size":e.pageSize1,"page-sizes":e.per_page,layout:"total,sizes, prev, pager, next,jumper",prevText:"上一页",nextText:"下一页",total:e.TableData.total},on:{"size-change":e.handleSizeChange,"update:currentPage":function(t){e.goPage=t},"update:current-page":function(t){e.goPage=t},"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"货位管理",center:"",visible:e.dialogFormVisible,width:"450px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"errorItem errorItemMl121",attrs:{model:e.ruleForm}},[a("el-form-item",{attrs:{label:"组织名称",prop:"company_id",maxlength:"50",rules:e.rules.company_id}},[a("el-select",{attrs:{clearable:"",disabled:e.isdisable,placeholder:"请选择",filterable:""},on:{focus:e.getCompany,change:e.clearWarehouse},model:{value:e.ruleForm.company_id,callback:function(t){e.$set(e.ruleForm,"company_id",t)},expression:"ruleForm.company_id"}},e._l(e.companyList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[a("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"所属仓库",prop:"warehouse_id",rules:e.rules.warehouse_id}},[a("el-select",{attrs:{disabled:e.isdisable,clearable:"",placeholder:"请选择"},on:{focus:e.getWarehouse},model:{value:e.ruleForm.warehouse_id,callback:function(t){e.$set(e.ruleForm,"warehouse_id",t)},expression:"ruleForm.warehouse_id"}},e._l(e.warehouseList.options,(function(e){return a("el-option",{key:e.warehouse_id,attrs:{label:e.warehouse_name,value:e.warehouse_id}})})),1)],1),a("el-form-item",{attrs:{label:"货位名称",prop:"allocation_name",rules:[{required:!0,message:"请输入名称",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"用'/'分割符号分割名称可批量添加'"},model:{value:e.ruleForm.allocation_name,callback:function(t){e.$set(e.ruleForm,"allocation_name",t)},expression:"ruleForm.allocation_name"}})],1),a("el-form-item",{attrs:{label:"货位类型",prop:"allocation_type"}},[a("el-radio-group",{on:{change:e.changeAllocationType},model:{value:e.ruleForm.allocation_type,callback:function(t){e.$set(e.ruleForm,"allocation_type",t)},expression:"ruleForm.allocation_type"}},[a("el-radio",{attrs:{label:1}},[e._v(" 固定货位")]),a("el-radio",{attrs:{label:2}},[e._v(" 流动货位")])],1)],1),a("el-form-item",{staticStyle:{width:"150px","margin-left":"120px"},attrs:{label:"",size:"medium"}},[a("el-checkbox",{attrs:{"false-label":0,"true-label":1},model:{value:e.ruleForm.is_system,callback:function(t){e.$set(e.ruleForm,"is_system",t)},expression:"ruleForm.is_system"}},[e._v("默认货位")])],1),1==e.ruleForm.allocation_type?a("el-form-item",{attrs:{label:"货位最大商品数",size:"medium",prop:"max_num",rules:e.rules.interNum}},[a("el-input",{attrs:{type:"text",maxlength:"300",placeholder:"请输入"},model:{value:e.ruleForm.max_num,callback:function(t){e.$set(e.ruleForm,"max_num",t)},expression:"ruleForm.max_num"}})],1):e._e(),a("el-form-item",{attrs:{label:"备注",size:"medium"}},[a("el-input",{attrs:{type:"text",maxlength:"300",placeholder:"请输入"},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dialogFormsubmit("ruleForm")}}},[e._v("确 定")])],1)],1)],1)])},l=[],i=a("65b0"),s={name:"systemInfoSalesStoragelocation",data:function(){return{authority:{},TableData:{tableData:[],per_page:[30,50,100,500],total:10},companyList:[],allocationInventoryList:[],addOrchangeType:"add",AccordingParams:{},goPage:1,pageSize:30,loading:!0,per_page:[30,50,100,500],allocation_name:null,warehouse:[],goodsattribute:{allocation_id:null,warehouse_id:null},isdisable:!1,dialogFormVisible:!1,ruleForm:{allocation_type:1},warehouseList:{options:[]}}},methods:{clearWarehouse:function(){this.$set(this.ruleForm,"warehouse_id","")},getCompany:function(){Object(i["e"])(this)},changeAllocationType:function(e){1==e&&(this.ruleForm.max_num=1)},warehouseChangeId:function(e){this.$set(this.goodsattribute,"allocation_id","")},companyChange:function(e){this.$set(this.goodsattribute,"warehouse_id",""),this.$set(this.goodsattribute,"allocation_id","")},allocation:function(e){var t=this;this.$set(this.params,"allocation_id",""),this.$axMethod.allocationInventoryList({warehouse_id:e}).then((function(e){var a=e.data;"200"==a.code&&(t.allocationInventoryList=a.data)}))},onReset:function(){this.$set(this,"goodsattribute",{}),this.$set(this,"AccordingParams",{params:{},TableData:this.TableData,API:"getAllocationList",vm:this}),Object(i["g"])(this.AccordingParams)},formatter:function(e,t){return 0==e.is_system?"否":1==e.is_system?"是":void 0},handleSelectionChange:function(e){this.multipleSelection=e},handleEdit:function(e,t){var a=this;this.dialogFormVisible=!0,this.addOrchangeType="change",this.isdisable=!0,this.$set(this.warehouseList,"options",[{warehouse_id:t.warehouse_id,warehouse_name:t.warehouse_name}]),this.$set(this,"companyList",[{company_id:t.company_id,company_name:t.company_name}]),this.$nextTick((function(){a.ruleForm=Object.assign({},t)}))},onSearch:function(){Object.assign(this.AccordingParams.params,this.goodsattribute,{page:1}),Object(i["g"])(this.AccordingParams)},getAllocation:function(){var e=this;this.$axMethod.allocationInventoryList({company_id:this.goodsattribute.company_id,warehouse_id:this.goodsattribute.warehouse_id}).then((function(t){var a=t.data;"200"==a.code&&(e.allocationInventoryList=a.data)}))},handleSizeChange:function(e){Object.assign(this.AccordingParams.params,{per_page:e,page:1}),Object(i["g"])(this.AccordingParams)},addF:function(){for(var e in this.getCompany(),this.isdisable=!1,this.dialogFormVisible=!0,this.addOrchangeType="add",this.ruleForm)this.ruleForm[e]="";this.$nextTick((function(){this.$set(this.ruleForm,"allocation_type",1)}))},dialogFormsubmit:function(e){var t=this;1!=this.ruleForm.allocation_type&&(this.ruleForm.max_num=0);var a=this;this.$refs[e].validate((function(e){if(!e)return!1;if("add"==a.addOrchangeType){var o={eachData:t.ruleForm,UrlApi:"addAllocation",closeDialog:t.dialogFormVisible=!1,list:{UrlApi:"getAllocationList",data:t.TableData}};t.$common.addAndupdateFun(o)}else{var l={eachData:t.ruleForm,UrlApi:"editAllocation",closeDialog:t.dialogFormVisible=!1,list:{UrlApi:"getAllocationList",data:t.TableData}};t.$common.addAndupdateFun(l)}}))},deletes:function(){var e={deleID:"allocation_id",deleSelect:this.multipleSelection,deleApi:"delAllocation",list:{UrlApi:"getAllocationList",data:this.TableData}};this.$common.deletes(e,"删除",this)},handleCurrentChange:function(e){Object.assign(this.AccordingParams.params,{page:e}),Object(i["g"])(this.AccordingParams)},getWarehouse:function(){this.$common.options("getWarehouseListOption",this.warehouseList,{company_id:this.ruleForm.company_id,relation_warehouse_id:1})},getWarehouses:function(){this.$common.options("getWarehouseListOption",this.warehouseList,{company_id:this.goodsattribute.company_id,relation_warehouse_id:0})}},mounted:function(){this.authority=JSON.parse(localStorage.getItem("authority")),this.$set(this,"AccordingParams",{params:{},TableData:this.TableData,API:"getAllocationList",vm:this}),Object(i["g"])(this.AccordingParams),Object(i["e"])(this)}},r=s,n=a("2877"),c=Object(n["a"])(r,o,l,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0b611a.461c3196.js.map