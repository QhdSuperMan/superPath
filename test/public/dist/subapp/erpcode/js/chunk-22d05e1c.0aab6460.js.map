{"version":3,"sources":["webpack://erpcode-[name]/./src/components/element/purchase/rebate/factoryPolicy/factoryPolicyAdd.vue?7da2","webpack://erpcode-[name]/./src/components/element/purchase/rebate/factoryPolicy/factoryPolicyAdd.vue?eeee","webpack://erpcode-[name]/src/components/element/purchase/rebate/factoryPolicy/factoryPolicyAdd.vue","webpack://erpcode-[name]/./src/components/element/purchase/rebate/factoryPolicy/factoryPolicyAdd.vue?111a","webpack://erpcode-[name]/./src/components/element/purchase/rebate/factoryPolicy/factoryPolicyAdd.vue","webpack://erpcode-[name]/./src/components/element/purchase/rebate/factoryPolicy/config/factoryPolicyAdd.js","webpack://erpcode-[name]/./node_modules/core-js/modules/es.number.to-fixed.js","webpack://erpcode-[name]/./src/components/element/purchase/rebate/factoryPolicy/config/cycleBox.vue?3de3","webpack://erpcode-[name]/src/components/element/purchase/rebate/factoryPolicy/config/cycleBox.vue","webpack://erpcode-[name]/./src/components/element/purchase/rebate/factoryPolicy/config/cycleBox.vue?19b8","webpack://erpcode-[name]/./src/components/element/purchase/rebate/factoryPolicy/config/cycleBox.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","on","goBack","_s","$route","query","id","ref","params","required","message","trigger","editType","supplier_id","supplier_name","model","value","callback","$$v","$set","expression","company_id","timeChange","policyDay","rebate_mode","_e","directives","name","rawName","updateTable","staticStyle","rebateModeChange","ladder_mode","addContentRow","delContentRow","editRules","showHeader","indexSign","indexDisabled","className","contentBaseTableColumn","isEdit","contentTableUpdate","brandChange","addShopRow","delShopRow","shopTableColumn","editRulesShop","extendParams","beforeUpload","slot","sumbit","staticRenderFns","mixins","data","$publicFution","deepCopy","methods","val","brand_id","$axMethod","sign","$message","warning","event","preventDefault","stopPropagation","Array","isArray","effective_start_time","effective_end_time","$refs","xTable","initColumn","contentColumn","concat","unshift","type","width","align","fixed","contentTable","tableColumn","excessTableColumn","_proxy","sumbitFunction","shopTableBox","then","map","rebate_type","row","rebate_price","common_json","JSON","stringify","tableData","goods_json","api","method","url","code","validate","valid","pop","length","ladder_end_num","goPage","$router","push","components","cycleBox","mounted","$axios","$api","getRebatePolicyInfoPurchase","goods_list","common_list","$nextTick","component","paramsModule","localStorage","getItem","company_name","rebate_cycle","img_path","rowModule","ladder_start_num","rebate_type_name","shopRowModule","goods_type_id","goods_type_name","factory_code","unit_name","unit_id","brand_name","goods_id","goods_name","tableHead","contentTableColumn","title","field","headerAlign","editRender","autoselect","formatter","events","change","$rowIndex","Number","isNaN","parseInt","next","getParams","forEach","box","fullData","excess","modelKey","list","label","scope","$table","rowId","getOutSlots","msg","dealDetaiData","array","result","toFixed","tableColumnTwo","prev","index","obj","column","property","confirm","$","global","uncurryThis","toIntegerOrInfinity","thisNumberValue","$repeat","fails","RangeError","String","floor","Math","repeat","stringSlice","slice","un$ToFixed","pow","x","n","acc","log","x2","multiply","c","c2","divide","dataToString","s","t","FORCED","target","proto","forced","fractionDigits","e","z","j","k","number","fractDigits","disabled","getList","_l","item","key","props","Boolean","default","hasAll","created","shift","$emit"],"mappings":"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","file":"js/chunk-22d05e1c.0aab6460.js","sourcesContent":["export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./factoryPolicyAdd.vue?vue&type=style&index=0&id=0a65ffaa&scoped=true&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',[_vm._v(\"采购管理\")]),_c('el-breadcrumb-item',{staticClass:\"attrbute\"},[_c('span',{on:{\"click\":_vm.goBack}},[_vm._v(\"厂家返利政策\")])]),_c('el-breadcrumb-item',[_vm._v(_vm._s(_vm.$route.query && _vm.$route.query.id ? '修改' : '新增')+\"厂家返利政策\")])],1),_c('div',{staticClass:\"editOrderbox\"},[_c('h5',{staticClass:\"firstTitle\"},[_vm._v(\"返利信息\")]),_c('el-form',{ref:\"params\",staticClass:\"demo-form-inline\",attrs:{\"inline\":true,\"model\":_vm.params}},[_c('el-form-item',{attrs:{\"label\":\"组织名称\",\"size\":\"mini\",\"prop\":\"company_id\",\"rules\":{required: true, message: \"请选择公司名称\",trigger: \"change\"}}},[_c('erpCompanyList',{attrs:{\"disabled\":_vm.editType === 2,\"fatherParams\":_vm.params},on:{\"change\":function () { _vm.params.supplier_id = ''; _vm.params.supplier_name= ''}},model:{value:(_vm.params.company_id),callback:function ($$v) {_vm.$set(_vm.params, \"company_id\", $$v)},expression:\"params.company_id\"}})],1),_c('el-form-item',{attrs:{\"label\":\"厂家名称\",\"size\":\"mini\",\"prop\":\"supplier_id\",\"rules\":{required: true, message: \"请选择厂家名称\",trigger: \"change\"}}},[_c('erpSupplier',{attrs:{\"fatherParams\":_vm.params,\"disabled\":_vm.editType === 2,\"searchParams\":{ company_id: _vm.params.company_id }},model:{value:(_vm.params.supplier_id),callback:function ($$v) {_vm.$set(_vm.params, \"supplier_id\", $$v)},expression:\"params.supplier_id\"}})],1),_c('el-form-item',{attrs:{\"label\":\"返利政策名称\",\"size\":\"mini\",\"prop\":\"rebate_policy_name\",\"rules\":{required: true, message: \"请输入返利策略名称\",trigger: \"change\"}}},[_c('el-input',{attrs:{\"maxlength\":\"100\",\"placeholder\":\"请输入策略名称\",\"clearable\":\"\"},model:{value:(_vm.params.rebate_policy_name),callback:function ($$v) {_vm.$set(_vm.params, \"rebate_policy_name\", $$v)},expression:\"params.rebate_policy_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"返利有效期\",\"size\":\"mini\",\"prop\":\"effective_start_time\",\"rules\":{required: true, message: \"请选择返利有效期\",trigger: \"change\"}}},[_c('el-date-picker',{attrs:{\"type\":\"daterange\",\"value-format\":\"yyyy-MM-dd\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},on:{\"change\":_vm.timeChange},model:{value:(_vm.policyDay),callback:function ($$v) {_vm.policyDay=$$v},expression:\"policyDay\"}})],1),(_vm.params.rebate_mode === 1)?_c('el-form-item',{attrs:{\"label\":\"返利周期\",\"size\":\"mini\",\"prop\":\"rebate_cycle\",\"rules\":{required: true, message: \"请选择返利周期\",trigger: \"change\"}}},[_c('cycleBox',{attrs:{\"hasAll\":false},model:{value:(_vm.params.rebate_cycle),callback:function ($$v) {_vm.$set(_vm.params, \"rebate_cycle\", $$v)},expression:\"params.rebate_cycle\"}})],1):_vm._e(),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.params.rebate_mode === 1),expression:\"params.rebate_mode === 1\"}],attrs:{\"label\":\"阶梯模式\",\"size\":\"mini\",\"prop\":\"ladder_mode\",\"rules\":{required: true, message: \"请选择阶梯模式\",trigger: \"change\"}}},[_c('el-radio-group',{on:{\"change\":_vm.updateTable},model:{value:(_vm.params.ladder_mode),callback:function ($$v) {_vm.$set(_vm.params, \"ladder_mode\", $$v)},expression:\"params.ladder_mode\"}},[_c('el-radio',{attrs:{\"label\":2}},[_vm._v(\"有阶梯\")]),_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"无阶梯\")])],1)],1)],1),_c('div',{staticStyle:{\"margin-top\":\"30px\",\"margin-bottom\":\"-20px\"}},[_c('el-tabs',{on:{\"tab-click\":_vm.rebateModeChange},model:{value:(_vm.params.rebate_mode),callback:function ($$v) {_vm.$set(_vm.params, \"rebate_mode\", $$v)},expression:\"params.rebate_mode\"}},[_c('el-tab-pane',{attrs:{\"label\":\"满量返点\",\"name\":1}}),_c('el-tab-pane',{attrs:{\"label\":\"短期促销\",\"name\":2}})],1)],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.params.rebate_mode === 1),expression:\"params.rebate_mode === 1\"}]},[_c('h5',{staticClass:\"baseTitle\"},[_vm._v(\"返利内容\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.params.ladder_mode === 2),expression:\"params.ladder_mode === 2\"}],staticClass:\"add_delet\"},[_c('el-button',{attrs:{\"icon\":\"el-icon-circle-plus-outline\",\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.addContentRow}},[_vm._v(\"增行\")]),_c('el-button',{attrs:{\"plain\":\"\",\"icon\":\"el-icon-delete\",\"size\":\"small\"},on:{\"click\":_vm.delContentRow}},[_vm._v(\"删行\")])],1),_c('div',{staticClass:\"table_container\",staticStyle:{\"display\":\"inline-block\"}},[_c('xTable',{ref:\"contentTable\",attrs:{\"rowId\":\"contentId\",\"maxHeight\":\"500\",\"editRules\":_vm.editRules,\"selectConfig\":{ showHeader: false },\"indexSign\":_vm.indexSign,\"indexSignConfig\":{ indexDisabled:true,className: \"aaa\" },\"tableColumn\":_vm.contentBaseTableColumn,\"isEdit\":_vm.isEdit},on:{\"tableUpdate\":_vm.contentTableUpdate}})],1)]),_c('h5',{staticClass:\"baseTitle\"},[_vm._v(\"商品信息\")]),_c('div',{staticClass:\"add_delet\"},[_c('span',{staticStyle:{\"font-size\":\"12px\"}},[_vm._v(\"选择品牌 \")]),_c('getBrand',{attrs:{\"fatherParams\":_vm.params},on:{\"change\":_vm.brandChange},model:{value:(_vm.params.brand_id),callback:function ($$v) {_vm.$set(_vm.params, \"brand_id\", $$v)},expression:\"params.brand_id\"}})],1),_c('div',{staticClass:\"add_delet\"},[_c('el-button',{attrs:{\"icon\":\"el-icon-circle-plus-outline\",\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.addShopRow}},[_vm._v(\"增行\")]),_c('el-button',{attrs:{\"plain\":\"\",\"icon\":\"el-icon-delete\",\"size\":\"small\"},on:{\"click\":_vm.delShopRow}},[_vm._v(\"删行\")])],1),_c('div',{staticClass:\"table_container\",staticStyle:{\"display\":\"inline-block\"}},[_c('xTable',{ref:\"xTable\",attrs:{\"tableColumn\":_vm.shopTableColumn,\"editRules\":_vm.editRulesShop}})],1),_c('h5',{staticClass:\"baseTitle\"},[_vm._v(\"上传附件\")]),_c('div',[_c('uploadCommon',{ref:\"uploadFile\",attrs:{\"extendParams\":_vm.extendParams},model:{value:(_vm.params.img_path),callback:function ($$v) {_vm.$set(_vm.params, \"img_path\", $$v)},expression:\"params.img_path\"}},[_c('span',{on:{\"click\":_vm.beforeUpload}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")])],1),_c('tip',{attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_c('span',{staticStyle:{\"font-size\":\"12px\"}},[_vm._v(\" 建议上传合同附件，如合同扫描件等；图片支持jpg、jpeg、png、bmp格式，大小不超过2MB，最多上传6张；文档附件不超过10MB，最多上传3份 \")])])],1)],1),_c('div',{staticClass:\"sumbitButton\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.sumbit}},[_vm._v(\"保存\")]),_c('el-button',{attrs:{\"plain\":\"\",\"size\":\"small\"},on:{\"click\":_vm.goBack}},[_vm._v(\"取消\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- 采购申请新增修改 -->\n  <div class='container'>\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item>采购管理</el-breadcrumb-item>\n      <el-breadcrumb-item class=\"attrbute\">\n        <span @click=\"goBack\">厂家返利政策</span>\n      </el-breadcrumb-item>\n      <el-breadcrumb-item>{{$route.query && $route.query.id ? '修改' : '新增'}}厂家返利政策</el-breadcrumb-item>\n    </el-breadcrumb>\n    <div class='editOrderbox'>\n      <h5 class=\"firstTitle\">返利信息</h5>\n      <el-form :inline=\"true\" :model=\"params\" class=\"demo-form-inline\" ref=\"params\">\n        <el-form-item label=\"组织名称\" size=\"mini\" prop=\"company_id\" :rules='{required: true, message: \"请选择公司名称\",trigger: \"change\"}'>\n          <erpCompanyList v-model='params.company_id' @change=\"() => { params.supplier_id = ''; params.supplier_name= ''}\" :disabled=\"editType === 2\" :fatherParams='params' />\n        </el-form-item>\n        <el-form-item label=\"厂家名称\" size=\"mini\" prop=\"supplier_id\" :rules='{required: true, message: \"请选择厂家名称\",trigger: \"change\"}'>\n          <erpSupplier v-model='params.supplier_id' :fatherParams='params' :disabled=\"editType === 2\" :searchParams='{ company_id: params.company_id }' />\n        </el-form-item>\n        <el-form-item label=\"返利政策名称\" size=\"mini\" prop=\"rebate_policy_name\" :rules='{required: true, message: \"请输入返利策略名称\",trigger: \"change\"}'>\n          <el-input v-model=\"params.rebate_policy_name\" maxlength=\"100\" placeholder=\"请输入策略名称\" clearable></el-input>\n        </el-form-item>\n        <el-form-item label=\"返利有效期\" size=\"mini\" prop=\"effective_start_time\" :rules='{required: true, message: \"请选择返利有效期\",trigger: \"change\"}'>\n          <el-date-picker v-model=\"policyDay\" type=\"daterange\" value-format='yyyy-MM-dd' @change='timeChange' range-separator=\"至\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\"></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"返利周期\" size=\"mini\" prop=\"rebate_cycle\" :rules='{required: true, message: \"请选择返利周期\",trigger: \"change\"}' v-if='params.rebate_mode === 1'>\n          <cycleBox v-model=\"params.rebate_cycle\" :hasAll='false' />\n        </el-form-item>\n        <el-form-item label=\"阶梯模式\" size=\"mini\" v-show='params.rebate_mode === 1' prop=\"ladder_mode\" :rules='{required: true, message: \"请选择阶梯模式\",trigger: \"change\"}'>\n          <el-radio-group v-model=\"params.ladder_mode\" @change='updateTable'>\n            <el-radio :label=\"2\">有阶梯</el-radio>\n            <el-radio :label=\"1\">无阶梯</el-radio>\n          </el-radio-group>\n        </el-form-item>\n      </el-form>\n      <div style='margin-top: 30px;margin-bottom: -20px'>\n        <el-tabs v-model=\"params.rebate_mode\" @tab-click=\"rebateModeChange\">\n          <el-tab-pane label=\"满量返点\" :name=\"1\"></el-tab-pane>\n          <el-tab-pane label=\"短期促销\" :name=\"2\"></el-tab-pane>\n        </el-tabs>\n      </div>\n      <div v-show='params.rebate_mode === 1'>\n        <h5 class=\"baseTitle\">返利内容</h5>\n        <div class=\"add_delet\" v-show='params.ladder_mode === 2'>\n          <el-button icon=\"el-icon-circle-plus-outline\" type=\"primary\" size=\"small\" @click=\"addContentRow\">增行</el-button>\n          <el-button plain icon=\"el-icon-delete\" size=\"small\" @click=\"delContentRow\">删行</el-button>\n        </div>\n        <div class=\"table_container\" style='display:inline-block;'>\n          <xTable ref='contentTable' rowId='contentId' @tableUpdate='contentTableUpdate' maxHeight='500' :editRules='editRules' :selectConfig='{ showHeader: false }' :indexSign='indexSign' :indexSignConfig='{ indexDisabled:true,className: \"aaa\" }' :tableColumn='contentBaseTableColumn' :isEdit='isEdit' />\n        </div>\n      </div>\n      <h5 class=\"baseTitle\">商品信息</h5>\n      <div class=\"add_delet\">\n        <span style='font-size: 12px;'>选择品牌 </span>\n        <getBrand v-model='params.brand_id' :fatherParams='params' @change=\"brandChange\" />\n      </div>\n\n      <div class=\"add_delet\">\n        <el-button icon=\"el-icon-circle-plus-outline\" type=\"primary\" size=\"small\" @click=\"addShopRow\">增行</el-button>\n        <el-button plain icon=\"el-icon-delete\" size=\"small\" @click=\"delShopRow\">删行</el-button>\n      </div>\n      <div class=\"table_container\" style='display:inline-block;'>\n        <xTable ref='xTable' :tableColumn='shopTableColumn' :editRules='editRulesShop' />\n      </div>\n      <h5 class=\"baseTitle\">上传附件</h5>\n      <div>\n        <uploadCommon v-model=\"params.img_path\" ref='uploadFile' :extendParams='extendParams'>\n          <span @click=\"beforeUpload\">\n            <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n          </span>\n          <tip slot=\"tip\">\n            <span style='font-size: 12px;'>\n              建议上传合同附件，如合同扫描件等；图片支持jpg、jpeg、png、bmp格式，大小不超过2MB，最多上传6张；文档附件不超过10MB，最多上传3份\n            </span>\n          </tip>\n        </uploadCommon>\n      </div>\n      <div class=\"sumbitButton\">\n        <el-button type=\"primary\" @click=\"sumbit\" size=\"small\">保存</el-button>\n        <el-button plain @click=\"goBack\" size=\"small\">取消</el-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { paramsModule, tableHead } from \"./config/factoryPolicyAdd\";\nimport { serverMoudle } from \"@/utils/fetch\";\nimport cycleBox from \"./config/cycleBox\";\nexport default {\n  name: \"factoryPolicy/factoryPolicyAdd\",\n  mixins: [tableHead],\n  data() {\n    return {\n      indexSign: [], // 禁用地址的索引\n      policyDay: [],\n      extendParams: {},\n      params: this.$publicFution.deepCopy(paramsModule),\n      editType: 1 // 操作类型 1是新增  2是编辑\n    };\n  },\n  methods: {\n    // 品牌改变\n    brandChange(val) {\n      if (val.brand_id) {\n        this.$axMethod\n          .getInventoryGoodsList({\n            company_id: this.params.company_id,\n            brand_id: val.brand_id\n          })\n          .then(({ data }) => {\n            var row = this.$refs.contentTable._proxy(\"getTableData\").fullData;\n            row = row[0] ? row[0] : {};\n            var result = data.data.map(val => {\n              val.rebate_price = row.rebate_price;\n              val.rebate_type_name = row.rebate_type_name;\n              val.rebate_type = row.rebate_type;\n              return val;\n            });\n            this.$refs.xTable._proxy(\"loadData\", result);\n          });\n      }\n    },\n    // 验证上传\n    beforeUpload(event) {\n      this.extendParams = {\n        company_id: this.params.company_id,\n        sign: serverMoudle({\n          company_id: this.params.company_id\n        })\n      };\n      if (this.params.company_id) {\n        return true;\n      } else {\n        this.$message.warning(\"请先选择公司名称\");\n        event.preventDefault();\n        event.stopPropagation();\n        return false;\n      }\n    },\n    // 有效期改变\n    timeChange(val) {\n      if (Array.isArray(val)) {\n        this.params.effective_start_time = val[0];\n        this.params.effective_end_time = val[1];\n      } else {\n        this.params.effective_start_time = \"\";\n        this.params.effective_end_time = \"\";\n      }\n    },\n    // 切换有无阶梯时动态生成表格\n    updateTable(val) {\n      if (val === 2) {\n        // 有阶梯\n        this.$refs.xTable && this.$refs.xTable.initColumn(this.shopTableColumn);\n        var contentColumn = this.contentBaseTableColumn.concat(\n          this.excessTableColumn\n        );\n        contentColumn.unshift({\n          type: \"checkbox\",\n          width: 44,\n          align: \"center\",\n          fixed: \"left\"\n        });\n\n        this.$refs.contentTable &&\n          this.$refs.contentTable.initColumn(contentColumn);\n      } else {\n        var tableColumn = this.shopTableColumn.concat(this.excessTableColumn);\n        this.$refs.xTable && this.$refs.xTable.initColumn(tableColumn);\n\n        this.$refs.contentTable &&\n          this.$refs.contentTable.initColumn(this.excessTableColumn.concat([]));\n        this.$refs.contentTable._proxy(\"loadData\", []);\n        this.addContentRow();\n      }\n    },\n    sumbitFunction(tableData, shopTableBox) {\n      this.$refs.xTable._proxy(\"validate\", shopTableBox).then(errMap => {\n        var params = this.params;\n        shopTableBox = shopTableBox.map(val => {\n          if (val.rebate_type === 1) {\n            var row = this.$publicFution.deepCopy(val);\n            row.rebate_price = row.rebate_price / 100;\n            return row;\n          }\n          return val;\n        });\n        params.common_json = JSON.stringify(tableData);\n        params.goods_json = JSON.stringify(shopTableBox);\n        var api = \"addRebatePolicyPurchase\";\n        if (this.editType === 2) {\n          api = \"editRebatePolicyPurchase\";\n        }\n        this.$axios({\n          method: \"post\",\n          data: params,\n          url: this.$api[api]\n        }).then(({ data }) => {\n          if (data.code === 200) {\n            this.$message.success(data.msg);\n            this.goBack();\n          }\n        });\n      });\n    },\n    sumbit() {\n      this.$refs.params.validate(valid => {\n        if (valid) {\n          var tableData = this.$refs.contentTable\n            ._proxy(\"getTableData\")\n            .fullData.concat([]);\n          var shopTableBox = this.$refs.xTable\n            ._proxy(\"getTableData\")\n            .fullData.concat([]);\n          if (\n            shopTableBox[shopTableBox.length - 1] &&\n            !shopTableBox[shopTableBox.length - 1].goods_id\n          ) {\n            shopTableBox.pop();\n          }\n          if (shopTableBox.length < 1) {\n            this.$message.warning(\"请完善商品信息表格数据\");\n            return;\n          }\n          if (this.params.rebate_mode === 1) {\n            tableData = tableData.map(val => {\n              if (val.rebate_type === 1) {\n                var row = this.$publicFution.deepCopy(val);\n                row.rebate_price = row.rebate_price / 100;\n                return row;\n              }\n              return val;\n            });\n            if (tableData[tableData.length - 1].ladder_end_num !== \"无穷\") {\n              this.$message.warning(\"最后一行的阶梯截止数量必须是无穷\");\n              return;\n            }\n            this.$refs.contentTable._proxy(\"validate\").then(errMap => {\n              this.sumbitFunction(tableData, shopTableBox);\n            });\n          } else {\n            this.sumbitFunction(tableData, shopTableBox);\n          }\n        }\n      });\n    },\n    goBack() {\n      this.$publicFution.goPage(this.$route.query && this.$route.query.id);\n      this.$router.push(\"/purchase/factoryPolicy\");\n    }\n  },\n  components: {\n    cycleBox\n  },\n  mounted() {\n    this.editType = 1;\n    if (this.$route.query && this.$route.query.id) {\n      this.editType = 2;\n      this.$axios({\n        params: { rebate_policy_id: this.$route.query.id },\n        method: \"get\",\n        url: this.$api.getRebatePolicyInfoPurchase\n      }).then(({ data }) => {\n        if (data.code === 200) {\n          this.params = data.data.info;\n          this.rebateModeChange(); // 短期促销 与满量返点的切换\n          data.data.goods_list = this.dealDetaiData(data.data.goods_list);\n          data.data.common_list = this.dealDetaiData(data.data.common_list);\n          this.$refs.xTable._proxy(\"loadData\", data.data.goods_list);\n          this.$refs.contentTable._proxy(\"loadData\", data.data.common_list);\n          this.policyDay = [\n            this.$publicFution.getTime(this.params.effective_start_time * 1000),\n            this.$publicFution.getTime(this.params.effective_end_time * 1000)\n          ];\n          this.timeChange(this.policyDay);\n          this.$refs.uploadFile._initList(data.data.photo_list.fileList);\n        }\n      });\n    } else {\n      this.$nextTick(() => {\n        this.updateTable(this.params.ladder_mode);\n      });\n      this.addContentRow();\n    }\n  }\n};\n</script>\n\n<style scoped lang='less'>\n.container {\n  /deep/ .el-radio-button:first-child .el-radio-button__inner {\n    border: 1px solid #dcdfe6;\n  }\n}\n</style>","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./factoryPolicyAdd.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./factoryPolicyAdd.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./factoryPolicyAdd.vue?vue&type=template&id=0a65ffaa&scoped=true&\"\nimport script from \"./factoryPolicyAdd.vue?vue&type=script&lang=js&\"\nexport * from \"./factoryPolicyAdd.vue?vue&type=script&lang=js&\"\nimport style0 from \"./factoryPolicyAdd.vue?vue&type=style&index=0&id=0a65ffaa&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a65ffaa\",\n  null\n  \n)\n\nexport default component.exports","// params 模板\nexport const paramsModule = {\n  company_id: localStorage.getItem('company_id'),\n  company_name: localStorage.getItem('company_name'),\n  ladder_mode: 2,// 有无阶梯\n  rebate_mode: 1,// 满量返点\n  effective_start_time: '',\n  effective_end_time: '',\n  rebate_cycle: '',// \n  img_path: []\n}\nexport const sumbitParams = {\n  purchase_in_storage_id: '',\n  company_id: localStorage.getItem(\"purchase_center_company_id\"),\n  purchase_order_id: '',\n  purchase_order_sn: '',\n  supplier_id: '',\n  payment_method: '',\n  transaction_type: '',\n  remark: ''\n}\n// 返利内容模板\nexport const rowModule = {\n  ladder_start_num: '',// 阶梯起始数量\n  ladder_end_num: '无穷',\n  rebate_type: 1,\n  rebate_type_name: '返点',\n  rebate_price: '',\n}\nexport const shopRowModule = {\n  ladder_start_num: '',// 阶梯起始数量\n  ladder_end_num: '',\n  rebate_type: 1,\n  rebate_price: '',\n  rebate_type_name: '',\n  goods_type_id: '',\n  goods_type_name: '',\n  factory_code: '',\n  unit_name: '',\n  unit_id: '',\n  brand_id: '',\n  brand_name: '',\n  goods_id: '',\n  goods_name: '',\n}\nexport const tableHead = {\n  data() {\n    return {\n      editRules: {\n        ladder_start_num: [\n          { required: true, message: '阶梯起始数量请在0-99999999之间' }\n        ],\n        ladder_end_num: [\n          { required: true, message: '阶梯截止数量请在0-99999999之间' }\n        ],\n        rebate_type_name: [\n          { required: true, message: '请选择返利名称' }\n        ],\n        rebate_price: [\n          { required: true, message: '请输入返利' }\n        ]\n      },\n      editRulesShop: {\n        goods_name: [\n          { required: true, message: '请选择商品' }\n        ],\n        rebate_type_name: [\n          { required: true, message: '请选择返利名称' }\n        ],\n        rebate_price: [\n          { required: true, message: '请输入返利' }\n        ]\n      },\n      // 返利内容表格\n      contentTableColumn: [],\n      // 返利内容基础表格\n      contentBaseTableColumn: [\n        {\n          title: '阶梯起始数量',\n          field: 'ladder_start_num',\n          width: 140,\n          headerAlign: \"right\", // 表头对齐方式\n          align: \"right\", // 列对齐方式\n          editRender: {\n            name: 'number',\n            autoselect: true,\n            formatter: 'Positive',\n            events: {\n              change: ({ row }) => {\n                if (row.ladder_end_num && row.ladder_end_num <= row.ladder_start_num) {\n                  this.$message.warning('阶梯截止数量不能小于等于阶梯起始数量！')\n                  row.ladder_start_num = 0\n                }\n              }\n            }\n          }\n        },\n        {\n          title: '阶梯截止数量',\n          field: 'ladder_end_num',\n          width: 140,\n          headerAlign: \"right\", // 表头对齐方式\n          align: \"right\", // 列对齐方式\n          editRender: {\n            name: 'Vinput',\n            autoselect: true,\n            formatter: 'String',\n            events: {\n              change: ({ row, $rowIndex, data }) => {\n                row.ladder_start_num = Number(row.ladder_start_num)\n                if (!row.ladder_end_num || row.ladder_end_num == '无穷') {\n                  row.ladder_end_num = '无穷'\n                } else {\n                  row.ladder_end_num = isNaN(parseInt(row.ladder_end_num)) ? 0 : parseInt(row.ladder_end_num);\n                  if (row.ladder_end_num < row.ladder_start_num) {\n                    this.$message.warning('阶梯截止数量不能小于等于阶梯起始数量！')\n                    row.ladder_end_num = row.ladder_start_num + 1\n                  }\n                  var next = data[$rowIndex + 1]\n                  if (next) {\n                    if (next.ladder_end_num && row.ladder_end_num + 1 >= next.ladder_end_num) {\n                      row.ladder_end_num = row.ladder_start_num + 1\n                      this.$message.warning('下一行阶梯截止数量不能小于等于阶梯起始数量！')\n                      return\n                    }\n                    next.ladder_start_num = row.ladder_end_num + 1\n                  } else {\n                    this.addContentRow()\n                  }\n                }\n\n              }\n            }\n          }\n        }\n      ],\n      // 商品信息表格\n      shopTableColumn: [\n        {\n          type: \"checkbox\",\n          width: 44,\n          align: 'center',\n          fixed: 'left'\n        },\n        {\n          title: '商品类型',\n          field: 'goods_type_name',\n          width: 150\n        },\n        {\n          title: '品牌',\n          field: 'brand_name',\n          width: 150\n        },\n        {\n          title: '商品编号',\n          field: 'goods_id',\n          width: 150\n        },\n        {\n          title: '商品名称',\n          field: 'goods_name',\n          width: 400,\n          editRender: {\n            name: 'vGoods',\n            getParams: ({ row }) => {\n              return {\n                params: {\n                  company_id: this.params.company_id\n                },\n              }\n            },\n            events: {\n              change: (value, { row }) => {\n                ['inventory_goods_id', 'unit_id', 'unit_name', 'brand_id', 'brand_name', 'specification_model', 'factory_code', 'specification_type', 'goods_type_name', 'goods_type_id'].forEach(val => {\n                  row[val] = value[val]\n                });\n                // row.goods_brand_name = row.brand_name\n                // row.goods_brand_id = row.brand_id\n                // row.goods_unit_id = row.unit_id\n                // row.goods_unit_name = row.unit_name\n                var box = this.$refs.xTable._proxy(\"getTableData\").fullData;\n                if (box.length === 0 || box[box.length - 1].goods_name) {\n                  this.addShopRow();\n                }\n              }\n            }\n          }\n        },\n        {\n          title: '工厂代码',\n          field: 'factory_code',\n          width: 150\n        },\n        {\n          title: '单位',\n          field: 'unit_name',\n          width: 150\n        }\n      ],\n      excess: [// 短期促销专属\n        {\n          title: '促销进价(元)',\n          field: 'promotion_price',\n          width: 140,\n          headerAlign: \"right\", // 表头对齐方式\n          align: \"right\", // 列对齐方式\n          editRender: {\n            name: 'Vinput',\n            autoselect: true,\n          }\n        }\n      ],\n      // 扩展表格\n      excessTableColumn: [\n        {\n          title: '返利方式',\n          field: 'rebate_type_name',\n          width: 140,\n          editRender: {\n            name: 'vSelect',\n            getParams: () => {\n              return {\n                modelKey: 'rebate_type',\n                list: [\n                  {\n                    value: 1,\n                    label: '返点(%)'\n                  },\n                  {\n                    value: 2,\n                    label: '金额(元)'\n                  }\n                ]\n              }\n            },\n            events: {\n              change: (scope) => {\n                var { $table, row } = scope\n                if (!row.rebate_type) {\n                  row.rebate_price = ''\n                }\n                if ($table.rowId === 'contentId') {// rowID 是表格的唯一标识 策略内容改变同步到下面的商品信息\n                  var box = this.$refs.xTable._proxy(\"getTableData\").fullData.concat([]);\n                  box = box.map(val => {\n                    val.rebate_type = row.rebate_type\n                    val.rebate_type_name = row.rebate_type_name\n                    return val\n                  })\n                  this.$refs.xTable._proxy(\"loadData\", box)\n                }\n              }\n            }\n          }\n        },\n        {\n          title: '返利',\n          field: 'rebate_price',\n          width: 140,\n          headerAlign: \"right\", // 表头对齐方式\n          align: \"right\", // 列对齐方式\n          editRender: {\n            name: 'Vinput',\n            autoselect: true,\n            events: {\n              change: (scope) => {\n                var { $table, row } = scope\n                if ($table.rowId === 'contentId') {// owID 是表格的唯一标识 策略内容改变同步到下面的商品信息\n                  var box = this.$refs.xTable._proxy(\"getTableData\").fullData.concat([]);\n                  box = box.map(val => {\n                    val.rebate_price = row.rebate_price\n                    return val\n                  })\n                  this.$refs.xTable._proxy(\"loadData\", box)\n                }\n              }\n            },\n            getOutSlots: ({ row }) => {\n              var msg\n              if (row.rebate_type === 1) {\n                msg = '%'\n              } else if (row.rebate_type === 2) {\n                msg = '元'\n              }\n              return [<span style='color: blue' >{msg}</span>]\n            }\n          }\n        }\n      ]\n    }\n  },\n  methods: {\n    // 新增返点要除以100 修改详情要乘以一百\n    dealDetaiData(array) {\n      var result = array.map(val => {\n        if (val.rebate_type === 1) {\n          var row = this.$publicFution.deepCopy(val);\n          row.rebate_price = row.rebate_price * 100;\n          row.rebate_price = row.rebate_price.toFixed(2)\n          return row;\n        }\n        val.rebate_price = Number(val.rebate_price).toFixed(2)\n        return val;\n      });\n      return result\n    },\n    // 短期促销\n    rebateModeChange() {\n      if (this.params.rebate_mode === 2) {// 短期促销\n        var tableColumn = this.shopTableColumn.concat(this.excess);\n        this.$refs.xTable && this.$refs.xTable.initColumn(tableColumn);\n      } else {// 满量慢点\n        if (this.params.ladder_mode === 2) {// 有阶梯\n          this.$refs.xTable && this.$refs.xTable.initColumn(this.shopTableColumn);\n          var contentColumn = this.contentBaseTableColumn.concat(\n            this.excessTableColumn\n          );\n          contentColumn.unshift({\n            type: \"checkbox\",\n            width: 44,\n            align: \"center\",\n            fixed: \"left\"\n          });\n          this.$refs.contentTable &&\n            this.$refs.contentTable.initColumn(contentColumn);\n        } else {// 无阶梯\n          var tableColumnTwo = this.shopTableColumn.concat(this.excessTableColumn);\n          this.$refs.xTable && this.$refs.xTable.initColumn(tableColumnTwo);\n          this.$refs.contentTable &&\n            this.$refs.contentTable.initColumn(this.excessTableColumn.concat([]));\n        }\n      }\n    },\n    // 返利内容增行\n    addContentRow() {\n      if (this.$refs.contentTable) {\n        var row = this.$publicFution.deepCopy(rowModule)\n        var tableData = this.$refs.contentTable._proxy(\"getTableData\").fullData.concat([])\n        var prev = tableData[tableData.length - 1]\n        if (prev) {\n          if (typeof (prev.ladder_end_num) !== 'number') {\n            prev.ladder_end_num = Number(prev.ladder_start_num) + 1\n          }\n          row.ladder_start_num = Number(prev.ladder_end_num) + 1\n        } else {\n          row.ladder_start_num = 1\n        }\n        this.$refs.contentTable._proxy(\"insertAt\", row, -1);\n      }\n    },\n    // 返利内容表格变动\n    contentTableUpdate() {\n      var tableData = this.$refs.contentTable._proxy(\"getTableData\").fullData.concat([])\n      this.indexSign = tableData.map((val, index) => index)\n      if (this.indexSign.length > 1) {\n        this.indexSign.pop()\n      }\n    },\n    // 删策略内容\n    delContentRow() {\n      if (this.$refs.contentTable._proxy(\"getSelectRecords\").length) {\n        this.$refs.contentTable._proxy(\"removeSelecteds\");\n      } else {\n        this.$message.warning(\"请先选择要删除的商品！\");\n      }\n    },\n    // 删商品内容\n    delShopRow() {\n      if (this.$refs.xTable._proxy(\"getSelectRecords\").length) {\n        this.$refs.xTable._proxy(\"removeSelecteds\");\n      } else {\n        this.$message.warning(\"请先选择要删除的商品！\");\n      }\n    },\n    // 商品信息增行\n    addShopRow() {\n      if (this.$refs.xTable) {\n        var obj = this.$publicFution.deepCopy(shopRowModule)\n        if (this.params.ladder_mode === 1) {\n          var row = this.$refs.contentTable._proxy(\"getTableData\").fullData\n          row = row[0] ? row[0] : {}\n          obj.rebate_price = row.rebate_price\n          obj.rebate_type_name = row.rebate_type_name\n          obj.rebate_type = row.rebate_type\n        }\n        this.$refs.xTable._proxy(\n          \"insertAt\",\n          obj,\n          -1\n        );\n      }\n    },\n    isEdit({ column, row, $rowIndex }) {\n      if (column.property === 'ladder_start_num' && $rowIndex !== 0) {\n        this.$publicFution.confirm('只能修改第一行的起始数量')\n        return false\n      }\n      return true\n    },\n\n  }\n}","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar thisNumberValue = require('../internals/this-number-value');\nvar $repeat = require('../internals/string-repeat');\nvar fails = require('../internals/fails');\n\nvar RangeError = global.RangeError;\nvar String = global.String;\nvar floor = Math.floor;\nvar repeat = uncurryThis($repeat);\nvar stringSlice = uncurryThis(''.slice);\nvar un$ToFixed = uncurryThis(1.0.toFixed);\n\nvar pow = function (x, n, acc) {\n  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);\n};\n\nvar log = function (x) {\n  var n = 0;\n  var x2 = x;\n  while (x2 >= 4096) {\n    n += 12;\n    x2 /= 4096;\n  }\n  while (x2 >= 2) {\n    n += 1;\n    x2 /= 2;\n  } return n;\n};\n\nvar multiply = function (data, n, c) {\n  var index = -1;\n  var c2 = c;\n  while (++index < 6) {\n    c2 += n * data[index];\n    data[index] = c2 % 1e7;\n    c2 = floor(c2 / 1e7);\n  }\n};\n\nvar divide = function (data, n) {\n  var index = 6;\n  var c = 0;\n  while (--index >= 0) {\n    c += data[index];\n    data[index] = floor(c / n);\n    c = (c % n) * 1e7;\n  }\n};\n\nvar dataToString = function (data) {\n  var index = 6;\n  var s = '';\n  while (--index >= 0) {\n    if (s !== '' || index === 0 || data[index] !== 0) {\n      var t = String(data[index]);\n      s = s === '' ? t : s + repeat('0', 7 - t.length) + t;\n    }\n  } return s;\n};\n\nvar FORCED = fails(function () {\n  return un$ToFixed(0.00008, 3) !== '0.000' ||\n    un$ToFixed(0.9, 0) !== '1' ||\n    un$ToFixed(1.255, 2) !== '1.25' ||\n    un$ToFixed(1000000000000000128.0, 0) !== '1000000000000000128';\n}) || !fails(function () {\n  // V8 ~ Android 4.3-\n  un$ToFixed({});\n});\n\n// `Number.prototype.toFixed` method\n// https://tc39.es/ecma262/#sec-number.prototype.tofixed\n$({ target: 'Number', proto: true, forced: FORCED }, {\n  toFixed: function toFixed(fractionDigits) {\n    var number = thisNumberValue(this);\n    var fractDigits = toIntegerOrInfinity(fractionDigits);\n    var data = [0, 0, 0, 0, 0, 0];\n    var sign = '';\n    var result = '0';\n    var e, z, j, k;\n\n    if (fractDigits < 0 || fractDigits > 20) throw RangeError('Incorrect fraction digits');\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (number != number) return 'NaN';\n    if (number <= -1e21 || number >= 1e21) return String(number);\n    if (number < 0) {\n      sign = '-';\n      number = -number;\n    }\n    if (number > 1e-21) {\n      e = log(number * pow(2, 69, 1)) - 69;\n      z = e < 0 ? number * pow(2, -e, 1) : number / pow(2, e, 1);\n      z *= 0x10000000000000;\n      e = 52 - e;\n      if (e > 0) {\n        multiply(data, 0, z);\n        j = fractDigits;\n        while (j >= 7) {\n          multiply(data, 1e7, 0);\n          j -= 7;\n        }\n        multiply(data, pow(10, j, 1), 0);\n        j = e - 1;\n        while (j >= 23) {\n          divide(data, 1 << 23);\n          j -= 23;\n        }\n        divide(data, 1 << j);\n        multiply(data, 1, 1);\n        divide(data, 2);\n        result = dataToString(data);\n      } else {\n        multiply(data, 0, z);\n        multiply(data, 1 << -e, 0);\n        result = dataToString(data) + repeat('0', fractDigits);\n      }\n    }\n    if (fractDigits > 0) {\n      k = result.length;\n      result = sign + (k <= fractDigits\n        ? '0.' + repeat('0', fractDigits - k) + result\n        : stringSlice(result, 0, k - fractDigits) + '.' + stringSlice(result, k - fractDigits));\n    } else {\n      result = sign + result;\n    } return result;\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-select',{attrs:{\"placeholder\":\"请选择\",\"clearable\":\"\",\"disabled\":_vm.disabled,\"filterable\":\"\"},on:{\"focus\":_vm.getList,\"change\":_vm.change},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},_vm._l((_vm.list),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- 来源渠道 -->\n  <el-select v-model=\"value\" placeholder=\"请选择\" clearable :disabled='disabled' filterable @focus=\"getList\" @change=\"change\">\n    <el-option v-for=\"item in list\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\n    </el-option>\n  </el-select>\n</template>\n\n<script>\nexport default {\n  name: \"cycleBox\",\n  data() {\n    return {\n      list: [\n        {\n          value: 0,\n          label: \"全部\"\n        },\n        {\n          value: 1,\n          label: \"本月返\"\n        },\n        {\n          value: 2,\n          label: \"本季返\"\n        },\n        {\n          value: 3,\n          label: \"本半年返\"\n        },\n        {\n          value: 4,\n          label: \"本年返\"\n        },\n        {\n          value: 5,\n          label: \"次月返\"\n        },\n        {\n          value: 6,\n          label: \"次季返\"\n        },\n        {\n          value: 7,\n          label: \"次半年返\"\n        },\n        {\n          value: 8,\n          label: \"次年返\"\n        }\n      ]\n    };\n  },\n  props: {\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    hasAll: {\n      // 是否有全部\n      type: Boolean,\n      default: true\n    },\n    value: null\n  },\n  created() {\n    if (!this.hasAll) {\n      this.list.shift()\n    }\n  },\n  methods: {\n    getList() {\n      // this.$axios\n      //   .axios({\n      //     url: \"/open/Warehouse/getWarehouseList\",\n      //     method: \"get\",\n      //     params: this.searchParams\n      //   })\n      //   .then(({ data }) => {\n      //     if (data.cdoe === 200) {\n      //       this.list = data.data\n      //     }\n      //   });\n    },\n    change(val) {\n      this.$emit(\"input\", val);\n      this.$emit(\"change\", val);\n    }\n  }\n};\n</script>\n\n<style>\n</style>","import mod from \"-!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cycleBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cycleBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./cycleBox.vue?vue&type=template&id=7414660a&\"\nimport script from \"./cycleBox.vue?vue&type=script&lang=js&\"\nexport * from \"./cycleBox.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}