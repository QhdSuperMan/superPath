(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-2d0a40e9"],{"058f":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{attrs:{id:"leixin"}},[a("div",{staticClass:"search_container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"业务日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}})],1),a("el-form-item",{attrs:{label:"审核日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.timeValue1,callback:function(t){e.timeValue1=t},expression:"timeValue1"}})],1),a("el-form-item",{attrs:{label:"销售组织",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.companyListInvok,change:e.companyChange},model:{value:e.params.company_id,callback:function(t){e.$set(e.params,"company_id",t)},expression:"params.company_id"}},e._l(e.companyList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[a("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"客户名称",size:"mini"}},[a("el-select",{attrs:{filterable:"",placeholder:"请输入",clearable:"",loading:e.loading,remote:"","remote-method":e.clienteleListInvok},on:{focus:e.clienteleListInvok,change:e.customerListChange},model:{value:e.params.customer_id,callback:function(t){e.$set(e.params,"customer_id",t)},expression:"params.customer_id"}},[a("ul",{staticClass:"customer customer-ul4 customer-ul2"},[a("li",[e._v("客户编号")]),a("li",[e._v("客户名称")]),a("li",[e._v("联系人")]),a("li",[e._v("联系电话")]),a("li",[e._v("区域")])]),e._l(e.customerList,(function(t){return a("el-option",{key:t.customer_id,attrs:{label:t.customer_name,value:t.customer_id}},[a("ul",{staticClass:"customer customer-ul4"},[a("li",{attrs:{title:t.customer_id}},[e._v(e._s(t.customer_id))]),a("li",{attrs:{title:t.customer_name}},[e._v(e._s(t.customer_name))]),a("li",{attrs:{title:t.contact_name}},[e._v(e._s(t.contact_name))]),a("li",{attrs:{title:t.customer_mobile}},[e._v(e._s(t.customer_mobile))]),a("li",[e._v(e._s(t.province_name)+"/"+e._s(t.city_name)+"/"+e._s(t.area_name))])])])}))],2)],1),a("el-form-item",{attrs:{label:"三包订单单据号",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.params.order_sn,callback:function(t){e.$set(e.params,"order_sn",t)},expression:"params.order_sn"}})],1),a("el-form-item",{attrs:{label:"部门",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.DepartmentListInvok,change:e.departmentChange},model:{value:e.params.department_id,callback:function(t){e.$set(e.params,"department_id",t)},expression:"params.department_id"}},e._l(e.departmentList,(function(e){return a("el-option",{key:e.department_id,attrs:{label:e.department_name,value:e.department_id}})})),1)],1),a("el-form-item",{attrs:{label:"业务员",size:"mini"}},[a("el-select",{attrs:{clearable:"",filterable:""},on:{focus:e.EmployeeListInvok,change:e.businessChange},model:{value:e.params.employee_id,callback:function(t){e.$set(e.params,"employee_id",t)},expression:"params.employee_id"}},e._l(e.employeeList,(function(e){return a("el-option",{key:e.employee_id,attrs:{label:e.employee_name,value:e.employee_id}})})),1)],1),a("el-form-item",{attrs:{label:"审核状态",size:"mini"}},[a("el-select",{attrs:{clearable:""},model:{value:e.params.auditor_status,callback:function(t){e.$set(e.params,"auditor_status",t)},expression:"params.auditor_status"}},[a("el-option",{attrs:{label:"全部",value:0}},[e._v("全部")]),a("el-option",{attrs:{label:"未审核",value:1}},[e._v("未审核")]),a("el-option",{attrs:{label:"已审核",value:2}},[e._v("已审核")]),a("el-option",{attrs:{label:"作废",value:3}},[e._v("作废")])],1)],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"add_delet"},[1==e.authority.b_add?a("el-button",{staticClass:"addBtn",attrs:{icon:"el-icon-circle-plus-outline",type:"primary",size:"mini"},on:{click:e.salesAddF}},[e._v("新增")]):e._e(),1==e.authority.b_del?a("el-button",{attrs:{plain:"",icon:"el-icon-delete",size:"mini"},on:{click:e.deletes}},[e._v("删除")]):e._e(),1==e.authority.b_pass?a("el-button",{attrs:{size:"mini",icon:"iconfont icon-pass",type:"primary"},on:{click:e.audit_enable}},[e._v("审核")]):e._e(),1==e.authority.b_nopass?a("el-button",{attrs:{plain:"",size:"mini",icon:"iconfont icon-fanshenhe"},on:{click:e.AUDIT_GET}},[e._v("弃审")]):e._e(),1==e.authority.b_invalid?a("el-button",{attrs:{plain:"",icon:"iconfont icon-zuofei",size:"mini"},on:{click:e.AUDIT_LIST}},[e._v("作废")]):e._e()],1),a("div",{staticClass:"table_container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading1,expression:"loading1"}],staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:e.TableData.tableData,"max-height":"600"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",fixed:"left",align:"center",width:"44"}}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==e.authority.b_info?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.seeDetail(t,t.row)}}},[e._v(" 查看 ")]):e._e(),1==t.row.auditor_status&&1==e.authority.b_edit?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.salesModifyF(t,t.row)}}},[e._v(" 修改 ")]):a("el-button",{attrs:{disabled:"",type:"text",size:"small"}},[e._v(" 修改 ")])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"order_sn",width:"180",label:"三包订单单据号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"company_name",width:"150",label:"销售组织"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"department_name",width:"100",label:"部门"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"business_name",width:"120",label:"业务员"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"order_num",width:"120",label:"商品数量",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"customer_name",width:"120",label:"客户名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"auditor_status_name",width:"80",label:"审核状态"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"auditor_name",width:"140",label:"审核人"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"add_time",width:"160",label:"单据时间"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"business_time",width:"130",label:"业务时间"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"auditor_time",width:"150",label:"审核时间"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"order_price",width:"120",label:"订单金额",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"rebate_price",width:"120",label:"本单使用返利",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"credit_price",width:"120",label:"本单使用授信",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"deposits_price",width:"100",label:"本单使用预收",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"settlement_price",width:"120",label:"结算金额",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("priceFormatNone")(t.row.settlement_price))+" ")]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"abstract","min-width":"100",label:"摘要"}})],1)],1),a("div",{staticClass:"page_container"},[a("div",{staticClass:"pageNumber"},[e._v("每页显示")]),a("el-pagination",{staticClass:"erp-pagination",attrs:{"current-page":e.goPage,"page-size":e.pageSize1,"page-sizes":e.per_page,layout:"total,sizes, prev, pager, next,jumper",prevText:"上一页",nextText:"下一页",total:e.TableData.total},on:{"size-change":e.handleSizeChange,"update:currentPage":function(t){e.goPage=t},"update:current-page":function(t){e.goPage=t},"current-change":e.handleCurrentChange}})],1)]),a("upload",{ref:"upload",attrs:{options:e.options},on:{receiveUploadMsg:e.receiveUploadMsg}})],1)},r=[],s=a("5530"),o=(a("4de4"),a("d3b7"),a("99af"),a("2f62")),l=a("65b0"),n={name:"aftersaleThreeorderIndex",data:function(){return{authority:{},options:{title:"三包订单期初导入",url:"/aftersale/Order/importOrder"},loading:!1,timeValue1:[],TableData:{tableData:[],total:10},timeValue:[],departments:{options:[]},params:{},searchParams:{},goPage:1,pageSize:30,per_page:[30,50,100,500],multipleSelection:[]}},computed:Object(s["a"])({},Object(o["c"])(["threeorderIndex_Get"])),methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])(["threeorderIndexACT","threeorderAdd","examine"])),{},{departmentChange:function(e){e&&(this.params.department_name=this.departmentList.filter((function(t){return t.department_id===e}))[0].department_name),this.$set(this.params,"employee_id","")},dialogEmployee:function(){this.$refs.upload.stateOpen()},receiveUploadMsg:function(e){Object(l["g"])(this.searchParams)},businessChange:function(e){e&&(this.params.employee_name=this.employeeList.filter((function(t){return t.employee_id===e}))[0].employee_name)},customerListChange:function(e){e&&(this.params.customer_name=this.customerList.filter((function(t){return t.customer_id===e}))[0].customer_name)},handleSelectionChange:function(e){this.multipleSelection=e},downLoadFile:function(){this.$axMethod.orderImportClaim().then((function(e){200==e.data.code&&(window.location.href=e.data.data.url)}))},audit_enable:function(e){var t=this;if(this.multipleSelection.length<1)return this.$message({message:"请选择需要审核的信息",type:"warning"}),!1;for(var a=[],i=0;i<this.multipleSelection.length;i++)a.push(this.multipleSelection[i].order_id);var r=a.toString();this.$axMethod.auidtorPass_Order({order_id:r}).then((function(e){200==e.data.code&&(t.$message({message:e.data.data,type:"success"}),Object(l["g"])(t.searchParams))}))},AUDIT_GET:function(){var e=this;if(this.multipleSelection.length<1)return this.$message({message:"请选择需要弃审的信息",type:"warning"}),!1;for(var t=[],a=0;a<this.multipleSelection.length;a++)t.push(this.multipleSelection[a].order_id);var i=t.toString();this.$axMethod.auditorNoPass_Order({order_id:i}).then((function(t){200==t.data.code&&(e.$message({message:t.data.data,type:"success"}),Object(l["g"])(e.searchParams))}))},AUDIT_LIST:function(){var e=this;if(this.multipleSelection.length<1)return this.$message({message:"请选择需要作废的信息",type:"warning"}),!1;for(var t=[],a=0;a<this.multipleSelection.length;a++)t.push(this.multipleSelection[a].order_id);var i=t.toString();this.$axMethod.auditorInvalid_Order({order_ids:i}).then((function(t){200==t.data.code&&(e.$message({message:t.data.msg,type:"success"}),Object(l["g"])(e.searchParams))}))},seeDetail:function(e,t){this.examine({order_id:t.order_id,params:this.params,goPage:this.goPage,pageSize:this.pageSize}),this.$router.push({path:"/aftersale/threeorder/three_examine"})},salesModifyF:function(e,t){this.threeorderAdd({order_id:t.order_id,amend:1,params:this.params,goPage:this.goPage,pageSize:this.pageSize}),this.$router.push({path:"/aftersale/threeorder/threeorder_Add"})},care:function(){this.multipleSelection},salesAddF:function(){this.threeorderAdd({params:this.params,goPage:this.goPage,pageSize:this.pageSize}),this.$router.push({path:"/aftersale/threeorder/threeorder_Add"})},onReset:function(){this.$set(this,"params",{}),this.timeValue=[],this.timeValue1=[],this.$set(this,"searchParams",{params:{},TableData:this.TableData,API:"getOrderList_Order",vm:this}),Object(l["g"])(this.searchParams),this.threeorderIndexACT({params:{},goPage:this.goPage,pageSize:this.pageSize})},onSearch:function(){this.timeValue&&2==this.timeValue.length?(this.params.start_time=this.timeValue[0],this.params.end_time=this.timeValue[1]):this.params.start_time=this.params.end_time="",this.timeValue1?(this.params.auditor_start_time=this.timeValue1[0],this.params.auditor_end_time=this.timeValue1[1]):this.params.auditor_start_time=this.params.auditor_end_time="",Object.assign(this.searchParams.params,this.params,{page:this.goPage}),Object(l["g"])(this.searchParams),this.threeorderIndexACT({params:this.params,goPage:this.goPage,pageSize:this.pageSize})},deletes:function(){var e={deleID:"order_id",deleSelect:this.multipleSelection,deleApi:"delOrderSB",list:{UrlApi:"getOrderList_Order",data:this.TableData,esData:Object.assign({},this.params)}};this.$common.deletes(e,"删除",this)},handleSizeChange:function(e){Object.assign(this.searchParams.params,{per_page:e,page:1}),Object(l["g"])(this.searchParams)},handleCurrentChange:function(e){Object.assign(this.searchParams.params,{page:e}),Object(l["g"])(this.searchParams)},companyChange:function(e){e&&(this.params.company_name=this.companyList.filter((function(t){return t.company_id===e}))[0].company_name),this.$set(this.params,"department_id",""),this.$set(this.params,"customer_id",""),this.$set(this.params,"employee_id","")}}),created:function(){var e={};if(this.authority=JSON.parse(localStorage.getItem("authority")),this.threeorderIndex_Get&&this.threeorderIndex_Get.params){if(this.threeorderIndex_Get.params.start_time){var t=this.threeorderIndex_Get.params,a=t.start_time,i=t.end_time;this.timeValue=this.timeValue.concat([a,i])}if(this.threeorderIndex_Get.params.auditor_start_time){var r=this.threeorderIndex_Get.params,s=r.auditor_start_time,o=r.auditor_end_time;this.timeValue1=this.timeValue1.concat([s,o])}this.$set(this,"params",this.threeorderIndex_Get.params),e=this.params,Object(l["l"])(this,this.threeorderIndex_Get.params)}this.threeorderIndex_Get&&this.threeorderIndex_Get.goPage&&(this.params.page=this.threeorderIndex_Get.goPage,this.params.per_page=this.threeorderIndex_Get.pageSize),this.$set(this,"searchParams",{params:e,TableData:this.TableData,API:"getOrderList_Order",vm:this}),Object(l["g"])(this.searchParams)}},m=n,c=a("2877"),p=Object(c["a"])(m,i,r,!1,null,null,null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d0a40e9.a618e297.js.map