(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-2d2308ae"],{ed70:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"params"},[i("div",{attrs:{id:"leixin"}},[i("div",{staticClass:"search_container"},[i("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.params}},[i("el-form-item",{attrs:{label:"销售组织",size:"mini"}},[i("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{change:t.companyChange,focus:t.companyListInvok},model:{value:t.params.company_id,callback:function(e){t.$set(t.params,"company_id",e)},expression:"params.company_id"}},t._l(t.companyList,(function(e){return i("el-option",{key:e.company_id,attrs:{label:e.company_name,value:e.company_id}},[i("span",{class:1==e.type?"optionStyle":""},[t._v(t._s(e.company_name))])])})),1)],1),i("el-form-item",{attrs:{label:"政策日期",size:"mini"}},[i("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.clearTime},model:{value:t.timeValue,callback:function(e){t.timeValue=e},expression:"timeValue"}})],1),i("el-form-item",{attrs:{label:"促销状态",size:"mini"}},[i("el-select",{attrs:{clearable:""},model:{value:t.params.auditor_status,callback:function(e){t.$set(t.params,"auditor_status",e)},expression:"params.auditor_status"}},[i("el-option",{attrs:{label:"全部",value:0}},[t._v("全部")]),i("el-option",{attrs:{label:"未审核",value:1}},[t._v("未审核")]),i("el-option",{attrs:{label:"已审核",value:2}},[t._v("已审核")]),i("el-option",{attrs:{label:"关闭",value:4}},[t._v("关闭")])],1)],1),i("el-form-item",{attrs:{size:"mini"}},[i("el-checkbox",{staticStyle:{margin:"0px 22px 0 62px"},attrs:{"false-label":"","true-label":"1",name:"type"},model:{value:t.params.past_due,callback:function(e){t.$set(t.params,"past_due",e)},expression:"params.past_due"}},[t._v("已过期/已关闭")])],1),i("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.onSearch(1)}}},[t._v("查询")]),i("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.onReset}},[t._v("重置")])],1)],1)],1),i("div",{staticClass:"add_delet"},[1==t.authority.b_add?i("el-button",{staticClass:"addBtn",attrs:{icon:"el-icon-circle-plus-outline",type:"primary",size:"mini"},on:{click:t.add_message}},[t._v("新增 ")]):t._e(),1==t.authority.b_del?i("el-button",{attrs:{plain:"",icon:"el-icon-delete",size:"mini"},on:{click:t.deletes}},[t._v("删除 ")]):t._e(),1==t.authority.b_pass?i("el-button",{attrs:{icon:"iconfont icon-pass",type:"primary",size:"mini"},on:{click:function(e){return t.ditor(1)}}},[t._v("审核 ")]):t._e(),1==t.authority.b_close?i("el-button",{attrs:{plain:"",icon:"iconfont icon-zuofei",size:"mini"},on:{click:t.rubbishgb}},[t._v("关闭 ")]):t._e()],1),i("xTable",{ref:"xTable",attrs:{ajax:{url:"getPromotionPolicyList",params:t.params},idssss:"11",tableColumn:t.tableColumn}})],1)])},o=[],s=(i("4de4"),i("d3b7"),i("25f0"),i("a15b"),{data:function(){var t=this;this.$createElement;return{tableColumn:[{type:"checkbox",width:44,fixed:"left"},{title:"销售组织",field:"company_name"},{field:"name",title:"操作",width:160,fixed:"right",slots:{default:function(e,i){return[i("el-button",{attrs:{size:"small",type:"text",disabled:!(1==t.authority.b_info&&1==e.row.is_look)},on:{click:function(){return t.SeeInfo(e.row.policy_id)}}},[" 查看 "]),i("el-button",{attrs:{size:"small",type:"text",disabled:!("未审核"==e.row.auditor_status_name&&1==t.authority.b_edit&&1==e.row.is_look)},on:{click:function(){return t.handleEdit(e.row.policy_id)}}},[" 修改  "]),i("el-button",{attrs:{type:"text",size:"small",disabled:!t.authority.b_info},on:{click:function(){t.goLookuser(e.row.policy_id)}}},["使用情况明细"])]}}},{field:"policy_name",width:156,title:"政策名称",slots:{default:function(e,i){return[i("el-link",{attrs:{disabled:!(1==t.authority.b_info&&1==e.row.is_look)},on:{click:function(){t.SeeInfo(e.row.policy_id)}}},[" ",e.row.policy_name," "])]}}},{title:"政策起始日期",field:"start_time",width:110},{title:"政策截止日期",field:"end_time",width:110},{title:"促销类型",field:"unit_type_name",width:120},{title:"促销规则",field:"full_type_name",width:120},{title:"审核人",field:"auditor_name",width:120},{title:"促销状态",field:"auditor_status_name",width:120},{title:"录入时间",field:"add_time",width:170}]}}}),l={name:"salesPromotionpolicy",mixins:[s],data:function(){return{option_show:{Second:!1,Third:!1},params:{auditor_status:0},isShow:!0,showDepartment:!0}},methods:{clearTime:function(t){null==t&&(delete this.searchParams.start_time,delete this.searchParams.end_time)},companyChange:function(t){t&&(this.params.company_name=this.companyList.filter((function(e){return e.company_id===t}))[0].company_name)},onReset:function(){this.$set(this,"params",{auditor_status:0}),this.timeValue=[],this.onSearch(1)},onSearch:function(t){this.timeValue?(this.params.start_time=this.timeValue[0],this.params.end_time=this.timeValue[1]):this.params.start_time=this.params.end_time="",this.$refs.xTable._getData(t)},goLookuser:function(t){localStorage.removeItem("policy_id"),localStorage.policy_id=t,this.$router.push({path:"/sales/promotionpolicy/lookuser"})},rubbish:function(){if(this.multipleSelection.length<1)return this.$message({message:"请选择需要作废的信息！",type:"warning"}),!1;for(var t=[],e=0;e<this.multipleSelection.length;e++)t.push(this.multipleSelection[e].policy_id);var i=t.toString(),a={eachData:{policy_id:i.toString()},UrlApi:"auditorInvalidPromotionPolicy",list:{UrlApi:"getPromotionPolicyList",data:this.TableData,esData:this.params}};this.$common.audit(a,this.onSearch)},rubbishgb:function(){if(this.multipleSelection.length<1)return this.$message({message:"请选择需要关闭的信息！",type:"warning"}),!1;for(var t=[],e=0;e<this.multipleSelection.length;e++)t.push(this.multipleSelection[e].policy_id);var i=t.toString(),a={eachData:{policy_id:i.toString()},UrlApi:"v2closePromotionPolicy",list:{UrlApi:"getPromotionPolicyList",data:this.TableData,esData:this.params}};this.$common.audit(a,this.onSearch)},ditor:function(t){if(this.multipleSelection.length<1)return this.$message({message:"请选择需要审核的信息",type:"warning"}),!1;for(var e=1==t?"auditorPassPromotionPolicy":"auditorInvalidPromotionPolicy",i=[],a=0;a<this.multipleSelection.length;a++)i.push(this.multipleSelection[a].policy_id);var o={eachData:{policy_id:i.join(",")},UrlApi:e,list:{UrlApi:"getPromotionPolicyList",data:this.TableData,esData:this.searchParams.params}};this.$common.audit(o,this.onSearch)},handleEdit:function(t){this.$router.push({path:"/sales/promotionpolicy/policyadd",query:{id:t}})},SeeInfo:function(t){this.$router.push({path:"/sales/promotionpolicy/seeInfo",query:{id:t}})},add_message:function(){this.$router.push({path:"/sales/promotionpolicy/policyadd",query:{id:""}})},deletes:function(){var t={deleID:"policy_id",deleSelect:this.multipleSelection,deleApi:"delPromotionPolicy",list:{UrlApi:"getPromotionPolicyList",data:this.TableData,esData:this.searchParams.params}};this.$common.deletes(t,"删除",this,this.onSearch)},examine:function(t,e){var i={commont:"goodsexamine",goods_id:e.goods_id};this.$store.commit(types.examine_hide,i)}},activated:function(){this.onSearch(window.goPage)}},n=l,r=i("2877"),c=Object(r["a"])(n,a,o,!1,null,"7ad082f9",null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d2308ae.430e6a45.js.map