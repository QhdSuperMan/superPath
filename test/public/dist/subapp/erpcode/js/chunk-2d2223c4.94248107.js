(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-2d2223c4"],{ce6b:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search_container"},[a("el-form",{ref:"TableDataRef",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"财务组织",size:"mini",rules:e.rules.company_id,prop:"company_id"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},on:{focus:e.companyListInvok,change:e.companyChange},model:{value:e.params.company_id,callback:function(t){e.$set(e.params,"company_id",t)},expression:"params.company_id"}},e._l(e.companyList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[a("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"客户名称",size:"mini",rules:e.rules.customer_id,prop:"customer_id"}},[a("el-select",{attrs:{filterable:"",placeholder:"请输入",clearable:"",loading:e.loading,remote:"","remote-method":e.clienteleListInvok},on:{change:e.getCustomer,focus:e.clienteleListInvok},model:{value:e.params.customer_id,callback:function(t){e.$set(e.params,"customer_id",t)},expression:"params.customer_id"}},[a("ul",{staticClass:"customer customer-ul4 customer-ul2"},[a("li",[e._v("客户编号")]),a("li",[e._v("客户名称")]),a("li",[e._v("联系人")]),a("li",[e._v("联系电话")]),a("li",[e._v("区域")])]),e._l(e.customerList,(function(t){return a("el-option",{key:t.customer_id,attrs:{label:t.customer_name,value:t.customer_id}},[a("ul",{staticClass:"customer customer-ul4"},[a("li",{attrs:{title:t.customer_id}},[e._v(e._s(t.customer_id))]),a("li",{attrs:{title:t.customer_name}},[e._v(e._s(t.customer_name))]),a("li",{attrs:{title:t.contact_name}},[e._v(e._s(t.contact_name))]),a("li",{attrs:{title:t.customer_mobile}},[e._v(e._s(t.customer_mobile))]),a("li",[e._v(e._s(t.province_name)+"/"+e._s(t.city_name)+"/"+e._s(t.area_name))])])])}))],2)],1),a("el-form-item",{attrs:{label:"审核日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:""},on:{change:e.change},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}})],1),a("el-form-item",{attrs:{label:"业务员",size:"mini"}},[a("el-select",{on:{focus:e.EmployeeListInvok,change:e.businessIdChange},model:{value:e.params.business_id,callback:function(t){e.$set(e.params,"business_id",t)},expression:"params.business_id"}},e._l(e.employeeList,(function(e){return a("el-option",{key:e.employee_id,attrs:{label:e.employee_name,value:e.employee_id}})})),1)],1),a("el-form-item",{attrs:{label:"关联单据号",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.params.business_sn,callback:function(t){e.$set(e.params,"business_sn",t)},expression:"params.business_sn"}})],1),a("el-form-item",{attrs:{label:"电商订单号",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.params.ec_order_sn,callback:function(t){e.$set(e.params,"ec_order_sn",t)},expression:"params.ec_order_sn"}})],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{plain:"",icon:"",size:"mini"},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"add_delet"},[1==e.authority.b_export&&e.listShow?a("el-dropdown",{attrs:{placement:"bottom-start"}},[a("span",{staticStyle:{cursor:"pointer",color:"#4e90e2"},attrs:{"split-button":""}},[a("el-button",{attrs:{plain:"",icon:"iconfont icon-daochu10",size:"mini"}},[e._v("导出本客户")])],1),a("el-dropdown-menu",{staticStyle:{"margin-top":"10px"},attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){return e.exportOrder(1,!1)}}},[e._v("导出Excel文件")]),a("el-dropdown-item",{nativeOn:{click:function(t){return e.exportOrder(2,!1)}}},[e._v("导出CSV逗号分隔")])],1)],1):e._e(),1==e.authority.b_exportall&&e.listShow?a("el-dropdown",{attrs:{placement:"bottom-start"}},[a("span",{staticStyle:{cursor:"pointer",color:"#4e90e2"},attrs:{"split-button":""}},[a("el-button",{attrs:{plain:"",icon:"iconfont icon-daochu10",size:"mini"}},[e._v("导出全部")])],1),a("el-dropdown-menu",{staticStyle:{"margin-top":"10px"},attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){return e.exportOrder(1,!0)}}},[e._v("导出Excel文件")]),a("el-dropdown-item",{nativeOn:{click:function(t){return e.exportOrder(2,!0)}}},[e._v("导出CSV逗号分隔")])],1)],1):e._e()],1),e.listShow?a("div",{staticClass:"table_container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:e.TableData.tableData,"max-height":"600"}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"company_name",label:"财务组织"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"department_name",label:"部门"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"business_name",label:"业务员"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"accounts_type_name",label:"单据类型"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"receivable_price",label:"应收款",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("priceFormatNone")(t.row.receivable_price))+" ")]}}],null,!1,1764993974)}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"receipt_price",label:"收款",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("priceFormatNone")(t.row.receipt_price))+" ")]}}],null,!1,1801758958)}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"balance",label:"余额",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("priceFormatNone")(t.row.balance))+" ")]}}],null,!1,3365667494)}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"business_time",label:"业务日期"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"add_time",label:"单据时间"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"business_sn",label:"关联单据号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.goToDetail(t.row.business_sn)}}},[e._v(e._s(t.row.business_sn))])]}}],null,!1,1672213152)}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"ec_order_sn",label:"电商订单号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"abstract",label:"摘要"}})],1),a("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"report_row"},[e._v("生成时间："+e._s(e.TableData.allList&&e.TableData.allList.time))])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"textAr"},[e._v("制表人："+e._s(e.TableData.allList&&e.TableData.allList.name))])])],1),a("el-row",{staticClass:"row-bg report_row",attrs:{type:"flex"}},[a("el-col",{attrs:{span:12}},[a("div",[e._v("单据日期起始:"+e._s(e.timeValue?e.timeValue[0]:""))])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"textAr"},[e._v("单据日期截止:"+e._s(e.timeValue?e.timeValue[1]:""))])])],1),a("div",{staticClass:"page_container"},[a("div",{staticClass:"pageNumber"},[e._v("每页显示")]),a("el-pagination",{staticClass:"erp-pagination",attrs:{"current-page":e.goPage,"page-size":e.pageSize1,"page-sizes":e.per_page,layout:"total,sizes, prev, pager, next,jumper",prevText:"上一页",nextText:"下一页",total:e.TableData.total},on:{"size-change":e.handleSizeChange,"update:currentPage":function(t){e.goPage=t},"update:current-page":function(t){e.goPage=t},"current-change":e.handleCurrentChange}})],1)],1):e._e()])},o=[],r=a("5530"),i=(a("4de4"),a("d3b7"),a("a9e3"),a("99af"),a("65b0")),l=a("2f62"),n={name:"customeAccountloglist",data:function(){return{params:{company_id:"",customer_id:""},authority:{},listShow:!1,timeValue:[],exportType:null,loading:!1,accountype:{options:[]}}},computed:Object(r["a"])({},Object(l["c"])(["accountloglist_showGet","toObtainImport_Get"])),methods:Object(r["a"])(Object(r["a"])({},Object(l["b"])(["accountloglist_showIndexACT","toObtainImport"])),{},{goToDetail:function(e){var t=this.$globalState.getOrderType(e);"销售出库"===t?this.$router.push({path:"/sales/salesout/salesamend",query:{outstock_sn:e}}):"客户收款"===t?this.$router.push({path:"/custom/receiptmanage/receiptmanage_search",query:{receipt_sn:e}}):"销售退货"===t?this.$router.push({path:"/sales/salesrefund/salesReturnSee",query:{return_sn:e}}):"其他出库"===t||"调拨出库"===t?this.$router.push({path:"/inventory/othenoutstorage/othenoutstorageSee",query:{outstock_sn:e}}):"三包出库"===t?this.$router.push({path:"/inventory/threeoutstorage/threeoutstorageSee",query:{outstock_sn:e}}):"三包退货"===t?this.$router.push({path:"/aftersale/threepackagereturn/threePackageReturnSee",query:{return_sn:e}}):this.$message.warning("此单据类型暂不支持跳转")},businessIdChange:function(e){""!=e&&(this.params.business_name=this.employeeList.filter((function(t){return t.employee_id===e}))[0].employee_name)},exportOrder:function(e,t){var a=this,s=Object.assign({},this.params,{export_type:e});if(t)this.$axMethod.exportCustomerDetailList(s).then((function(e){var t=e.data;if(200==t.code){var s=a.toObtainImport_Get;a.toObtainImport(s+1),a.$message({message:"导出操作成功，系统正在处理中，请在导出任务中下载！",type:"success"})}}));else{var o={params:s,API:"exportCustomerDetailListUrl"};Object(i["d"])(o)}},change:function(e){Array.isArray(e)?(this.params.start_time=e[0],this.params.end_time=e[1]):(this.params.start_time="",this.params.end_time="")},onReset:function(){this.$set(this,"params",{company_id:Number(localStorage.company_id)}),this.timeValue=[],this.listShow=!1,this.$set(this,"searchParams",{params:{},TableData:this.TableData,API:"getCustomerDetailList",vm:this}),this.onSearch()},getCustomer:function(e){""!=e&&(this.params.customer_name=this.customerList.filter((function(t){return t.customer_id===e}))[0].customer_name)},onSearch:function(){this.params.company_id?this.params.customer_id?(this.listShow=!0,this.timeValue&&2==this.timeValue.length?(this.params.start_time=this.timeValue[0],this.params.end_time=this.timeValue[1]):this.params.start_time=this.params.end_time="",this.$set(this,"searchParams",{params:this.params,TableData:this.TableData,API:"getCustomerDetailList",vm:this}),this.accountloglist_showIndexACT({params:this.params,goPage:this.goPage,pageSize:this.pageSize}),Object(i["g"])(this.searchParams,2)):this.$message({message:"请先选择客户名称",type:"warning"}):this.$message({message:"请先选择财务组织",type:"warning"})},handleSizeChange:function(e){Object.assign(this.searchParams.params,{per_page:e,page:1}),Object(i["g"])(this.searchParams,2)},handleCurrentChange:function(e){Object.assign(this.searchParams.params,{page:e}),Object(i["g"])(this.searchParams,2)},companyChange:function(e){this.params.company_name=this.companyList.filter((function(t){return t.company_id===e}))[0].company_name,this.$set(this.params,"customer_id",""),this.$set(this.params,"business_id","")},departmentChange:function(e){this.$set(this.params,"employee_id","")}}),activated:function(){this.params.customer_id&&this.onSearch()},mounted:function(){this.authority=JSON.parse(localStorage.getItem("authority"));var e=this.$route.params;if(e&&e.company_id){if(e.start_time){var t=e.params,a=t.start_time,s=t.end_time;this.timeValue=this.timeValue.concat([a,s])}Object.assign(e,{employee_id:e.business_id,employee_name:e.business_name}),this.params=e,Object(i["l"])(this,e),this.onSearch()}else this.$set(this.params,"employee_id",localStorage.employee_id),Object.assign(this.params,{company_id:Number(localStorage.company_id),company_name:localStorage.company_name}),Object(i["l"])(this,window.localStorage)}},c=n,m=a("2877"),p=Object(m["a"])(c,s,o,!1,null,"66635b85",null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d2223c4.94248107.js.map