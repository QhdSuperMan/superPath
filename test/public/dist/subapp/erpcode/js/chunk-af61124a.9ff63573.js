(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-af61124a"],{3922:function(e,a,t){},"46ee":function(e,a,t){"use strict";t("3922")},b680:function(e,a,t){"use strict";var r=t("23e7"),i=t("da84"),s=t("e330"),o=t("5926"),n=t("408a"),l=t("1148"),p=t("d039"),m=i.RangeError,c=i.String,u=Math.floor,d=s(l),_=s("".slice),f=s(1..toFixed),h=function(e,a,t){return 0===a?t:a%2===1?h(e,a-1,t*e):h(e*e,a/2,t)},w=function(e){var a=0,t=e;while(t>=4096)a+=12,t/=4096;while(t>=2)a+=1,t/=2;return a},b=function(e,a,t){var r=-1,i=t;while(++r<6)i+=a*e[r],e[r]=i%1e7,i=u(i/1e7)},g=function(e,a){var t=6,r=0;while(--t>=0)r+=e[t],e[t]=u(r/a),r=r%a*1e7},y=function(e){var a=6,t="";while(--a>=0)if(""!==t||0===a||0!==e[a]){var r=c(e[a]);t=""===t?r:t+d("0",7-r.length)+r}return t},v=p((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!p((function(){f({})}));r({target:"Number",proto:!0,forced:v},{toFixed:function(e){var a,t,r,i,s=n(this),l=o(e),p=[0,0,0,0,0,0],u="",f="0";if(l<0||l>20)throw m("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return c(s);if(s<0&&(u="-",s=-s),s>1e-21)if(a=w(s*h(2,69,1))-69,t=a<0?s*h(2,-a,1):s/h(2,a,1),t*=4503599627370496,a=52-a,a>0){b(p,0,t),r=l;while(r>=7)b(p,1e7,0),r-=7;b(p,h(10,r,1),0),r=a-1;while(r>=23)g(p,1<<23),r-=23;g(p,1<<r),b(p,1,1),g(p,2),f=y(p)}else b(p,0,t),b(p,1<<-a,0),f=y(p)+d("0",l);return l>0?(i=f.length,f=u+(i<=l?"0."+d("0",l-i)+f:_(f,0,i-l)+"."+_(f,i-l))):f=u+f,f}})},b686:function(e,a,t){"use strict";t.d(a,"a",(function(){return r})),t.d(a,"b",(function(){return i})),t.d(a,"c",(function(){return s})),t.d(a,"d",(function(){return o}));t("b680"),t("a9e3"),t("d3b7"),t("159b"),t("a15b");function r(e){var a=e.row,t=e.column;if(!isNaN(a[t.property]||a[t.property]<0)){var r=a.new_goods_price-a.abrasion_price-a.intube_price;r<0||isNaN(r)?a.claim_price=0:a.claim_price=Number(r).toFixed(2)}}function i(e){var a=e.row,t=e.column;if(isNaN(a[t.property]||a[t.property]<0))a[t.property]=0;else{var i=a.raw_flowerdeep-a.surplus_flowerdeep-a.factory_flowerdeep-a.care_flowerdeep;if(i<0||isNaN(i))a.charge_flowerdeep=0;else{a.charge_flowerdeep=Number(i).toFixed(2);var s=a.mm_wearprice*a.charge_flowerdeep;a.abrasion_price=isNaN(s)?0:Number(s).toFixed(2),r(e)}}}var s={company_appraisal_sn:"",company_appraisal_goods_id:0,flap_price:0,raw_flowerdeep:0,factory_flowerdeep:0,care_flowerdeep:0,charge_flowerdeep:0,symptom_id:"",goods_id:"",goods_name:"",brand_id:"",brand_name:"",tire_check_status:"",company_status:"",claim_price:0,tire_un:"",abrasion_price:0,surplus_flowerdeep:0,new_goods_price:0,mm_wearprice:0,intube_price:0,remark:"",warehouse_id:"",warehouse_name:"",allocation_name:"",allocation_id:""},o={data:function(){var e=this,a=this.$createElement;return{editRules:{goods_name:[{required:!0,message:"请选择商品"}],warehouse_name:[{required:!0,message:"请选择仓库"}],allocation_name:[{required:!0,message:"请选择货位"}],tire_un:[{required:!0,message:"请填写胎号"}],tire_check_status_name:[{required:!0,message:"请选择胎号校验状态"}],symptom_id:[{required:!0,message:"请选择病象"}],company_status_name:[{required:!0,message:"请选择公司鉴定结果"}],raw_flowerdeep:[{required:!0,message:"出厂花深请在0-99999999之间",type:"number",min:0,max:99999999}],surplus_flowerdeep:[{required:!0,message:"剩余花深请在0-99999999之间",type:"number",min:0,max:99999999}],mm_wearprice:[{required:!0,message:"毫米磨损费请在0-99999999之间",type:"number",min:0,max:99999999}],new_goods_price:[{required:!0,message:"最新销售价请在0-99999999之间",type:"number",min:0,max:99999999}],claim_price:[{required:!0,message:"理赔单价请在0-99999999之间",type:"number",min:0,max:99999999}]},tableColumn:[{type:"checkbox",width:44},{title:"品牌名称",field:"brand_name",width:76},{title:"商品编号",field:"goods_id",width:80},{title:"商品名称",field:"goods_name",width:400,editRender:{name:"vGoods",getParams:function(a){var t=a.row;return{params:{company_id:e.params.company_id},showObj:{goods_id:"商品编号",goods_name:"商品名称"},getIcon:function(){return t.goods_name?[{icon:"el-icon-close",title:"删除商品",iconMethod:function(){for(var e in t)t[e]=""}}]:[]}}},events:{change:function(a,t){var r=t.row;r.goods_id=a.goods_id,r.goods_sn=a.goods_sn,r.brand_id=a.brand_id,r.brand_name=a.brand_name,r.company_status=a.company_status,r.goods_id=a.goods_id;var i=e.$refs.xTable._proxy("getTableData").fullData;i[i.length-1].goods_name&&e.addOrder()}}}},{field:"warehouse_name",title:"仓库名称",width:200,editRender:{name:"vSelect",getParams:function(a){a.row;return{url:"getWarehouseFocus",params:{company_id:e.params.company_id,warehouse_type_id:10004},itemObj:{id:"warehouse_id",name:"warehouse_name"}}},events:{change:function(e,a){var t=e.row;t.allocation_name="",t.allocation_id=""}}}},{title:"货位名称",field:"allocation_name",width:130,editRender:{name:"vAllocation",getParams:function(a){var t=a.row;return{url:"newAllocationListList",isPage:!0,params:{company_id:e.params.company_id,warehouse_id:t.warehouse_id,goods_id:t.goods_id}}}}},{title:"胎号",field:"tire_un",width:132,editRender:{name:"Vinput",autoselect:!0,formatter:"String"}},{title:"胎号校验状态",field:"tire_check_status_name",width:140,editRender:{name:"vSelect",getParams:function(e){e.row;return{modelKey:"tire_check_status",list:[{label:"匹配",value:1},{label:"不匹配",value:2}]}}}},{title:"病像",field:"symptom_id",width:200,editRender:{name:"vSelect",getParams:function(a){a.row;return{itemObj:{id:"symptom_id",name:"symptom_name"},popperClass:"longSymptom",list:e.diseaseList,extendParams:{multiple:!0}}},slots:function(t){var r=t.row,i=[];return Array.isArray(r.symptom_id)&&e.diseaseList.forEach((function(e){r.symptom_id.forEach((function(a){Number(e.symptom_id)===Number(a)&&i.push(e.symptom_name)}))})),[a("span",[i.join(",")])]}}},{title:"公司鉴定结果",field:"company_status_name",width:140,editRender:{name:"vSelect",getParams:function(e){e.row;return{modelKey:"company_status",list:[{label:"待厂检",value:1},{label:"理赔",value:2},{label:"不理赔",value:3}]}}}},{title:"出厂花深",field:"raw_flowerdeep",width:120,editRender:{name:"Vinput",autoselect:!0,events:{input:i}}},{title:"剩余花深",field:"surplus_flowerdeep",width:120,editRender:{name:"Vinput",autoselect:!0,events:{input:i}}},{title:"厂免花深",field:"factory_flowerdeep",width:120,editRender:{name:"Vinput",autoselect:!0,events:{input:i}}},{title:"公司照顾花深",field:"care_flowerdeep",width:120,editRender:{name:"Vinput",autoselect:!0,events:{input:i}}},{title:"收费花深",field:"charge_flowerdeep",width:120},{title:"毫米磨损费",field:"mm_wearprice",width:120,editRender:{name:"Vinput",autoselect:!0,events:{input:i}}},{title:"磨损费",field:"abrasion_price",width:120,editRender:{name:"Vinput",autoselect:!0,events:{input:r}}},{title:"内垫费",field:"intube_price",width:120,editRender:{name:"Vinput",autoselect:!0,events:{input:r}}},{title:"最新销售价",field:"new_goods_price",width:120,editRender:{name:"Vinput",autoselect:!0,events:{input:r}}},{title:"理赔单价",field:"claim_price",width:120,editRender:{name:"Vinput",autoselect:!0}},{title:"备注",field:"remark",width:200,editRender:{name:"Vinput",autoselect:!0,formatter:"String"}}]}},methods:{deletes:function(){this.$refs.xTable._proxy("getSelectRecords").length?this.$refs.xTable._proxy("removeSelecteds"):this.$message.warning("请先选择要删除的商品！"),0===this.$refs.xTable._proxy("getTableData").fullData.length&&(this.editType="",this.$forceupdate())},isEdit:function(e){var a=e.column;e.row;return this.params.customer_id||"goods_name"!==a.property?"tire_un"!==a.property||1!==this.params.type||(this.$publicFution.confirm("引用单据胎号不可以更改"),!1):(this.$publicFution.confirm("请先选择客户"),!1)}}}},cc80:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",[e._v("售后管理")]),t("el-breadcrumb-item",{staticClass:"attrbute"},[t("span",{on:{click:e.goBack}},[e._v("公司理赔")])]),t("el-breadcrumb-item",[e._v("修改公司理赔单")])],1),t("div",{staticClass:"search_container"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[t("el-form-item",{attrs:{label:"公司理赔单据号:",size:"mini"}},[t("span",[e._v(e._s(e.params.company_claim_sn))])]),t("br"),t("el-form-item",{attrs:{label:"销售组织:"}},[t("span",[e._v(e._s(e.params.company_name))])]),t("el-form-item",{attrs:{label:"部门:",size:"mini"}},[t("span",[e._v(e._s(e.params.department_name))])])],1)],1),t("div",[t("div",{staticClass:"table_simulate"},[t("p",{staticClass:"title"},[e._v("公司理赔单据信息修改")]),t("el-form",{ref:"elForm",attrs:{inline:!0,"label-width":"100px",model:e.params,rules:e.rules}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"业务日期",prop:"business_time",rules:e.rules.business_time}},[t("el-date-picker",{staticClass:"elInput wxy",attrs:{type:"date",placeholder:"选择日期","range-separator":"-","value-format":"yyyy-MM-dd"},model:{value:e.params.business_time,callback:function(a){e.$set(e.params,"business_time",a)},expression:"params.business_time"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"客户名称"}},[e._v(" "+e._s(e.params.customer_name)+" ")])],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"质检员",prop:"inspector_id",rules:e.rules.employee_name}},[e._v(" "+e._s(function(){0==e.params.inspector_id&&(e.params.inspector_id=null)}())+" "),t("el-select",{attrs:{clearable:""},model:{value:e.params.inspector_id,callback:function(a){e.$set(e.params,"inspector_id",a)},expression:"params.inspector_id"}},e._l(e.employeeList,(function(e){return t("el-option",{key:e.employee_id,attrs:{label:e.employee_name,value:e.employee_id}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"品牌名称"}},[e._v(" "+e._s(e.params.brand_name)+" ")])],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"商品编号"}},[e._v(" "+e._s(e.params.goods_id)+" ")])],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"商品名称",title:e.params.goods_name}},[e._v(" "+e._s(e.params.goods_name)+" ")])],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"仓库名称",prop:"warehouse_id",rules:e.rules.warehouse_id}},[e._v(" "+e._s(function(){0==e.params.warehouse_id&&(e.params.warehouse_id=null)}())+" "),t("el-select",{attrs:{clearable:"",disabled:!e.params.company_appraisal_goods_id>0,filterable:"",placeholder:"请选择"},on:{focus:e.warehouseInvok,change:e.warehouseChange},model:{value:e.params.warehouse_id,callback:function(a){e.$set(e.params,"warehouse_id",a)},expression:"params.warehouse_id"}},e._l(e.warehouseList,(function(e){return t("el-option",{key:e.warehouse_id,attrs:{label:e.warehouse_name,value:e.warehouse_id}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"货位名称",prop:"allocation_id",rules:e.rules.allocation_id}},[e._v(" "+e._s(function(){0==e.params.allocation_id&&(e.params.allocation_id=null)}())+" "),t("el-select",{attrs:{clearable:"",disabled:!e.params.company_appraisal_goods_id>0,filterable:"",placeholder:"请选择"},on:{focus:e.InventoryInvok},model:{value:e.params.allocation_id,callback:function(a){e.$set(e.params,"allocation_id",a)},expression:"params.allocation_id"}},e._l(e.allocationInventoryList,(function(e){return t("el-option",{key:e.allocation_id,attrs:{label:e.allocation_name,value:e.allocation_id}})})),1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"胎号"}},[e._v(" "+e._s(e.params.tire_un)+" ")])],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"胎号校验状态",prop:"tire_check_status",rules:{required:!0,message:"请选择胎号校验状态",trigger:"change"}}},[t("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.params.tire_check_status,callback:function(a){e.$set(e.params,"tire_check_status",a)},expression:"params.tire_check_status"}},[t("el-option",{attrs:{label:"匹配",value:1}},[e._v("匹配")]),t("el-option",{attrs:{label:"不匹配",value:2}},[e._v("不匹配")])],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"病象",prop:"symptom_id",rules:{required:!0,message:"请选择病象",trigger:"change"}}},[t("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请输入"},model:{value:e.params.symptom_id,callback:function(a){e.$set(e.params,"symptom_id",a)},expression:"params.symptom_id"}},e._l(e.diseaseList,(function(e){return t("el-option",{key:e.symptom_id,attrs:{label:e.symptom_name,value:e.symptom_id}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"公司鉴定结果",prop:"company_status",rules:{required:!0,message:"请选择公司鉴定结果",trigger:"change"}}},[t("el-select",{attrs:{clearable:""},model:{value:e.params.company_status,callback:function(a){e.$set(e.params,"company_status",a)},expression:"params.company_status"}},[t("el-option",{attrs:{label:"待厂检",value:1}},[e._v("待厂检")]),t("el-option",{attrs:{label:"理赔",value:2}},[e._v("理赔")]),t("el-option",{attrs:{label:"不理赔",value:3}},[e._v("不理赔")])],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"出厂花深",prop:"raw_flowerdeep"}},[t("span",[e._v(e._s(e.params.raw_flowerdeep))])])],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"剩余花深",prop:"surplus_flowerdeep",rules:{required:!0,message:"请填写剩余花深",trigger:"change"}}},[t("el-input",{attrs:{type:"text"},on:{input:function(a){return e.computeDeep({row:e.params,column:{property:"surplus_flowerdeep"}})},change:function(a){return e.changeComputeDeep("surplus_flowerdeep")}},model:{value:e.params.surplus_flowerdeep,callback:function(a){e.$set(e.params,"surplus_flowerdeep",a)},expression:"params.surplus_flowerdeep"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"厂免花深"}},[t("el-input",{attrs:{type:"text"},on:{input:function(a){return e.computeDeep({row:e.params,column:{property:"factory_flowerdeep"}})},change:function(a){return e.changeComputeDeep("factory_flowerdeep")}},model:{value:e.params.factory_flowerdeep,callback:function(a){e.$set(e.params,"factory_flowerdeep",a)},expression:"params.factory_flowerdeep"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"公司照顾花深"}},[t("el-input",{attrs:{type:"text"},on:{input:function(a){return e.computeDeep({row:e.params,column:{property:"care_flowerdeep"}})},change:function(a){return e.changeComputeDeep("care_flowerdeep")}},model:{value:e.params.care_flowerdeep,callback:function(a){e.$set(e.params,"care_flowerdeep",a)},expression:"params.care_flowerdeep"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"收费花深"}},[e._v(" "+e._s(e.params.charge_flowerdeep)+" ")])],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"毫米磨损费",prop:"mm_wearprice",rules:{required:!0,message:"请填写毫米磨损费",trigger:"change"}}},[t("el-input",{attrs:{type:"text"},on:{input:function(a){return e.computeDeep({row:e.params,column:{property:"mm_wearprice"}})},change:function(a){return e.changeComputeDeep("mm_wearprice")}},model:{value:e.params.mm_wearprice,callback:function(a){e.$set(e.params,"mm_wearprice",a)},expression:"params.mm_wearprice"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"磨损费"}},[t("el-input",{attrs:{type:"text"},on:{input:function(a){return e.claimPrice({row:e.params,column:{property:"abrasion_price"}})},change:function(a){return e.changeClaimPrice("abrasion_price")}},model:{value:e.params.abrasion_price,callback:function(a){e.$set(e.params,"abrasion_price",a)},expression:"params.abrasion_price"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"内垫费"}},[t("el-input",{attrs:{type:"text"},on:{input:function(a){return e.claimPrice({row:e.params,column:{property:"intube_price"}})},change:function(a){return e.changeClaimPrice("intube_price")}},model:{value:e.params.intube_price,callback:function(a){e.$set(e.params,"intube_price",a)},expression:"params.intube_price"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"最新销售价",prop:"new_goods_price",rules:{required:!0,message:"请填写最新销售价",trigger:"change"}}},[t("el-input",{attrs:{type:"text"},on:{input:function(a){return e.claimPrice({row:e.params,column:{property:"new_goods_price"}})},change:function(a){return e.changeClaimPrice("new_goods_price")}},model:{value:e.params.new_goods_price,callback:function(a){e.$set(e.params,"new_goods_price",a)},expression:"params.new_goods_price"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"理赔单价",prop:"claim_price",rules:{required:!0,message:"请填写理赔单价",trigger:"change"}}},[t("el-input",{attrs:{type:"text"},on:{change:function(a){return e.$publicFution.toFixedTwo(e.params,"claim_price")}},model:{value:e.params.claim_price,callback:function(a){e.$set(e.params,"claim_price",a)},expression:"params.claim_price"}})],1)],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.goBack}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submit}},[e._v("保存")])],1)])],1)},i=[],s=(t("4de4"),t("d3b7"),t("a15b"),t("ac1f"),t("1276"),t("159b"),t("65b0"),t("b686")),o={name:"aftersaleCompanyclaimModification",data:function(){return{authority:{},computeDeep:s["b"],claimPrice:s["a"],diseaseList:[],params:{symptom_id:[]}}},methods:{changeClaimPrice:function(e){this.$publicFution.toFixedTwo(this.params,e),this.claimPrice({row:this.params,column:e})},changeComputeDeep:function(e){this.$publicFution.toFixedTwo(this.params,e),this.computeDeep({row:this.params,column:e})},warehouseChange:function(){this.$set(this.params,"allocation_id",null),this.$set(this.params,"allocation_name",null)},goBack:function(){this.$router.push({path:"/aftersale/companyclaim"})},submit:function(){var e=this;this.$refs.elForm.validate((function(a){if(a){if(e.params.claim_price<0)return e.$message({message:"理赔单价为必填项且不可小于0",type:"warning"}),!1;var t={customer_id:e.params.customer_id,company_claim_goods_id:e.params.company_claim_goods_id,business_time:e.params.business_time,company_id:e.params.company_id,inspector_id:e.params.inspector_id};Object.assign(t,e.$publicFution.filter(s["c"],e.params)),t.symptom_id=Array.isArray(e.params.symptom_id)?e.params.symptom_id.join(","):e.params.symptom_id,e.$axMethod.editClaim(t).then((function(a){200==a.data.code&&(e.$message.success(a.data.msg?a.data.msg:a.data.data),e.goBack())}))}}))}},created:function(){var e=this;this.EmployeeListInvok(),this.getNEwlist(),this.$route.query&&this.$route.query.id?this.$axMethod.getClaimInfo({company_claim_goods_id:this.$route.query.id}).then((function(a){e.params=a.data.data,e.warehouseList.push({warehouse_id:e.params.warehouse_id,warehouse_name:e.params.warehouse_name});var t=e.params.symptom_id_str.split(","),r=[];t.forEach((function(e){""!==e&&r.push(e-0)})),e.$set(e.params,"symptom_id",r),e.allocationInventoryList.push({allocation_id:e.params.allocation_id,allocation_name:e.params.allocation_name})})):this.$message.warning("单据有误")}},n=o,l=(t("46ee"),t("2877")),p=Object(l["a"])(n,r,i,!1,null,"1dd14536",null);a["default"]=p.exports}}]);
//# sourceMappingURL=chunk-af61124a.9ff63573.js.map