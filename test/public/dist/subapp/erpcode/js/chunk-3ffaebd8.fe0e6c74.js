(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-3ffaebd8"],{4478:function(e,t,a){"use strict";a("629c")},"4a1d":function(e,t,a){"use strict";a.r(t);var i,s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search_container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"销售组织",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:"",maxlength:"100"},on:{change:e.clearBusiss,focus:e.companyListInvok},model:{value:e.params.company_id,callback:function(t){e.$set(e.params,"company_id",t)},expression:"params.company_id"}},e._l(e.companyList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[a("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"创建日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.changeDate},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}},[a("i",{staticClass:"el-input__icon el-icon-date",attrs:{slot:"suffix"},slot:"suffix"})])],1),a("el-form-item",{staticClass:"wauto",attrs:{label:"区域",size:"mini",prop:"cityList"}},[e.defaultArea&&e.defaultArea.length?a("getAreaList",{attrs:{defaultArea:e.defaultArea},on:{changeDefaultArea:e.changeDefaultArea,focus:e.getprovinceFocus}}):e._e()],1),a("el-form-item",{attrs:{label:"客户名称",size:"mini"}},[a("el-select",{attrs:{filterable:"",placeholder:"请输入",clearable:"",loading:e.loading,remote:"","remote-method":e.clienteleListInvok},on:{focus:e.clienteleListInvok,change:e.getCustomerChange},model:{value:e.params.customer_id,callback:function(t){e.$set(e.params,"customer_id",t)},expression:"params.customer_id"}},[a("ul",{staticClass:"customer customer-ul4 customer-ul2"},[a("li",[e._v("客户编号")]),a("li",[e._v("客户名称")]),a("li",[e._v("联系人")]),a("li",[e._v("联系电话")]),a("li",[e._v("区域")])]),e._l(e.customerList,(function(t){return a("el-option",{key:t.customer_id,attrs:{label:t.customer_name,value:t.customer_id}},[a("ul",{staticClass:"customer customer-ul4"},[a("li",{attrs:{title:t.customer_id}},[e._v(e._s(t.customer_id))]),a("li",{attrs:{title:t.customer_name}},[e._v(e._s(t.customer_name))]),a("li",{attrs:{title:t.contact_name}},[e._v(e._s(t.contact_name))]),a("li",{attrs:{title:t.customer_mobile}},[e._v(e._s(t.customer_mobile))]),a("li",[e._v(e._s(t.province_name)+"/"+e._s(t.city_name)+"/"+e._s(t.area_name))])])])}))],2)],1),a("el-form-item",{attrs:{label:"客户分类",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:"",remote:""},on:{focus:e.customerTypeInvok,change:e.customer_type_change},model:{value:e.params.customer_type_id,callback:function(t){e.$set(e.params,"customer_type_id",t)},expression:"params.customer_type_id"}},e._l(e.customerTypeList,(function(e){return a("el-option",{key:e.customer_type_id,attrs:{label:e.customer_type_name,value:e.customer_type_id}})})),1)],1),a("el-form-item",{attrs:{label:"业务员",size:"mini"}},[e._v(" "+e._s(function(){0==e.params.employee_id&&(e.params.employee_id=null)}())+" "),a("el-select",{attrs:{filterable:"",clearable:""},on:{focus:e.EmployeeListInvok,change:e.businessChange},model:{value:e.params.employee_id,callback:function(t){e.$set(e.params,"employee_id",t)},expression:"params.employee_id"}},e._l(e.employeeList,(function(e){return a("el-option",{key:e.employee_id,attrs:{label:e.employee_name,value:e.employee_id}})})),1)],1),a("el-form-item",{attrs:{label:"联系人",size:"mini"}},[a("el-input",{attrs:{maxlength:"100",placeholder:"请输入"},model:{value:e.params.contact_name,callback:function(t){e.$set(e.params,"contact_name",t)},expression:"params.contact_name"}})],1),a("el-form-item",{attrs:{label:"联系电话",size:"mini"}},[a("el-input",{attrs:{maxlength:"100",placeholder:"请输入"},model:{value:e.params.customer_mobile,callback:function(t){e.$set(e.params,"customer_mobile",t)},expression:"params.customer_mobile"}})],1),a("el-form-item",{attrs:{size:"mini"}},[a("el-checkbox",{staticStyle:{"margin-left":"120px"},attrs:{"false-label":"0","true-label":"1",name:"type"},model:{value:e.params.is_disabled,callback:function(t){e.$set(e.params,"is_disabled",t)},expression:"params.is_disabled"}},[e._v("已停用")])],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"add_delet"},[1==e.authority.b_add?a("el-button",{staticClass:"addBtn",attrs:{icon:"el-icon-circle-plus-outline",type:"primary",size:"mini"},on:{click:e.addFun}},[e._v("新增")]):e._e(),1==e.authority.b_del?a("el-button",{attrs:{plain:"",icon:"el-icon-delete",size:"mini"},on:{click:e.deletes}},[e._v("删除")]):e._e(),1==e.authority.b_bind?a("el-button",{attrs:{plain:"",size:"mini",disabled:e.btnShow},on:{click:e.bindBusiness}},[e._v("绑定业务员")]):e._e(),1==e.authority.b_unbind?a("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.unbind}},[e._v("解绑业务员")]):e._e(),a("el-button",{attrs:{plain:"",icon:"el-icon-download",size:"mini"},on:{click:e.downLoadFile}},[e._v("下载模板")]),1==e.authority.b_import?a("el-button",{staticClass:"addBtn",attrs:{plain:"",icon:"iconfont icon-daoru5",size:"mini"},on:{click:e.dialogEmployee}},[e._v("导入")]):e._e(),1==e.authority.b_export?a("el-dropdown",{staticStyle:{"margin-left":"10px"}},[a("span",{staticStyle:{cursor:"pointer",color:"#4e90e2"},attrs:{"split-button":""}},[a("el-button",{attrs:{plain:"",icon:"iconfont icon-daochu10",size:"mini"}},[e._v(e._s(e.fileter))])],1),a("el-dropdown-menu",{staticStyle:{"margin-top":"10px"},attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){return e.exportFile(1)}}},[e._v("导出Excel文件")]),a("el-dropdown-item",{nativeOn:{click:function(t){return e.exportFile(2)}}},[e._v("导出CSV逗号分隔")])],1)],1):e._e()],1),a("div",{staticClass:"table_container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"row-class-name":e.tableRowClassName,"tooltip-effect":"light",border:"",data:e.TableData.tableData,"max-height":"600"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",fixed:"left",align:"center",width:"44"}}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==e.authority.b_info?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.examine(t.row)}}},[e._v(" 查看 ")]):e._e(),1==e.authority.b_edit?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v(" 修改 ")]):a("el-button",{attrs:{disabled:"",type:"text",size:"small"}},[e._v(" 修改 ")])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"company_name",width:"200",label:"销售组织"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"customer_id",width:"100",label:"客户编号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"customer_name",width:"120",label:"客户名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"logogram",width:"100",label:"助记码"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"customer_type_name",width:"150",label:"客户分类"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"overdue_period",width:"150",label:"账龄期限"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"province_name",width:"200",label:"所属区域"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.province_name)+" "+e._s(t.row.city_name)+" "+e._s(t.row.area_name)+" ")]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"address",width:"220",label:"详细地址"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"contact_name",width:"220",label:"联系人"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"customer_mobile",width:"130",label:"联系电话(手机)"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"employee_name",width:"200",label:"业务员"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"is_disabled_name",width:"100",label:"是否停用"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"add_user_name",width:"150",label:"创建人"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"add_time",width:"200",label:"创建时间"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"update_user_name",width:"200",label:"修改人"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"update_time",width:"200",label:"修改时间"}})],1)],1),a("div",{staticClass:"page_container"},[a("div",{staticClass:"pageNumber"},[e._v("每页显示")]),a("el-pagination",{staticClass:"erp-pagination",attrs:{"current-page":e.goPage,"page-size":e.pageSize1,"page-sizes":e.per_page,layout:"total,sizes, prev, pager, next,jumper",prevText:"上一页",nextText:"下一页",total:e.TableData.total},on:{"size-change":e.handleSizeChange,"update:currentPage":function(t){e.goPage=t},"update:current-page":function(t){e.goPage=t},"current-change":e.handleCurrentChange}})],1),a("upload",{ref:"upload",attrs:{options:e.options},on:{receiveUploadMsg:e.receiveUploadMsg}}),e.dialogBillVisible?a("div",[a("el-dialog",{staticClass:"dialogForm",attrs:{"close-on-click-modal":!1,title:"添加绑定关系",visible:e.dialogBillVisible,width:"1300px"},on:{"update:visible":function(t){e.dialogBillVisible=t},closedialog:e.closedialog}},[a("source-bill",{attrs:{companyidspop:e.companyidspop},on:{dialogformInline:e.dialogformInline,closedialog:e.closedialog}})],1)],1):e._e()],1)},o=[],l=a("5530"),n=(a("4de4"),a("d3b7"),a("a15b"),a("99af"),a("65b0")),r=a("d12c"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search_container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"销售组织",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.getcompanyFocus,change:e.companyChange},model:{value:e.params.company_id,callback:function(t){e.$set(e.params,"company_id",t)},expression:"params.company_id"}},e._l(e.companyList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[a("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"省",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.getSF,change:function(t){return e.clear(1)}},model:{value:e.params.province_id,callback:function(t){e.$set(e.params,"province_id",t)},expression:"params.province_id"}},e._l(e.province.options,(function(e){return a("el-option",{key:e.area_id,attrs:{label:e.area_name,value:e.area_id}})})),1)],1),a("el-form-item",{attrs:{label:"市",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.getSQ,change:function(t){return e.clear(2)}},model:{value:e.params.city_id,callback:function(t){e.$set(e.params,"city_id",t)},expression:"params.city_id"}},e._l(e.city.options,(function(e){return a("el-option",{key:e.area_id,attrs:{label:e.area_name,value:e.area_id}})})),1)],1),a("el-form-item",{attrs:{label:"区/县",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.getQX},model:{value:e.params.area_id,callback:function(t){e.$set(e.params,"area_id",t)},expression:"params.area_id"}},e._l(e.area.options,(function(e){return a("el-option",{key:e.area_id,attrs:{label:e.area_name,value:e.area_id}})})),1)],1),a("el-form-item",{attrs:{label:"选择客户",size:"mini"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:"",loading:e.loading,remote:"","remote-method":e.clienteleListInvok},on:{focus:e.clienteleListInvok},model:{value:e.params.customer_id,callback:function(t){e.$set(e.params,"customer_id",t)},expression:"params.customer_id"}},[a("ul",{staticClass:"customer customer-ul4 customer-ul2"},[a("li",[e._v("客户编号")]),a("li",[e._v("客户名称")]),a("li",[e._v("联系人")]),a("li",[e._v("联系电话")]),a("li",[e._v("区域")])]),e._l(e.customerList,(function(t){return a("el-option",{key:t.customer_id,attrs:{label:t.customer_name,value:t.customer_id}},[a("ul",{staticClass:"customer customer-ul4"},[a("li",{attrs:{title:t.customer_id}},[e._v(e._s(t.customer_id))]),a("li",{attrs:{title:t.customer_name}},[e._v(e._s(t.customer_name))]),a("li",{attrs:{title:t.contact_name}},[e._v(e._s(t.contact_name))]),a("li",{attrs:{title:t.customer_mobile}},[e._v(e._s(t.customer_mobile))]),a("li",[e._v(e._s(t.province_name)+"/"+e._s(t.city_name)+"/"+e._s(t.area_name))])])])}))],2)],1),a("el-form-item",{attrs:{label:"原业务员",size:"mini"}},[e._v(" "+e._s(function(){0==e.params.employee_id&&(e.params.employee_id=null)}())+" "),a("el-select",{attrs:{filterable:"",clearable:""},on:{focus:e.getbusinIdFoucs},model:{value:e.params.employee_id,callback:function(t){e.$set(e.params,"employee_id",t)},expression:"params.employee_id"}},e._l(e.employeeList.options,(function(e){return a("el-option",{key:e.employee_id,attrs:{label:e.employee_name,value:e.employee_id}})})),1)],1),a("el-form-item",{attrs:{label:"",size:"mini"}},[a("el-checkbox",{staticStyle:{"margin-left":"70px"},attrs:{"false-label":"0","true-label":"1",name:"type"},model:{value:e.params.bind_type,callback:function(t){e.$set(e.params,"bind_type",t)},expression:"params.bind_type"}},[e._v("显示已绑定业务员的客户")])],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{staticStyle:{"margin-left":"50px"},attrs:{size:"mini",type:"primary"},on:{click:e.onSearch}},[e._v("查询")])],1)],1)],1),a("div",{staticClass:"table_container",staticStyle:{width:"100%",height:"300px"}},[a("div",{staticStyle:{width:"600px",float:"left"}},[a("span",{staticStyle:{"padding-bottom":"10px"}},[e._v("待绑定客户：")]),a("el-table",{staticStyle:{width:"600px",float:"left","margin-top":"5px",cursor:"pointer"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:e.leftList,height:"242"},on:{"cell-dblclick":e.handleSelectionChange}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"customer_name",width:"100",label:"客户名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"contact_name",width:"100",label:"联系人"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"customer_mobile",width:"100",label:"联系电话"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,width:"200",label:"区域"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.province_name)+"/"+e._s(t.row.city_name)+"/"+e._s(t.row.area_name)+" ")]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"employee_name",width:"100",label:"原业务员"}})],1)],1),a("div",{staticStyle:{float:"left","margin-top":"100px",width:"50px"}},[a("el-button",{staticStyle:{display:"block",margin:"0 0 10px 10px"},attrs:{icon:"el-icon-d-arrow-right",size:"mini"},on:{click:e.ontabRight}}),a("el-button",{staticStyle:{display:"block"},attrs:{icon:"el-icon-d-arrow-left",size:"mini"},on:{click:e.ontabLeft}})],1),a("div",{staticStyle:{width:"600px",float:"right"}},[a("span",{staticStyle:{"padding-bottom":"10px"}},[e._v("绑定客户：")]),a("el-table",{staticStyle:{width:"600px",float:"right","margin-top":"5px",cursor:"pointer"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:e.rightList,height:"242"},on:{"cell-dblclick":e.handleSelectionChange2}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"customer_name",width:"100",label:"客户名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"contact_name",width:"100",label:"联系人"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"customer_mobile",width:"100",label:"联系电话"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,width:"200",label:"区域"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.province_name)+"/"+e._s(t.row.city_name)+"/"+e._s(t.row.area_name)+" ")]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"employee_name",width:"100",label:"原业务员"}})],1)],1)]),a("div",{staticClass:"search_container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"待绑定业务员",size:"mini",prop:"business_id",rules:e.rules.business_id}},[a("el-select",{attrs:{filterable:""},on:{focus:e.getbusinIdFoucs},model:{value:e.params.business_id,callback:function(t){e.$set(e.params,"business_id",t)},expression:"params.business_id"}},e._l(e.employeeList.options,(function(e){return a("el-option",{key:e.employee_id,attrs:{label:e.employee_name,value:e.employee_id}})})),1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.dialogCancelForm}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dialogSubmitForm()}}},[e._v("确 定")])],1)])},m=[],p=a("ade3"),u=(a("159b"),a("caad"),a("a9e3"),{data:function(){return{radio:null,order_id:null,timeValue:[],leftList:[],rightList:[],params:{},loading:!1,searchParams:{},TableData:{tableData:[],total:10},province:{options:[]},city:{options:[]},area:{options:[]},employeeList:{options:[]},departmentList:{options:[]},companyList:[],per_page:[30,50,100,500],pageSize:30,goPage:1,is_shop:0}},props:["companyidspop"],methods:(i={getbusinIdFoucs:function(){this.$common.options("getEmployeeListOption",this.employeeList,{company_id:this.params.company_id})},clear:function(e){1==e?(this.$set(this.params,"city_id",null),this.$set(this.params,"area_id",null)):2==e&&this.$set(this.params,"area_id",null)},clearBusiss:function(){this.$set(this.params,"business_id",null)},ontabLeft:function(){var e=this;this.$set(this,"leftList",[]),this.$set(this,"rightList",[]),this.$axMethod.getBindingList(this.params).then((function(t){200==t.data.code&&e.$set(e,"leftList",t.data.data)}))},ontabRight:function(){var e=this.rightList;e.push.apply(e,this.leftList),this.$set(this,"rightList",e),this.$set(this,"leftList",[])},getDepartment:function(){Object(n["i"])(this,this.params)},getcompanyFocus:function(){Object(n["e"])(this)},handleSelectionChange:function(e,t,a,i){this.leftList=this.leftList.filter((function(t){return t.index!=e.index})),this.rightList.push(e)},handleSelectionChange2:function(e){this.rightList=this.rightList.filter((function(t){return t.index!=e.index})),this.leftList.push(e)},getSF:function(){var e={level:2},t=this;t.$axMethod.getAreaList(e).then((function(e){t.province.options=e.data.data}))},getSQ:function(){var e={level:3,p_id:this.params.province_id},t=this;t.$axMethod.getAreaList(e).then((function(e){t.city.options=e.data.data}))},getQX:function(){var e={level:4,p_id:this.params.city_id},t=this;t.$axMethod.getAreaList(e).then((function(e){t.area.options=e.data.data}))}},Object(p["a"])(i,"getbusinIdFoucs",(function(){this.$common.options("getEmployeeListOption",this.employeeList,{company_id:this.params.company_id,department_id:this.params.department_id})})),Object(p["a"])(i,"dialogCancelForm",(function(){this.$emit("closedialog",!1)})),Object(p["a"])(i,"dialogSubmitForm",(function(){var e=this;if(this.rightList.length<=0)this.$message.error("请添加绑定客户");else if(null==this.params.business_id||void 0==this.params.business_id||""==this.params.business_id)this.$message.error("请添加待绑定业务员");else{for(var t=[],a=[],i=0;i<this.rightList.length;i++)t.push(this.rightList[i].customer_id),a.push(this.rightList[i].associated_customer_id);var s=t.toString(),o=a.toString(),l={business_id:this.params.business_id,customer_id:s,associated_customer_id:o};this.$axMethod.bindingSalesman(l).then((function(t){200==t.data.code&&(e.$message({message:t.data.data,type:"success"}),e.dialogCancelForm(),e.$emit("dialogformInline",!1))}))}})),Object(p["a"])(i,"onSearch",(function(){var e=this;this.$set(this,"leftList",[]),this.$set(this,"rightList",[]),this.$axMethod.getBindingList(this.params).then((function(t){200==t.data.code&&e.$set(e,"leftList",t.data.data)}))})),Object(p["a"])(i,"companyChange",(function(e){1==e?Object(n["i"])(this,this.params):Object(n["i"])(this,this.params,1)})),i),mounted:function(){var e=localStorage,t=e.employee_id;e.company_admin_id;this.companyidspop.length>0?(this.companyidspop.forEach((function(e,t){e.index=t})),this.$set(this,"leftList",this.companyidspop),[0,1,2].includes(Number(t)),this.$set(this,"params",{company_id:this.companyidspop[0].company_id?this.companyidspop[0].company_id:Number(localStorage.company_id),bind_type:0}),Object(n["b"])(this,this.companyidspop[0],[["company_id","company_name","companyList"]])):(this.$set(this,"params",{company_id:Number(localStorage.company_id),business_id:"",bind_type:0}),Object(n["b"])(this,localStorage,[["company_id","company_name","companyList"]])),Object(n["b"])(this,localStorage,[["employee_id","employee_name","employeeList","options"]])}}),d=u,h=(a("d8fe"),a("2877")),_=Object(h["a"])(d,c,m,!1,null,"856ffdae",null),f=_.exports,b=a("2f62"),g={name:"customerinfoDefault",data:function(){return{authority:{},options:{title:"客户信息导入",url:"/v2/custom/Customer/importCustomer"},companyidspop:"",btnShow:!1,dialogBillVisible:!1,fileter:"全部导出",loading:!1,defaultArea:[0],timeValue:[],province:{options:[]},city:{options:[]},area:{options:[]},multipleSelection:[]}},components:{getAreaList:r["a"],sourceBill:f},computed:Object(l["a"])({},Object(b["c"])(["customerinfoDefault_showGet"])),methods:Object(l["a"])(Object(l["a"])({dialogEmployee:function(){this.$refs.upload.stateOpen()},tableRowClassName:function(e){var t=e.row;e.rowIndex;return t.canNotDelete?"error-row":""},clearBusiss:function(e){this.$set(this.params,"employee_id",""),this.$set(this.searchParams,"business_id",null),e&&(this.params.company_name=this.companyList.filter((function(t){return t.company_id===e}))[0].company_name)},receiveUploadMsg:function(e){Object(n["g"])(this.searchParams)},getCustomerChange:function(e){e&&(this.params.customer_name=this.customerList.filter((function(t){return t.customer_id===e}))[0].customer_name)},customer_type_change:function(e){e&&(this.params.customer_type_name=this.customerTypeList.filter((function(t){return t.customer_type_id===e}))[0].customer_type_name)},businessChange:function(e){e&&(this.params.employee_name=this.employeeList.filter((function(t){return t.employee_id===e}))[0].employee_name)},dialogformInline:function(e){Object(n["g"])(this.searchParams)},closedialog:function(){this.dialogBillVisible=!1},bindBusiness:function(){this.dialogBillVisible=!0},unbind:function(){if(this.multipleSelection.length<1)return this.$message({message:"请选择需要解绑的客户",type:"warning"}),!1;for(var e=[],t=0;t<this.multipleSelection.length;t++)e.push(this.multipleSelection[t].associated_customer_id);var a=e.toString(),i={examineID:"associated_customer_id",eachData:{associated_customer_id:a},examineApi:"UntieTheSalesman",list:{UrlApi:"getCustomerList",data:this.TableData,esData:this.params}};this.$common.examineFun(i)},getprovinceFocus:function(){this.$common.options("getAreaListOption",this.province,{level:2})},exportFile:function(e){if(0==this.listShow)return this.$message({message:"请查询需要导出的数据",type:"error"}),!1;for(var t=[],a=0;a<this.multipleSelection.length;a++)t.push(this.multipleSelection[a].customer_id);var i=t.toString(),s={params:Object(l["a"])(Object(l["a"])({},this.params),{},{customer_id:i,export_type:e}),API:"exportCustomerUrl"};Object(n["d"])(s)},downLoadFile:function(){this.$axMethod.cusdowntemplet().then((function(e){200==e.data.code&&(window.location.href=e.data.data.url)}))},changeDefaultArea:function(e){this.params.cityList=e.join(","),this.params.province_id=e[0],this.params.city_id=e[1],this.params.area_id=e[2]},changeDate:function(e){this.params.start_time=e[0],this.params.end_time=e[1]},changeProvince:function(){this.params.city_id="",this.$common.options("getAreaListOption",this.city,{level:3,p_id:this.params.province_id})},changeCity:function(){this.$common.options("getAreaListOption",this.area,{level:4,p_id:this.params.city_id})},onSearch:function(){this.timeValue&&2==this.timeValue.length?(this.params.start_time=this.timeValue[0],this.params.end_time=this.timeValue[1]):this.params.start_time=this.params.end_time="",Object.assign(this.searchParams.params,this.params,{page:this.goPage||1}),this.customerinfoIndexACT({params:this.params,goPage:this.goPage||1,pageSize:this.pageSize}),Object(n["g"])(this.searchParams)},onReset:function(){this.defaultArea=[0],this.$set(this,"params",{is_disabled:""}),this.timeValue=[],this.$set(this,"searchParams",{params:{},TableData:this.TableData,API:"getCustomerList",vm:this}),this.onSearch()}},Object(b["b"])(["customerinfoAdd_show","customerinfoSearch_show","customerinfoIndexACT"])),{},{addFun:function(){this.customerinfoAdd_show({params:this.params,goPage:this.goPage,pageSize:this.pageSize}),this.$router.push({path:"/custom/customerinfo/customerinfo_add"})},deletes:function(){var e={deleID:"associated_customer_id",deleSelect:this.multipleSelection,deleApi:"delCustomer",list:{UrlApi:"getCustomerList",data:this.TableData}};this.$common.BatchDeletion(e,"删除",this)},examine:function(e){this.customerinfoSearch_show({customer_id:e.customer_id,associated_customer_id:e.associated_customer_id,goPage:this.goPage,pageSize:this.pageSize,params:this.params}),this.$router.push({path:"/custom/customerinfo/customerinfo_search"})},handleEdit:function(e){this.customerinfoAdd_show({customer_id:e.customer_id,associated_customer_id:e.associated_customer_id,goPage:this.goPage,pageSize:this.pageSize,params:this.params}),this.$router.push({path:"/custom/customerinfo/customerinfo_add"})},handleSelectionChange:function(e){var t=this;this.multipleSelection=e,this.btnShow=!this.multipleSelection.every((function(e){return e.company_name===t.multipleSelection[0].company_name})),this.companyidspop=this.multipleSelection,this.multipleSelection.length?this.fileter="导出":this.fileter="全部导出"},handleSizeChange:function(e){Object.assign(this.searchParams.params,{per_page:e,page:1}),Object(n["g"])(this.searchParams)},handleCurrentChange:function(e){Object.assign(this.searchParams.params,{page:e}),Object(n["g"])(this.searchParams)}}),mounted:function(){if(this.authority=JSON.parse(localStorage.getItem("authority")),this.customerinfoDefault_showGet&&this.customerinfoDefault_showGet.params){var e=this.customerinfoDefault_showGet.params;if(this.defaultArea=[e.province_id,e.city_id,e.area_id],this.customerinfoDefault_showGet.params.start_time){var t=this.customerinfoDefault_showGet.params,a=t.start_time,i=t.end_time;this.timeValue=this.timeValue.concat([a,i])}this.$set(this,"params",this.customerinfoDefault_showGet.params),Object(n["l"])(this,this.customerinfoDefault_showGet.params)}this.customerinfoDefault_showGet&&this.customerinfoDefault_showGet.goPage&&(this.params.page=this.customerinfoDefault_showGet.goPage,this.params.per_page=this.customerinfoDefault_showGet.pageSize),this.$set(this,"searchParams",{params:this.params,TableData:this.TableData,API:"getCustomerList",vm:this}),Object(n["g"])(this.searchParams)}},y=g,v=(a("4478"),Object(h["a"])(y,s,o,!1,null,"15ed7fa3",null));t["default"]=v.exports},"4d46a":function(e,t,a){},"629c":function(e,t,a){},d12c:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-cascader",{attrs:{filterable:e.filterable,placeholder:"请选择",options:e.options,clearable:"",size:"mini",props:e.prop},on:{change:e.changes,"expand-change":e.handleItemChange},model:{value:e.newDefaultArea,callback:function(t){e.newDefaultArea=t},expression:"newDefaultArea"}})],1)},s=[],o=(a("e3df"),a("42aa"),a("b1f0"),{data:function(){return{options:[],newDefaultArea:[]}},props:{defaultArea:{type:Array},filterable:{type:Boolean,default:!1},Level:{type:Number,default:3},prop:{type:Object,default:function(){return{value:"value",children:"cities"}}}},methods:{changes:function(e){var t=this;this.$nextTick((function(){t.$emit("changeDefaultArea",t.newDefaultArea)}))},handleItemChange:function(e){var t,a=this;1==e.length&&(t=e[0]),2==e.length&&(t=e[1]),this.$axios({method:"get",url:this.$api.getAreaListOption,params:{p_id:t,is_page:1}}).then((function(t){for(var i in a.options){if(1==e.length&&a.options[i].value==e[0]&&!a.options[i].cities.length)for(var s in t.data.data){var o={};o.label=t.data.data[s].area_name,o.value=t.data.data[s].area_id,3==a.Level&&(o.cities=[]),a.options[i].cities.push(o)}if(2==e.length&&3==a.Level)for(var l in a.options[i].cities)if(a.options[i].cities[l].value==e[1]&&!a.options[i].cities[l].cities.length)for(var n in t.data.data){var r={};r.label=t.data.data[n].area_name,r.value=t.data.data[n].area_id,a.options[i].cities[l].cities.push(r)}}}))},initAddress:function(){var e=this,t={level:2},a=this;a.$axMethod.getAreaList(t).then((function(t){var i={};for(var s in t.data.data){i={label:t.data.data[s].area_name,value:t.data.data[s].area_id,cities:[]};a.options.push(i)}if(e.defaultArea.length<=1)return!1;var o={level:3,p_id:a.defaultArea[0]};a.$axMethod.getAreaList(o).then((function(t){for(var i in a.options)if(a.options[i].value==o.p_id&&!a.options[i].cities.length)for(var s in t.data.data){var l={label:t.data.data[s].area_name,value:t.data.data[s].area_id,cities:[]};a.options[i].cities.push(l)}if(e.defaultArea.length<=2)return!1;var n={level:4,p_id:a.defaultArea[1]};a.$axMethod.getAreaList(n).then((function(e){for(var t in a.options)for(var i in a.options[t].cities)if(a.options[t].cities[i].value==n.p_id&&!a.options[t].cities[i].cities.length)for(var s in e.data.data){var o={label:e.data.data[s].area_name,value:e.data.data[s].area_id};a.options[t].cities[i].cities.push(o)}}))}))}))}},mounted:function(){var e=this;if(this.defaultArea.length>1)this.newDefaultArea=this.defaultArea.filter((function(e){return e})),this.initAddress();else{var t={level:2};this.$axMethod.getAreaList(t).then((function(t){var a={};for(var i in t.data.data){a={label:t.data.data[i].area_name,value:t.data.data[i].area_id,cities:[]};e.options.push(a)}}))}},watch:{defaultArea:{handler:function(e,t){this.options=[],this.newDefaultArea=this.defaultArea,this.initAddress()},deep:!0}}}),l=o,n=a("2877"),r=Object(n["a"])(l,i,s,!1,null,null,null);t["a"]=r.exports},d8fe:function(e,t,a){"use strict";a("4d46a")}}]);
//# sourceMappingURL=chunk-3ffaebd8.fe0e6c74.js.map