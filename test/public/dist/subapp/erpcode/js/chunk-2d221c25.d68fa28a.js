(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-2d221c25"],{cc5d:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"params"},[a("div",{attrs:{id:"leixin"}},[a("div",{staticClass:"search_container"},[a("el-form",{ref:"filterFormRef",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"组织名称",size:"mini"}},[a("erpCompanyList",{attrs:{disabled:2===e.editType,fatherParams:e.params},on:{change:e.companyChange},model:{value:e.params.company_id,callback:function(t){e.$set(e.params,"company_id",t)},expression:"params.company_id"}})],1),a("el-form-item",{attrs:{label:"商品类型",size:"mini"}},[a("jybd-cascader",{ref:"cascader",on:{cascaderChange:e.shopChange}})],1),a("el-form-item",{attrs:{label:"品牌",size:"mini"}},[a("el-input",{attrs:{maxlength:"100",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(1)}},model:{value:e.params.brand_name,callback:function(t){e.$set(e.params,"brand_name",t)},expression:"params.brand_name"}})],1),a("el-form-item",{staticClass:"el-form-item_shortInput",attrs:{label:"商品名称"}},[a("v-GoodsList",{attrs:{scopes:{row:e.params},vxeParams:{company_id:e.params.company_id},showObj:{goods_id:"商品编号",goods_name:"商品名称"}}})],1),a("el-form-item",{attrs:{label:"工厂代码",size:"mini"}},[a("el-input",{attrs:{maxlength:"100",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(1)}},model:{value:e.params.factory_code,callback:function(t){e.$set(e.params,"factory_code",t)},expression:"params.factory_code"}})],1),a("el-form-item",{attrs:{label:"年月",size:"mini"}},[a("el-date-picker",{attrs:{type:"monthrange","value-format":"yyyy-MM","range-separator":"至","start-placeholder":"开始月份","end-placeholder":"结束月份"},model:{value:e.policyMonth,callback:function(t){e.policyMonth=t},expression:"policyMonth"}})],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.onSearch(1)}}},[e._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"add_delet"},[1==e.authority.b_export?a("el-dropdown",[a("span",{staticStyle:{cursor:"pointer",color:"#4e90e2"},attrs:{"split-button":""}},[a("el-button",{attrs:{plain:"",icon:"iconfont icon-daochu10",size:"mini"}},[e._v("导出")])],1),a("el-dropdown-menu",{staticStyle:{"margin-top":"10px"},attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){return e.exportOrder(1)}}},[e._v("导出Excel文件")]),a("el-dropdown-item",{nativeOn:{click:function(t){return e.exportOrder(2)}}},[e._v("导出CSV逗号分隔")])],1)],1):e._e()],1),a("div",[a("xTable",{ref:"xTable",attrs:{ajax:{url:"getPriceContentList",params:e.params},tableColumn:e.tableColumn,footerMethod:e.footerMethod}})],1)])])},o=[],n={company_id:localStorage.getItem("company_id"),company_name:localStorage.getItem("company_name"),goods_id:"",goods_name:"",factory_code:""},r={data:function(){return{tableColumn:[{title:"组织名称",field:"company_name",width:220},{title:"商品类型",field:"goods_type_name",width:80},{title:"品牌",field:"brand_name",width:80},{title:"商品编号",field:"goods_id",width:80},{title:"商品名称",field:"goods_name"},{title:"工厂代码",field:"factory_code",width:140},{title:"底价有效年月",field:"effective_time",width:160},{title:"销售底价金额",field:"sales_gross_profit",headerAlign:"right",align:"right",width:160}]}}},s={mixins:[r],name:"shoplowPriceList",data:function(){return{policyMonth:[],params:this.$publicFution.deepCopy(n)}},methods:{onReset:function(){this.policyMonth=[],this.params=this.$publicFution.deepCopy(n),this.$refs.cascader.clear(),this.onSearch(1)},shopChange:function(e){this.params.goods_type_id=e[e.length-1]},exportOrder:function(e){var t=Object.assign({},this.params,{export_type:e});this.$axios({method:"get",params:t,url:this.$api.exportShopPrice}).then((function(e){200==e.data.code&&(window.location.href=e.data.data.url)}))},onSearch:function(e){Array.isArray(this.policyMonth)?(this.params.effective_start_time=this.policyMonth[0]?this.policyMonth[0]+"-01":"",this.params.effective_end_time=this.policyMonth[1]?this.policyMonth[1]+"-01":""):(this.params.effective_start_time="",this.params.effective_end_time=""),this.$refs.xTable._getData(e)}},activated:function(){this.onSearch(window.goPage)}},l=s,c=a("2877"),d=Object(c["a"])(l,i,o,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d221c25.d68fa28a.js.map