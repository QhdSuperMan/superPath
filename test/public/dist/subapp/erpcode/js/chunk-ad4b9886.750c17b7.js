(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-ad4b9886"],{"36c4":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search_container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"采购组织","label-width":"110px",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:"",maxlength:"100"},on:{focus:e.companyListInvok,change:e.companyChange},model:{value:e.params.company_id,callback:function(t){e.$set(e.params,"company_id",t)},expression:"params.company_id"}},e._l(e.companyList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[a("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"部门","label-width":"110px",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:"",maxlength:"100"},on:{focus:e.DepartmentListInvok,change:e.departmentChange},model:{value:e.params.department_id,callback:function(t){e.$set(e.params,"department_id",t)},expression:"params.department_id"}},e._l(e.departmentList,(function(e){return a("el-option",{key:e.department_id,attrs:{label:e.department_name,value:e.department_id}})})),1)],1),a("el-form-item",{attrs:{label:"供应商(厂家)","label-width":"110px",size:"mini"}},[a("el-select",{attrs:{clearable:"",maxlength:"100","filter-method":e.supplierListInvok,filterable:"",placeholder:"请选择"},on:{change:e.supplierChangesave,focus:e.supplierListInvok},model:{value:e.params.supplier_id,callback:function(t){e.$set(e.params,"supplier_id",t)},expression:"params.supplier_id"}},e._l(e.supplierList,(function(e){return a("el-option",{key:e.supplier_id,attrs:{label:e.supplier_name,value:e.supplier_id}})})),1)],1),a("el-form-item",{attrs:{label:"业务日期","label-width":"110px",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.changeDate},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}})],1),a("el-form-item",{attrs:{label:"单据号","label-width":"110px",size:"mini"}},[a("el-input",{attrs:{maxlength:"100",width:"200px",placeholder:"请输入"},model:{value:e.params.rebate_sn,callback:function(t){e.$set(e.params,"rebate_sn",t)},expression:"params.rebate_sn"}})],1),a("el-form-item",{attrs:{label:"返利类型","label-width":"110px",size:"mini"}},[a("el-select",{attrs:{clearable:""},on:{change:e.rebateTypeChange,focus:e.RebateTypeListInvok},model:{value:e.params.rebate_type_id,callback:function(t){e.$set(e.params,"rebate_type_id",t)},expression:"params.rebate_type_id"}},e._l(e.rebateType,(function(e){return a("el-option",{key:e.rebate_type_id,attrs:{label:e.rebate_type_name,value:e.rebate_type_id}})})),1)],1),a("el-form-item",{attrs:{label:"返利周期","label-width":"110px",size:"mini"}},[a("el-select",{attrs:{clearable:""},on:{change:e.rebateCyclesave,focus:e.RebatecycleListInvok},model:{value:e.params.cycle_id,callback:function(t){e.$set(e.params,"cycle_id",t)},expression:"params.cycle_id"}},e._l(e.rebatecycle,(function(e){return a("el-option",{key:e.cycle_id,attrs:{label:e.cycle_name,value:e.cycle_id}})})),1)],1),a("el-form-item",{attrs:{label:"品牌",size:"mini","label-width":"110px"}},[a("getBrand",{attrs:{fatherParams:e.params},model:{value:e.params.brand_id,callback:function(t){e.$set(e.params,"brand_id",t)},expression:"params.brand_id"}})],1),a("el-form-item",{attrs:{label:"审核状态","label-width":"110px",size:"mini"}},[a("el-select",{attrs:{clearable:"",width:"200px"},model:{value:e.params.auditor_status,callback:function(t){e.$set(e.params,"auditor_status",t)},expression:"params.auditor_status"}},[a("el-option",{attrs:{label:"全部",value:0}},[e._v("全部")]),a("el-option",{attrs:{label:"未审核",value:1}},[e._v("未审核")]),a("el-option",{attrs:{label:"已审核",value:2}},[e._v("已审核")]),a("el-option",{attrs:{label:"作废",value:3}},[e._v("作废")])],1)],1),a("el-form-item",{attrs:{label:"审核日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:""},model:{value:e.timeValue1,callback:function(t){e.timeValue1=t},expression:"timeValue1"}})],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.onReset}},[e._v("重置")])],1)],1),1!=e.is_company_service?a("div",{staticClass:"add_delet"},[1==e.authority.b_add?a("el-button",{staticClass:"addBtn",attrs:{icon:"el-icon-circle-plus-outline",type:"primary",size:"mini"},on:{click:e.addFun}},[e._v("新增")]):e._e(),1==e.authority.b_del?a("el-button",{attrs:{plain:"",icon:"el-icon-delete",size:"mini"},on:{click:e.delFun}},[e._v("删除")]):e._e(),1==e.authority.b_pass?a("el-button",{staticClass:"iconfont icon-pass",attrs:{type:"primary",size:"mini"},on:{click:e.examineFun}},[e._v("审核")]):e._e(),1==e.authority.b_nopass?a("el-button",{attrs:{plain:"",icon:"iconfont icon-fanshenhe",size:"mini"},on:{click:e.AUDIT_GET}},[e._v("弃审")]):e._e(),1==e.authority.b_invalid?a("el-button",{staticClass:"iconfont icon-zuofei",attrs:{plain:"",size:"mini"},on:{click:e.abolishFun}},[e._v("作废")]):e._e()],1):e._e()],1),a("div",{staticClass:"table_container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:e.TableData.tableData,"max-height":"600"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",fixed:"left",align:"center",width:"44"},on:{"selection-change":e.handleSelectionChange}}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==e.authority.b_info?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.row)}}},[e._v("查看")]):e._e(),1!=e.is_company_service?a("span",[1==e.authority.b_edit&&1==t.row.auditor_status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.updateClick(t,t.row)}}},[e._v("修改")]):e._e(),1==e.authority.b_edit&&1!=t.row.auditor_status?a("el-button",{attrs:{disabled:"",type:"text",size:"small"},on:{click:function(a){return e.updateRow(t.row)}}},[e._v(" 修改 ")]):e._e()],1):e._e()]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"company_name",label:"采购组织",width:"200"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"rebate_sn",label:"单据号",width:"200"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"supplier_name",label:"供应商(厂家)",width:"200"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"brand_name",label:"品牌",width:"200"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"total_price",label:"返利金额",align:"right",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("pre",[e._v(e._s(e._f("priceFormatNone")(t.row.total_price)))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"rebate_type_name",label:"返利类型",width:"200"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"rebate_cycle_name",label:"返利周期",width:"200"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"business_time",label:"业务日期",width:"120"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"auditor_status_name",label:"审核状态",width:"120"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"auditor_name",label:"审核人",width:"120"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"auditor_time",width:"160",label:"审核时间"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"add_user_name",label:"创建人",width:"200"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"add_time",label:"单据时间",width:"200"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"department_name",label:"所属部门",width:"100"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"update_user_name",label:"修改人",width:"200"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"update_time",label:"修改时间",width:"200"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"remark",label:"备注",width:"200"}})],1)],1),a("div",{staticClass:"page_container"},[a("div",{staticClass:"pageNumber"},[e._v("每页显示")]),a("el-pagination",{staticClass:"erp-pagination",attrs:{"current-page":e.goPage,"page-size":e.pageSize1,"page-sizes":e.per_page,layout:"total,sizes, prev, pager, next,jumper",prevText:"上一页",nextText:"下一页",total:e.TableData.total},on:{"size-change":e.handleSizeChange,"update:currentPage":function(t){e.goPage=t},"update:current-page":function(t){e.goPage=t},"current-change":e.handleCurrentChange}})],1)])},s=[],r=a("5530"),l=(a("4de4"),a("d3b7"),a("99af"),a("65b0")),n=a("2f62"),o={name:"purchaseRebatemanageDefault",data:function(){return{authority:{},searchParams:{},timeValue:[],loading:!1,TableData:{tableData:[{}],total:10},timeValue1:[],multipleSelection:[],currentPage:1,checkSearch:!0,checkAdd:!0,searchRrebateInfo:{},checkModify:!0,modifeRebate:{},goPage:1,isSearch:!0,list:[]}},computed:Object(r["a"])({},Object(n["c"])(["purchaseDefault_showGet"])),methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(n["b"])(["refundAdd_show","refundSearch_show","refundModify_show"])),{},{rebateCyclesave:function(e){e&&(this.params.cycle_name=this.rebatecycle.filter((function(t){return t.cycle_id===e}))[0].cycle_name)},rebateTypeChange:function(e){e&&(this.params.rebate_type_name=this.rebateType.filter((function(t){return t.rebate_type_id===e}))[0].rebate_type_name)},supplierChangesave:function(e){e&&(this.params.supplier_name=this.supplierList.filter((function(t){return t.supplier_id===e}))[0].supplier_name)},departmentChange:function(e){e&&(this.params.department_name=this.departmentList.filter((function(t){return t.department_id===e}))[0].department_name)},companyChange:function(e){""!=e&&(this.params.company_name=this.companyList.filter((function(t){return t.company_id===e}))[0].company_name),this.$set(this.params,"supplier_id",""),this.$set(this.params,"department_id","")},AUDIT_GET:function(){var e=this;if(this.multipleSelection.length<1)return this.$message({message:"请选择需要弃审的信息",type:"warning"}),!1;for(var t=[],a=0;a<this.multipleSelection.length;a++)t.push(this.multipleSelection[a].rebate_id);var i=t.toString();this.$axMethod.auidtorNoPassRebatemanage({rebate_id:i}).then((function(t){200==t.data.code&&(e.$message({message:t.data.data,type:"success"}),Object(l["g"])(e.searchParams))}))},examineFun:function(){if(this.multipleSelection.length<1)return this.$message({message:"请选择需要审核的信息",type:"warning"}),!1;for(var e=[],t=0;t<this.multipleSelection.length;t++)e.push(this.multipleSelection[t].rebate_id);var a=e.toString(),i={examineID:"rebate_id",eachData:{rebate_id:a},examineApi:"rebateAuditorPass",list:{UrlApi:"getVenderRebateList",data:this.TableData,esData:Object.assign(this.searchParams.params,{page:this.goPage})}};this.$common.examineFun(i)},abolishFun:function(){if(this.multipleSelection.length<1)return this.$message({message:"请选择需要作废的信息",type:"warning"}),!1;for(var e=[],t=0;t<this.multipleSelection.length;t++)e.push(this.multipleSelection[t].rebate_id);var a=e.toString(),i={examineID:"rebate_id",eachData:{rebate_id:a},examineApi:"rebateAuditorInvalid",list:{UrlApi:"getVenderRebateList",data:this.TableData,esData:Object.assign(this.searchParams.params,{page:this.goPage})}};this.$common.examineFun(i)},onSearch:function(){this.timeValue&&2==this.timeValue.length?(this.params.start_time=this.timeValue[0],this.params.end_time=this.timeValue[1]):this.params.start_time=this.params.end_time="",this.timeValue1?(this.params.start_auditor_time=this.timeValue1[0],this.params.end_auditor_time=this.timeValue1[1]):this.params.start_auditor_time=this.params.end_auditor_time="",this.purchaseDefaultIndexACT({goPage:this.goPage,params:this.params,pageSize:this.pageSize}),Object.assign(this.searchParams.params,this.params,{page:1}),Object(l["g"])(this.searchParams)},onReset:function(){this.$set(this,"params",{}),this.timeValue=[],this.timeValue1=[],this.$set(this,"searchParams",{params:this.params,TableData:this.TableData,API:"getVenderRebateList",vm:this}),this.onSearch()}},Object(n["b"])(["purchaseDefaultIndexACT","purchaseAdd_show","purchaseSearch_show"])),{},{addFun:function(){this.$router.push({path:"/purchase/rebatemanage/rebatemanageAdd"}),this.purchaseAdd_show({})},updateClick:function(e,t){this.$router.push({path:"/purchase/rebatemanage/rebatemanageAdd"}),this.purchaseAdd_show({rebate_id:t.rebate_id,params:this.params,goPage:this.goPage,pageSize:this.pageSize})},handleClick:function(e){this.$router.push({path:"/purchase/rebatemanage/rebatemanageSearch"}),this.purchaseSearch_show({rebate_id:e.rebate_id,params:this.params,goPage:this.goPage,pageSize:this.pageSize})},delFun:function(){var e={deleID:"rebate_id",deleSelect:this.multipleSelection,deleApi:"delRebate",list:{UrlApi:"getVenderRebateList",data:this.TableData,esData:{page:this.goPage}}};this.$common.deletes(e,"删除",this)},handleSelectionChange:function(e){this.multipleSelection=e},ievent:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];this.checkSearch=t[0].checkSearch},addEevent:function(e){this.checkAdd=e.checkAdd,this.$common.initData("getVenderRebateList",this.TableData)},changeDate:function(e){this.params.start_time=e[0],this.params.end_time=e[1]},handleSizeChange:function(e){Object.assign(this.searchParams.params,{per_page:e,page:1}),Object(l["g"])(this.searchParams)},handleCurrentChange:function(e){Object.assign(this.searchParams.params,{page:e}),Object(l["g"])(this.searchParams)}}),mounted:function(){if(this.authority=JSON.parse(localStorage.getItem("authority")),this.purchaseDefault_showGet&&this.purchaseDefault_showGet.params){if(this.purchaseDefault_showGet.params.start_time||this.purchaseDefault_showGet.params.start_auditor_time){var e=this.purchaseDefault_showGet.params,t=e.start_time,a=e.end_time,i=e.start_auditor_time,s=e.end_auditor_time;this.timeValue=this.timeValue.concat([t,a]),this.timeValue1=this.timeValue1.concat([i,s])}this.$set(this,"params",this.purchaseDefault_showGet.params),Object(l["l"])(this,this.purchaseDefault_showGet.params)}this.purchaseDefault_showGet.goPage&&(this.params.page=this.purchaseDefault_showGet.goPage,this.params.per_page=this.purchaseDefault_showGet.pageSize),this.$set(this,"searchParams",{params:this.params,TableData:this.TableData,API:"getVenderRebateList",vm:this}),Object(l["g"])(this.searchParams)}},p=o,c=(a("716e"),a("2877")),h=Object(c["a"])(p,i,s,!1,null,"945dc7dc",null);t["default"]=h.exports},"716e":function(e,t,a){"use strict";a("e886")},e886:function(e,t,a){}}]);
//# sourceMappingURL=chunk-ad4b9886.750c17b7.js.map