{"version":3,"sources":["webpack://service-[name]/./src/components/ServiceStation/InventoryWarn/setInventoryWarnning/stockEarlyWarningQuery.vue?65bd","webpack://service-[name]/./src/components/ServiceStation/InventoryWarn/setInventoryWarnning/stockEarlyWarningQuery.js","webpack://service-[name]/src/components/ServiceStation/InventoryWarn/setInventoryWarnning/stockEarlyWarningQuery.vue","webpack://service-[name]/./src/components/ServiceStation/InventoryWarn/setInventoryWarnning/stockEarlyWarningQuery.vue?fdb2","webpack://service-[name]/./src/components/ServiceStation/InventoryWarn/setInventoryWarnning/stockEarlyWarningQuery.vue","webpack://service-[name]/./src/components/ServiceStation/InventoryWarn/stockEarlyWarningMinxin.js","webpack://service-[name]/./src/components/ServiceStation/InventoryWarn/setInventoryWarnning/stockEarlyWarningQuery.vue?33b3"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","params","model","value","callback","$$v","$set","expression","on","warehouseInvok","_l","item","key","warehouse_id","warehouse_name","row","beforeGetList","company_id","goods_id","goods_name","onSearch","_v","onReset","turnToPurchasing","_e","footerMethod","theme","TableData","tableData","tableColumn","goPage","pageSize1","per_page","total","moduleHandleSizeChange","moduleHandleCurrentChange","$event","staticRenderFns","mixins","data","type","align","width","title","field","showOverflow","slots","default","dom","rowIndex","column","scope","setCellClass","quantity_adjusted","explain","methods","getSelectRecords","selectTion","$refs","xTable","getCheckboxRecords","map","_XID","updateTableFooter","updateFooter","columns","columnIndex","includes","property","$utils","sum","allList","total_ceiling_inventory","total_lower_inventory","total_available_stocks","total_stocks","total_quantity_adjusted","name","loading","$message","warning","getTableList","_params","API","vm","initHeaderValue","searchParams","early_warning_type","company_name","setTimeout","warehouseList","_num","isNaN","_remark","_obj","color","formSearch","validate","valid","Object","assign","page","selectArr","length","messageTip","goReturnTo","str","inventory_goods_id","i","$router","push","_selection","join","created","$route","component","mixin","downLoading","goodsList","computed","allWarehouseList","_warehouseList","unshift","relation_warehouse_id","val","companyChange","msg","undefined","_messageBox","forEach","close","_message","message","messageBox","tipMsg","conBtnText","canBtnText","cancelMsg","callBack","$confirm","confirmButtonText","cancelButtonText","showCancelButton","dangerouslyUseHTMLString","then","catch","mounted","_table","tableName","_table_sum","table_sum","elTable1","$el","getElementsByClassName","addEventListener","scrollLeft"],"mappings":"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","file":"js/chunk-7fc9821d.1cf51fc6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"stock_alarm_search\"},[_c('div',{staticClass:\"search_container\"},[_c('el-form',{ref:\"formSearch\",attrs:{\"inline\":true,\"model\":_vm.params}},[_c('el-form-item',{attrs:{\"label\":\"库存组织\",\"size\":\"mini\",\"prop\":\"company_id\"}},[_c('erpCompanyList',{ref:\"erpCompanyList\",attrs:{\"fatherParams\":_vm.params},model:{value:(_vm.params.company_id),callback:function ($$v) {_vm.$set(_vm.params, \"company_id\", $$v)},expression:\"params.company_id\"}})],1),_c('el-form-item',{attrs:{\"label\":\"仓库\",\"size\":\"mini\",\"prop\":\"warehouse_id\"}},[_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\"},on:{\"focus\":_vm.warehouseInvok},model:{value:(_vm.params.warehouse_id),callback:function ($$v) {_vm.$set(_vm.params, \"warehouse_id\", $$v)},expression:\"params.warehouse_id\"}},_vm._l((_vm.allWarehouseList),function(item){return _c('el-option',{key:item.warehouse_id,attrs:{\"label\":item.warehouse_name,\"value\":item.warehouse_id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"预警类型\",\"size\":\"mini\"}},[_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.params.early_warning_type),callback:function ($$v) {_vm.$set(_vm.params, \"early_warning_type\", $$v)},expression:\"params.early_warning_type\"}},[_c('el-option',{attrs:{\"label\":\"全部\",\"value\":\"\"}}),_c('el-option',{attrs:{\"label\":\"上限预警\",\"value\":\"ceiling\"}}),_c('el-option',{attrs:{\"label\":\"安全库存预警\",\"value\":\"lower\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"商品编号\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入\"},model:{value:(_vm.params.goods_sn),callback:function ($$v) {_vm.$set(_vm.params, \"goods_sn\", $$v)},expression:\"params.goods_sn\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品名称\",\"size\":\"mini\"}},[_c('v-GoodsList',{attrs:{\"scopes\":{row: _vm.params },\"beforeGetList\":_vm.beforeGetList,\"updateArray\":['goods_id'],\"vxeParams\":{company_id: _vm.params.company_id},\"showObj\":{goods_id: '商品编号' , goods_name: '商品名称'}}})],1),_c('el-form-item',{attrs:{\"label\":\"品牌\",\"size\":\"mini\"}},[_c('getBrand',{model:{value:(_vm.params.brand_id),callback:function ($$v) {_vm.$set(_vm.params, \"brand_id\", $$v)},expression:\"params.brand_id\"}})],1),_c('el-form-item',{staticClass:\"search-style search\",attrs:{\"size\":\"mini\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":_vm.onSearch}},[_vm._v(\"查询\")]),_c('el-button',{attrs:{\"plain\":\"\",\"size\":\"mini\"},on:{\"click\":_vm.onReset}},[_vm._v(\"重置\")])],1)],1)],1),_c('div',{staticClass:\"add_delet\"},[(_vm.authority)?_c('el-button',{staticClass:\"addBtn\",attrs:{\"size\":\"mini\"},on:{\"click\":_vm.turnToPurchasing}},[_vm._v(\"转采购\")]):_vm._e()],1),_c('div',{staticClass:\"table_container\"},[_c('vxe-grid',{ref:\"xTable\",attrs:{\"border\":\"\",\"show-header-overflow\":true,\"show-overflow\":\"tooltip\",\"show-footer\":\"true\",\"footer-method\":_vm.footerMethod,\"tooltip-config\":{theme: 'light'},\"data\":_vm.TableData.tableData,\"columns\":_vm.tableColumn,\"size\":\"mini\",\"resizable\":\"\",\"max-height\":380}}),_c('div',{staticClass:\"page_container\"},[_c('div',{staticClass:\"pageNumber\"},[_vm._v(\"每页显示\")]),_c('el-pagination',{staticClass:\"erp-pagination\",attrs:{\"current-page\":_vm.goPage,\"page-size\":_vm.pageSize1,\"page-sizes\":_vm.per_page,\"layout\":\"total,sizes, prev, pager, next,jumper\",\"prevText\":\"上一页\",\"nextText\":\"下一页\",\"total\":_vm.TableData.total},on:{\"size-change\":_vm.moduleHandleSizeChange,\"current-change\":_vm.moduleHandleCurrentChange,\"update:currentPage\":function($event){_vm.goPage=$event},\"update:current-page\":function($event){_vm.goPage=$event}}})],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const mixins = {\r\n  data() {\r\n    return {\r\n      tableColumn: [{\r\n        type: 'checkbox',\r\n        align: 'center',\r\n        width: 50\r\n      },\r\n      {\r\n        type: 'index',\r\n        title: '序号',\r\n        width: 60\r\n      },\r\n      {\r\n        field: 'company_name',\r\n        title: '库存组织',\r\n        width: 200,\r\n        showOverflow: true\r\n      },\r\n      {\r\n        field: 'goods_id',\r\n        title: '商品编号',\r\n        width: 150,\r\n        showOverflow: true\r\n      },\r\n      {\r\n        field: 'goods_name',\r\n        title: '商品名称',\r\n        width: 300,\r\n        showOverflow: true\r\n      },\r\n      {\r\n        field: 'warehouse_name',\r\n        title: '预警仓库',\r\n        width: 200,\r\n        showOverflow: true,\r\n      },\r\n      {\r\n        field: 'brand_name',\r\n        title: '品牌',\r\n        width: 100,\r\n        showOverflow: true,\r\n      },\r\n      {\r\n        field: 'ceiling_inventory',\r\n        title: '库存上限',\r\n        width: 100,\r\n        showOverflow: true,\r\n      },\r\n      {\r\n        field: 'lower_inventory',\r\n        title: '安全库存',\r\n        width: 100,\r\n        showOverflow: true,\r\n      },\r\n      {\r\n        field: 'stocks',\r\n        title: '在库库存',\r\n        width: 100,\r\n        showOverflow: true\r\n      },\r\n      {\r\n        field: 'available_stocks',\r\n        title: '可用库存',\r\n        width: 100,\r\n        showOverflow: true\r\n      },\r\n      {\r\n        field: 'quantity_adjusted',\r\n        title: '建议调整数量',\r\n        width: 100,\r\n        showOverflow: true,\r\n        slots: {\r\n          default: ({\r\n            row,\r\n            rowIndex,\r\n            column,\r\n            scope\r\n          }) => {\r\n            const dom = <span style={this.setCellClass(row, 'quantity_adjusted')}>{row.quantity_adjusted}</span>\r\n            return [dom]\r\n          }\r\n        }\r\n      },\r\n      {\r\n        field: 'explain',\r\n        title: '说明',\r\n        width: 120,\r\n        showOverflow: true,\r\n        slots: {\r\n          default: ({\r\n            row,\r\n            rowIndex,\r\n            column,\r\n            scope\r\n          }) => {\r\n            const dom = <span style={this.setCellClass(row, 'quantity_adjusted')}>{row.explain}</span>\r\n            return [dom]\r\n          }\r\n        }\r\n      }\r\n      ],\r\n      tableData: [],\r\n    }\r\n  },\r\n  methods: {\r\n    // 获取选中项\r\n    getSelectRecords() {\r\n      let selectTion = this.$refs.xTable.getCheckboxRecords()\r\n      selectTion = selectTion.map(item => {\r\n        item._XID && delete item._XID\r\n        return item\r\n      })\r\n      return selectTion\r\n    },\r\n    // 刷新table footer\r\n    updateTableFooter() {\r\n      this.$refs.xTable.updateFooter()\r\n    },\r\n    // 合计/页小计\r\n    footerMethod({\r\n      columns,\r\n      data\r\n    }) {\r\n      return [\r\n        columns.map((column, columnIndex) => {\r\n          if (columnIndex === 1) {\r\n            return \"页小计\";\r\n          }\r\n          if (\r\n            [\"ceiling_inventory\", \"lower_inventory\", \"available_stocks\", \"stocks\", \"quantity_adjusted\"].includes(\r\n              column.property\r\n            )\r\n          ) {\r\n            return this.$utils.sum(data, column.property);\r\n          }\r\n          return null;\r\n        }),\r\n        columns.map((column, columnIndex) => {\r\n          if (columnIndex === 1) {\r\n            return \"合计\";\r\n          }\r\n          if (this.TableData.allList) {\r\n            if (column['property'] == 'ceiling_inventory') { // 库存上限 总合计\r\n              return this.TableData.allList.total_ceiling_inventory;\r\n            } else if (column['property'] == 'lower_inventory') { // 库存下限 总合计\r\n              return this.TableData.allList.total_lower_inventory;\r\n            } else if (column['property'] == 'available_stocks') { // 可用库存 总合计\r\n              return this.TableData.allList.total_available_stocks;\r\n            } else if (column['property'] == 'stocks') { // 在库库存 总合计\r\n              return this.TableData.allList.total_stocks;\r\n            } else if (column['property'] == 'quantity_adjusted') { // 建议调整数量 总合计\r\n              return this.TableData.allList.total_quantity_adjusted;\r\n            }\r\n          }\r\n          return null;\r\n        })\r\n      ];\r\n    }\r\n  }\r\n}\r\nexport default mixins","<!-- 库存上安全库存报警查询 -->\n<template>\n  <div class=\"stock_alarm_search\">\n    <div class=\"search_container\">\n      <el-form :inline=\"true\" :model=\"params\" ref=\"formSearch\">\n        <el-form-item label=\"库存组织\" size=\"mini\" prop=\"company_id\">\n          <erpCompanyList v-model=\"params.company_id\" ref='erpCompanyList' :fatherParams=\"params\" />\n        </el-form-item>\n        <el-form-item label=\"仓库\" size=\"mini\" prop=\"warehouse_id\">\n          <el-select clearable v-model=\"params.warehouse_id\" placeholder=\"请选择\" @focus=\"warehouseInvok\">\n            <el-option :label=\"item.warehouse_name\" :value=\"item.warehouse_id\" :key=\"item.warehouse_id\" v-for=\"item in allWarehouseList\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"预警类型\" size=\"mini\">\n          <el-select clearable v-model=\"params.early_warning_type\" placeholder=\"请选择\">\n            <el-option label=\"全部\" value=\"\"></el-option>\n            <el-option label=\"上限预警\" value=\"ceiling\"></el-option>\n            <el-option label=\"安全库存预警\" value=\"lower\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"商品编号\" size=\"mini\">\n          <el-input type=\"text\" v-model=\"params.goods_sn\" placeholder=\"请输入\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"商品名称\" size=\"mini\">\n          <v-GoodsList :scopes='{row: params }' :beforeGetList='beforeGetList' :updateArray=\"['goods_id']\" :vxeParams='{company_id: params.company_id}' :showObj=\"{goods_id: '商品编号' , goods_name: '商品名称'}\" />\n        </el-form-item>\n        <el-form-item label=\"品牌\" size=\"mini\">\n          <getBrand v-model='params.brand_id' />\n        </el-form-item>\n        <el-form-item size=\"mini\" class=\"search-style search\">\n          <el-button @click=\"onSearch\" size=\"mini\" type=\"primary\">查询</el-button>\n          <el-button plain @click=\"onReset\" size=\"mini\">重置</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n    <div class=\"add_delet\">\n      <el-button @click=\"turnToPurchasing\" class=\"addBtn\" size=\"mini\" v-if=\"authority\">转采购</el-button>\n    </div>\n    <div class=\"table_container\">\n      <vxe-grid border ref=\"xTable\" :show-header-overflow='true' show-overflow='tooltip' show-footer=\"true\" :footer-method=\"footerMethod\" :tooltip-config=\"{theme: 'light'}\" :data=\"TableData.tableData\" :columns=\"tableColumn\" size=\"mini\" resizable :max-height=\"380\"></vxe-grid>\n      <div class=\"page_container\">\n        <div class=\"pageNumber\">每页显示</div>\n        <el-pagination class=\"erp-pagination\" @size-change=\"moduleHandleSizeChange\" @current-change=\"moduleHandleCurrentChange\" :current-page.sync=\"goPage\" :page-size=\"pageSize1\" :page-sizes=\"per_page\" layout=\"total,sizes, prev, pager, next,jumper\" prevText=\"上一页\" nextText=\"下一页\" :total=\"TableData.total\">\n        </el-pagination>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport mixin from \"../stockEarlyWarningMinxin.js\";\nimport stockEarlyWarningQuery from \"./stockEarlyWarningQuery.js\";\nimport {\n  getData, // 请求列表\n} from \"common/utils/public_function/commonUtils\";\nexport default {\n  name: \"inventoryWarningStockEarlyWarningQuery\",\n  mixins: [mixin, stockEarlyWarningQuery],\n  data() {\n    return {\n      loading: false,\n    };\n  },\n  methods: {\n    beforeGetList() {\n      if (!this.params.company_id) {\n        this.$message.warning(\n          \"所有公司商品数量过大，请选择单一库存组织，筛选商品\"\n        );\n        return false;\n      }\n    },\n    // 接口 请求列表\n    getTableList(params) {\n      let _params = params;\n      _params.TableData = this.TableData;\n      _params.API = \"getService_stationWarningQueryList\";\n      _params.vm = this;\n      getData(_params, 2, (res) => {\n        this.$nextTick(() => {\n          this.updateTableFooter();\n        });\n      });\n    },\n    // 初始化表头值\n    initHeaderValue() {\n      this.searchParams.params = {};\n      // 设置默认值\n      this.$set(this, \"params\", {\n        early_warning_type: \"\",\n        warehouse_id: \"\",\n        company_id: \"\",\n        company_name: \"\",\n      });\n      setTimeout(() => {\n        this.$refs.erpCompanyList._setList({\n          company_id: \"\",\n          company_name: \"全部\",\n        });\n      }, 500);\n      this.warehouseList = [\n        {\n          warehouse_id: -1,\n          warehouse_name: \"全部仓库\",\n        },\n      ];\n    },\n    // 设置cell class\n    setCellClass(row, field) {\n      let _num = Number(row[field]);\n      let _remark = \"\",\n        _obj = \"\";\n      if (_num && !isNaN(_num)) {\n        if (_num > 0) {\n          _remark = \"库存数量低于安全库存\";\n          _obj = {\n            color: \"red\",\n          };\n        } else if (_num < 0) {\n          _remark = \"库存数量高于上限\";\n        }\n        this.$set(row, \"explain\", _remark);\n      }\n      return _obj;\n    },\n    // 表头点击搜索\n    onSearch() {\n      this.$refs.formSearch.validate((valid) => {\n        if (valid) {\n          Object.assign(this.searchParams.params, this.params, {\n            page: 1,\n          });\n          this.getTableList(this.searchParams);\n        }\n      });\n    },\n    // 表头点击重置\n    onReset() {\n      this.initHeaderValue(); // 重置表头\n      Object.assign(this.searchParams.params, this.params, {\n        page: 1,\n      });\n      this.getTableList(this.searchParams);\n    },\n    // 转采购\n    turnToPurchasing() {\n      let selectArr = this.getSelectRecords();\n      // 判断是否有勾选中得行\n      if (selectArr.length <= 0) {\n        this.messageTip(\"请勾选明细信息\");\n        return;\n      }\n      this.goReturnTo();\n    },\n    // 点击 确定去转单\n    goReturnTo() {\n      let selectArr = this.getSelectRecords();\n      // 获取选中项\n      let _selection = selectArr.map((item) => {\n        return item.inventory_goods_id;\n      });\n      var str;\n      for (var i = 0; i < selectArr.length; i++) {\n        if (str && str !== selectArr[i].company_id) {\n          this.$message.warning(\"请选择同一家公司进行转单\");\n          return;\n        }\n        str = selectArr[i].company_id;\n      }\n\n      this.$router.push({\n        name: \"jybdorderIndex\",\n        params: {\n          inventory_goods_id: _selection.join(),\n        },\n      });\n    },\n  },\n  created() {\n    this.initHeaderValue();\n    Object.assign(this.searchParams.params, this.params, {\n      page: 1,\n    });\n    if (this.$route.params && this.$route.params.type === 1) {\n      this.params.company_id = \"\";\n      this.params.warehouse_id = \"\";\n      this.params.early_warning_type = \"lower\";\n      setTimeout(() => {\n        this.$refs.erpCompanyList._setList({\n          company_id: \"\",\n          company_name: \"全部\",\n        });\n      }, 500);\n    }\n    Object.assign(this.searchParams.params, this.params, {\n      page: 1,\n    });\n    this.getTableList(this.searchParams);\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n.stock_alarm_search {\n  /deep/ .vxe-grid {\n    .vxe-cell {\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n  }\n  .table_sum {\n    width: 100%;\n    overflow: hidden;\n    background: #f5f7fa;\n    .table_ul {\n      overflow: auto;\n      li {\n        float: left;\n        border: 1px solid #edf0f9;\n        border-top: none;\n        font-size: 12px;\n        color: #1f2d3d;\n        line-height: 23px;\n        text-align: left;\n        height: 23px;\n        box-sizing: border-box;\n        padding: 0px 6px;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./stockEarlyWarningQuery.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./stockEarlyWarningQuery.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./stockEarlyWarningQuery.vue?vue&type=template&id=624e6c9e&scoped=true&\"\nimport script from \"./stockEarlyWarningQuery.vue?vue&type=script&lang=js&\"\nexport * from \"./stockEarlyWarningQuery.vue?vue&type=script&lang=js&\"\nimport style0 from \"./stockEarlyWarningQuery.vue?vue&type=style&index=0&id=624e6c9e&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"624e6c9e\",\n  null\n  \n)\n\nexport default component.exports","const mixin = {\r\n  data() {\r\n    return {\r\n      downLoading: false, // 表头下拉加载\r\n      goodsList: [] // 保存商品名称下拉列表\r\n    }\r\n  },\r\n  computed: {\r\n    // 处理仓库 下拉\r\n    allWarehouseList() {\r\n      let _warehouseList = this.warehouseList\r\n      if (_warehouseList.length > 0) {\r\n        _warehouseList.unshift({\r\n          relation_warehouse_id: 0,\r\n          warehouse_id: -1,\r\n          warehouse_name: \"全部仓库\"\r\n        })\r\n      }\r\n      return _warehouseList\r\n    }\r\n  },\r\n  methods: {\r\n    // 分页操作 - 切换请求条数\r\n    moduleHandleSizeChange(val) {\r\n      Object.assign(this.searchParams.params, {\r\n        per_page: val,\r\n        page: 1\r\n      });\r\n      this.getTableList(this.searchParams);\r\n    },\r\n    // 分页操作 - 切换请求页\r\n    moduleHandleCurrentChange(val) {\r\n      // 分页操作\r\n      Object.assign(this.searchParams.params, {\r\n        page: val\r\n      });\r\n      this.getTableList(this.searchParams);\r\n    },\r\n    // 表头 公司组织change 事件\r\n    companyChange(val) {\r\n      // 切换 组织时清空仓库\r\n      if (this.params.warehouse_id != -1) {\r\n        this.$set(this.params, \"warehouse_id\", \"\");\r\n      }\r\n    },\r\n    // message 弹框提示\r\n    messageTip(msg = \"tip\", type = \"warning\") {\r\n      if (this._messageBox == undefined) {\r\n        this._messageBox = [];\r\n      } else {\r\n        this._messageBox.forEach(item => {\r\n          item.close();\r\n        });\r\n      }\r\n      let _message = this.$message({\r\n        message: msg,\r\n        type: type\r\n      });\r\n      this._messageBox.push(_message);\r\n    },\r\n    // messageBox 询问弹框\r\n    messageBox(params) {\r\n      let {\r\n        title = \"提示\", // 弹框提示title\r\n        tipMsg = \"\", // 弹框提示语\r\n        type = \"warning\", // 弹框默认提示类型\r\n        conBtnText = \"确定\", // 确认按钮显示文字\r\n        canBtnText = \"取消\", // 取消按钮显示文字\r\n        cancelMsg, // 点击取消后弹框提示语\r\n        callBack // 点击确定按钮后的回调\r\n      } = params;\r\n      this.$confirm(tipMsg, {\r\n        title: title,\r\n        confirmButtonText: conBtnText,\r\n        cancelButtonText: canBtnText,\r\n        showCancelButton: canBtnText ? true : false,\r\n        dangerouslyUseHTMLString: true,\r\n        type: type\r\n      })\r\n        .then(() => {\r\n          callBack && callBack();\r\n        })\r\n        .catch(() => {\r\n          if (cancelMsg) {\r\n            this.$message({\r\n              type: \"info\",\r\n              message: cancelMsg\r\n            });\r\n          }\r\n        });\r\n    },\r\n  },\r\n  mounted() {\r\n    let _table = this.$refs.tableName,\r\n      _table_sum = this.$refs.table_sum;\r\n    if (_table && _table_sum) {\r\n      const elTable1 = _table.$el.getElementsByClassName(\r\n        \"el-table__body-wrapper\"\r\n      )[0];\r\n      elTable1.addEventListener(\"scroll\", function () {\r\n        _table_sum.scrollLeft = this.scrollLeft;\r\n      });\r\n    }\r\n  },\r\n}\r\nexport default mixin;","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./stockEarlyWarningQuery.vue?vue&type=style&index=0&id=624e6c9e&lang=less&scoped=true&\""],"sourceRoot":""}