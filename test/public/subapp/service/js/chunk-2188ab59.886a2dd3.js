(window["webpackJsonp_service"]=window["webpackJsonp_service"]||[]).push([["chunk-2188ab59"],{"003f":function(t,e,a){"use strict";a("6e0f")},1148:function(t,e,a){"use strict";var i=a("da84"),s=a("5926"),r=a("577e"),n=a("1d80"),o=i.RangeError;t.exports=function(t){var e=r(n(this)),a="",i=s(t);if(i<0||i==1/0)throw o("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(a+=e);return a}},"2dc2":function(t,e,a){"use strict";a("a22e")},"33fd":function(t,e,a){"use strict";var i=a("233f"),s=a("084c"),r=a("9533"),n=a("a83e"),o=a("ab58"),l=a("2585"),c=a("f8cc");i("search",(function(t,e,a){return[function(e){var a=r(this),i=void 0==e?void 0:l(e,t);return i?i.call(e,a):new RegExp(e)[t](o(a))},function(t){var i=s(this),r=o(t),l=a(e,i,r);if(l.done)return l.value;var d=i.lastIndex;n(d,0)||(i.lastIndex=0);var u=c(i,r);return n(i.lastIndex,d)||(i.lastIndex=d),null===u?-1:u.index}]}))},"432c":function(t,e,a){"use strict";a("df4c")},"43f0":function(t,e,a){},"4d29":function(t,e,a){"use strict";a("a693")},"5ebb":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return r}));a("d81d"),a("caad"),a("a434"),a("4de4"),a("d3b7"),a("a9e3"),a("b680");var i={company_id:localStorage.getItem("company_id"),company_name:localStorage.getItem("company_name"),service_charge:"",packing_fee:"",discount_type:0,discount_num:"",discount_total_amount:"",settlement_price:"",pay_price:"",abstract:"",arrears:0,goodsAllprice:0,delivery_demand_id:"",outstock_type_id:10002},s={real_num:"",total_price:"",unit_price:""},r={data:function(){var t=this,e=this.$createElement;return{editRules:{real_num:[{required:!0,message:"数量输入请在0-99999999之间",type:"number",min:1,max:99999999}],unit_price:[{required:!0,message:"请输入价格"}],batch:[{required:!0,message:"批次不能为空"}]},tableColumn:[{title:"商品编号",field:"goods_id",width:80},{title:"库位码",field:"goods_sn",width:90},{field:"name",title:"操作",width:80,align:"center",fixed:"right",slots:{default:function(a){if(1===t.editType)return[e("el-button",{attrs:{size:"small",type:"text",icon:"el-icon-remove-outline"},on:{click:function(){t.deleteGoods(a)}}},[" "])];var i=[e("el-button",{attrs:{size:"small",type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(){t.copyRow(a.row)}}},[" "])];return t.$refs.xTable._proxy("getTableData").fullData.length>1&&i.push(e("el-button",{attrs:{size:"small",type:"text",icon:"el-icon-remove-outline"},on:{click:function(){t.removeRow(a.row)}}},[" "])),i}}},{title:"商品名称",field:"goods_name"},{title:"品牌",field:"brand_name",width:80},{title:"仓库",field:"warehouse_name",width:80},{title:"货位",field:"allocation_name",width:80},{title:"库存数量",field:"available_stocks",headerAlign:"right",align:"right",width:84,formatter:function(t){var e=t.row;return(e.available_stocks?e.available_stocks:"")+" "+(e.unit_name?e.unit_name:"")}},{title:"销售指导价",field:"guide_price",headerAlign:"right",align:"right",width:84},{title:"售价",field:"unit_price",headerAlign:"right",align:"right",width:120,editRender:{name:"Vinput",formatter:"Positive",autoselect:!0,events:{input:this.computedRowPrice},getSlots:function(a){return e("el-link",{on:{click:function(){t.openHistoryPrice(a)}}},["历史价"])}}},{title:"售卖数量",field:"real_num",headerAlign:"right",align:"right",width:100,formatter:function(t){var e=t.row;return e.real_num+" "+(e.unit_name?e.unit_name:"")},editRender:{name:"Vinput",formatter:"positiveInt",autoselect:!0,events:{input:this.computedRowPrice}}},{title:"总计金额",field:"total_price",headerAlign:"right",align:"right",width:132}]}},methods:{removeRow:function(t){this.$refs.xTable._proxy("getTableData").fullData.length>1&&this.$refs.xTable._proxy("remove",t)},footerMethod:function(t){var e=this,a=t.columns,i=t.data;return[a.map((function(t,a){if(0===a)return"页小计";if(["real_num","total_price"].includes(t.property)){var s=e.$utils.sum(i,t.property);return"real_num"===t.property?e.$publicFution.priceFormatNone(s,0):(e.params.goodsAllprice=s,e.computedTotalPrice(),e.$publicFution.priceFormatNone(s))}return null}))]},deleteGoods:function(t){var e=this,a=(t.row,t.$rowIndex);this.tableData.splice(a,1),this.$nextTick((function(){e.$refs.xTable._updateFooter()}))},copyRow:function(t){this.$refs.xTable._copyRow(t).then((function(t){t.row.real_num="",t.row.total_price=""}))},addGoods:function(t){var e=t.row,a=this.tableData.filter((function(t){return t.batch_id===e.batch_id}));if(a.length)a[0].real_num++,a.unit_price=e.unit_price?e.unit_price:a.unit_price,this.computedRowPrice({row:a[0]});else{var i=this.$publicFution.deepCopy(Object.assign(s,e));delete i.XID,i.real_num=1,i.unit_price=i.guide_price,this.computedRowPrice({row:i}),this.tableData.push(i),this.$refs.xTable._proxy("loadData",this.tableData)}},changeRowPrice:function(t){this.currentScope.row.unit_price=t.unit_price,this.computedRowPrice(this.currentScope)},openHistoryPrice:function(t){this.currentScope=t,this.isShowHistoryPrices=!0},getNumber:function(t,e){return isNaN(t)||""===t?e||0:Number(t)},computedRowPrice:function(t){var e=t.row;e.total_price=this.getNumber(e.unit_price)*this.getNumber(e.real_num),this.$refs.xTable._updateFooter()},computedTotalPrice:function(){var t=this.params.goodsAllprice;1==this.params.discount_type?t=this.getNumber(t)*this.getNumber(this.params.discount_num,10)/10:2==this.params.discount_type&&(t=this.getNumber(t)-this.getNumber(this.params.discount_total_amount)),t+=this.getNumber(this.params.service_charge),t+=this.getNumber(this.params.packing_fee),this.params.settlement_price=t.toFixed(2),this.params.arrears=(t-this.getNumber(this.params.pay_price)).toFixed(2)}}}},"613b":function(t,e,a){var i=a("bf54"),s=a("aa54"),r=a("ae94"),n=a("1b18"),o=a("807e"),l=a("89aa").f,c=a("6724").f,d=a("21dc"),u=a("ab58"),h=a("309c"),m=a("3f8c5"),p=a("843b"),f=a("88e4"),_=a("313b"),g=a("cc76").enforce,b=a("6f25"),v=a("3c60"),y=a("ccba"),w=a("31bb"),x=v("match"),C=s.RegExp,S=C.prototype,k=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,D=/a/g,T=/a/g,O=new C(D)!==D,$=m.UNSUPPORTED_Y,j=i&&(!O||$||y||w||f((function(){return T[x]=!1,C(D)!=D||C(T)==T||"/a/i"!=C(D,"i")}))),B=function(t){for(var e,a=t.length,i=0,s="",r=!1;i<=a;i++)e=t.charAt(i),"\\"!==e?r||"."!==e?("["===e?r=!0:"]"===e&&(r=!1),s+=e):s+="[\\s\\S]":s+=e+t.charAt(++i);return s},P=function(t){for(var e,a=t.length,i=0,s="",r=[],n={},o=!1,l=!1,c=0,d="";i<=a;i++){if(e=t.charAt(i),"\\"===e)e+=t.charAt(++i);else if("]"===e)o=!1;else if(!o)switch(!0){case"["===e:o=!0;break;case"("===e:k.test(t.slice(i+1))&&(i+=2,l=!0),s+=e,c++;continue;case">"===e&&l:if(""===d||_(n,d))throw new SyntaxError("Invalid capture group name");n[d]=!0,r.push([d,c]),l=!1,d="";continue}l?d+=e:s+=e}return[s,r]};if(r("RegExp",j)){for(var L=function(t,e){var a,i,s,r,l,c,m=this instanceof L,p=d(t),f=void 0===e,_=[],b=t;if(!m&&p&&f&&t.constructor===L)return t;if((p||t instanceof L)&&(t=t.source,f&&(e="flags"in b?b.flags:h.call(b))),t=void 0===t?"":u(t),e=void 0===e?"":u(e),b=t,y&&"dotAll"in D&&(i=!!e&&e.indexOf("s")>-1,i&&(e=e.replace(/s/g,""))),a=e,$&&"sticky"in D&&(s=!!e&&e.indexOf("y")>-1,s&&(e=e.replace(/y/g,""))),w&&(r=P(t),t=r[0],_=r[1]),l=n(C(t,e),m?this:S,L),(i||s||_.length)&&(c=g(l),i&&(c.dotAll=!0,c.raw=L(B(t),a)),s&&(c.sticky=!0),_.length&&(c.groups=_)),t!==b)try{o(l,"source",""===b?"(?:)":b)}catch(v){}return l},I=function(t){t in L||l(L,t,{configurable:!0,get:function(){return C[t]},set:function(e){C[t]=e}})},M=c(C),z=0;M.length>z;)I(M[z++]);S.constructor=L,L.prototype=S,p(s,"RegExp",L)}b("RegExp")},"6e0f":function(t,e,a){},a22e:function(t,e,a){},a35c:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"params"},[a("vxe-modal",{attrs:{title:"适配车型",id:"inReceiptSelectOrder",width:"1200","esc-closable":!0,"destroy-on-close":"",height:"500","min-width":"600","min-height":"100",resize:"",remember:"",storage:"",transfer:""},on:{hide:function(e){return t.$emit("input",!1)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[t.tableData.length?a("div",[a("div",{staticClass:"el_tree_box"},[a("xTable",{ref:"xTable",attrs:{tableColumn:t.tableColumn,maxHeight:"380",xData:t.tableData}}),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,50],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)]):t.loading?t._e():a("div",{staticClass:"dialog-footer"},[t._v(" 适配车型无数据 ")])])])],1)},s=[],r=a("b85c"),n=(a("e3df"),a("3db6"),a("74af"),a("fde8"),a("c9ce"),a("b1f0"),a("3c64"),a("f043")),o={data:function(){var t=this;return{loading:!1,tableColumn:[{title:"车款",field:"sales_name",formatter:function(t){var e=t.row;return e.sales_name?e.sales_name:e.attr_value_name},width:250},{title:"品牌",field:"brand_name",width:70},{title:"厂家",field:"show_name",width:100},{title:"车系",field:"car_series",width:120},{title:"排放标准",field:"emission_standard",width:70},{title:"年款",field:"years",width:100},{title:"上市年份",field:"c_variant_sop",width:120},{title:"生产年份",field:"c_variant_sop",width:120},{title:"停产年份",field:"c_variant_eop",width:100},{title:"排量",field:"displacement",width:100},{title:"发动机",field:"engine_type",width:100},{title:"适配来源",field:"unit_name",width:100,formatter:function(e){var a=e.row;return 1==t.idsObj[a.car_lib_id]?"OE码匹配":"自主选择"}}],idsObj:{},tableData:[],currentPage:1,pageSize:10,total:0}},watch:{value:function(t){!0===t&&2===this.type&&this.getLibraryId()},library_id:function(){1===this.type&&this.getLibraryId()},ids:function(){this.getData()}},props:{value:null,type:{type:Number,default:1},library_id:{type:Number|String,default:""},shop_goods_id:{type:Number|String,default:""},ids:{type:Array,default:function(){return[]}}},created:function(){var t=this;this.alltableData=[],this.allData=[],Object(n["a"])((function(e){var a=[];for(var i in e.data){var s,n=Object(r["a"])(e.data[i]);try{for(n.s();!(s=n.n()).done;){var o=s.value;a.push(o)}}catch(l){n.e(l)}finally{n.f()}}t.allData=a,t.$emit("loaded"),1==t.type&&t.getData()}))},methods:{getLibraryId:function(){var t=this;this.init(),this.library_id?(this.loading=!0,this.$api.serviceStationGetOeCodeOrCarLibraryList({library_id:this.library_id}).then((function(e){var a=e.data;if(200==a.code){var i=[],s=[];for(var r in a.data.car_library)i=i.concat(a.data.car_library[r]);for(var n in a.data.oe_code)s.push(a.data.oe_code[n]);t.ids=i,t.$emit("getOeCode",s.join(","))}t.loading=!1,t.getAttributeCarLibraryList()})).catch((function(){t.loading=!1}))):this.getAttributeCarLibraryList()},submit:function(){this.$emit("sumbitData",{params:this.currentRow,selectBox:this.selectBox})},GetValue:function(t){if(t)return this.$api.serviceStationGetOeCodeOrCarLibraryList({library_id:t})},getAttributeCarLibraryList:function(){var t=this;this.shop_goods_id&&0===this.ids.length&&this.$api.getAttributeCarLibraryList({shop_goods_id:this.shop_goods_id}).then((function(e){var a=e.data;if(200==a.code){var i=[];for(var s in a.data)i=i.concat(a.data[s]);t.alltableData=i,t.handleCurrentChange(1)}}))},getFairModelData:function(t){for(var e="",a=0;a<t.length;a++){if(e.length>100)break;e=e+t[a].sales_name+","}this.$emit("renderModel",e.slice(0,-1)),this.$parent.showModelsName=e.slice(0,-1)},handleCurrentChange:function(t){var e=this.alltableData.concat([]);this.tableData=e.splice((t-1)*this.pageSize,this.pageSize)},handleSizeChange:function(t){this.pageSize=t},init:function(){this.currentPage=1,this.total=0,this.alltableData=[],this.tableData=[]},getData:function(){var t=this;if(this.init(),this.allData.length&&this.ids.length){this.idsObj={};for(var e=0;e<this.ids.length;e++){if(-1==this.ids[e].car_lib_id)return this.total=this.allData.length,this.alltableData=this.allData,this.handleCurrentChange(1),this.$emit("getData",[{sales_name:"通用车型"}]),void this.getFairModelData([{sales_name:"通用车型"}]);this.idsObj[this.ids[e].car_lib_id]=this.ids[e].match_type}var a=[],i=[];this.allData.forEach((function(e){1==t.idsObj[e.car_lib_id]&&i.push(e),0==t.idsObj[e.car_lib_id]&&a.push(e)})),this.total=i.length+a.length,this.alltableData=a.concat(i),this.handleCurrentChange(1),this.$emit("getData",this.alltableData),this.getFairModelData(this.alltableData)}}}},l=o,c=a("2877"),d=Object(c["a"])(l,i,s,!1,null,"5577fe30",null);e["a"]=d.exports},a693:function(t,e,a){},a83e:function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},ab22:function(t,e,a){},abf9:function(t,e,a){},aeba:function(t,e,a){},b680:function(t,e,a){"use strict";var i=a("23e7"),s=a("da84"),r=a("e330"),n=a("5926"),o=a("408a"),l=a("1148"),c=a("d039"),d=s.RangeError,u=s.String,h=Math.floor,m=r(l),p=r("".slice),f=r(1..toFixed),_=function(t,e,a){return 0===e?a:e%2===1?_(t,e-1,a*t):_(t*t,e/2,a)},g=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},b=function(t,e,a){var i=-1,s=a;while(++i<6)s+=e*t[i],t[i]=s%1e7,s=h(s/1e7)},v=function(t,e){var a=6,i=0;while(--a>=0)i+=t[a],t[a]=h(i/e),i=i%e*1e7},y=function(t){var e=6,a="";while(--e>=0)if(""!==a||0===e||0!==t[e]){var i=u(t[e]);a=""===a?i:a+m("0",7-i.length)+i}return a},w=c((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!c((function(){f({})}));i({target:"Number",proto:!0,forced:w},{toFixed:function(t){var e,a,i,s,r=o(this),l=n(t),c=[0,0,0,0,0,0],h="",f="0";if(l<0||l>20)throw d("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return u(r);if(r<0&&(h="-",r=-r),r>1e-21)if(e=g(r*_(2,69,1))-69,a=e<0?r*_(2,-e,1):r/_(2,e,1),a*=4503599627370496,e=52-e,e>0){b(c,0,a),i=l;while(i>=7)b(c,1e7,0),i-=7;b(c,_(10,i,1),0),i=e-1;while(i>=23)v(c,1<<23),i-=23;v(c,1<<i),b(c,1,1),v(c,2),f=y(c)}else b(c,0,a),b(c,1<<-e,0),f=y(c)+m("0",l);return l>0?(s=f.length,f=h+(s<=l?"0."+m("0",l-s)+f:p(f,0,s-l)+"."+p(f,s-l))):f=h+f,f}})},c230:function(t,e,a){"use strict";a("abf9")},c473:function(t,e,a){"use strict";a("aeba")},cd05:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"params",attrs:{id:"dropImg"}},[2===t.type?a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("销售管理")]),a("el-breadcrumb-item",{staticClass:"attrbute"},[a("span",{on:{click:t.goBack}},[t._v("销售出库")])]),a("el-breadcrumb-item",[t._v(t._s(2==t.editType?"修改":"新增")+"销售出库")])],1):t._e(),a("div",{attrs:{id:"leixin"}},[a("div",{staticClass:"search_container"},[a("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.params,rules:t.rules}},[a("el-form-item",{attrs:{label:"销售组织：",size:"mini",prop:"company_id",rules:t.rules.company_id}},[a("getServiceCompany",{ref:"getServiceCompany",attrs:{searchParams:{is_service:2},fatherParams:t.params,disabled:2==t.editType},on:{getList:t.getCompany},model:{value:t.params.company_id,callback:function(e){t.$set(t.params,"company_id",e)},expression:"params.company_id"}})],1),a("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"客户名称：",size:"mini",prop:"customer_id",rules:t.rules.customer_id}},[a("getServiceUser",{attrs:{fatherParams:t.params,disabled:2==t.editType},model:{value:t.params.customer_id,callback:function(e){t.$set(t.params,"customer_id",e)},expression:"params.customer_id"}}),a("el-button",{staticStyle:{width:"auto"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.NewCustomer()}}},[t._v("新增客户")])],1),2==t.editType?[a("el-form-item",{attrs:{label:"单据状态：",size:"mini"}},[t._v(" "+t._s(t.params.auditor_status)+" ")]),a("el-form-item",{attrs:{label:"单据类型：",size:"mini"}},[t._v(" "+t._s(t.params.add_status)+" ")]),a("el-form-item",{attrs:{label:"单据号：",size:"mini"}},[t._v(" "+t._s(t.params.outstock_sn)+" ")]),a("el-form-item",{attrs:{label:"单据时间：",size:"mini"}},[t._v(" "+t._s(t.params.add_time)+" ")])]:t._e()],2)],1),1==t.editType?a("searchGoods",{attrs:{tableBox:t.tableData,searchParams:{company_id:t.params.company_id,customer_id:t.params.customer_id}},on:{addGoods:t.addGoods,openHistoryPrice:t.openHistoryPrice}}):t._e(),t._m(0),a("div",[a("xTable",{ref:"xTable",attrs:{maxHeight:200,"edit-rules":t.editRules,rowId:"goodsLists",tableColumn:t.tableColumn,xData:t.tableData,footerMethod:t.footerMethod}})],1),a("div",{staticClass:"costDetail"},[a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"costDetailTitle"},[t._v(" 折扣类型： ")]),a("el-radio",{attrs:{label:0},on:{change:t.computedTotalPrice},model:{value:t.params.discount_type,callback:function(e){t.$set(t.params,"discount_type",e)},expression:"params.discount_type"}},[t._v("无")]),a("el-radio",{attrs:{label:1},on:{change:t.computedTotalPrice},model:{value:t.params.discount_type,callback:function(e){t.$set(t.params,"discount_type",e)},expression:"params.discount_type"}},[t._v("整单打折")]),a("el-input",{staticClass:"discountInput",on:{input:t.computedTotalPrice,change:function(e){t.$publicFution.toFixedTwo(t.params,"discount_num",{greater:0,max:10}),t.computedTotalPrice()}},model:{value:t.params.discount_num,callback:function(e){t.$set(t.params,"discount_num",e)},expression:"params.discount_num"}},[a("span",{staticClass:"el-input__icon",attrs:{slot:"suffix"},slot:"suffix"},[t._v("折")])]),a("el-radio",{attrs:{label:2},on:{change:t.computedTotalPrice},model:{value:t.params.discount_type,callback:function(e){t.$set(t.params,"discount_type",e)},expression:"params.discount_type"}},[t._v("整单减")]),a("el-input",{staticClass:"discountInput",on:{input:t.computedTotalPrice,change:t.discountTotalChange},model:{value:t.params.discount_total_amount,callback:function(e){t.$set(t.params,"discount_total_amount",e)},expression:"params.discount_total_amount"}},[a("span",{staticClass:"el-input__icon",attrs:{slot:"suffix"},slot:"suffix"},[t._v("元")])])],1),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"costDetailTitle"},[t._v(" 其他费用： ")]),t._v(" 服务费： "),a("el-input",{staticClass:"discountInput",on:{input:t.computedTotalPrice,change:function(e){t.$publicFution.toFixedTwo(t.params,"service_charge",{min:0}),t.computedTotalPrice()}},model:{value:t.params.service_charge,callback:function(e){t.$set(t.params,"service_charge",e)},expression:"params.service_charge"}}),t._v(" 包装费： "),a("el-input",{staticClass:"discountInput",on:{input:t.computedTotalPrice,change:function(e){t.$publicFution.toFixedTwo(t.params,"packing_fee",{min:0}),t.computedTotalPrice()}},model:{value:t.params.packing_fee,callback:function(e){t.$set(t.params,"packing_fee",e)},expression:"params.packing_fee"}})],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"costDetailTitle"},[t._v("本次收款：")]),a("el-input",{staticClass:"discountInput",on:{change:t.payPriceChange,input:t.computedTotalPrice},model:{value:t.params.pay_price,callback:function(e){t.$set(t.params,"pay_price",e)},expression:"params.pay_price"}}),a("span",[t._v(" 欠款： "+t._s(t.params.arrears)+"元 ")])],1),a("el-col",{attrs:{span:12}},[t._v(" 备注： "),a("el-input",{staticStyle:{width:"80%"},attrs:{type:"text",maxlength:"200","show-word-limit":""},model:{value:t.params.abstract,callback:function(e){t.$set(t.params,"abstract",e)},expression:"params.abstract"}})],1)],1),a("div",[a("span",{staticClass:"costDetailTitle"},[t._v(" 配送方式：")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.params.delivery_demand_id,callback:function(e){t.$set(t.params,"delivery_demand_id",e)},expression:"params.delivery_demand_id"}},t._l(t.deliveryDemandList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.delivery_demand_name,value:t.delivery_demand_id}})})),1)],1),a("div",[a("span",{staticClass:"totalPrice"},[t._v(" 总金额 "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.params.settlement_price))])])])],1)],1),a("div",{staticClass:"dialog-footer"},[2==t.type?a("el-button",{on:{click:t.goBack}},[t._v("取消")]):t._e(),t.authority.b_add&&t.authority.b_print?a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submit(1)}}},[t._v("开单出库并打印")]):t._e(),t.authority.b_add?a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submit(2)}}},[t._v("开单出库")]):t._e()],1),t.isShowHistoryPrices?a("historyPrices",{attrs:{searchParams:{company_id:t.params.company_id,goods_id:t.currentScope.row&&t.currentScope.row.goods_id},company_id:t.params.company_id,row:t.currentScope},on:{sumbitData:t.changeRowPrice},model:{value:t.isShowHistoryPrices,callback:function(e){t.isShowHistoryPrices=e},expression:"isShowHistoryPrices"}}):t._e(),a("lodopDelivery",{ref:"lodopDelivery",attrs:{title:"serviceOutbound"}})],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goodsList"},[a("div",{staticClass:"goodsTitle"},[t._v(" 销售清单列表 ")])])}],r=(a("a9e3"),a("d3b7"),a("159b"),a("99af"),a("d81d"),a("e9c4"),a("b680"),a("5ebb")),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"params"},[a("vxe-modal",{attrs:{title:"历史价格（双击行可将价格带入页面或者单击行选中）",width:"1200","esc-closable":!0,"destroy-on-close":"",height:"600","min-width":"600","min-height":"100",resize:"",remember:"",storage:"",transfer:""},on:{hide:t.close},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.params}},[a("el-form-item",{attrs:{label:"客户名称",size:"mini"}},[a("erpUsers",{attrs:{searchParams:{company_id:t.company_id}},model:{value:t.params.customer_id,callback:function(e){t.$set(t.params,"customer_id",e)},expression:"params.customer_id"}})],1),a("el-form-item",{attrs:{size:"mini"}},[a("el-button",{staticStyle:{"margin-left":"50px"},attrs:{size:"mini",type:"primary"},on:{click:t.onSearch}},[t._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.onReset}},[t._v("重置")])],1),a("br"),a("el-form-item",{attrs:{label:"商品名字：",size:"mini"}},[t._v(" "+t._s(t.row.row.goods_name)+" ")]),a("el-form-item",{attrs:{label:"最近销售价：",size:"mini"}},[t._v(" "+t._s(t.showData.lately_price)+" ")]),a("el-form-item",{attrs:{label:"平均销售价：",size:"mini"}},[t._v(" "+t._s(t.showData.average_price)+" ")])],1),a("xTable",{ref:"xTable",attrs:{rowId:"historicalPrices",ajax:{url:"getHistoryOrder",params:t.params},tableColumn:t.tableColumns,maxHeight:"350px"},on:{cellDblclick:t.submit,getData:t.dealData,"current-change":t.currentChange}})],1),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submit()}}},[t._v("确定")]),a("el-button",{on:{click:t.close}},[t._v("取 消")])],1)])],1)},o=[],l={customer_id:"",customer_name:"",goods_id:""},c={data:function(){return{showData:{},params:this.$publicFution.deepCopy(l),currentScope:"",tableColumns:[{title:"序号",type:"index",width:65},{title:"业务日期",field:"business_time",width:100},{title:"单据号",field:"outstock_sn"},{title:"客户名称",field:"customer_name"},{title:"数量",field:"real_num",headerAlign:"right",align:"right",width:70},{title:"单位",field:"unit_name",width:70},{title:"售价",field:"unit_price",headerAlign:"right",align:"right",width:70}]}},props:{value:null,company_id:"",row:{type:Object,default:function(){}},searchParams:{type:Object,default:function(){}}},methods:{dealData:function(t){var e=t.data;this.showData=e.data},currentChange:function(t){this.currentScope=t},close:function(){this.$emit("input",!1)},onReset:function(){this.params=this.$publicFution.deepCopy(l),this.params=Object.assign(this.params,this.searchParams),this.onSearch()},onSearch:function(){this.$refs.xTable._getData(1)},submit:function(t){var e="";if(t)e=t.row;else if(e=this.currentScope.row,!e)return;this.$emit("sumbitData",e),this.close()}},created:function(){this.params=Object.assign(this.params,this.searchParams)}},d=c,u=a("2877"),h=Object(u["a"])(d,n,o,!1,null,"8a217cc0",null),m=h.exports,p=a("52be"),f=a("78d2"),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"params",attrs:{id:"dropImg"}},[a("div",{staticClass:"search_container"},[a("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.params,rules:t.rules}},[a("div",{staticStyle:{"margin-top":"2px"}},[a("el-form-item",{staticStyle:{width:"620px"},attrs:{label:"商品信息",size:"mini",prop:"oe_code"}},[a("el-input",{staticStyle:{width:"388px"},attrs:{maxlength:"100",placeholder:"请输入品牌、商品名称、分类、编码、品牌件码/OE码、适用车型",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch()}},model:{value:t.params.goods_text,callback:function(e){t.$set(t.params,"goods_text",e)},expression:"params.goods_text"}}),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.onSearch()}}},[t._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.onReset}},[t._v("重置")])],1),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"VIN码:",size:"mini"}},[a("vinCode",{ref:"vinCode",on:{search:t.vinSearch},model:{value:t.params.vin,callback:function(e){t.$set(t.params,"vin",e)},expression:"params.vin"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.vinSearch}},[t._v("查询")]),a("el-button",{class:t.showModelIsLoad?"":"is-disabled",staticStyle:{width:"auto"},attrs:{type:"primary",size:"mini"},on:{click:t.openSelectModel}},[t._v("选择车型")])],1)],1)])],1),a("div",{staticStyle:{"margin-left":"50px"}},[a("Classification",{ref:"Classification",attrs:{searchParams:t.params,type:2},on:{search:t.searchChange}})],1),a("div",{staticClass:"goodsList"},[a("div",{staticClass:"goodsTitle"},[t._v(" 商品列表 ")]),a("div",{staticClass:"goodsInfo"},[a("getServiceBatch",{attrs:{searchParams:t.params},on:{change:t.batchChange},model:{value:t.params.batch,callback:function(e){t.$set(t.params,"batch",e)},expression:"params.batch"}}),a("getServiceAllocation",{attrs:{searchParams:t.params},on:{change:t.onSearch},model:{value:t.params.allocation_id,callback:function(e){t.$set(t.params,"allocation_id",e)},expression:"params.allocation_id"}}),a("getServiceWarehouse",{attrs:{searchParams:t.params},on:{change:t.warehouseChange},model:{value:t.params.warehouse_id,callback:function(e){t.$set(t.params,"warehouse_id",e)},expression:"params.warehouse_id"}})],1)]),a("div",[a("xTable",{ref:"xTableTwo",attrs:{maxHeight:200,rowId:"goodsList",sign:{str:"batch_id",arr:t.tableBox},tableColumn:t.tableColumn,ajax:{url:"serviceStationGetSalesOutGoodsList",params:t.params}},on:{getData:t.dealData}})],1),a("modelDetail",{attrs:{type:2,library_id:t.currentCarIds},model:{value:t.isShowModelDetail,callback:function(e){t.isShowModelDetail=e},expression:"isShowModelDetail"}}),a("selectModel",{ref:"selectModel",on:{sumbitData:t.carModelChange,load:function(e){t.showModelIsLoad=!0}},model:{value:t.isShowModel,callback:function(e){t.isShowModel=e},expression:"isShowModel"}})],1)},g=[],b=(a("a15b"),{vin:"",car_lib_name:""}),v={data:function(){var t=this,e=this.$createElement;return{tableColumn:[{title:"商品编号",field:"goods_id",width:80},{title:"库位码",field:"goods_sn",width:90},{field:"name",title:"操作",width:50,fixed:"right",slots:{default:function(a){return[e("el-button",{attrs:{size:"small",type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(){t.$emit("addGoods",a)}}})]}}},{title:"商品名称",field:"goods_name"},{title:"品牌",field:"brand_name",width:80},{title:"分类",field:"goods_type_name",width:100},{title:"适配车型",field:"auditor_time",width:80,slots:{default:function(a){return[e("el-button",{attrs:{size:"small",type:"text"},on:{click:function(){return t.seeCarModels(a.row)}}},["查看"])]}}},{title:"仓库",field:"warehouse_name",width:80},{title:"货位",field:"allocation_name",width:80},{title:"库存数量",field:"available_stocks",headerAlign:"right",align:"right",width:84,formatter:function(t){var e=t.row;return e.available_stocks+" "+e.unit_name}},{title:"销售指导价",field:"guide_price",headerAlign:"right",align:"right",width:84}]}}},y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"Accordion"},[a("div",{staticClass:"SelectedList fcl"},[a("div",{staticStyle:{"margin-right":"50px"}},[t.tagObj?a("span",{staticClass:"lable"},[t._v("已选条件：")]):t._e(),t.tagObj.oneType?a("el-tag",{key:"oneType",attrs:{size:"medium",closable:""},on:{close:function(e){return t.removeTag("oneType")}}},[t._v(" "+t._s(1==t.type?"一级分类":"二级分类")+" : "+t._s(t.tagObj.oneType.gc_name)+" ")]):t._e(),t.tagObj.twoType?a("el-tag",{key:"twoType",attrs:{size:"medium",closable:""},on:{close:function(e){return t.removeTag("twoType")}}},[t._v(" "+t._s(1==t.type?"二级分类":"三级分类")+" : "+t._s(t.tagObj.twoType.gc_name)+" ")]):t._e(),t.tagObj.brand?a("el-tag",{key:"brand",attrs:{size:"medium",closable:""},on:{close:function(e){return t.removeTag("brand")}}},[t._v(" 品牌："+t._s(t.tagObj.brand.brand_name)+" ")]):t._e(),t.tagObj.carModel?a("el-tag",{key:"carModel",attrs:{size:"medium",closable:""},on:{close:function(e){return t.removeTag("carModel")}}},[t._v(" 车型："+t._s(t.tagObj.carModel.sales_name)+" ")]):t._e()],1)]),a("erpCollapse",{attrs:{accordion:"",height:30},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("erpCollapseItem",{attrs:{title:1==t.type?"一级分类:":"二级分类：",name:"2",rightTitle:"更多"}},t._l(t.oneTypes,(function(e,i){return a("el-tag",{key:i,attrs:{type:t.tagObj.oneType.gc_id==e.gc_id?"danger":""},on:{click:function(a){return t.typeChange(e,1)}}},[t._v(t._s(e.gc_name))])})),1),a("erpCollapseItem",{attrs:{title:1==t.type?"二级分类：":"三级分类：",name:"3",rightTitle:"更多",disabled:!t.tagObj.oneType}},t._l(t.twoTypes,(function(e,i){return a("el-tag",{key:i,attrs:{type:t.tagObj.twoType.gc_id==e.gc_id?"danger":""},on:{click:function(a){return t.typeChange(e,2)}}},[t._v(t._s(e.gc_name)+" ")])})),1)],1),t.brandList.length?a("div",{staticClass:"searchItem"},[a("erpCollapse",{attrs:{accordion:"",height:30},model:{value:t.brandBox,callback:function(e){t.brandBox=e},expression:"brandBox"}},[a("erpCollapseItem",{attrs:{title:"品牌列表：",name:"2",rightTitle:"更多"}},t._l(t.brandList,(function(e,i){return a("el-tag",{key:i,attrs:{type:t.tagObj.brand.brand_id==e.brand_id?"danger":""},on:{click:function(a){return t.brandChange(e,i)}}},[t._v(t._s(e.brand_name))])})),1)],1)],1):t._e(),t.carModelBox.length?a("div",{staticClass:"searchItem"},[a("span",{staticClass:"brandtitle"},[t._v("车型列表：")]),t._l(t.carModelBox,(function(e,i){return a("el-tag",{key:i,attrs:{type:t.tagObj.carModel.car_lib_id==e.car_lib_id?"danger":""},on:{click:function(a){return t.carModelChange(e,i)}}},[t._v(" "+t._s(e.sales_name)+" "),a("el-button",{staticStyle:{"line-height":"5px"},attrs:{type:"text"},on:{click:function(a){return a.stopPropagation(),function(){t.car_lib_id=e.car_lib_id,t.isShowCarModelDetail=!0}.apply(null,arguments)}}},[t._v("详情")])],1)}))],2):t._e(),a("carModelDetail",{ref:"carModelDetail",attrs:{car_lib_id:t.car_lib_id},model:{value:t.isShowCarModelDetail,callback:function(e){t.isShowCarModelDetail=e},expression:"isShowCarModelDetail"}})],1)])},w=[],x=(a("e3df"),a("410a"),a("33fd"),a("b1f0"),a("3c64"),a("3db6"),a("1e09"),a("42aa"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"collapse"},[t._t("default")],2)}),C=[],S=(a("7801"),a("fde8"),a("c9ce"),{props:{accordion:Boolean,value:{type:[Array,String,Number],default:function(){return[]}},height:{type:Number,default:35}},data:function(){return{activeNames:[].concat(this.value)}},provide:function(){return{collapse:this,height:this.height}},watch:{value:function(t){this.activeNames=[].concat(t)}},methods:{setActiveNames:function(t){t=[].concat(t);var e=this.accordion?t[0]:t;this.activeNames=t,this.$emit("input",e),this.$emit("change",e)},switchCollapse:function(t){if(this.accordion)this.setActiveNames(!this.activeNames[0]&&0!==this.activeNames[0]||this.activeNames[0]!==t.name?t.name:"");else{var e=this.activeNames.slice(0),a=e.indexOf(t.name);a>-1?e.splice(a,1):e.push(t.name),this.setActiveNames(e)}}}}),k=S,D=Object(u["a"])(k,x,C,!1,null,"ba54d414",null),T=D.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"collapse_item",style:t.styleObj},[a("div",{staticClass:"collapse_content"},[a("div",{ref:"collapse_all_height",staticClass:"collapse_all_height"},[a("span",{staticClass:"collapse_title"},[t.$slots.title?t._t("title"):t.title?a("span",[t._v(t._s(t.title))]):t._e()],2),a("span",{staticClass:"collapse_right_title",on:{click:t.switchCollapse}},[t.$slots.right?t._t("right"):t.rightTitle?a("span",[t._v(t._s(t.rightTitle))]):t._e()],2),a("span",[t._t("default")],2)])])])},$=[],j=(a("e326"),a("3736"),{data:function(){return{active:!1,currentHeight:"",styleObj:{}}},props:{title:{type:String,default:""},rightTitle:{type:String,default:""},name:{type:[String,Number],default:function(){return this._uid}}},created:function(){this.initHeight()},inject:["collapse","height"],watch:{"collapse.activeNames":{handler:function(t){var e=this;setTimeout((function(){t.includes(e.name)?e.active=!0:e.active=!1,e.isExpand()}),50)}}},methods:{initHeight:function(){var t=(this.active?this.currentHeight:this.height)+"px";this.styleObj={lineHeight:this.height+"px",height:t}},isExpand:function(){this.$refs.collapse_all_height&&this.$refs.collapse_all_height.offsetHeight>this.height+5?this.currentHeight=this.$refs.collapse_all_height.offsetHeight:this.currentHeight=this.height,this.initHeight()},switchCollapse:function(){this.active=!this.active,this.collapse&&this.collapse.switchCollapse(this)}}}),B=j,P=(a("df04"),Object(u["a"])(B,O,$,!1,null,"41330f7d",null)),L=P.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"carModelDetail"},[a("vxe-modal",{staticClass:"carModelDetail",attrs:{title:"车型详情",id:"inReceiptSelectOrder",width:"850","esc-closable":!0,"destroy-on-close":"",height:"650","min-width":"700","min-height":"100",resize:"",remember:"",storage:"",transfer:""},on:{hide:function(e){return t.$emit("input",!1)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("div",{staticClass:"carModelContent"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formData}},[a("el-form-item",{attrs:{label:"厂家：",size:"mini"}},[a("span",{staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t.formData.show_name)+" ")])]),a("el-form-item",{attrs:{label:"品牌：",size:"mini"}},[a("span",[t._v(t._s(t.formData.brand_name))])]),a("el-form-item",{attrs:{label:"车系：",size:"mini"}},[t._v(" "+t._s(t.formData.car_series)+" ")]),a("el-form-item",{attrs:{label:"车型：",size:"mini"}},[t._v(" "+t._s(t.formData.car_type)+" ")]),a("el-form-item",{attrs:{label:"年款：",size:"mini"}},[t._v(" "+t._s(t.formData.years)+" ")]),a("el-form-item",{attrs:{label:"上市时间：",size:"mini"}},[t._v(" "+t._s(t.formData.c_variant_sop)+" ")]),a("el-form-item",{attrs:{label:"停产时间：",size:"mini"}},[t._v(" "+t._s(t.formData.c_variant_eop)+" ")]),a("el-form-item",{attrs:{label:"国产合资进口类型：",size:"mini"}},[t._v(" "+t._s(t.formData.joint_type)+" ")]),a("el-form-item",{attrs:{label:"排放标准：",size:"mini"}},[t._v(" "+t._s(t.formData.emission_standard)+" ")]),a("el-form-item",{attrs:{label:"最大功率（kw）：",size:"mini"}},[t._v(" "+t._s(t.formData.max_power)+" ")]),a("el-form-item",{attrs:{label:"驱动形式：",size:"mini"}},[t._v(" "+t._s(t.formData.drive_mode)+" ")]),a("el-form-item",{attrs:{label:"变速器类型：",size:"mini"}},[t._v(" "+t._s(t.formData.transmission_type)+" ")]),a("el-form-item",{attrs:{label:"变速器描述：",size:"mini"}},[t._v(" "+t._s(t.formData.transmission_desc)+" ")]),a("el-form-item",{attrs:{label:"档位数：",size:"mini"}},[t._v(" "+t._s(t.formData.gear_number)+" ")]),a("el-form-item",{attrs:{label:"发动机型号：",size:"mini"}},[t._v(" "+t._s(t.formData.engine_type)+" ")]),a("el-form-item",{attrs:{label:"排量(升)：",size:"mini"}},[t._v(" "+t._s(t.formData.displacement)+" ")]),a("el-form-item",{attrs:{label:"气缸数(个)：",size:"mini"}},[t._v(" "+t._s(t.formData.cylinder_num)+" ")]),a("el-form-item",{attrs:{label:"燃油类型：",size:"mini"}},[t._v(" "+t._s(t.formData.fuel_type)+" ")]),a("el-form-item",{attrs:{label:"车门数：",size:"mini"}},[t._v(" "+t._s(t.formData.door_num)+" ")]),a("el-form-item",{attrs:{label:"座位数（个）：",size:"mini"}},[t._v(" "+t._s(t.formData.seats_num)+" ")])],1)],1),a("div",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){return t.$emit("input",!1)}}},[t._v("关 闭")])],1)])],1)},M=[],z=a("b85c"),N=a("f043"),E={data:function(){return{formData:{}}},watch:{value:function(t){!0===t&&this.getData()}},props:{value:null,car_lib_id:{type:String,default:""}},created:function(){var t=this;Object(N["a"])((function(e){t.allData=e.data}))},methods:{getData:function(){for(var t in this.allData){var e,a=Object(z["a"])(this.allData[t]);try{for(a.s();!(e=a.n()).done;){var i=e.value;i.car_lib_id==this.car_lib_id&&(this.formData=i)}}catch(s){a.e(s)}finally{a.f()}}}}},R=E,A=(a("c473"),Object(u["a"])(R,I,M,!1,null,null,null)),F=A.exports,H={props:{searchParams:{type:Object,default:function(){}},type:{type:Number,default:1}},data:function(){return{activeNames:[],brandList:[],brandBox:[],allBrandList:[],isShowCarModelDetail:!1,tagObj:{oneType:"",twoType:"",brand:"",carModel:""},carModelBox:[],car_lib_id:"",oneTypes:[],twoTypes:[]}},methods:{removeTag:function(t){this.tagObj[t]="","oneType"===t?this.clear():"twoType"===t?this.tagObj.brand="":"carModel"===t&&(this.carModelBox=[]),this.search()},_addCarModel:function(t){this.carModelBox=t,t.length&&this.carModelChange(t[0])},carModelChange:function(t){this.tagObj.carModel=t,this.search()},brandChange:function(t){this.tagObj.brand=t,this.search()},search:function(){this.searchParams.gc_id=this.tagObj.twoType?this.tagObj.twoType.gc_id:this.tagObj.oneType?this.tagObj.oneType.gc_id:"",this.searchParams.brand_id=this.tagObj.brand.brand_id,this.searchParams.car_lib_id=this.tagObj.carModel.car_lib_id,this.$emit("search",this.tagObj)},typeChange:function(t,e){1===e?(this.twoTypes=t.child,this.tagObj.oneType=t,this.tagObj.twoType=""):this.tagObj.twoType=t,this.tagObj.brand="",this.search()},initClassList:function(t){var e=[];if(1===this.type)t.class_list.forEach((function(t){e=e.concat(t.child)})),this.classList=e;else{for(var a in t.goods_type_list){var i=t.goods_type_list[a].child?t.goods_type_list[a].child:[],s={gc_id:a,gc_name:t.goods_type_list[a].type_info.goods_type_name,child:i.map((function(t){return t.gc_id=t.goods_type_id,t.gc_name=t.goods_type_name,t}))};e.push(s)}this.classList=e}this.renderClass(this.renderObj),this.renderBrank(this.renderObj)},renderClass:function(t){var e=this,a=t.class_list;this.twoTypes=[],this.oneTypes=[],this.classList.forEach((function(t){var i=!1;t.child.forEach((function(t){for(var s=0;s<a.length;s++)a[s]-0===t.gc_id-0&&(i=!0,e.twoTypes.push(t))})),i&&e.oneTypes.push(t)}))},init:function(){var t,e=this;1===this.type?t=this.$axMethod["getClassAndBrandList"]():2==this.type&&(t=this.$api["serviceStationGetAllClassAndBrand"]()),t.then((function(t){var a=t.data;200==a.code&&(e.$emit("InitializeThe",a.data),e.allBrandList=a.data.brand_list.concat([]),e.initClassList(a.data),e.renderBrank(e.renderObj),e.renderClass(e.renderObj))}))},clear:function(){this.tagObj={oneType:"",twoType:"",brand:"",carModel:""},this.carModelBox=[],this.search(),this.activeNames=[]},renderBrank:function(t){var e=t.brand_list;this.brandList=this.allBrandList.filter((function(t){for(var a=0;a<e.length;a++)if(e[a]-0===t.brand_id-0)return!0;return!1}))},echoSearch:function(t){200===t.code&&(this.renderObj=t.data,this.renderObj={brand_list:t.data.brand_list?t.data.brand_list:[],class_list:t.data.class_list?t.data.class_list:[]},this.renderBrank(this.renderObj),this.renderClass(this.renderObj))}},mounted:function(){this.classList=[],this.renderObj={brand_list:[],class_list:[]},this.init()},components:{erpCollapse:T,erpCollapseItem:L,carModelDetail:F}},V=H,G=(a("c230"),Object(u["a"])(V,y,w,!1,null,"61294714",null)),U=G.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("vxe-modal",{staticClass:"selectModel",attrs:{title:"选择车型",id:"inReceiptSelectOrder",width:"1250","esc-closable":!0,"destroy-on-close":"",height:"600","min-width":"600","min-height":"100",resize:"",remember:"",storage:"",transfer:""},on:{hide:function(e){return t.$emit("input",!1)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("div",{staticClass:"el_tree_box"},[a("div",{staticClass:"brand"},[a("span",{staticClass:"brandTitle",on:{click:function(e){t.searchParams.brand="",t.active=0}}},[t._v("品牌")]),t._l(t.letterBox,(function(e,i){return a("el-link",{key:i,class:t.currentLetter===e?"activeClass hoverClass":"hoverClass",attrs:{underline:!1},on:{click:function(a){return t.searchBrand(e)}}},[t._v(t._s(e))])})),a("el-input",{directives:[{name:"show",rawName:"v-show",value:0===t.active,expression:"active === 0"}],staticClass:"search-input",attrs:{placeholder:"品牌检索",clearable:""},on:{change:t.keywordSearch},model:{value:t.keywords,callback:function(e){t.keywords="string"===typeof e?e.trim():e},expression:"keywords"}})],2),a("div",{ref:"carContainer",staticClass:"carContainer",on:{scroll:t.scrollHandler}},[a("div",{ref:"brandBox0",staticClass:"brandBox"},[t.currentLetter?[a("div",{staticClass:"brandFlex"},t._l(t.BrandBox,(function(e,i){return a("span",{key:i,staticClass:"brandItem",class:t.searchParams.brand===i?"activeClass hoverClass":"hoverClass",on:{click:function(a){return t.selecBrand(i,t.letter,e)}}},[a("img",{attrs:{src:e[0]&&e[0].brand_logo,alt:""}}),a("span",{staticClass:"brandName",domProps:{innerHTML:t._s(t.highlightKeywords(i))}})])})),0),0===Object.keys(t.BrandBox).length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" 暂无数据 ")]):t._e()]:[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.searchParams.brand,expression:"!searchParams.brand"}]},[t.isLoading?a("div",{staticClass:"loadingText"},[t._v("Loading...")]):t._l(t.calcAllBrandBox,(function(e,i){return a("div",{key:i},[a("p",{staticClass:"brandHorizontalTitle"},[t._v(t._s(i))]),a("hr"),a("div",{staticClass:"brandFlex"},t._l(t.calcAllBrandBox[i],(function(e,s){return a("span",{key:s,staticClass:"brandItem",class:t.searchParams.brand===s?"activeClass hoverClass":"hoverClass",on:{click:function(a){return t.selecBrand(s,i,e)}}},[a("img",{attrs:{src:e[0]&&e[0].brand_logo,alt:""}}),a("span",{staticClass:"brandName",attrs:{title:s},domProps:{innerHTML:t._s(t.highlightKeywords(s))}})])})),0)])})),0===Object.keys(t.calcAllBrandBox).length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" 暂无数据 ")]):t._e()],2),a("div",{directives:[{name:"show",rawName:"v-show",value:t.searchParams.brand,expression:"searchParams.brand"}]},[a("div",{staticClass:"brandFlex"},[a("span",{staticClass:"brandItem activeClass"},[a("img",{attrs:{src:t.searchParams.brand_logo,alt:""}}),a("span",{staticClass:"brandName"},[t._v(t._s(t.searchParams.brand))])])])])]],2),a("div",{directives:[{name:"show",rawName:"v-show",value:t.active>=1,expression:"active >= 1"}],ref:"brandBox1",staticClass:"carSeries"},[a("div",[a("span",{staticClass:"carSeriesTitle"},[t._v("全部车系")]),a("span",{staticClass:"carSeriesDesc"},[t._v(" 共 "+t._s(t.carSerieslength)+"个车系 , "+t._s(t.carTypeLength)+"个车型")])]),a("hr"),t._l(t.carSeriesTitleOrder,(function(e){return a("div",{key:e,staticClass:"carSeriesBox"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"text",title:e,size:"mini"}},[t._v(t._s(e))])],1),a("el-col",{attrs:{span:21}},t._l(t.carSeriesOrder,(function(i){return a("div",{key:i},[t.carSeriesBox[e][i]?[a("el-row",{staticClass:"carSeriesBoxRow"},[a("el-col",{staticClass:"carSeriesBoxTitle",attrs:{span:2}},[t._v(" "+t._s(i)+"： ")]),a("el-col",{attrs:{span:22}},t._l(t.carSeriesBox[e][i],(function(e,s){return a("span",{key:s,staticClass:"carSeriesBoxItem",attrs:{title:s},on:{click:function(a){return t.selecModel(e,i+s)}}},[a("el-popover",{key:s,attrs:{placement:"bottom",width:"230","popper-class":"selectModelPopover"}},[a("div",{staticClass:"displacementYears"},[a("div",[a("h1",{staticClass:"displacementYearsTitle"},[t._v("选择排量")]),t.active>=2?a("div",t._l(t.displacementBox,(function(e,r){return a("div",{key:r,on:{click:function(e){return t.selecDisplacement(r,i+s+r)}}},[a("span",{class:t.searchParams.displacement===i+s+r?"activeClassTwo displacementYearsName":"displacementYearsName"},[t._v(t._s(r))])])})),0):t._e()]),a("div",[a("h1",{staticClass:"displacementYearsTitle"},[t._v("选择年款")]),t.active>=3?a("div",t._l(t.yearsBox,(function(e,i){return a("div",{key:i,on:{click:function(a){return t.submit(e)}}},[a("span",{staticClass:"displacementYearsName"},[t._v(t._s(i))])])})),0):t._e()])]),a("el-button",{class:t.searchParams.model===i+s?"activeClassTwo":"",attrs:{slot:"reference",type:"text",title:s,size:"mini"},slot:"reference"},[t._v(t._s(s))])],1)],1)})),0)],1)]:t._e()],2)})),0)],1)],1)}))],2)])]),!t.isLoading&&t.showToTop?a("div",{staticClass:"scrollToTop",on:{click:t.scrollToTop}},[a("p",{staticClass:"icon"}),t._v("返回顶部 ")]):t._e()])],1)},Y=[],K=a("2909"),J=(a("6f78"),a("de3b"),a("613b"),a("d605"),a("d063"),a("fb24"),a("fe82"),a("c07b"),a("fca2")),W=a("fde9"),X={data:function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return{letterBox:t.split(""),carTypeLength:0,carSerieslength:0,currentLetter:"",active:0,carSeriesOrder:"轿车,SUV,MPV,跑车,新能源,客车,其他".split(","),carSeriesTitleOrder:[],searchParams:{brand:"",model:"",displacement:""},isLoading:!0,keywords:"",isKeywordsSwitch:"",allBrandBox:{},filterBrandBox:{},showToTop:!1,BrandBox:{},carSeriesBox:{},displacementBox:{},yearsBox:{}}},computed:{calcAllBrandBox:function(){return this.isKeywordsSwitch?this.filterBrandBox:this.allBrandBox}},props:{value:null,data:{type:Object,default:function(){}}},created:function(){this.getData()},methods:{getData:function(){this.allData=[],this.isLoading=!0;var t=this;setTimeout((function(){Object(N["a"])((function(e){t.allBrandBox=Object.freeze(Object(W["b"])(e.data)),t.isLoading=!1,t.$emit("load")}))}),0)},highlightKeywords:function(t){if(!this.keywords||!t.includes(this.keywords))return t;var e=new RegExp(this.keywords,"ig"),a=t.replace(e,'<span style="color:red;">'.concat(this.keywords,"</span>"));return a},keywordSearch:function(){this.isLoading=!0;var t=Object(W["e"])({list:this.allBrandBox,letter:this.currentLetter,keywords:this.keywords});this.currentLetter?this.BrandBox=Object.freeze(t):this.filterBrandBox=Object.freeze(t),this.isLoading=!1,this.isKeywordsSwitch=this.keywords},searchBrand:function(t){if(this.keywords="",!t||this.currentLetter===t)return this.isLoading=!1,void(this.currentLetter="");this.currentLetter=t,this.BrandBox=this.allBrandBox[t]||{},this.isLoading=!0,this.searchParams.brand="",this.active=0},selecBrand:function(t,e,a){this.searchParams.brand=t;var i=this.currentLetter?this.BrandBox[t]:this.allBrandBox[e][t],s=Object(W["d"])(i);console.log(s),this.carSeriesBox=s.obj,this.carTypeLength=s.total,this.carSerieslength=s.carSeriesArr.length;var r=[];this.carSeriesTitleOrder=Object.keys(this.carSeriesBox).filter((function(t){if(-1===t.indexOf("进口"))return!0;r.push(t)})).concat(r),this.active=1,this.searchParams.brand_logo=a[0].brand_logo},selecModel:function(t,e){this.searchParams.model=e;var a={};t.forEach((function(t){a[t.displacement]||(a[t.displacement]=[]),a[t.displacement].push(t)})),this.displacementBox=a,this.active=2},selecDisplacement:function(t,e){var a={};this.displacementBox[t].forEach((function(t){a[t.years]||(a[t.years]=[]),a[t.years].push(t)})),this.yearsBox=a,this.active=3,this.searchParams.displacement=e},submit:function(t){this.active=1,this.searchParams.displacement="",this.$emit("sumbitData",t),Object(K["a"])(document.getElementsByClassName("selectModelPopover")).forEach((function(t){t.style.display="none"}))},scrollToTop:function(){var t=this;this.$refs.carContainer.scrollTo(0,0),this.$nextTick((function(){t.showToTop=!1}))},scrollHandler:Object(J["b"])((function(t){this.showToTop=t.target.scrollTop>=50}),200)}},Q=X,Z=(a("432c"),a("4d29"),Object(u["a"])(Q,q,Y,!1,null,"4a41a500",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("el-input",{attrs:{size:"small",maxlength:"20",placeholder:"输入VIN码或点击相机传图",clearable:""},on:{input:function(e){return t.$emit("input",t.value)},change:function(e){return t.$emit("search")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.$emit("search")}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("i",{staticClass:"el-input__icon el-icon-camera",attrs:{slot:"suffix"},on:{click:function(e){t.isShowIdentifyVin=!t.isShowIdentifyVin,t.isIdentifyingLoading=0}},slot:"suffix"})]),a("el-popover",{staticClass:"el-popover-useTutorial",attrs:{placement:"top",width:"160"},model:{value:t.isShowIdentifyVin,callback:function(e){t.isShowIdentifyVin=e},expression:"isShowIdentifyVin"}},[a("div",{staticClass:"useTutorialBox"},[0===t.isIdentifyingLoading?a("div",[a("div",{staticClass:"useTutorialImg"},[a("el-input",{attrs:{type:"textarea",contenteditable:"true",placeholder:"拖拽或复制图片到这里"},nativeOn:{paste:function(e){return t.copyImag.apply(null,arguments)}}}),a("span",{staticClass:"content"},[t._v("拖拽或复制图片到这里")])],1),a("div",[a("input",{attrs:{type:"file"},on:{change:t.uploadImg}}),a("el-button",{attrs:{type:"primary"}},[t._v("选择文件")])],1)]):1===t.isIdentifyingLoading?a("div",[a("div",{staticClass:"loadingBox"},[t._v(" 正在加载图片. . . ")])]):a("div",[a("img",{attrs:{src:t.imgurl,alt:""}})]),a("span",{staticClass:"close",on:{click:function(e){t.isShowIdentifyVin=!1,t.isIdentifyingLoading=0}}},[a("i",{staticClass:"el-icon-close"})])])])],1)},at=[];function it(t){return new Promise((function(e,a){if(t.clipboardData||t.originalEvent){var i=t.clipboardData||t.originalEvent.clipboardData;if(i.items){for(var s,r=0;r<i.items.length;r++)-1!==i.items[r].type.indexOf("image")&&(s=i.items[r].getAsFile());var n=new FileReader;n.onload=function(t){st(t.target.result,(function(t){e(t)}))},n.readAsDataURL(s)}else a()}else a()}))}function st(t,e){var a=new Image;a.src=t,a.onload=function(){var t=document.createElement("canvas"),i=t.getContext("2d");t.width=a.naturalWidth,t.height=a.naturalHeight,i.drawImage(a,0,0,t.width,t.height),e(t.toDataURL("image/jpeg",.2))}}function rt(t){return new Promise((function(e){var a=new FileReader;a.onload=function(t){st(t.target.result,(function(t){e(t)}))},a.readAsDataURL(t)}))}var nt={data:function(){return{isIdentifyingLoading:0,isShowIdentifyVin:!1}},props:{value:{type:String||Number,default:""}},mounted:function(){this.dropImg()},methods:{_close:function(){this.isShowIdentifyVin=!1},dropImg:function(){var t=this,e=this.$myDocument.getElementById("dropImg");e.addEventListener("dragover",(function(t){t.stopPropagation(),t.preventDefault()})),e.ondrop=function(e){e.stopPropagation(),e.preventDefault();var a=e.dataTransfer.files[0];t.isIdentifyingLoading=1,rt(a).then((function(e){t.imgurl=e,t.identifyImageVin()}))}},uploadImg:function(t){var e=this,a=t.target.files[0],i=a.name.substring(a.name.lastIndexOf(".")+1).toLocaleLowerCase();"jpg"==i||"jpeg"==i||"png"==i||"bmp"==i?(this.isIdentifyingLoading=1,rt(a).then((function(t){e.imgurl=t,e.identifyImageVin()}))):(t.target.valle="",this.$message.warning("请上传图片！"))},copyImag:function(t){var e=this;this.isIdentifyingLoading=1,it(t).then((function(t){e.imgurl=t,e.identifyImageVin()})).catch((function(){}))},identifyImageVin:function(){var t=this;this.$axMethod.identifyImageVin({image:this.imgurl}).then((function(e){var a=e.data;200==a.code?(t.$emit("input",a.data.vin_code),t.isShowIdentifyVin=!0,t.isIdentifyingLoading=2):t.isIdentifyingLoading=0})).catch((function(){t.isIdentifyingLoading=0}))}}},ot=nt,lt=(a("003f"),Object(u["a"])(ot,et,at,!1,null,"5ae4dea8",null)),ct=lt.exports,dt=a("a35c"),ut={mixins:[v],data:function(){return{isShowModel:!1,currentCarIds:[],isShowModelDetail:!1,isShowCarTypes:!1,showModelIsLoad:!1,params:this.$publicFution.deepCopy(b)}},props:{searchParams:{type:Object,default:function(){}},tableBox:{type:Object,default:function(){return[]}}},components:{selectModel:tt,vinCode:ct,Classification:U,modelDetail:dt["a"]},created:function(){this.params=Object.assign(this.params,this.searchParams)},methods:{vinSearch:function(){var t=this.params.vin,e=this.params.company_id;this.$refs.Classification.clear(),this.params=Object.assign({},{vin:t,company_id:e}),this.getFairModel(),this.$refs.vinCode._close()},searchChange:function(t){if(t.carModel){delete this.params.car_lib_id;var e=t.carModel.car_list.map((function(t){return t.sales_name}));this.params.car_lib_name=e.join(",")}this.onSearch()},onSearch:function(t){this.params=Object.assign(this.params,this.searchParams),this.$refs.xTableTwo._getData(t),this.$refs.vinCode._close()},onReset:function(){this.params=this.$publicFution.deepCopy(b),this.onSearch(1),this.$refs.Classification.clear()},batchChange:function(){this.params.allocation_id="",this.onSearch()},warehouseChange:function(){this.params.allocation_id="",this.params.batch="",this.onSearch()},seeCarModels:function(t){this.currentCarIds=t.library_id,this.isShowModelDetail=!0},openSelectModel:function(){this.showModelIsLoad?this.isShowModel=!0:this.$message.warning("正在初始化车型库数据，请稍等！")},carModelChange:function(t){this.$refs.Classification._addCarModel(t),this.isShowModel=!1},getFairModel:function(){var t=this;this.params.vin&&this.$axMethod.getCarLibraryByVin({vin:this.params.vin}).then((function(e){var a=e.data;200==a.code&&(t.$refs.Classification.carModelBox=a.data,a.data.length&&t.$refs.Classification.carModelChange(a.data[0]))}))},dealData:function(t){var e=t.data;this.$refs.Classification.echoSearch(e)}}},ht=ut,mt=(a("ff45"),Object(u["a"])(ht,_,g,!1,null,"70db6796",null)),pt=mt.exports,ft={name:"salesOpenOrder",mixins:[r["b"]],components:{historyPrices:m,searchGoods:pt,lodopDelivery:f["a"]},props:{type:Number,default:1},data:function(){return{tableData:[],isMultiple:!1,currentScope:{},isShowHistoryPrices:!1,params:this.$publicFution.deepCopy(r["a"]),deliveryDemandList:[],editType:1}},methods:{discountTotalChange:function(){this.params.discount_total_amount<0&&(this.$message.warning("整单减不能小于0"),this.params.discount_total_amount=""),Number(this.params.discount_total_amount)>Number(this.params.goodsAllprice)&&(this.$message.warning("整单减不能大于商品总金额"),this.params.discount_total_amount=""),this.computedTotalPrice()},NewCustomer:function(){this.$router.push({path:"/custom/service_station_list/service_station_list_add"})},payPriceChange:function(){this.params.pay_price<0&&(this.$message.warning("本次收款不能小于0"),this.params.pay_price=""),Number(this.params.pay_price)>Number(this.params.settlement_price)&&(this.$message.warning("本次收款不能大于总金额"),this.params.pay_price=""),this.computedTotalPrice()},getCompany:function(t){this.isMultiple=t.length>1},getDeliveryDemandList:function(t){var e=this;this.$api.serviceStationGetDeliveryDemandList({is_service:1}).then((function(a){var i=a.data;200==i.code&&(e.deliveryDemandList=i.data,e.deliveryDemandList.forEach((function(a){"自配送"!=a.delivery_demand_name||t||(e.params.delivery_demand_id=a.delivery_demand_id)})))}))},submit:function(t){var e=this,a=this.$refs.xTable._proxy("getTableData").fullData.concat([]);a[a.length-1]&&!a[a.length-1].goods_id&&a.pop(),a.length<1?this.$message.warning("请完善表格数据"):this.$refs.ruleForm.validate((function(i){i&&e.$refs.xTable._proxy("validate",a).then((function(i){var s=e.$publicFution.deepCopy(e.params);a=a.map((function(t,e){return t.serial_number=e,t.business_type_id=10001,t})),s.goods_info=JSON.stringify(a);var r="serviceStationAddSalesOut";2===e.editType&&(s.outstock_id=e.$route.query.id,r="serviceStationAuidtorPassSalesOut"),e.$api[r](s).then((function(a){var i=a.data;200===i.code&&(e.$message.success(i.msg),1==t?e.$refs.lodopDelivery.printPdf({outstock_id:i.data},0,e.goBack):e.goBack())}))}))}))},goBack:function(){this.$publicFution.goPage(this.$route.query.id),this.$router.push("/sales/service_station_sales_outstock_list")}},created:function(){var t=this;this.$route.query.id&&(this.editType=2,this.$api.serviceStationGetDeliveryGetSalesOutInfo({outstock_id:this.$route.query.id}).then((function(e){var a=e.data;200==a.code&&(t.params=Object.assign(r["a"],a.data),0==t.params.delivery_demand_id&&t.getDeliveryDemandList(),t.params.arrears=(t.params.settlement_price-t.getNumber(t.params.pay_price)).toFixed(2),t.$refs.xTable._proxy("loadData",a.data.goods_list))}))),this.getDeliveryDemandList(),window.CLodopLoadFinComplete?Object(p["a"])():Object(p["b"])((function(){Object(p["a"])()}))}},_t=ft,gt=(a("2dc2"),Object(u["a"])(_t,i,s,!1,null,"79085bf6",null));e["default"]=gt.exports},d063:function(t,e,a){var i=a("bf54"),s=a("3f8c5").UNSUPPORTED_Y,r=a("89aa").f,n=a("cc76").get,o=RegExp.prototype;i&&s&&r(o,"sticky",{configurable:!0,get:function(){if(this!==o){if(this instanceof RegExp)return!!n(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}}})},d605:function(t,e,a){var i=a("bf54"),s=a("ccba"),r=a("89aa").f,n=a("cc76").get,o=RegExp.prototype;i&&s&&r(o,"dotAll",{configurable:!0,get:function(){if(this!==o){if(this instanceof RegExp)return!!n(this).dotAll;throw TypeError("Incompatible receiver, RegExp required")}}})},de3b:function(t,e,a){var i=a("ef00"),s=a("6446"),r=a("88e4"),n=a("e67c"),o=a("a754").onFreeze,l=Object.freeze,c=r((function(){l(1)}));i({target:"Object",stat:!0,forced:c,sham:!s},{freeze:function(t){return l&&n(t)?l(o(t)):t}})},df04:function(t,e,a){"use strict";a("ab22")},df4c:function(t,e,a){},f043:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("410a"),a("6f78"),a("b1f0"),a("3c64");var i=a("fc5a"),s=a("9887"),r=a.n(s);function n(t){var e="car_librarys_csv_874654166";if(window[e])return t({code:200,data:window[e]});function a(t){if(!(window.localStorage&&window.indexedDB&&window.indexedDB.open))return t(!1);var e=indexedDB.open("jybd-car",1);e.onerror=function(e){console.log("数据库打开报错"),t(!1)},e.onsuccess=function(a){console.log("数据库打开成功"),t(e.result)},e.onupgradeneeded=function(t){t.target.result.objectStoreNames.contains("car_choice")||t.target.result.createObjectStore("car_choice",{keyPath:"id"})}}function s(t,e){r.a.get(t).then((function(t){for(var a=t.data.split("\n"),i=[],s=a[1].split(","),r=2;r<a.length;r++){for(var n={},o=a[r].split(","),l=0;l<o.length;l++)s[l]&&(n[s[l]]=o[l]);n.car_lib_id&&i.push(n)}e({code:200,data:i})}))}function n(t,i){window[e]=t,a((function(a){if(!1!==a){var s=a.transaction(["car_choice"],"readwrite").objectStore("car_choice").put({id:0,data:t});s.onsuccess=function(t){window.localStorage.setItem(e,i.data.update_time),console.log("数据库存储成功")},s.onerror=function(t){console.log("Database error: ",t.target.error)}}}))}function o(t,i){if(200==t.code&&window.localStorage&&window.localStorage.getItem&&window.localStorage.getItem(e)!=t.data.update_time)return i();a((function(t){if(!1===t)return i();var a=t.transaction(["car_choice"]).objectStore("car_choice").get(0);a.onsuccess=function(t){console.log("数据库读取成功");var s=a.result&&a.result.data;i(s),s&&(window[e]=s)},a.onerror=function(t){console.log("Database error: ",t.target.error),i()}}))}function l(t){Object(i["a"])({type:"get",url:"v2/open/Excel/getCarLibraryExcel"}).then((function(e){try{e=JSON.parse(e.data.data)}catch(a){}t({code:e.code,data:e.result})})).catch((function(){t({code:400,message:"服务器错误，请联系管理员"})}))}function c(t){var e={};return t.forEach((function(t){e[t.brand_letter]||(e[t.brand_letter]=[]),e[t.brand_letter].push(t)})),e}l((function(e){o(e,(function(a){return a?t({code:200,data:a}):200!=e.code?t(e):void s(e.data.url,(function(a){a.data=c(a.data),t(a),200==a.code&&setTimeout((function(){n(a.data,e)}),100)}))}))}))}},fde9:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"e",(function(){return s})),a.d(e,"d",(function(){return c})),a.d(e,"a",(function(){return d})),a.d(e,"c",(function(){return u}));a("bf00"),a("c07b"),a("b1f0"),a("3c64"),a("e326"),a("3736"),a("42aa");function i(t){for(var e={},a=Object.keys(t).sort(),i=0;i<a.length;i++){var s=a[i];e[s]||(e[s]={});for(var r=0;r<t[s].length;r++)e[s][t[s][r].brand_name]||(e[s][t[s][r].brand_name]=[]),e[s][t[s][r].brand_name].push(t[s][r])}return e}function s(t){var e=t.list,a=t.letter,i=t.keywords;if(a){var s=e[a]||{},r={};return Object.keys(s).forEach((function(t){t.includes(i)&&(r[t]=s[t])})),r}var n=e,o={};for(var l in n){var c=Object.keys(n[l]),d=c.filter((function(t){return t.includes(i)}));if(d.length){o[l]={};for(var u=0;u<d.length;u++){var h=d[u];o[l][h]=n[l][h]}}}return o}var r=["三厢","三厢车","两厢车","两厢","掀背车","旅行车"],n=["EV","氢燃料","增程式"],o=["硬顶敞篷车","软顶敞篷车","硬顶跑车","跑车"];function l(t){var e=t.car_type,a=t.displacement;return n.includes(a)?"新能源":"MPV"===e.toUpperCase()?"MPV":"SUV"===e.toUpperCase()?"SUV":"客车"===e?"客车":o.includes(e)?"跑车":r.includes(e)?"轿车":"其他"}function c(t){var e={},a=0,i=[];return t.forEach((function(t){if(1!=t.source){e[t.show_name]||(e[t.show_name]={});var s=l(t);e[t.show_name][s]||(e[t.show_name][s]={}),e[t.show_name][s][t.car_series]||(e[t.show_name][s][t.car_series]=[]),i.includes(t.car_series)||i.push(t.car_series),e[t.show_name][s][t.car_series].push(t),a++}})),{obj:e,total:a,carSeriesArr:i}}function d(t){var e={},a={},i=0;for(var s in t){e[s]||(e[s]={});for(var r=0;r<t[s].length;r++){var n=t[s][r];e[s][n.brand_name]||(e[s][n.brand_name]=[]),a[n.brand_name]||(a[n.brand_name]=[]),i++,e[s][n.brand_name].push(n),a[n.brand_name].push(n.car_lib_id)}}return{brandObj:e,brandId:a,total:i}}function u(t,e){var a={},i=null;return e?t.forEach((function(t){t.car_lib_id==e&&(i=t),a[t.car_series]||(a[t.car_series]={}),a[t.car_series][t.displacement]||(a[t.car_series][t.displacement]={}),a[t.car_series][t.displacement][t.years]||(a[t.car_series][t.displacement][t.years]=[]),a[t.car_series][t.displacement][t.years].push(t)})):t.forEach((function(t){a[t.car_series]||(a[t.car_series]={}),a[t.car_series][t.displacement]||(a[t.car_series][t.displacement]={}),a[t.car_series][t.displacement][t.years]||(a[t.car_series][t.displacement][t.years]=[]),a[t.car_series][t.displacement][t.years].push(t)})),{obj:a,echoObj:i}}},ff45:function(t,e,a){"use strict";a("43f0")}}]);
//# sourceMappingURL=chunk-2188ab59.886a2dd3.js.map