{"version":3,"sources":["webpack://service-[name]/./src/utils/commonCrud/CRUD.js","webpack://service-[name]/../common/components/plugin/service/modelDetail.vue?ac71","webpack://service-[name]/../common/components/plugin/service/modelDetail.vue","webpack://service-[name]/../common/components/plugin/service/modelDetail.vue?50ef","webpack://service-[name]/../common/components/plugin/service/modelDetail.vue?302e","webpack://service-[name]/./src/components/ServiceStation/inventory/companyGoodsInfoList.vue?0495","webpack://service-[name]/./src/components/ServiceStation/inventory/companyGoodsInfoList.vue?456c","webpack://service-[name]/./src/components/ServiceStation/inventory/config/companyGoodsInfoList.js","webpack://service-[name]/src/components/ServiceStation/inventory/companyGoodsInfoList.vue","webpack://service-[name]/./src/components/ServiceStation/inventory/companyGoodsInfoList.vue?8def","webpack://service-[name]/./src/components/ServiceStation/inventory/companyGoodsInfoList.vue","webpack://service-[name]/../common/components/plugin/service/config/carModel.js"],"names":["isPromise","val","then","ThisScope","Obj","this","_this","addr","indexSign","URL","url","id","errId","title","allTitle","params","before","checkbox","Data","showConfirm","callbackFunc","multipleSelection","length","$message","message","type","$confirm","confirmButtonText","cancelButtonText","rebateArr","resolve","reject","ajaxFunc","Object","assign","$axMethod","$api","$axios","method","data","res","code","catch","err","verify","i","push","toString","Promise","confirm","sendAjax","logic","success","msg","onSearch","errData","checkArry","forEach","item","serial","activeColor","filter","includes","arr","str","store","commit","table","state","console","log","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","$event","$emit","model","value","callback","$$v","expression","directives","name","rawName","tableData","ref","tableColumn","currentPage","pageSize","total","handleSizeChange","handleCurrentChange","loading","_e","_v","staticRenderFns","idsObj","watch","newVal","getLibraryId","library_id","ids","getData","props","Number","default","String","shop_goods_id","Array","created","alltableData","allData","result","methods","init","getAttributeCarLibraryList","submit","currentRow","selectBox","GetValue","serviceStationGetOeCodeOrCarLibraryList","getFairModelData","html","sales_name","slice","$parent","showModelsName","a","concat","splice","index","car_lib_id","match_type","selfArr","component","$set","nativeOn","indexOf","_k","keyCode","key","apply","arguments","staticStyle","cascaderVue","cascaderChange","brand_name","goods_type_id","onReset","authority","b_add","add","b_del","deletes","b_export_file","slot","exportOrder","openDownload","b_import","$refs","upload","stateOpen","b_list_edit","isShowDownload","closeDownload","downloadPrams","required","handleChange","downLoadFile","currentCarIds","loaded","isShowModelDetail","options","receiveUploadMsg","paramsModule","company_id","brand_id","goods_name","unit_id","guide_price","goods_sn","factory_code","baseMinxis","footerData","width","align","field","fixed","slots","scope","b_info","goDetail","row","b_edit","minWidth","library","keys","car_library","headerAlign","editRender","formatter","autoselect","events","change","editGoods","inventory_goods_id","taxrate","serviceStationEditPart","mixins","$publicFution","deepCopy","components","modelDetail","goods_type_id_1","goods_type_id_2","$nextTick","localStorage","getItem","company_name","$router","path","query","validate","step","window","open","export_type","scheduleType","serviceStationExportGoodsUrl","s","location","href","xTable","_getData","num","activated","goPage","get_car_librarys_csv","cacleName","getDB","cb","indexedDB","request","onerror","event","onsuccess","onupgradeneeded","target","objectStoreNames","contains","createObjectStore","keyPath","getCSV","axiosa","get","csvarry","split","datas","headers","temp","j","setData","csv_res","db","transaction","objectStore","put","setItem","update_time","error","getAjax","axios","JSON","parse","updateDataStructure","brand_letter","setTimeout"],"mappings":"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","file":"js/chunk-50c802c4.41979e50.js","sourcesContent":["//增删改查\n// 弃审\nimport store from \"@/store\"; // vuex\n// 判断一个函数是不是promise\nfunction isPromise(val) {\n  if (typeof (val) === 'function' && val().then) {\n    return true\n  }\n}\nexport class ThisScope {\n  constructor(Obj) {\n    this._this = Obj._this;\n    this.addr = [];\n    this.indexSign = null;\n    this.URL = Obj.url;\n    this.id = Obj.id;\n    this.errId = Obj.errId ? Obj.errId : Obj.id // 用于错误行的显示\n    this.title = Obj.title ? Obj.title : '审核'\n    this.allTitle = Obj.allTitle\n    this.params = Obj.params// 额外参数\n    this.before = Obj.before // 再请求之前的校验，可选值 promise  function\n    this.checkbox = null;\n    this.Data = null;\n    this.showConfirm = Obj.showConfirm\n    this.callbackFunc = Obj.callbackFunc\n  }\n  verify() {\n    if (this._this.multipleSelection.length < 1) {\n      this._this.$message({\n        message: `请选择需要${this.title}的信息`,\n        type: \"warning\"\n      });\n      return false;\n    } else {\n      return true\n    }\n  }\n\n  confirm() {\n    var title = '确定要“' + this.title + '”此条信息?'\n    if (this.allTitle) {\n      title = this.allTitle\n    }\n    return this._this.$confirm(title, '提示', {\n      confirmButtonText: '确定',\n      cancelButtonText: '取消',\n      type: 'warning'\n    })\n  }\n\n  // 发送请求\n  sendAjax(rebateArr, resolve, reject) {\n    var ajaxFunc;\n    var params = Object.assign({ [this.id]: rebateArr }, this.params)\n    if (this._this.$axMethod[this.URL]) {\n      ajaxFunc = this._this.$axMethod[this.URL](params)\n    } else if (this._this.$api[this.URL]) {\n      ajaxFunc = this._this.$axios({\n        url: this._this.$api[this.URL],\n        method: 'post',\n        data: params\n      })\n    }\n    ajaxFunc.then(res => {\n      this.checkbox = this._this.multipleSelection; //选择\n      this.callbackFunc && this.callbackFunc(res.data)\n      if (res.data.code == 200) {\n        resolve(res)\n        this.Data = res;\n      } else {\n        reject(res)\n      }\n    }).catch(err => {\n      reject(err)\n    });\n  }\n  logic() {\n    if (!this.verify()) {\n      return false\n    }\n    for (var i = 0; i < this._this.multipleSelection.length; i++) {\n      this.addr.push(this._this.multipleSelection[i][this.id]);\n    }\n    var rebateArr = this.addr.toString();\n\n    return new Promise((resolve, reject) => {\n      if (this.showConfirm == true) {\n        this.confirm().then(() => {\n          if (isPromise(this.before)) {// promise\n            this.before(rebateArr).then(() => {\n              return this.sendAjax(rebateArr, resolve, reject)\n            })\n          } else if ((this.before && this.before()) || !this.before) {// 传了before函数就是校验是否为true 不传直接可以进来\n            return this.sendAjax(rebateArr, resolve, reject)\n          }\n        })\n      } else {\n        if (isPromise(this.before)) {// promise\n          this.before(rebateArr).then(() => {\n            return this.sendAjax(rebateArr, resolve, reject)\n          })\n        } else if ((this.before && this.before()) || !this.before) {// 传了before函数就是校验是否为true 不传直接可以进来\n          return this.sendAjax(rebateArr, resolve, reject)\n        }\n      }\n    })\n\n  }\n  send() {\n    this.logic().then(({ data }) => {\n      if (data.code === 200) {\n        this._this.$message.success(data.msg ? data.msg : data.data)\n        this._this.onSearch && this._this.onSearch();\n      }\n    })\n  }\n  async callback() {\n    try {\n      await this.logic()\n      if (this.Data && this.Data.data && this.Data.data.data.length) {\n        let errData = this.Data.data.data; //报错\n        let checkArry = [];\n        errData.forEach((item) => {\n          checkArry.push(item.serial);\n        });\n        let activeColor = this.checkbox.filter(\n          val => checkArry.includes(val[this.errId]) == true\n        );\n        this._this.indexSign.arr = activeColor\n        this._this.indexSign.str = this.errId\n        store.commit('setErrorObj', {\n          msg: this.Data.data.msg,\n          table: this.Data.data.data,\n          state: true\n        })\n      } else {\n        let msg = this.Data.data.msg ? this.Data.data.msg : this.Data.data.data;\n        this._this.indexSign.arr = []\n        this._this.$message({\n          message: msg,\n          type: \"success\"\n        });\n        this._this.multipleSelection = [];\n        this._this.onSearch && this._this.onSearch();\n      }\n    } catch (error) {\n      console.log()\n    }\n  }\n}\n// 详情的操作\nexport class seeEdit {\n  constructor({ _this, url, list = [], params = {}, before }) {\n    this._this = _this\n    this.url = url // 操作的url\n    this.list = list // 商品\n    this.params = params // 参数\n    this.before = before // 在请求之前做处理\n  }\n  sendAjax(resolve, reject) {\n    var ajaxFunc;\n    if (this._this.$axMethod[this.url]) {\n      ajaxFunc = this._this.$axMethod[this.url](this.params)\n    } else if (this._this.$api[this.url]) {\n      ajaxFunc = this._this.$axios({\n        url: this._this.$api[this.url],\n        method: 'post',\n        data: this.params\n      })\n    }\n    ajaxFunc.then(res => {\n      if (res.data.code == 200) {\n        resolve(res)\n      } else {\n        reject(res)\n      }\n    }).catch(err => {\n      reject(err)\n    });\n  }\n  edit() {\n    return new Promise((resolve, reject) => {\n      if (isPromise(this.before)) {// promise\n        this.before().then(() => {\n          return this.sendAjax(resolve, reject)\n        })\n      } else if ((this.before && this.before()) || !this.before) {// 传了before函数就是校验是否为true 不传直接可以进来\n        return this.sendAjax(resolve, reject)\n      }\n    })\n  }\n  callback() {\n    return new Promise((resolve, reject) => {\n      this.edit().then((res) => {\n        if (res.data && res.data.data && res.data.data.length) {\n          store.commit('setErrorObj', {\n            msg: res.data.msg,\n            table: res.data.data,\n            state: true\n          })\n          var result = []\n          res.data.data.forEach((item) => {\n            result.push(item.serial);\n          });\n          this._this.indexSign = result\n          reject(res)\n        } else {\n          this._this.$message({\n            message: res.data.msg ? res.data.msg : res.data.data,\n            type: \"success\"\n          });\n          resolve(res)\n        }\n      })\n    })\n  }\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"params\"},[_c('vxe-modal',{attrs:{\"title\":\"适配车型\",\"id\":\"inReceiptSelectOrder\",\"width\":\"1200\",\"esc-closable\":true,\"destroy-on-close\":\"\",\"height\":\"500\",\"min-width\":\"600\",\"min-height\":\"100\",\"resize\":\"\",\"remember\":\"\",\"storage\":\"\",\"transfer\":\"\"},on:{\"hide\":function($event){return _vm.$emit('input', false)}},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}]},[(_vm.tableData.length)?_c('div',[_c('div',{staticClass:\"el_tree_box\"},[_c('xTable',{ref:\"xTable\",attrs:{\"tableColumn\":_vm.tableColumn,\"maxHeight\":\"380\",\"xData\":_vm.tableData}}),_c('div',{staticClass:\"block\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-sizes\":[10, 20, 30, 50],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)]):(!_vm.loading)?_c('div',{staticClass:\"dialog-footer\"},[_vm._v(\" 适配车型无数据 \")]):_vm._e()])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n * @Author: 吴玉荣\n * @LastEditors: 吴玉荣\n * @Date: 2021-05-12 18:35:37\n * @LastEditTime: 2021-09-03 21:54:51\n * @info: 适配车型\n-->\n<template>\n  <div class=\"params\">\n    <vxe-modal v-model=\"value\" title=\"适配车型\" @hide=\"$emit('input', false)\" id=\"inReceiptSelectOrder\" width=\"1200\" :esc-closable=\"true\" destroy-on-close height=\"500\" min-width=\"600\" min-height=\"100\" resize remember storage transfer>\n      <div v-loading=\"loading\">\n        <div v-if=\"tableData.length\">\n          <div class=\"el_tree_box\">\n            <xTable ref=\"xTable\" :tableColumn=\"tableColumn\" maxHeight=\"380\" :xData=\"tableData\" />\n            <div class=\"block\">\n              <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"currentPage\" :page-sizes=\"[10, 20, 30, 50]\" :page-size=\"pageSize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\n              </el-pagination>\n            </div>\n          </div>\n        </div>\n        <div class=\"dialog-footer\" v-else-if=\"!loading\">\n          适配车型无数据\n        </div>\n      </div>\n    </vxe-modal>\n  </div>\n</template>\n\n<script>\nimport get_car_librarys_csv from \"./config/carModel.js\";\nexport default {\n  data() {\n    return {\n      loading: false,\n      tableColumn: [\n        {\n          title: \"车款\",\n          field: \"sales_name\",\n          formatter: ({ row }) => {\n            return row.sales_name ? row.sales_name : row.attr_value_name;\n          },\n          width: 250,\n        },\n        {\n          title: \"品牌\",\n          field: \"brand_name\",\n          width: 70,\n        },\n        {\n          title: \"厂家\",\n          field: \"show_name\",\n          width: 100,\n        },\n        {\n          title: \"车系\",\n          field: \"car_series\",\n          width: 120,\n        },\n        {\n          title: \"排放标准\",\n          field: \"emission_standard\",\n          width: 70,\n        },\n        {\n          title: \"年款\",\n          field: \"years\",\n          width: 100,\n        },\n        {\n          title: \"上市年份\",\n          field: \"c_variant_sop\",\n          width: 120,\n        },\n        {\n          title: \"生产年份\",\n          field: \"c_variant_sop\",\n          width: 120,\n        },\n        {\n          title: \"停产年份\",\n          field: \"c_variant_eop\",\n          width: 100,\n        },\n        {\n          title: \"排量\",\n          field: \"displacement\",\n          width: 100,\n        },\n        {\n          title: \"发动机\",\n          field: \"engine_type\",\n          width: 100,\n        },\n        {\n          title: \"适配来源\",\n          field: \"unit_name\",\n          width: 100,\n          formatter: ({ row }) => {\n            return this.idsObj[row.car_lib_id] == 1 ? \"OE码匹配\" : \"自主选择\";\n          },\n        },\n      ],\n      idsObj: {},\n      tableData: [],\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n    };\n  },\n  watch: {\n    value(newVal) {\n      if (newVal === true) {\n        if (this.type === 2) {\n          this.getLibraryId();\n        }\n      }\n    },\n    library_id() {\n      if (this.type === 1) {\n        this.getLibraryId();\n      }\n    },\n    ids() {\n      this.getData();\n    },\n  },\n  props: {\n    value: null,\n    type: {\n      // type == 1 详情  2是列表\n      type: Number,\n      default: 1,\n    },\n    library_id: {\n      type: Number | String,\n      default: \"\",\n    },\n    shop_goods_id: {\n      type: Number | String,\n      default: \"\",\n    },\n    ids: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  created() {\n    this.alltableData = [];\n    this.allData = [];\n    get_car_librarys_csv((res) => {\n      var result = [];\n      for (var i in res.data) {\n        for (var j of res.data[i]) {\n          result.push(j);\n        }\n      }\n      this.allData = result;\n      this.$emit(\"loaded\");\n      if (this.type == 1) {\n        this.getData();\n      }\n    });\n  },\n  methods: {\n    getLibraryId() {\n      this.init();\n      if (this.library_id) {\n        this.loading = true;\n        this.$api\n          .serviceStationGetOeCodeOrCarLibraryList({\n            library_id: this.library_id,\n          })\n          .then(({ data }) => {\n            if (data.code == 200) {\n              var box = [];\n              var oe = [];\n              for (var i in data.data.car_library) {\n                box = box.concat(data.data.car_library[i]);\n              }\n              for (var j in data.data.oe_code) {\n                oe.push(data.data.oe_code[j]);\n              }\n              this.ids = box;\n              this.$emit(\"getOeCode\", oe.join(\",\"));\n            }\n            this.loading = false;\n            this.getAttributeCarLibraryList();\n          })\n          .catch(() => {\n            this.loading = false;\n          });\n      } else {\n        this.getAttributeCarLibraryList();\n      }\n    },\n    submit() {\n      this.$emit(\"sumbitData\", {\n        params: this.currentRow,\n        selectBox: this.selectBox,\n      });\n    },\n    GetValue(library_id) {\n      if (library_id) {\n        return this.$api.serviceStationGetOeCodeOrCarLibraryList({\n          library_id,\n        });\n      }\n    },\n    getAttributeCarLibraryList() {\n      if (this.shop_goods_id && this.ids.length === 0) {\n        this.$api\n          .getAttributeCarLibraryList({\n            shop_goods_id: this.shop_goods_id,\n            // shop_goods_id: 506298153,\n          })\n          .then(({ data }) => {\n            if (data.code == 200) {\n              var twoBox = [];\n              for (var i in data.data) {\n                twoBox = twoBox.concat(data.data[i]);\n              }\n              this.alltableData = twoBox;\n              this.handleCurrentChange(1);\n            }\n          });\n      }\n    },\n    getFairModelData(arr) {\n      var html = \"\";\n      for (var i = 0; i < arr.length; i++) {\n        if (html.length > 100) {\n          break;\n        }\n        html = html + arr[i].sales_name + \",\";\n      }\n      this.$emit(\"renderModel\", html.slice(0, -1));\n      this.$parent.showModelsName = html.slice(0, -1);\n    },\n\n    handleCurrentChange(index) {\n      var a = this.alltableData.concat([]);\n      this.tableData = a.splice((index - 1) * this.pageSize, this.pageSize);\n    },\n\n    handleSizeChange(pageSize) {\n      this.pageSize = pageSize;\n    },\n    init() {\n      this.currentPage = 1;\n      this.total = 0;\n      this.alltableData = [];\n      this.tableData = [];\n    },\n    getData() {\n      this.init();\n      if (this.allData.length && this.ids.length) {\n        this.idsObj = {};\n        for (var i = 0; i < this.ids.length; i++) {\n          if (this.ids[i].car_lib_id == -1) {\n            this.total = this.allData.length;\n            this.alltableData = this.allData;\n            this.handleCurrentChange(1);\n            this.$emit(\"getData\", [{ sales_name: \"通用车型\" }]);\n            this.getFairModelData([{ sales_name: \"通用车型\" }]);\n            return;\n          }\n          this.idsObj[this.ids[i].car_lib_id] = this.ids[i].match_type;\n        }\n        var selfArr = [];\n        var result = [];\n        this.allData.forEach((val) => {\n          if (this.idsObj[val.car_lib_id] == 1) {\n            result.push(val);\n          }\n          if (this.idsObj[val.car_lib_id] == 0) {\n            selfArr.push(val);\n          }\n        });\n        this.total = result.length + selfArr.length;\n        this.alltableData = selfArr.concat(result);\n        this.handleCurrentChange(1);\n        this.$emit(\"getData\", this.alltableData);\n        this.getFairModelData(this.alltableData);\n      }\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\"></style>\n","import mod from \"-!../../../../service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../service/node_modules/thread-loader/dist/cjs.js!../../../../service/node_modules/babel-loader/lib/index.js!../../../../service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../service/node_modules/vue-loader/lib/index.js??vue-loader-options!./modelDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../service/node_modules/thread-loader/dist/cjs.js!../../../../service/node_modules/babel-loader/lib/index.js!../../../../service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../service/node_modules/vue-loader/lib/index.js??vue-loader-options!./modelDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./modelDetail.vue?vue&type=template&id=5577fe30&scoped=true&\"\nimport script from \"./modelDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./modelDetail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5577fe30\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./companyGoodsInfoList.vue?vue&type=style&index=0&id=7c578b48&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"companyGoods_base\"},[_c('div',{attrs:{\"id\":\"leixin\"}},[_c('div',{staticClass:\"search_container\"},[_c('el-form',{staticClass:\"demo-form-inline\",attrs:{\"inline\":true,\"model\":_vm.params}},[_c('el-form-item',{attrs:{\"label\":\"组织名称\",\"size\":\"mini\"}},[_c('getServiceCompany',{model:{value:(_vm.params.company_id),callback:function ($$v) {_vm.$set(_vm.params, \"company_id\", $$v)},expression:\"params.company_id\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品名称\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"maxlength\":\"100\",\"placeholder\":\"请输入\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.onSearch.apply(null, arguments)}},model:{value:(_vm.params.goods_name),callback:function ($$v) {_vm.$set(_vm.params, \"goods_name\", $$v)},expression:\"params.goods_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品编码\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.onSearch.apply(null, arguments)}},model:{value:(_vm.params.goods_id),callback:function ($$v) {_vm.$set(_vm.params, \"goods_id\", $$v)},expression:\"params.goods_id\"}})],1),_c('el-form-item',{staticStyle:{\"width\":\"350px\"},attrs:{\"label\":\"助记码/自定义编码\",\"size\":\"mini\",\"label-width\":\"150px\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.onSearch.apply(null, arguments)}},model:{value:(_vm.params.goods_sn),callback:function ($$v) {_vm.$set(_vm.params, \"goods_sn\", $$v)},expression:\"params.goods_sn\"}})],1),_c('el-form-item',{attrs:{\"label\":\"工厂编码\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.onSearch.apply(null, arguments)}},model:{value:(_vm.params.factory_code),callback:function ($$v) {_vm.$set(_vm.params, \"factory_code\", $$v)},expression:\"params.factory_code\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品分类\",\"size\":\"mini\"}},[_c('jybd-cascader',{ref:\"cascader\",attrs:{\"cascaderVue\":_vm.cascaderVue},on:{\"cascaderChange\":_vm.cascaderChange}})],1),_c('el-form-item',{attrs:{\"label\":\"商品品牌\",\"size\":\"mini\"}},[_c('getServiceBrand',{attrs:{\"showObj\":{ brand_name: '名称' },\"searchParams\":{ goods_type_id: _vm.params.goods_type_id }},model:{value:(_vm.params.brand_id),callback:function ($$v) {_vm.$set(_vm.params, \"brand_id\", $$v)},expression:\"params.brand_id\"}})],1),_c('el-form-item',{staticClass:\"search-style search\",attrs:{\"size\":\"mini\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.onSearch}},[_vm._v(\"查询\")]),_c('el-button',{attrs:{\"plain\":\"\",\"size\":\"mini\"},on:{\"click\":_vm.onReset}},[_vm._v(\"重置\")])],1)],1)],1),_c('div',{staticClass:\"add_delet\"},[(_vm.authority.b_add == 1)?_c('el-button',{staticClass:\"addBtn\",attrs:{\"icon\":\"el-icon-circle-plus-outline\",\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.add}},[_vm._v(\"新增 \")]):_vm._e(),(_vm.authority.b_del == 1)?_c('el-button',{attrs:{\"plain\":\"\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":_vm.deletes}},[_vm._v(\"删除 \")]):_vm._e(),(_vm.authority.b_export_file == 1)?_c('el-dropdown',{staticStyle:{\"margin\":\"0 10px\"}},[_c('span',{staticStyle:{\"cursor\":\"pointer\",\"color\":\"#4e90e2\"},attrs:{\"split-button\":\"\"}},[_c('el-button',{attrs:{\"plain\":\"\",\"icon\":\"iconfont icon-daochu10\",\"size\":\"mini\"}},[_vm._v(\"导出\")])],1),_c('el-dropdown-menu',{staticStyle:{\"margin-top\":\"10px\"},attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{nativeOn:{\"click\":function($event){return _vm.exportOrder(1)}}},[_vm._v(\"导出Excel文件\")]),_c('el-dropdown-item',{nativeOn:{\"click\":function($event){return _vm.exportOrder(2)}}},[_vm._v(\"导出CSV逗号分隔\")])],1)],1):_vm._e(),_c('el-button',{attrs:{\"plain\":\"\",\"icon\":\"el-icon-download\",\"size\":\"mini\"},on:{\"click\":_vm.openDownload}},[_vm._v(\"下载模板\")]),(_vm.authority.b_import == 1)?_c('el-button',{staticClass:\"addBtn\",attrs:{\"plain\":\"\",\"icon\":\"iconfont icon-daoru5\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.$refs.upload.stateOpen()}}},[_vm._v(\"导入\")]):_vm._e()],1)]),_c('div',{staticClass:\"table_container\"},[_c('xTable',{ref:\"xTable\",attrs:{\"ajax\":{ url: 'serviceStationgetGoodsList', params: _vm.params },\"tableColumn\":_vm.tableColumn,\"isEdit\":function () { return _vm.authority.b_list_edit; }}})],1),(_vm.isShowDownload)?_c('div',[_c('el-dialog',{attrs:{\"close-on-click-modal\":false,\"title\":\"下载模板\",\"visible\":_vm.isShowDownload,\"width\":\"600px\"},on:{\"close\":_vm.closeDownload,\"update:visible\":function($event){_vm.isShowDownload=$event}}},[_c('el-form',{ref:\"downloadPrams\",staticClass:\"demo-form-inline goodsbase_top\",attrs:{\"inline\":true,\"model\":_vm.downloadPrams}},[_c('el-form-item',{attrs:{\"label\":\"组织名称\",\"prop\":\"company_id\",\"rules\":{ required: true, message: '请选择组织' }}},[_c('getServiceCompany',{attrs:{\"fatherParams\":_vm.downloadPrams},model:{value:(_vm.downloadPrams.company_id),callback:function ($$v) {_vm.$set(_vm.downloadPrams, \"company_id\", $$v)},expression:\"downloadPrams.company_id\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品类型\",\"prop\":\"goods_type_id\",\"rules\":{ required: true, message: '请选择商品类型' }}},[_c('jybd-cascader',{on:{\"cascaderChange\":_vm.handleChange}})],1)],1),_c('div',{staticClass:\"dialog-footer\"},[_c('el-button',{on:{\"click\":_vm.closeDownload}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.downLoadFile}},[_vm._v(\"确定\")])],1)],1)],1):_vm._e(),_c('modelDetail',{ref:\"library\",attrs:{\"type\":2,\"library_id\":_vm.currentCarIds},on:{\"loaded\":function($event){_vm.loaded = true}},model:{value:(_vm.isShowModelDetail),callback:function ($$v) {_vm.isShowModelDetail=$$v},expression:\"isShowModelDetail\"}}),_c('upload',{ref:\"upload\",attrs:{\"options\":_vm.options},on:{\"receiveUploadMsg\":_vm.receiveUploadMsg}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const paramsModule = {\n  company_id: \"\",\n  brand_id: \"\",\n  goods_name: \"\",\n  goods_type_id: \"\",\n  unit_id: \"\",\n  guide_price: \"\",\n  goods_sn: \"\",\n  factory_code: \"\"\n};\n\nexport const baseMinxis = {\n  data() {\n    return {\n      footerData: {},\n      tableColumn: [\n        {\n          type: \"checkbox\",\n          width: 44,\n          align: \"center\"\n        },\n        {\n          type: \"index\",\n          title: \"序号\",\n          width: 50\n        },\n        {\n          title: \"库位码\",\n          field: \"goods_sn\",\n          width: 100\n        },\n        {\n          field: \"name\",\n          title: \"操作\",\n          width: 100,\n          fixed: \"right\",\n          align: \"center\",\n          slots: {\n            default: scope => {\n              return [\n                <el-button\n                  size=\"small\"\n                  type=\"text\"\n                  disabled={this.authority.b_info != 1}\n                  onClick={() => this.goDetail(scope.row)}\n                >\n                  {\" \"}\n                  查看{\" \"}\n                </el-button>,\n                <el-button\n                  size=\"small\"\n                  type=\"text\"\n                  disabled={this.authority.b_edit != 1}\n                  onClick={() => this.add(scope.row)}\n                >\n                  {\" \"}\n                  修改{\" \"}\n                </el-button>\n              ];\n            }\n          }\n        },\n        {\n          title: \"品牌\",\n          field: \"brand_name\",\n          width: 100\n        },\n        {\n          title: \"类型\",\n          field: \"goods_type_name\",\n          minWidth: 100\n        },\n        {\n          title: \"型号\",\n          field: \"goods_model\",\n          width: 100\n        },\n        {\n          title: \"适配车型\",\n          field: \"auditor_time\",\n          width: 100,\n          slots: {\n            default: scope => {\n              return [\n                <el-link\n                  target={!scope.row.library_id ? \"_blank\" : \"primary\"}\n                  disabled={!scope.row.library_id}\n                  onClick={() => {\n                    this.currentCarIds = scope.row.library_id;\n                    this.$refs.library\n                      .GetValue(scope.row.library_id)\n                      .then(({ data }) => {\n                        if (Object.keys(data.data.car_library).length) {\n                          this.isShowModelDetail = true;\n                        }\n                      });\n                  }}\n                >\n                  {scope.row.car_library}\n                </el-link>\n              ];\n            }\n          }\n        },\n        {\n          title: \"OE码\",\n          field: \"oe_code\",\n          minWidth: 100\n        },\n        {\n          title: \"组织名称\",\n          field: \"company_name\",\n          width: 140\n        },\n        // {\n        //   title: \"商品名称\",\n        //   field: \"goods_name\"\n        //   // width: 150\n        // },\n        {\n          title: \"单位\",\n          field: \"unit_name\",\n          width: 50\n        },\n        // {\n        //   title: '助记码/自定义编码',\n        //   field: 'goods_sn',\n        //   width: 90,\n        //   editRender: {\n        //     name: 'Vinput',\n        //     formatter: 'String',\n        //     autoselect: true,\n        //     events: {\n        //       change: ({ row }) => {\n        //         this.editGoods(row)\n        //       }\n        //     }\n        //   }\n        // },\n        // {\n        //   title: '商品编码',\n        //   field: 'goods_id',\n        //   width: 80\n        // },\n        {\n          title: \"商品货号\",\n          field: \"inventory_goods_id\",\n          width: 80\n        },\n\n        {\n          title: \"销售价\",\n          field: \"guide_price\",\n          headerAlign: \"right\",\n          align: \"right\",\n          width: 100,\n          editRender: {\n            name: \"Vinput\",\n            formatter: \"positive\",\n            autoselect: true,\n            events: {\n              change: ({ row }) => {\n                if (row.guide_price > 0) {\n                  this.editGoods(row);\n                } else {\n                  row.guide_price = \"\";\n                }\n              }\n            }\n          }\n        }\n        // {\n        //   title: '销售税率',\n        //   field: 'taxrate',\n        //   headerAlign: \"right\",\n        //   align: \"right\",\n        //   width: 84,\n        //   editRender: {\n        //     name: 'Vinput',\n        //     formatter: 'Positive',\n        //     autoselect: true,\n        //     events: {\n        //       change: ({ row }) => {\n        //         if (row.taxrate > 0 && row.taxrate <= 100) {\n        //           this.editGoods(row)\n        //         }\n        //       }\n        //     }\n        //   }\n        // },\n      ]\n    };\n  },\n  methods: {\n    // seeCarModels(row) {\n    //   this.currentCarIds = row.library_id;\n    //   this.isShowModelDetail = true;\n    // },\n    editGoods(row) {\n      var item = {\n        inventory_goods_id: row.inventory_goods_id,\n        guide_price: row.guide_price,\n        goods_sn: row.goods_sn,\n        taxrate: row.taxrate\n      };\n      this.$api.serviceStationEditPart(item).then(({ data }) => {\n        if (data.code == 200) {\n          this.$message.success(data.msg);\n          this.onSearch();\n        }\n      });\n    }\n  }\n};\n","<template>\n  <div class=\"companyGoods_base\">\n    <div id=\"leixin\">\n      <div class=\"search_container\">\n        <el-form :inline=\"true\" :model=\"params\" class=\"demo-form-inline\">\n          <el-form-item label=\"组织名称\" size=\"mini\">\n            <getServiceCompany v-model=\"params.company_id\" />\n          </el-form-item>\n          <el-form-item label=\"商品名称\" size=\"mini\">\n            <el-input\n              v-model=\"params.goods_name\"\n              maxlength=\"100\"\n              placeholder=\"请输入\"\n              @keyup.enter.native=\"onSearch\"\n              clearable\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"商品编码\" size=\"mini\">\n            <el-input\n              v-model=\"params.goods_id\"\n              placeholder=\"请输入\"\n              @keyup.enter.native=\"onSearch\"\n              clearable\n            ></el-input>\n          </el-form-item>\n          <el-form-item\n            label=\"助记码/自定义编码\"\n            size=\"mini\"\n            label-width=\"150px\"\n            style=\"width: 350px;\"\n          >\n            <el-input\n              v-model=\"params.goods_sn\"\n              placeholder=\"请输入\"\n              @keyup.enter.native=\"onSearch\"\n              clearable\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"工厂编码\" size=\"mini\">\n            <el-input\n              v-model=\"params.factory_code\"\n              placeholder=\"请输入\"\n              @keyup.enter.native=\"onSearch\"\n              clearable\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"商品分类\" size=\"mini\">\n            <jybd-cascader\n              ref=\"cascader\"\n              :cascaderVue=\"cascaderVue\"\n              @cascaderChange=\"cascaderChange\"\n            ></jybd-cascader>\n          </el-form-item>\n          <el-form-item label=\"商品品牌\" size=\"mini\">\n            <getServiceBrand\n              v-model=\"params.brand_id\"\n              :showObj=\"{ brand_name: '名称' }\"\n              :searchParams=\"{ goods_type_id: params.goods_type_id }\"\n            />\n          </el-form-item>\n          <el-form-item size=\"mini\" class=\"search-style search\">\n            <el-button type=\"primary\" @click=\"onSearch\" size=\"mini\"\n              >查询</el-button\n            >\n            <el-button plain @click=\"onReset\" size=\"mini\">重置</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n      <div class=\"add_delet\">\n        <el-button\n          icon=\"el-icon-circle-plus-outline\"\n          type=\"primary\"\n          v-if=\"authority.b_add == 1\"\n          @click=\"add\"\n          class=\"addBtn\"\n          size=\"mini\"\n          >新增\n        </el-button>\n        <el-button\n          plain\n          icon=\"el-icon-delete\"\n          v-if=\"authority.b_del == 1\"\n          @click=\"deletes\"\n          size=\"mini\"\n          >删除\n        </el-button>\n        <el-dropdown style=\"margin:0 10px;\" v-if=\"authority.b_export_file == 1\">\n          <span split-button style=\"cursor:pointer;color:#4e90e2\">\n            <el-button plain icon=\"iconfont icon-daochu10\" size=\"mini\"\n              >导出</el-button\n            >\n          </span>\n          <el-dropdown-menu slot=\"dropdown\" style=\"margin-top:10px;\">\n            <el-dropdown-item @click.native=\"exportOrder(1)\"\n              >导出Excel文件</el-dropdown-item\n            >\n            <el-dropdown-item @click.native=\"exportOrder(2)\"\n              >导出CSV逗号分隔</el-dropdown-item\n            >\n          </el-dropdown-menu>\n        </el-dropdown>\n        <el-button\n          plain\n          icon=\"el-icon-download\"\n          size=\"mini\"\n          @click=\"openDownload\"\n          >下载模板</el-button\n        >\n        <el-button\n          plain\n          icon=\"iconfont icon-daoru5\"\n          v-if=\"authority.b_import == 1\"\n          @click=\"$refs.upload.stateOpen()\"\n          class=\"addBtn\"\n          size=\"mini\"\n          >导入</el-button\n        >\n      </div>\n    </div>\n    <div class=\"table_container\">\n      <xTable\n        :ajax=\"{ url: 'serviceStationgetGoodsList', params: params }\"\n        ref=\"xTable\"\n        :tableColumn=\"tableColumn\"\n        :isEdit=\"() => authority.b_list_edit\"\n      />\n    </div>\n    <div v-if=\"isShowDownload\">\n      <el-dialog\n        :close-on-click-modal=\"false\"\n        title=\"下载模板\"\n        @close=\"closeDownload\"\n        :visible.sync=\"isShowDownload\"\n        width=\"600px\"\n      >\n        <el-form\n          :inline=\"true\"\n          ref=\"downloadPrams\"\n          :model=\"downloadPrams\"\n          class=\"demo-form-inline goodsbase_top\"\n        >\n          <el-form-item\n            label=\"组织名称\"\n            prop=\"company_id\"\n            :rules=\"{ required: true, message: '请选择组织' }\"\n          >\n            <getServiceCompany\n              v-model=\"downloadPrams.company_id\"\n              :fatherParams=\"downloadPrams\"\n            />\n          </el-form-item>\n          <el-form-item\n            label=\"商品类型\"\n            prop=\"goods_type_id\"\n            :rules=\"{ required: true, message: '请选择商品类型' }\"\n          >\n            <jybd-cascader @cascaderChange=\"handleChange\"></jybd-cascader>\n          </el-form-item>\n        </el-form>\n        <div class=\"dialog-footer\">\n          <el-button @click=\"closeDownload\">取消</el-button>\n          <el-button type=\"primary\" @click=\"downLoadFile\">确定</el-button>\n        </div>\n      </el-dialog>\n    </div>\n\n    <modelDetail\n      v-model=\"isShowModelDetail\"\n      :type=\"2\"\n      ref=\"library\"\n      :library_id=\"currentCarIds\"\n      @loaded=\"loaded = true\"\n    />\n    <upload\n      :options=\"options\"\n      @receiveUploadMsg=\"receiveUploadMsg\"\n      ref=\"upload\"\n    ></upload>\n  </div>\n</template>\n\n<script>\nimport { ThisScope } from \"@/utils/commonCrud/CRUD.js\";\nimport { baseMinxis, paramsModule } from \"./config/companyGoodsInfoList\";\nimport modelDetail from \"common/components/plugin/service/modelDetail.vue\";\nexport default {\n  name: \"service_station_inventory_goods\",\n  mixins: [baseMinxis],\n  data() {\n    return {\n      options: {\n        title: \"商品信息导入\",\n        url: \"/service_station/system/Goods/importGoods\"\n      },\n      downloadPrams: {\n        company_id: \"\",\n        goods_type_id: \"\"\n      },\n      loaded: false,\n      isShowModelDetail: false,\n      isShowDownload: false,\n      params: this.$publicFution.deepCopy(paramsModule),\n      currentCarIds: \"\"\n    };\n  },\n  components: {\n    modelDetail\n  },\n  methods: {\n    handleChange(val) {\n      this.downloadPrams.goods_type_id_1 = val[0];\n      this.downloadPrams.goods_type_id_2 = val[1];\n      this.downloadPrams.goods_type_id = val[2];\n      this.$nextTick(() => {\n        this.$refs.downloadPrams.validateField(\"goods_type_id\");\n      });\n    },\n    cascaderChange(val) {\n      this.cascaderVue = val;\n      this.params.goods_type_id = val[2];\n    },\n    openDownload() {\n      this.isShowDownload = true;\n      this.downloadPrams = {\n        company_id: localStorage.getItem(\"company_id\"),\n        company_name: localStorage.getItem(\"company_name\"),\n        goods_type_id: \"\"\n      };\n    },\n    closeDownload() {\n      this.isShowDownload = false;\n    },\n    receiveUploadMsg() {\n      this.onSearch();\n    },\n    goDetail(row) {\n      this.$router.push({\n        path:\n          \"/service_station_goods/service_station_inventory_goods/service_station_inventory_goods_see\",\n        query: {\n          id: row.inventory_goods_id\n        }\n      });\n    },\n    add(row) {\n      this.$router.push({\n        path:\n          \"/service_station_goods/service_station_inventory_goods/service_station_inventory_goods_add\",\n        query: {\n          id: row.inventory_goods_id\n        }\n      });\n    },\n    downLoadFile() {\n      this.$refs.downloadPrams.validate(step => {\n        if (step) {\n          this.downloadPrams.company_id = this.downloadPrams.company_id\n            ? this.downloadPrams.company_id\n            : localStorage.getItem(\"company_id\");\n          this.$api.serviceStationDownloadFile(this.downloadPrams).then(res => {\n            if (res.data.code == 200) {\n              window.open(res.data.data.url);\n              // this.closeDownload();\n            }\n          });\n        }\n      });\n    },\n    onReset() {\n      this.params = this.$publicFution.deepCopy(paramsModule);\n      this.cascaderVue = [];\n      this.onSearch(1);\n    },\n    // 删除\n    deletes() {\n      new ThisScope({\n        id: \"inventory_goods_id\",\n        _this: this,\n        title: \"删除\",\n        url: \"serviceStationDelCompanyGoods\",\n        showConfirm: true\n      }).send();\n    },\n    // 导出\n    exportOrder(scheduleType) {\n      let s = Object.assign(this.params, {\n        export_type: scheduleType\n      });\n      this.$api.serviceStationExportGoodsUrl(s).then(res => {\n        if (res.data.code == 200) {\n          window.location.href = res.data.data.url;\n        }\n      });\n    },\n    onSearch(num) {\n      this.$refs.xTable._getData(num);\n    }\n  },\n  created() {\n    console.log(this);\n  },\n  activated() {\n    this.onSearch(window.goPage);\n  }\n};\n</script>\n\n<style scoped>\n.el-dropdown {\n  margin: 0 9px;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./companyGoodsInfoList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./companyGoodsInfoList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./companyGoodsInfoList.vue?vue&type=template&id=7c578b48&scoped=true&\"\nimport script from \"./companyGoodsInfoList.vue?vue&type=script&lang=js&\"\nexport * from \"./companyGoodsInfoList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./companyGoodsInfoList.vue?vue&type=style&index=0&id=7c578b48&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7c578b48\",\n  null\n  \n)\n\nexport default component.exports","/*\n * @Author: 吴玉荣\n * @LastEditors: 吴玉荣\n * @Date: 2021-05-21 17:51:54\n * @LastEditTime: 2021-07-23 16:12:31\n * @info: 描述\n */\nimport axios from 'common/utils/axios'\nimport axiosa from 'axios'\nvar objectStore = ''\n\nexport default function get_car_librarys_csv(callback) {\n  // 缓存名\n  var cacleName = 'car_librarys_csv_874654166'\n\n  // 如果 window 缓存了数据 直接返回\n  if (window[cacleName]) return callback({ code: 200, data: window[cacleName] })\n\n\n  // 获取数据库对象\n  function getDB(cb) {\n    // 如果 存在兼容问题 返回 false\n    if (!(window.localStorage && window.indexedDB && window.indexedDB.open)) return cb(false)\n\n    // 获取 数据库\n    var request = indexedDB.open(\"jybd-car\", 1)\n    // 监听错误\n    request.onerror = function (event) {\n      console.log(\"数据库打开报错\")\n      cb(false)\n    }\n    // 监听成功\n    request.onsuccess = function (event) {\n      console.log(\"数据库打开成功\")\n      // 返回数据库 对象\n      cb(request.result)\n    }\n    // 监听数据库变化\n    request.onupgradeneeded = function (event) {\n      // 如果数据库已存在\n      if (event.target.result.objectStoreNames.contains(\"car_choice\")) return\n      // 创建person仓库(表) 主键\n      objectStore = event.target.result.createObjectStore(\"car_choice\", {\n        keyPath: \"id\",\n      })\n    }\n  }\n  // 获取远端数据\n  function getCSV(url, cb) {\n    axiosa.get(url).then((str) => {\n          // 数据拆分  行\n          var csvarry = str.data.split(\"\\n\")\n          // 数据缓存\n          var datas = []\n          // 获取 字段名列表\n          var headers = csvarry[1].split(\",\")\n          // 循环获取数据\n          for (var i = 2; i < csvarry.length; i++) {\n            // 当前数据缓存\n            var data = {}\n            // 获取 字段值 列\n            var temp = csvarry[i].split(\",\")\n            // 循环列\n            for (var j = 0; j < temp.length; j++) {\n              // 如果 字段名存在  赋值\n              if (headers[j]) data[headers[j]] = temp[j]\n            }\n            // 如果 当前数据 存在car_lib_id 添加到数据缓存数组\n            if (data.car_lib_id) datas.push(data)\n          }\n          // 返回数据\n          cb({ code: 200, data: datas })\n        }\n        )\n  }\n  // 设置缓存\n  function setData(data, csv_res) {\n    // 更新数据结构\n\n    // 在window 设置缓存\n    window[cacleName] = data\n\n    // 获取 数据库 对象\n    getDB(function (db) {\n      // 如果 获取不了 直接返回\n      if (db === false) return\n\n      // 存储数据\n      var request = db\n        .transaction([\"car_choice\"], \"readwrite\")\n        .objectStore(\"car_choice\")\n        .put({ id: 0, data: data })\n\n      // 监听成功\n      request.onsuccess = function (event) {\n        // 设置存储成功 标记\n        window.localStorage.setItem(cacleName, csv_res.data.update_time)\n        console.log('数据库存储成功');\n      }\n\n      // 监听失败\n      request.onerror = function (event) {\n        console.log(\"Database error: \", event.target.error)\n      }\n    })\n  }\n  // 获取缓存数据\n  function getData(csv_res, cb) {\n    // 如果 缓存标记 与 接口返回不一致\n    if (csv_res.code == 200 && window.localStorage && window.localStorage.getItem && window.localStorage.getItem(cacleName) != csv_res.data.update_time) {\n      return cb()\n    }\n\n    // 获取 数据库 对象\n    getDB(function (db) {\n      // 如果 获取不了 直接返回\n      if (db === false) return cb()\n\n      // 查询表\n      var request = db.transaction([\"car_choice\"]).objectStore(\"car_choice\").get(0)\n\n      // 监听查询成功\n      request.onsuccess = function (event) {\n        console.log('数据库读取成功');\n        // 获取存储数据\n        var data = request.result && request.result.data\n        // 返回存储的数据\n        cb(data)\n        // 如果存储数据存在  缓存在window\n        if (data) window[cacleName] = data\n      }\n      // 监听查询失败\n      request.onerror = function (event) {\n        console.log(\"Database error: \", event.target.error)\n        cb()\n      }\n    })\n  }\n  // 获取接口 更新信息\n  function getAjax(cb) {\n    axios({\n      type: 'get',\n      url: 'v2/open/Excel/getCarLibraryExcel'\n    }).then((res) => {\n      try {  res = JSON.parse(res.data.data) } catch (error) {}\n      cb({ code: res.code, data: res.result })\n    }).catch(() => {\n      cb({ code: 400, message: '服务器错误，请联系管理员' })\n    })\n\n  }\n\n  // 更新数据结构(按字母分类)\n  function updateDataStructure(data) {\n    const result = {}\n    data.forEach(item => {\n      if (!result[item.brand_letter]) {\n        result[item.brand_letter] = []\n      }\n      result[item.brand_letter].push(item)\n    });\n    return result\n  }\n\n  // 请求接口获取 文件信息\n  getAjax(function (csv_res) {\n    // 如果数据存在 使用缓存数据\n    getData(csv_res, function (res) {\n      // 如果数据存在  返回数据\n      if (res) return callback({ code: 200, data: res })\n\n      // 如果返回错误\n      if (csv_res.code != 200) return callback(csv_res)\n\n      // 获取 远端数据\n      getCSV(csv_res.data.url, function (res) {\n        // 返回数据\n        res.data = updateDataStructure(res.data)\n        callback(res)\n        // 如果数据正确\n        if (res.code == 200) {\n          // 延迟 存储数据\n          setTimeout(function () { setData(res.data, csv_res) }, 100);\n        }\n      })\n    })\n  })\n}\n\n\n"],"sourceRoot":""}