(window["webpackJsonp_service"]=window["webpackJsonp_service"]||[]).push([["chunk-6fddcd2b"],{"393c":function(t,e,a){"use strict";a("da02")},"4b70":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"companyGoods_base"},[a("div",{attrs:{id:"leixin"}},[a("div",{staticClass:"search_container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.params}},[a("el-form-item",{attrs:{label:"组织名称",size:"mini"}},[a("getServiceCompany",{attrs:{fatherParams:t.params},model:{value:t.params.company_id,callback:function(e){t.$set(t.params,"company_id",e)},expression:"params.company_id"}})],1),a("el-form-item",{attrs:{label:"单据号",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch.apply(null,arguments)}},model:{value:t.params.outstock_sn,callback:function(e){t.$set(t.params,"outstock_sn",e)},expression:"params.outstock_sn"}})],1),a("el-form-item",{attrs:{label:"选择客户",size:"mini"}},[a("getServiceUser",{model:{value:t.params.customer_id,callback:function(e){t.$set(t.params,"customer_id",e)},expression:"params.customer_id"}})],1),a("el-form-item",{attrs:{label:"单据状态",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.params.auditor_status,callback:function(e){t.$set(t.params,"auditor_status",e)},expression:"params.auditor_status"}},[a("el-option",{attrs:{label:"全部",value:0}}),a("el-option",{attrs:{label:"已出库",value:2}}),a("el-option",{attrs:{label:"未出库",value:1}}),a("el-option",{attrs:{label:"作废",value:3}})],1)],1),a("el-form-item",{attrs:{label:"单据类型",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.params.is_erp,callback:function(e){t.$set(t.params,"is_erp",e)},expression:"params.is_erp"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"手动创建",value:2}}),a("el-option",{attrs:{label:"小程序推送",value:1}})],1)],1),a("el-form-item",{attrs:{label:"单据日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.timeValue,callback:function(e){t.timeValue=e},expression:"timeValue"}})],1),a("el-form-item",{attrs:{label:"商品信息",size:"mini"}},[a("el-input",{attrs:{maxlength:"100",placeholder:"请输入商品编号/自定义编码/商品名称",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch.apply(null,arguments)}},model:{value:t.params.goods_name,callback:function(e){t.$set(t.params,"goods_name",e)},expression:"params.goods_name"}})],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.onSearch}},[t._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.onReset}},[t._v("重置")])],1)],1)],1),a("div",{staticClass:"add_delet"},[1==t.authority.b_export?a("el-dropdown",{staticStyle:{margin:"0 10px"}},[a("span",{staticStyle:{cursor:"pointer",color:"#4e90e2"},attrs:{"split-button":""}},[a("el-button",{attrs:{plain:"",icon:"iconfont icon-daochu10",size:"mini"}},[t._v("导出")])],1),a("el-dropdown-menu",{staticStyle:{"margin-top":"10px"},attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(e){return t.exportOrder(1)}}},[t._v("导出Excel文件")]),a("el-dropdown-item",{nativeOn:{click:function(e){return t.exportOrder(2)}}},[t._v("导出CSV逗号分隔")])],1)],1):t._e()],1)]),a("div",{staticClass:"table_container"},[a("xTable",{ref:"xTable",attrs:{ajax:{url:"serviceStationGetSalesOutDetail",params:t.params},footerMethod:t.footerMethod,tableColumn:t.tableColumn},on:{getData:t.dealData}})],1)])},r=[],o=(a("d81d"),a("caad"),{outstock_sn:"",customer_id:"",company_id:localStorage.getItem("company_id"),company_name:localStorage.getItem("company_name"),auditor_status:0,is_erp:"",pay_status:0,add_start_time:"",add_end_time:""}),l={data:function(){var t=this,e=this.$createElement;return{footerData:{},tableColumn:[{title:"销售组织",field:"company_name",width:160},{title:"单据号",field:"outstock_sn",slots:{default:function(a){var i=a.row;return[e("el-link",{on:{click:function(){t.goDetail(i)}}},["  ",i.outstock_sn," "])]}},width:160},{title:"客户名称",field:"customer_name",width:160},{title:"商品编号",field:"goods_id",width:80},{title:"自定义编码",field:"logogram",width:100},{title:"商品名称",field:"goods_name",width:150},{title:"出库数量",field:"real_num",headerAlign:"right",align:"right",width:84},{title:"出库金额",field:"subtotal_price",headerAlign:"right",align:"right",width:84},{title:"单据状态",field:"auditor_status_name",width:84},{title:"单据类型",field:"is_erp",width:84},{title:"单据时间",field:"add_time",width:160},{title:"备注",field:"abstract"}]}},methods:{dealData:function(t){200===t.data.code&&(this.footerData=t.data.data.desc)},footerMethod:function(t){var e=this,a=t.columns,i=t.data;return[a.map((function(t,a){if(0===a)return"页小计";if(["subtotal_price","real_num"].includes(t.property)){var r=e.$utils.sum(i,t.property);return"real_num"===t.property?e.$publicFution.priceFormatNone(r,0):e.$publicFution.priceFormatNone(r)}return null})),a.map((function(t,a){if(0===a)return"合计";var r=e.$utils.sum(i,t.property);return"real_num"===t.property&&void 0!==e.footerData.total_num?e.$publicFution.priceFormatNone(r,0):"subtotal_price"===t.property&&void 0!==e.footerData.total_settlement_price?e.$publicFution.priceFormatNone(r,2):["subtotal_price","real_num"].includes(t.property)?"加载中...":null}))]}}},s={name:"service_station_sales_outstock_detail",mixins:[l],data:function(){return{timeValue:[],params:this.$publicFution.deepCopy(o)}},methods:{goDetail:function(t){this.$router.push({path:"/sales/service_station_sales_outstock_list/service_station_sales_outstock_see",query:{id:t.outstock_id}})},onReset:function(){this.params=this.$publicFution.deepCopy(o),this.onSearch(1)},exportOrder:function(t){var e=Object.assign(this.params,{export_type:t});this.$api.serviceStationExportGoodsListUrl(e).then((function(t){200==t.data.code&&window.open(t.data.data.url)}))},onSearch:function(t){Array.isArray(this.timeValue)?(this.params.add_start_time=this.timeValue[0],this.params.add_end_time=this.timeValue[1]):(this.params.add_start_time="",this.params.add_end_time=""),this.$refs.xTable._getData(t)}},created:function(){console.log(this)},activated:function(){this.onSearch(window.goPage)}},n=s,c=(a("393c"),a("2877")),d=Object(c["a"])(n,i,r,!1,null,"7348df22",null);e["default"]=d.exports},da02:function(t,e,a){}}]);
//# sourceMappingURL=chunk-6fddcd2b.682a57b5.js.map