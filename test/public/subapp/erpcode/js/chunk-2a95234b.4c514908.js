(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-2a95234b"],{"2ed3":function(t,e,a){},"506b":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{attrs:{id:"leixin"}},[a("div",{staticClass:"search_container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.params}},[a("el-form-item",{attrs:{label:"销售组织",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:t.getCompanyFoucs,change:function(e){return t.companyChange(t.params.company_id,"params")}},model:{value:t.params.company_id,callback:function(e){t.$set(t.params,"company_id",e)},expression:"params.company_id"}},t._l(t.companyList,(function(e){return a("el-option",{key:e.company_id,attrs:{label:e.company_name,value:e.company_id}},[a("span",{class:1==e.type?"optionStyle":""},[t._v(t._s(e.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"客户名称",size:"mini"}},[a("el-select",{attrs:{filterable:"",placeholder:"请输入",loading:t.loading,remote:"","remote-method":t.clienteleListInvok},on:{focus:t.clienteleListInvok},model:{value:t.params.customer_id,callback:function(e){t.$set(t.params,"customer_id",e)},expression:"params.customer_id"}},[a("ul",{staticClass:"customer customer-ul4 customer-ul2"},[a("li",[t._v("客户编号")]),a("li",[t._v("客户名称")]),a("li",[t._v("联系人")]),a("li",[t._v("联系电话")]),a("li",[t._v("区域")])]),t._l(t.customerList,(function(e){return a("el-option",{key:e.customer_id,attrs:{label:e.customer_name,value:e.customer_id}},[a("ul",{staticClass:"customer customer-ul4"},[a("li",{attrs:{title:e.customer_id}},[t._v(t._s(e.customer_id))]),a("li",{attrs:{title:e.customer_name}},[t._v(t._s(e.customer_name))]),a("li",{attrs:{title:e.contact_name}},[t._v(t._s(e.contact_name))]),a("li",{attrs:{title:e.customer_mobile}},[t._v(t._s(e.customer_mobile))]),a("li",[t._v(t._s(e.province_name)+"/"+t._s(e.city_name)+"/"+t._s(e.area_name))])])])}))],2)],1),a("el-form-item",{attrs:{label:"商品名称",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.params.goods_name,callback:function(e){t.$set(t.params,"goods_name",e)},expression:"params.goods_name"}})],1),a("el-form-item",{attrs:{label:"仓库",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{focus:t.getWarehouseFoucs,change:t.changeAll},model:{value:t.params.warehouse_id,callback:function(e){t.$set(t.params,"warehouse_id",e)},expression:"params.warehouse_id"}},t._l(t.warehouseList.options,(function(t){return a("el-option",{key:t.warehouse_id,attrs:{label:t.warehouse_name,value:t.warehouse_id}})})),1)],1),a("el-form-item",{attrs:{label:"货位",size:"mini"}},[a("el-select",{staticClass:"el_slect",attrs:{clearable:"",placeholder:"请选择",size:"mini"},on:{focus:t.getAllocationInventoryFoucs},model:{value:t.params.allocation_id,callback:function(e){t.$set(t.params,"allocation_id",e)},expression:"params.allocation_id"}},t._l(t.allocationInventoryList,(function(t){return a("el-option",{key:t.allocation_id,attrs:{label:t.allocation_name,value:t.allocation_id}})})),1)],1),a("el-form-item",{attrs:{label:"部门",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:t.getDepartmentFocus},model:{value:t.params.department_id,callback:function(e){t.$set(t.params,"department_id",e)},expression:"params.department_id"}},t._l(t.departmentList.options,(function(t){return a("el-option",{key:t.department_id,attrs:{label:t.department_name,value:t.department_id}})})),1)],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.onSearch}},[t._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.onReset}},[t._v("重置")])],1)],1)],1),a("div",{staticClass:"table_container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading1,expression:"loading1"}],staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:t.TableData.tableData,"max-height":"600"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",fixed:"left",align:"center",width:"44"}}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==t.authority.b_info?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.seeDetail(e.row)}}},[t._v(" 胎号查看 ")]):t._e(),1==e.row.auditor_status&&1==t.authority.b_add?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.untilDetail(e,e.row)}}},[t._v(" 胎号录入 ")]):a("el-button",{attrs:{disabled:"",type:"text",size:"small"}},[t._v(" 胎号录入 ")])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"company_name",width:"130",label:"销售组织"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"instorage_sn",width:"220",label:"入库单据号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"customer_name",width:"120",label:"客户名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"brand_name",width:"140",label:"品牌名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_id",width:"250",label:"商品编号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_name","min-width":"500",label:"商品名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("pre",[t._v(t._s(e.row.goods_name))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_num",width:"130",label:"返胎数量"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"tire_num",width:"100",label:"胎号数量"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"warehouse_name",width:"132",label:"仓库名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"allocation_name",width:"160",label:"货位名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"business_time",width:"120",label:"业务日期"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"add_time",width:"170",label:"单据时间"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"department_name",width:"100",label:"部门"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"remark",width:"260",label:"备注"}})],1)],1),a("div",{staticClass:"page_container"},[a("div",{staticClass:"pageNumber"},[t._v("每页显示")]),a("el-pagination",{staticClass:"erp-pagination",attrs:{"current-page":t.goPage,"page-sizes":t.per_page,"page-size":t.pageSize1,layout:"total,sizes, prev, pager, next,jumper",prevText:"上一页",nextText:"下一页",total:t.TableData.total},on:{"size-change":t.handleSizeChange,"update:currentPage":function(e){t.goPage=e},"update:current-page":function(e){t.goPage=e},"current-change":t.handleCurrentChange}})],1),t.dialogFormVisible?a("div",[a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"胎号录入",visible:t.dialogFormVisible,width:"700px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"ruleForm",staticClass:"dialog-see",attrs:{inline:!0,model:t.add}},[a("el-form-item",{staticClass:"hidden",attrs:{label:"销售组织："}},[a("span",[t._v(t._s(t.add.company_name))])]),a("el-form-item",{attrs:{label:"返胎入库单据号："}},[t._v(" "+t._s(t.add.instorage_sn)+" ")]),a("el-form-item",{staticClass:"hidden ys",attrs:{label:"客户名称："}},[a("span",[t._v(t._s(t.add.customer_name))])]),a("el-form-item",{staticClass:"hidden",attrs:{label:"品牌名称："}},[a("span",[t._v(t._s(t.add.brand_name))])]),a("el-form-item",{staticClass:"hidden",attrs:{label:"商品编号："}},[a("span",[t._v(t._s(t.add.goods_id))])]),a("el-form-item",{staticClass:"hidden",attrs:{label:"商品名称："}},[a("span",[t._v(t._s(t.add.goods_name))])]),a("el-form-item",{staticClass:"hidden",attrs:{label:"部 门："}},[a("span",[t._v(t._s(t.add.department_name))])])],1),a("span",{staticStyle:{width:"100%",height:"1px",background:"#666",display:"block","margin-bottom":"20px"}}),a("el-form",{attrs:{inline:!0}},[a("el-row",[a("h3",{staticStyle:{"margin-bottom":"20px"}},[t._v("胎号录入")])]),a("el-row",t._l(t.add.tire_json,(function(e){return a("el-form-item",{key:e.id,staticStyle:{width:"290px"},attrs:{label:"胎号"}},[a("el-input",{staticStyle:{width:"160px"},attrs:{type:"text",placeholder:"请输入"},model:{value:e.tire_un,callback:function(a){t.$set(e,"tire_un",a)},expression:"item.tire_un"}})],1)})),1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.clearAdd}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.Sure}},[t._v("确 定")])],1)],1)],1):t._e(),t.dialogFormVisibleSee?a("div",[a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"胎号查看",visible:t.dialogFormVisibleSee,width:"700px"},on:{"update:visible":function(e){t.dialogFormVisibleSee=e}}},[a("el-form",{ref:"ruleForm",staticClass:"dialog-see",attrs:{inline:!0,model:t.GoodsTire}},[a("el-form-item",{attrs:{label:"销售组织："}},[t._v(" "+t._s(t.GoodsTire.company_name)+" ")]),a("el-form-item",{attrs:{label:"返胎入库单据号："}},[t._v(" "+t._s(t.GoodsTire.instorage_sn)+" ")]),a("el-form-item",{attrs:{label:"客户名称："}},[t._v(" "+t._s(t.GoodsTire.customer_name)+" ")]),a("el-form-item",{attrs:{label:"品牌名称："}},[t._v(" "+t._s(t.GoodsTire.brand_name)+" ")]),a("el-form-item",{attrs:{label:"商品编号："}},[t._v(" "+t._s(t.GoodsTire.goods_id)+" ")]),a("el-form-item",{attrs:{label:"商品名称："}},[t._v(" "+t._s(t.GoodsTire.goods_name)+" ")]),a("el-form-item",{attrs:{label:"部 门："}},[t._v(" "+t._s(t.GoodsTire.department_name)+" ")])],1),a("span",{staticStyle:{width:"100%",height:"1px",background:"#666",display:"block","margin-bottom":"20px"}}),a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:t.GoodsTire.tire_list,"max-height":"600"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"tire_un",label:"胎号","min-width":"100"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"check_status",label:"校验状态"}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisibleSee=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogFormVisibleSee=!1}}},[t._v("确 定")])],1)],1)],1):t._e()])])},i=[],s=a("5530"),l=a("ade3"),r=(a("e9c4"),a("65b0")),n=a("2f62"),d={name:"aftersaleThreetireIndex",data:function(){var t;return t={authority:{},add:{tire_json:[]},allocationInventoryList:[],goodsList:[],GoodsTire:{},TableData:{tableData:[],total:10},per_page:[30,50,100,500],searchParams:{},goPage:1,pageSize:30,loading:!1,timeValue:[],companyList:{options:[]},departmentList:{options:[]},params:{tire_type:"1"},multipleSelection:[],dialogFormVisible:!1,dialogFormVisibleSee:!1,showDepartment:!0},Object(l["a"])(t,"departmentList",{options:[]}),Object(l["a"])(t,"companyList",[]),Object(l["a"])(t,"SelesTomer",{options:[]}),Object(l["a"])(t,"warehouseList",{options:[]}),t},methods:Object(s["a"])(Object(s["a"])({},Object(n["b"])(["tiremanagementSeeACT"])),{},{getCompanyFoucs:function(){Object(r["e"])(this)},getDepartmentFocus:function(){Object(r["i"])(this,this.params)},getWarehouseFoucs:function(){this.$common.options("getWarehouseListOption",this.warehouseList,{company_id:this.params.company_id})},getAllocationInventoryFoucs:function(){var t=this;this.$axMethod.allocationInventoryList().then((function(e){var a=e.data;"200"==a.code&&(t.allocationInventoryList=a.data)}))},clearAdd:function(){this.$set(this,"add",{tire_json:[]}),this.dialogFormVisible=!1},changeAll:function(t){var e=this;this.$axMethod.allocationInventoryList({warehouse_id:t}).then((function(t){var a=t.data;"200"==a.code&&(e.allocationInventoryList=a.data)}))},Sure:function(){for(var t=this,e=0;e<this.add.tire_json.length;e++)if(!this.add.tire_json[e].tire_un)return this.$message({message:"胎号需全部录入",type:"warning"}),!1;var a={instorage_goods_id:this.add.instorage_goods_id,goods_id:this.add.goods_id,goods_sn:this.add.goods_sn,tire_json:JSON.stringify(this.add.tire_json)};this.$axMethod.addGoodsTire(a).then((function(e){200==e.data.code&&(t.$message({message:e.data.data,type:"success"}),Object(r["g"])(t.searchParams))})),this.dialogFormVisible=!1},companyChange:function(t,e){Object(r["i"])(this,this[e],1)},handleSelectionChange:function(t){this.multipleSelection=t},untilDetail:function(t,e){this.$set(this,"add",{instorage_goods_id:e.instorage_goods_id,goods_id:e.goods_id,instorage_sn:e.instorage_sn,customer_name:e.customer_name,brand_name:e.brand_name,goods_sn:e.goods_sn,goods_name:e.goods_name,goods_num:e.goods_num,company_id:e.company_id,department_id:e.department_id,company_name:e.company_name,department_name:e.department_name,tire_json:[]});for(var a=0;a<e.goods_num;a++)this.add.tire_json.push({});this.dialogFormVisible=!0},seeDetail:function(t){var e=this;this.$axMethod.getGoodsTire({instorage_goods_id:t.instorage_goods_id}).then((function(t){e.GoodsTire=t.data.data})),this.dialogFormVisibleSee=!0},onReset:function(t){this.$set(this,"params",{tire_type:"1"}),this.timeValue=[],this.$set(this,"searchParams",{params:{tire_type:"1"},TableData:this.TableData,API:"getGoodsTireList",vm:this}),Object(r["g"])(this.searchParams)},onSearch:function(){this.timeValue&&2==this.timeValue.length?(this.params.add_time_start=this.timeValue[0],this.params.add_time_end=this.timeValue[1]):this.params.add_time_start=this.params.add_time_end="",Object.assign(this.searchParams.params,this.params,{page:1}),Object(r["g"])(this.searchParams)},handleSizeChange:function(t){Object.assign(this.searchParams.params,{per_page:t,page:1}),Object(r["g"])(this.searchParams)},handleCurrentChange:function(t){Object.assign(this.searchParams.params,{page:t}),Object(r["g"])(this.searchParams)}}),mounted:function(){this.authority=JSON.parse(localStorage.getItem("authority")),this.$set(this,"searchParams",{params:{tire_type:"1"},TableData:this.TableData,API:"getGoodsTireList",vm:this}),Object(r["g"])(this.searchParams)}},m=d,c=(a("c0f2"),a("2877")),p=Object(c["a"])(m,o,i,!1,null,"77ef61c9",null);e["default"]=p.exports},c0f2:function(t,e,a){"use strict";a("2ed3")}}]);
//# sourceMappingURL=chunk-2a95234b.4c514908.js.map