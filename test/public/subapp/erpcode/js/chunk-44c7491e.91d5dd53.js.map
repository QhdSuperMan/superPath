{"version":3,"sources":["webpack://erpcode-[name]/./node_modules/core-js/internals/array-fill.js","webpack://erpcode-[name]/./src/components/element/inventory/instorage/otheninstorage/instorageAdd.vue?3398","webpack://erpcode-[name]/./node_modules/core-js/modules/es.array.fill.js","webpack://erpcode-[name]/./src/components/element/inventory/instorage/otheninstorage/instorageAdd.vue?52c3","webpack://erpcode-[name]/./src/components/element/inventory/instorage/otheninstorage/config/instorageAdd.js","webpack://erpcode-[name]/src/components/element/inventory/instorage/otheninstorage/instorageAdd.vue","webpack://erpcode-[name]/./src/components/element/inventory/instorage/otheninstorage/instorageAdd.vue?ce4b","webpack://erpcode-[name]/./src/components/element/inventory/instorage/otheninstorage/instorageAdd.vue"],"names":["toObject","toAbsoluteIndex","lengthOfArrayLike","module","exports","value","O","this","length","argumentsLength","arguments","index","undefined","end","endPos","$","fill","addToUnscopables","target","proto","render","_vm","_h","$createElement","_c","_self","attrs","_v","staticClass","on","goBack","_s","title","ref","params","rules","company_id","disabled","companyListInvok","companyChange","model","callback","$$v","$set","expression","_l","item","key","company_name","class","type","business_time","warehouse_id","warehouseInvok","warehouseChange","warehouse_name","supplier_id","supplierListInvok","supplier_name","department_id","DepartmentListInvok","departmentChange","department_name","buyer_id","EmployeeListInvok","employee_id","employee_name","calcPrice","vxeTableData","slot","label","receivables_mode_id","receivablesInvok","receivables_mode_name","addF","deleteF","isEdit","tableColumn","staticStyle","add_user_name","add_time","auditor_name","auditor_time","update_user_name","update_time","isCanSumbit","$event","submit","staticRenderFns","getWeek","today","Date","firstDay","getFullYear","dayOfWeek","getDay","spendDay","d","Math","ceil","valueOf","result","String","year","toString","substring","saleRowModule","sumbitRowModule","TableHead","data","activateScope","width","field","fixed","slots","default","row","$refs","xTable","_copyRow","editRender","name","getParams","showObj","goods_id","goods_name","unit_name","brand_name","specification_type","factory_code","events","change","changeGoods","placeholder","blur","blurChange","headerAlign","align","input","handleEdit","url","isPage","val","allocation_id","allocation_name","formatter","methods","scope","column","property","batch","substr","$message","warning","mixins","loading","supplierList","otherPriceType","localStorage","_proxy","fullData","forEach","box","warehouseList","filter","purchase_price","arr","getAllocationList","concat","$axios","method","$api","newAllocationList","repeat","res2","other_price","other_price_type","tableDatas","Number","goods_num","flag","indexArr","push","tableDatas2","getCountApportionOptions","goods_info","JSON","stringify","$router","path","message","formName","validate","valid","tableBox","pop","obj","order_id","factorysend_sn","factorysend_time","remark","instorage_id","num","price","totalPrice","$publicFution","computeTotal","mounted","$route","query","otherStorageInfoInStorage","res","code","instoragList","order_sn","Object","assign","buyer_name","includes","company_admin_id","formatData","setTimeout","component"],"mappings":"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","file":"js/chunk-44c7491e.91d5dd53.js","sourcesContent":["'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.fill` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.fill\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = lengthOfArrayLike(O);\n  var argumentsLength = arguments.length;\n  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);\n  var end = argumentsLength > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./instorageAdd.vue?vue&type=style&index=0&id=28d68242&lang=less&scoped=true&\"","var $ = require('../internals/export');\nvar fill = require('../internals/array-fill');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.fill` method\n// https://tc39.es/ecma262/#sec-array.prototype.fill\n$({ target: 'Array', proto: true }, {\n  fill: fill\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('fill');\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',[_vm._v(\"库存管理\")]),_c('el-breadcrumb-item',{staticClass:\"attrbute\"},[_c('span',{on:{\"click\":_vm.goBack}},[_vm._v(\"其他入库管理\")])]),_c('el-breadcrumb-item',[_vm._v(_vm._s(_vm.title)+\"其他入库单\")])],1),_c('div',{staticClass:\"search_container\"},[_c('el-form',{ref:\"ruleForm\",staticClass:\"demo-form-inline\",attrs:{\"inline\":true,\"model\":_vm.params}},[_c('el-form-item',{attrs:{\"label\":\"库存组织\",\"size\":\"mini\",\"prop\":\"company_id\",\"rules\":_vm.rules.company_id}},[_vm._v(\" \"+_vm._s((function(){if(_vm.params.company_id == 0){ _vm.params.company_id = null }})())+\" \"),_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\",\"filterable\":\"\",\"disabled\":_vm.disabled},on:{\"focus\":_vm.companyListInvok,\"change\":_vm.companyChange},model:{value:(_vm.params.company_id),callback:function ($$v) {_vm.$set(_vm.params, \"company_id\", $$v)},expression:\"params.company_id\"}},_vm._l((_vm.companyList),function(item){return _c('el-option',{key:item.company_id,attrs:{\"label\":item.company_name,\"value\":item.company_id}},[_c('span',{class:item.type==1 ? 'optionStyle': ''},[_vm._v(_vm._s(item.company_name))])])}),1)],1),_c('el-form-item',{attrs:{\"label\":\"单据号\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.params.instorage_sn),callback:function ($$v) {_vm.$set(_vm.params, \"instorage_sn\", $$v)},expression:\"params.instorage_sn\"}})],1),_c('el-form-item',{attrs:{\"label\":\"业务日期\",\"size\":\"mini\",\"prop\":\"business_time\",\"rules\":_vm.rules.business_time}},[_c('el-date-picker',{attrs:{\"value-format\":\"yyyy-MM-dd\",\"type\":\"date\",\"placeholder\":\"选择日期\"},model:{value:(_vm.params.business_time),callback:function ($$v) {_vm.$set(_vm.params, \"business_time\", $$v)},expression:\"params.business_time\"}})],1),_c('el-form-item',{attrs:{\"label\":\"仓库名称\",\"size\":\"mini\",\"prop\":\"warehouse_id\",\"rules\":_vm.rules.warehouse_id}},[_vm._v(\" \"+_vm._s((function(){if(_vm.params.warehouse_id == 0){ _vm.params.warehouse_id = null }})())+\" \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\",\"filterable\":\"\"},on:{\"focus\":_vm.warehouseInvok,\"change\":_vm.warehouseChange},model:{value:(_vm.params.warehouse_id),callback:function ($$v) {_vm.$set(_vm.params, \"warehouse_id\", $$v)},expression:\"params.warehouse_id\"}},_vm._l((_vm.warehouseList),function(item){return _c('el-option',{key:item.warehouse_id,attrs:{\"label\":item.warehouse_name,\"value\":item.warehouse_id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"入库类型\",\"size\":\"mini\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.params.type),callback:function ($$v) {_vm.$set(_vm.params, \"type\", $$v)},expression:\"params.type\"}},[_c('el-option',{attrs:{\"label\":\"其他入库\",\"value\":2}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"供应商(厂家)\",\"size\":\"mini\"}},[_vm._v(\" \"+_vm._s((function(){if(_vm.params.supplier_id == 0) { _vm.params.supplier_id = null }})())+\" \"),_c('el-select',{attrs:{\"clearable\":\"\",\"maxlength\":\"100\",\"filter-method\":_vm.supplierListInvok,\"filterable\":\"\",\"placeholder\":\"请选择\"},on:{\"focus\":_vm.supplierListInvok},model:{value:(_vm.params.supplier_id),callback:function ($$v) {_vm.$set(_vm.params, \"supplier_id\", $$v)},expression:\"params.supplier_id\"}},_vm._l((_vm.supplierList),function(item){return _c('el-option',{key:item.supplier_id,attrs:{\"label\":item.supplier_name,\"value\":item.supplier_id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"部门\",\"size\":\"mini\",\"filterable\":\"\"}},[_vm._v(\" \"+_vm._s((function(){if(_vm.params.department_id == 0){ _vm.params.department_id = null }})())+\" \"),_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\",\"filterable\":\"\",\"disabled\":_vm.disabled},on:{\"focus\":_vm.DepartmentListInvok,\"change\":_vm.departmentChange},model:{value:(_vm.params.department_id),callback:function ($$v) {_vm.$set(_vm.params, \"department_id\", $$v)},expression:\"params.department_id\"}},_vm._l((_vm.departmentList),function(item){return _c('el-option',{key:item.department_id,attrs:{\"label\":item.department_name,\"value\":item.department_id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"采购员\",\"size\":\"mini\"}},[_vm._v(\" \"+_vm._s((function(){if(_vm.params.buyer_id == 0){ _vm.params.buyer_id = null }})())+\" \"),_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\",\"disabled\":_vm.disabled},on:{\"focus\":_vm.EmployeeListInvok},model:{value:(_vm.params.buyer_id),callback:function ($$v) {_vm.$set(_vm.params, \"buyer_id\", $$v)},expression:\"params.buyer_id\"}},_vm._l((_vm.employeeList),function(item){return _c('el-option',{key:item.employee_id,attrs:{\"label\":item.employee_name,\"value\":item.employee_id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"其他费用\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"placeholder\":\"金额\"},on:{\"change\":_vm.calcPrice,\"blur\":_vm.calcPrice},model:{value:(_vm.params.other_price),callback:function ($$v) {_vm.$set(_vm.params, \"other_price\", $$v)},expression:\"params.other_price\"}},[_c('el-select',{staticClass:\"styleInput\",attrs:{\"slot\":\"prepend\",\"clearable\":\"\",\"disabled\":!_vm.vxeTableData.length},on:{\"change\":_vm.calcPrice},slot:\"prepend\",model:{value:(_vm.params.other_price_type),callback:function ($$v) {_vm.$set(_vm.params, \"other_price_type\", $$v)},expression:\"params.other_price_type\"}},_vm._l((_vm.otherPriceType),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1)],1),_c('el-form-item',{attrs:{\"label\":\"付款方式\",\"size\":\"mini\"}},[_vm._v(\" \"+_vm._s((function(){if(_vm.params.receivables_mode_id == 0){ _vm.params.receivables_mode_id = null }})())+\" \"),_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\"},on:{\"focus\":_vm.receivablesInvok},model:{value:(_vm.params.receivables_mode_id),callback:function ($$v) {_vm.$set(_vm.params, \"receivables_mode_id\", $$v)},expression:\"params.receivables_mode_id\"}},_vm._l((_vm.receivablesList),function(item){return _c('el-option',{key:item.receivables_mode_id,attrs:{\"label\":item.receivables_mode_name,\"value\":item.receivables_mode_id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"关联单据号\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.params.order_sn),callback:function ($$v) {_vm.$set(_vm.params, \"order_sn\", $$v)},expression:\"params.order_sn\"}})],1),_c('el-form-item',{attrs:{\"label\":\"厂家发货单号\",\"size\":\"mini\"}},[_c('el-input',{model:{value:(_vm.params.factorysend_sn),callback:function ($$v) {_vm.$set(_vm.params, \"factorysend_sn\", $$v)},expression:\"params.factorysend_sn\"}})],1),_c('el-form-item',{attrs:{\"label\":\"厂家发货日期\",\"size\":\"mini\"}},[_c('el-date-picker',{attrs:{\"value-format\":\"yyyy-MM-dd\",\"type\":\"date\",\"placeholder\":\"选择日期\"},model:{value:(_vm.params.factorysend_time),callback:function ($$v) {_vm.$set(_vm.params, \"factorysend_time\", $$v)},expression:\"params.factorysend_time\"}})],1),_c('el-form-item',{attrs:{\"label\":\"打印次数\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.params.print_times),callback:function ($$v) {_vm.$set(_vm.params, \"print_times\", $$v)},expression:\"params.print_times\"}})],1)],1)],1),_c('div',{staticClass:\"add_delet\"},[_c('el-button',{staticClass:\"addBtn\",attrs:{\"icon\":\"el-icon-circle-plus-outline\",\"type\":\"primary\",\"size\":\"mini\",\"disabled\":_vm.disabled},on:{\"click\":_vm.addF}},[_vm._v(\"增行\")]),_c('el-button',{attrs:{\"plain\":\"\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":_vm.deleteF}},[_vm._v(\"删行\")])],1),_c('div',{staticClass:\"table_container\"},[_c('xTable',{ref:\"xTable\",attrs:{\"isEdit\":_vm.isEdit,\"tableColumn\":_vm.tableColumn,\"showFooter\":true,\"totalArray\":['goods_num','subtotal_price']}}),_c('div',{staticClass:\"refundauditFoot\"},[_c('div',{staticStyle:{\"margin\":\"15px 0\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入\",\"maxlength\":\"300\"},model:{value:(_vm.params.remark),callback:function ($$v) {_vm.$set(_vm.params, \"remark\", $$v)},expression:\"params.remark\"}},[_c('template',{slot:\"prepend\"},[_vm._v(\"备注\")])],2)],1),(_vm.title == '新增')?[_c('span',[_vm._v(\"创建人：\"+_vm._s(_vm.add_user_name))])]:[_c('span',[_vm._v(\"创建人：\"+_vm._s(_vm.params.add_user_name))]),_c('span',[_vm._v(\"创建时间：\"+_vm._s(_vm.params.add_time))]),_c('span',[_vm._v(\"审核人：\"+_vm._s(_vm.params.auditor_name))]),_c('span',[_vm._v(\"审核时间：\"+_vm._s(_vm.params.auditor_time))]),_c('span',[_vm._v(\"修改人：\"+_vm._s(_vm.params.update_user_name))]),_c('span',[_vm._v(\"修改时间：\"+_vm._s(_vm.params.update_time))])]],2)],1),_c('div',{staticClass:\"dialog-footer\",staticStyle:{\"text-align\":\"center\",\"margin-top\":\"20px\"}},[_c('el-button',{on:{\"click\":_vm.goBack}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":!_vm.isCanSumbit},on:{\"click\":function($event){return _vm.submit('ruleForm')}}},[_vm._v(\"确 定\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export function getWeek() {\n  var today = new Date();\n  var firstDay = new Date(today.getFullYear(), 0, 1);\n  var dayOfWeek = firstDay.getDay();\n  var spendDay = 1;\n  if (dayOfWeek != 0) {\n    spendDay = 7 - dayOfWeek + 1;\n  }\n  firstDay = new Date(today.getFullYear(), 0, 1 + spendDay);\n  var d = Math.ceil((today.valueOf() - firstDay.valueOf()) / 86400000);\n  var result =\n    String(Math.ceil(d / 7) + 1).length == 2 ?\n      Math.ceil(d / 7) + 1 :\n      `0${Math.ceil(d / 7) + 1}`;\n  var year = today\n    .getFullYear()\n    .toString()\n    .substring(2);\n  return `${result}${year}`;\n}\n// 模板\nexport const saleRowModule = {\n  \"goods_id\": '',\n  \"goods_num\": '',\n  \"allocation_id\": '',\n  \"allocation_name\": '',\n  \"remark\": '',\n  \"purchase_price\": '',\n  \"batch\": getWeek(),\n  \"subtotal_price\": ''\n}\n// 提交模板\nexport const sumbitRowModule = {\n  \"instorage_goods_id\": 0,\n  \"goods_id\": '',\n  \"goods_num\": '',\n  \"allocation_id\": '',\n  \"remark\": '',\n  \"purchase_price\": '',\n  \"batch\": getWeek(),\n  \"subtotal_price\": ''\n}\nexport const TableHead = { // 需要传进来一个this对象\n  data() {\n    return {\n      activateScope: {},\n      tableColumn: [\n        {\n          type: \"checkbox\",\n          width: 44\n        },\n        {\n          field: 'id',\n          title: '操作',\n          fixed: 'right',\n          width: 54,\n          slots: {\n            default: ({ row }) => {\n              return [<i class=\"el-icon-document\" onClick={() => { this.$refs.xTable._copyRow(row); this.calcPrice() }} style=\"cursor: pointer;font-size: 15px;\" ></i>]\n            }\n          }\n        },\n        {\n          title: '商品编号',\n          field: 'goods_id',\n          width: 80\n        },\n        {\n          title: '商品名称',\n          field: 'goods_name',\n          width: 350,\n          editRender: {\n            name: 'vGoods',\n            getParams: () => {\n              return {\n                params: {\n                  company_id: this.params.company_id\n                },\n                showObj: {\n                  goods_id: \"商品编号\",\n                  goods_name: \"商品名称\",\n                  unit_name: \"单位\",\n                  brand_name: \"品牌\",\n                  specification_type: \"规格型号\",\n                  factory_code: \"工厂代码\"\n                }\n              }\n            },\n            events: {\n              change: this.changeGoods\n            }\n          }\n        },\n        {\n          title: '年周/批次',\n          field: 'batch',\n          width: 150,\n          editRender: {\n            name: 'number',\n            placeholder: '周周年年,如1421',\n            events: {\n              blur: this.blurChange\n            }\n          }\n        },\n        {\n          title: '单位',\n          field: 'unit_name',\n          width: 100\n        },\n        {\n          title: '入库数量',\n          field: 'goods_num',\n          headerAlign: \"right\", // 表头对齐方式\n          align: \"right\", // 列对齐方式\n          width: 110,\n          editRender: {\n            name: 'number',\n            events: {\n              input: this.handleEdit,\n              change: this.calcPrice\n            }\n          }\n        },\n        {\n          title: '采购价',\n          field: 'purchase_price',\n          headerAlign: \"right\", // 表头对齐方式\n          align: \"right\", // 列对齐方式\n          width: 132,\n          editRender: {\n            name: 'Vinput',\n            events: {\n              input: this.handleEdit,\n              change: this.calcPrice\n            },\n          }\n        },\n        {\n          title: '小计金额',\n          field: 'subtotal_price',\n          headerAlign: \"right\", // 表头对齐方式\n          align: \"right\", // 列对齐方式\n          width: 132,\n          editRender: {\n            name: 'Vinput',\n            events: {\n              input: this.handleEdit,\n              change: this.calcPrice\n            }\n          }\n        },\n        {\n          title: '货位名称',\n          field: 'allocation_name',\n          width: 130,\n          editRender: {\n            name: 'vAllocation',\n            getParams: ({\n              row\n            }) => {\n              return {\n                url: 'newAllocationList',\n                isPage: true,\n                params: {\n                  company_id: this.params.company_id,\n                  warehouse_id: this.params.warehouse_id,\n                  goods_id: row.goods_id\n                }\n              }\n            },\n            events: {\n              change: ({ row }, val) => {\n                row.allocation_id = val.allocation_id\n                row.allocation_name = val.allocation_name\n              }\n            }\n          }\n        },\n        {\n          title: '其他费用',\n          field: 'other_price',\n          headerAlign: \"right\", // 表头对齐方式\n          align: \"right\", // 列对齐方式\n          width: 100\n        },\n        {\n          title: '备注',\n          field: 'remark',\n          editRender: {\n            name: 'Vinput',\n            formatter: 'String'\n          }\n        },\n\n      ]\n    }\n  },\n  methods: {\n    // 是否可编辑\n    isEdit(scope) {\n      this.activateScope = false\n      if (scope.column.property === 'allocation_name') {\n        this.activateScope = scope\n      }\n      return true\n    },\n    blurChange({ row }) {\n      if (row.batch.toString().length != 4) {\n        this.$message.warning(\"年周/批次填写错误，标准格式：周周年年，如1421\");\n        this.$set(row, \"batch\", '');\n      } else {\n        if (row.batch.toString().substr(0, 2) > 52 || row.batch.toString().substr(2, 2) > 21) {\n          this.$message.warning(\"年周/批次填写错误，标准格式：周周年年，如1421\");\n          this.$set(row, \"batch\", '');\n        }\n      }\n    },\n    // 获取批次\n    getWeek: getWeek,\n  }\n}","<template>\n  <div>\n    <!-- 添加修改库存入库单 -->\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item>库存管理</el-breadcrumb-item>\n      <el-breadcrumb-item class=\"attrbute\">\n        <span @click=\"goBack\">其他入库管理</span>\n      </el-breadcrumb-item>\n      <el-breadcrumb-item>{{title}}其他入库单</el-breadcrumb-item>\n    </el-breadcrumb>\n    <div class=\"search_container\">\n      <el-form :inline=\"true\" :model=\"params\" ref=\"ruleForm\" class=\"demo-form-inline\">\n        <el-form-item label=\"库存组织\" size=\"mini\" prop=\"company_id\" :rules=\"rules.company_id\">\n          {{(function(){if(params.company_id == 0)params.company_id = null})()}}\n          <el-select clearable v-model=\"params.company_id\" placeholder=\"请选择\" @focus=\"companyListInvok\" @change=\"companyChange\" filterable :disabled=\"disabled\">\n            <el-option v-for=\"item in companyList\" :key=\"item.company_id\" :label=\"item.company_name\" :value=\"item.company_id\">\n              <span :class=\"item.type==1 ? 'optionStyle': ''\">{{ item.company_name }}</span>\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"单据号\" size=\"mini\">\n          <el-input v-model=\"params.instorage_sn\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"业务日期\" size=\"mini\" prop=\"business_time\" :rules=\"rules.business_time\">\n          <el-date-picker v-model=\"params.business_time\" value-format=\"yyyy-MM-dd\" type=\"date\" placeholder=\"选择日期\">\n          </el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"仓库名称\" size=\"mini\" prop=\"warehouse_id\" :rules=\"rules.warehouse_id\">\n          {{(function(){if(params.warehouse_id == 0)params.warehouse_id = null})()}}\n          <el-select v-model=\"params.warehouse_id\" placeholder=\"请选择\" filterable @focus=\"warehouseInvok\" @change=\"warehouseChange\">\n            <el-option v-for=\"item in warehouseList\" :key=\"item.warehouse_id\" :label=\"item.warehouse_name\" :value=\"item.warehouse_id\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"入库类型\" size=\"mini\">\n          <el-select v-model=\"params.type\" placeholder=\"请选择\">\n            <el-option label=\"其他入库\" :value=\"2\"></el-option>\n            <!-- <el-option label=\"盘盈入库\" :value=\"4\"></el-option> -->\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"供应商(厂家)\" size=\"mini\">\n          {{(function(){if(params.supplier_id == 0) params.supplier_id = null})()}}\n          <el-select clearable v-model=\"params.supplier_id\" maxlength=\"100\" :filter-method=\"supplierListInvok\" @focus=\"supplierListInvok\" filterable placeholder=\"请选择\">\n            <el-option v-for=\"item in supplierList\" :label=\"item.supplier_name\" :value=\"item.supplier_id\" :key=\"item.supplier_id\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"部门\" size=\"mini\" filterable>\n          {{(function(){if(params.department_id == 0)params.department_id = null})()}}\n          <el-select clearable v-model=\"params.department_id\" placeholder=\"请选择\" @focus=\"DepartmentListInvok\" @change=\"departmentChange\" filterable :disabled=\"disabled\">\n            <el-option :label=\"item.department_name\" :value=\"item.department_id\" :key=\"item.department_id\" v-for=\"item in departmentList\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"采购员\" size=\"mini\">\n          {{(function(){if(params.buyer_id == 0)params.buyer_id = null})()}}\n          <el-select clearable v-model=\"params.buyer_id\" placeholder=\"请选择\" :disabled=\"disabled\" @focus=\"EmployeeListInvok\">\n            <el-option :label=\"item.employee_name\" :value=\"item.employee_id\" :key=\"item.employee_id\" v-for=\"item in employeeList\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"其他费用\" size=\"mini\">\n          <el-input placeholder=\"金额\" v-model=\"params.other_price\" @change=\"calcPrice\" @blur=\"calcPrice\">\n            <el-select clearable v-model=\"params.other_price_type\" :disabled=\"!vxeTableData.length\" class=\"styleInput\" slot=\"prepend\" @change=\"calcPrice\">\n              <el-option v-for=\"item in otherPriceType\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\n              </el-option>\n            </el-select>\n          </el-input>\n        </el-form-item>\n        <el-form-item label=\"付款方式\" size=\"mini\">\n          {{(function(){if(params.receivables_mode_id == 0)params.receivables_mode_id = null})()}}\n          <el-select clearable v-model=\"params.receivables_mode_id\" placeholder=\"请选择\" @focus=\"receivablesInvok\">\n            <el-option :label=\"item.receivables_mode_name\" :value=\"item.receivables_mode_id\" :key=\"item.receivables_mode_id\" v-for=\"item in receivablesList\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"关联单据号\" size=\"mini\">\n          <el-input v-model=\"params.order_sn\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"厂家发货单号\" size=\"mini\">\n          <el-input v-model=\"params.factorysend_sn\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"厂家发货日期\" size=\"mini\">\n          <el-date-picker v-model=\"params.factorysend_time\" value-format=\"yyyy-MM-dd\" type=\"date\" placeholder=\"选择日期\">\n          </el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"打印次数\" size=\"mini\">\n          <el-input v-model=\"params.print_times\" disabled></el-input>\n        </el-form-item>\n\n      </el-form>\n    </div>\n    <div class=\"add_delet\">\n      <el-button icon=\"el-icon-circle-plus-outline\" type=\"primary\" @click=\"addF\" class=\"addBtn\" size=\"mini\" :disabled=\"disabled\">增行</el-button>\n      <el-button plain icon=\"el-icon-delete\" @click=\"deleteF\" size=\"mini\">删行</el-button>\n    </div>\n    <div class=\"table_container\">\n      <xTable ref='xTable' :isEdit='isEdit' :tableColumn='tableColumn' :showFooter='true' :totalArray=\"['goods_num','subtotal_price']\" />\n      <div class=\"refundauditFoot\">\n        <div style=\"margin: 15px 0;\">\n          <el-input placeholder=\"请输入\" v-model=\"params.remark\" maxlength=\"300\">\n            <template slot=\"prepend\">备注</template>\n          </el-input>\n        </div>\n        <template v-if=\"title == '新增'\">\n          <span>创建人：{{add_user_name }}</span>\n        </template>\n        <template v-else>\n          <span>创建人：{{params.add_user_name }}</span>\n          <span>创建时间：{{params.add_time}}</span>\n          <span>审核人：{{params.auditor_name }}</span>\n          <span>审核时间：{{params.auditor_time }}</span>\n          <span>修改人：{{params.update_user_name }}</span>\n          <span>修改时间：{{params.update_time }}</span>\n        </template>\n      </div>\n    </div>\n    <div class=\"dialog-footer\" style=\"text-align:center;margin-top:20px;\">\n      <el-button @click=\"goBack\">取 消</el-button>\n      <el-button type=\"primary\" :disabled=\"!isCanSumbit\" @click=\"submit('ruleForm')\">确 定</el-button>\n    </div>\n  </div>\n</template>\n<script>\nimport {\n  CompanySwitchClear,\n  opthionList\n} from \"common/utils/public_function/commonUtils\";\nimport {\n  TableHead,\n  saleRowModule,\n  sumbitRowModule\n} from \"./config/instorageAdd\";\nexport default {\n  name: \"instorageOtheninstorageInstorageAdd\",\n  mixins: [TableHead],\n  data() {\n    return {\n      title: \"新增\",\n      isCanSumbit: true,\n      vxeTableData: {\n        length: 0\n      },\n      loading: false,\n      supplierList: [],\n      disabled: false, //是否禁用按钮\n      otherPriceType: [\n        {\n          value: 0,\n          label: \"不分摊\"\n        },\n        {\n          value: 1,\n          label: \"按金额分摊\"\n        },\n        {\n          value: 2,\n          label: \"按数量分摊\"\n        }\n      ],\n      add_user_name: localStorage.employee_name\n    };\n  },\n  methods: {\n    // 仓库改变\n    warehouseChange(id) {\n      this.$refs.xTable._proxy(\"getTableData\").fullData.forEach(val => {\n        val.allocation_name = \"\";\n        val.allocation_id = \"\";\n        this.getAllocationList(val);\n      });\n      var box = this.warehouseList.filter(val => val.warehouse_id === id);\n      this.params.warehouse_name = box[0] ? box[0].warehouse_name : \"\";\n    },\n    // 商品改变\n    changeGoods(val, scope) {\n      var { row } = scope;\n      row.goods_id = val.goods_id;\n      row.unit_name = val.unit_name;\n      row.purchase_price = val.purchase_price;\n      let arr = [\"remaining_goods_num\", \"subtotal_price\", \"allocation_id\"];\n      arr.forEach(item => {\n        let val = null;\n        if (item === \"subtotal_price\") val = 0;\n        row[item] = val;\n      });\n      this.getAllocationList(row);\n      // 进行计算\n      this.handleEdit({ row: row, column: { property: \"goods_num\" } });\n      var box = this.$refs.xTable._proxy(\"getTableData\").fullData.concat([]);\n      if (box[box.length - 1].goods_id) {\n        this.addF();\n      }\n    },\n    // 获取默认批次\n    getAllocationList(row) {\n      if (row.goods_id) {\n        this.$axios({\n          method: \"get\",\n          url: this.$api.newAllocationList,\n          params: {\n            company_id: this.params.company_id,\n            warehouse_id: this.params.warehouse_id,\n            goods_id: row.goods_id,\n            repeat: true\n          }\n        }).then(res2 => {\n          if (res2.data.data) {\n            for (let item of res2.data.data) {\n              if (item.is_system == 1) {\n                //设置默认货位\n                row.allocation_id = item.allocation_id;\n                row.allocation_name = item.allocation_name;\n                if (\n                  this.$refs.xTable._proxy(\"isActiveByRow\", row) &&\n                  this.activateScope\n                ) {\n                  this.$refs.xTable._proxy(\"clearActived\", this.activateScope); // 清除编辑状态\n                }\n              }\n            }\n          }\n        });\n      }\n    },\n    addF() {\n      this.$refs.xTable._proxy(\n        \"insertAt\",\n        this.$publicFution.deepCopy(saleRowModule),\n        -1\n      );\n    },\n    companyChange() {\n      CompanySwitchClear(this, this.params);\n      this.$refs.xTable._proxy(\"loadData\", []);\n    },\n    // 部门改变\n    departmentChange() {\n      this.$set(this.params, \"buyer_id\", \"\");\n    },\n    // 计算分摊金额\n    calcPrice() {\n      if (this.params.other_price == 0 && this.params.other_price_type != 0) {\n        this.$message.warning(\"分摊金额不能为0\");\n        return false;\n      }\n      //计算金额\n      if (this.params.other_price_type == 0) {\n        this.$refs.xTable._proxy(\"getTableData\").fullData.forEach(val => {\n          val.other_price = 0;\n        });\n        return;\n      }\n      let tableDatas = this.$refs.xTable\n        ._proxy(\"getTableData\")\n        .fullData.concat([])\n        .filter((obj, index) => {\n          obj.index = index;\n          let {\n            goods_id,\n            goods_name,\n            goods_num,\n            purchase_price,\n            subtotal_price,\n            allocation_id,\n            remark\n          } = obj;\n          return (\n            goods_name ||\n            goods_num ||\n            purchase_price ||\n            subtotal_price ||\n            allocation_id ||\n            remark\n          );\n        });\n      if (!tableDatas.length) return false;\n      let flag = true,\n        tableDatas2 = [],\n        indexArr = [];\n      tableDatas.forEach(item => {\n        if (!Number(item.purchase_price) || !Number(item.goods_num)) {\n          flag = false;\n        }\n        indexArr.push(item.index);\n        tableDatas2.push({\n          goods_num: item.goods_num ? item.goods_num : 0,\n          purchase_price: item.purchase_price ? item.purchase_price : 0\n        });\n      });\n      if (!flag) return false;\n      if (this.params.other_price && this.params.other_price_type) {\n        this.isCanSumbit = false; // 不可点击提交\n        this.$axios({\n          method: \"post\",\n          url: this.$api.getCountApportionOptions,\n          data: {\n            other_price_type: this.params.other_price_type,\n            other_price: this.params.other_price,\n            goods_info: JSON.stringify(tableDatas2)\n          }\n        })\n          .then(res => {\n            this.isCanSumbit = true;\n            if (res.data.code == 200) {\n              var result = this.$refs.xTable\n                ._proxy(\"getTableData\")\n                .fullData.concat([]);\n              for (let i = 0; i < res.data.data.goods_list.length; i++) {\n                result[indexArr[i]].other_price =\n                  res.data.data.goods_list[i].other_price;\n              }\n              this.$refs.xTable._proxy(\"loadData\", result);\n            }\n          })\n          .catch(() => {\n            this.isCanSumbit = true;\n          });\n      }\n    },\n    goBack() {\n      this.$router.push({\n        path: \"/inventory/otheninstorage\"\n      });\n    },\n    // 删行\n    deleteF() {\n      if (this.$refs.xTable._proxy(\"getCheckboxRecords\").length) {\n        this.$refs.xTable._proxy(\"removeSelecteds\");\n        this.calcPrice();\n      } else {\n        this.$message({\n          message: \"请先选择要删除的订单！\",\n          type: \"warning\"\n        });\n      }\n    },\n    submit(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          let tableBox = this.$refs.xTable\n            ._proxy(\"getTableData\")\n            .fullData.concat([]);\n          if (!tableBox.length) {\n            this.$message.error(\"请完善表格数据\");\n            return false;\n          }\n          if (!tableBox[tableBox.length - 1].goods_id) {\n            tableBox.pop();\n          }\n          let tableDatas = [];\n          tableDatas = tableBox.filter(obj => {\n            let {\n              goods_id,\n              goods_name,\n              goods_num,\n              purchase_price,\n              subtotal_price,\n              allocation_id,\n              remark\n            } = obj;\n            if (!goods_name) {\n              allocation_id = \"\";\n              goods_id = \"\";\n            }\n            return (\n              goods_name ||\n              goods_num ||\n              purchase_price ||\n              subtotal_price ||\n              allocation_id ||\n              remark\n            );\n          });\n\n          let tableDatas2 = [];\n          for (let i = 0; i < tableDatas.length; i++) {\n            if (\n              !tableDatas[i].goods_id ||\n              !tableDatas[i].goods_name ||\n              !tableDatas[i].allocation_id ||\n              !tableDatas[i].goods_num ||\n              !tableDatas[i].batch ||\n              // !tableDatas[i].production_time ||\n              (!Number(tableDatas[i].purchase_price) &&\n                Number(tableDatas[i].purchase_price) !== 0)\n            ) {\n              this.$message.error({\n                message: \"请完善表格已手填信息行的数据\"\n              });\n              return false;\n            }\n            tableDatas2.push(\n              this.$publicFution.filter(sumbitRowModule, tableDatas[i])\n            );\n          }\n          var obj = {\n            type: this.params.type,\n            order_id: this.params.order_id,\n            supplier_id: this.params.supplier_id,\n            company_id: this.params.company_id,\n            department_id: this.params.department_id,\n            buyer_id: this.params.buyer_id,\n            factorysend_sn: this.params.factorysend_sn,\n            receivables_mode_id: this.params.receivables_mode_id,\n            business_time: this.params.business_time,\n            factorysend_time: this.params.factorysend_time,\n            remark: this.params.remark,\n            other_price: this.params.other_price,\n            other_price_type: this.params.other_price_type,\n            warehouse_id: this.params.warehouse_id,\n            goods_info: JSON.stringify(tableDatas2)\n          };\n          let url = this.$api.otherStorageAddInStorage;\n          if (this.instorage_id) {\n            obj.instorage_id = this.$route.query.instorage_id;\n            url = this.$api.otherStorageEditInStorage;\n          }\n          this.$baseData\n            .checkComputation(tableDatas2, {\n              goods_num: \"goods_num\",\n              total_price: \"subtotal_price\",\n              goods_price: \"purchase_price\"\n            })\n            .then(() => {\n              // 校验对接车郎中\n              this.$baseData\n                .checkCarDoctor({\n                  company_id: this.params.company_id,\n                  company_name: this.params.company_name,\n                  bill_type: this.params.type ? this.params.type : 2,\n                  bill_id: this.instorage_id,\n                  operation_type: this.instorage_id ? 2 : 1,\n                  goods_info: JSON.stringify(\n                    Array(tableDatas2.length).fill({\n                      warehouse_id: this.params.warehouse_id,\n                      warehouse_name: this.params.warehouse_name\n                    })\n                  )\n                })\n                .then(() => {\n                  this.$axios({\n                    method: \"post\",\n                    url: url,\n                    data: obj\n                  }).then(res => {\n                    if (res.data.code == 200) {\n                      this.$message.success(res.data.msg);\n                      this.goBack();\n                    }\n                  });\n                });\n            });\n        }\n      });\n    },\n    // 计算规则\n    handleEdit({ row, column }) {\n      var obj = {\n        num: \"goods_num\", // 商品数量的key\n        price: \"purchase_price\", // 商品价格的key\n        totalPrice: \"subtotal_price\" // 商品小计金额\n      };\n      this.$publicFution.computeTotal(row, obj, column.property, this);\n    }\n  },\n  mounted() {\n    this.instorage_id = this.$route.query.instorage_id;\n    this.title = this.instorage_id ? \"修改\" : \"新增\";\n    if (this.instorage_id) {\n      this.$axios({\n        method: \"get\",\n        url: this.$api.otherStorageInfoInStorage,\n        params: {\n          instorage_id: this.instorage_id\n        }\n      }).then(res => {\n        if (res.data.code == 200) {\n          this.params = res.data.data.instoragList;\n          this.$refs.xTable._proxy(\"loadData\", res.data.data.goodsList);\n          this.addF();\n          if (res.data.data.instoragList.order_sn) {\n            this.disabled = true;\n          }\n          Object.assign(res.data.data.instoragList, {\n            employee_id: res.data.data.instoragList.buyer_id,\n            employee_name: res.data.data.instoragList.buyer_name\n          });\n          opthionList(this, res.data.data.instoragList);\n        }\n      });\n    } else {\n      let { employee_id, company_admin_id } = localStorage;\n      if ([0, 1, 2].includes(Number(employee_id)) || company_admin_id > 0) {\n        this.$set(this, \"params\", {\n          business_time: this.$publicFution.formatData(new Date()),\n          company_id: Number(localStorage.company_id),\n          type: 2\n        });\n      } else {\n        this.$set(this, \"params\", {\n          business_time: this.$publicFution.formatData(new Date()),\n          company_id: Number(localStorage.company_id),\n          department_id: Number(localStorage.department_id),\n          buyer_id: Number(localStorage.employee_id),\n          type: 2\n        });\n      }\n      opthionList(this, window.localStorage);\n      setTimeout(() => {\n        this.addF();\n      }, 200);\n    }\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.styleInput > .el-input {\n  width: auto !important;\n}\n\n.input-with-select .el-input-group__prepend {\n  background-color: #fff;\n}\n\n.title {\n  line-height: 50px;\n  border-bottom: 1px solid #dddddd;\n}\n\n.el-form > div:nth-child(2n + 1) {\n  clear: both;\n}\n\n.batch-ul {\n  overflow: hidden;\n}\n\n.batch-ul2 {\n  padding: 0 20px;\n}\n\n.line1 {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.batch-ul li {\n  float: left;\n  line-height: 34px;\n  height: 34px;\n  .line1;\n}\n\n.batch-ul li:nth-child(1) {\n  width: 140px;\n}\n\n.batch-ul li:nth-child(2) {\n  width: 140px;\n  text-align: right;\n}\n.el-table td div {\n  width: 100%;\n}\n.warehouse-ul li {\n  padding: 0px;\n}\n</style>\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./instorageAdd.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./instorageAdd.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./instorageAdd.vue?vue&type=template&id=28d68242&scoped=true&\"\nimport script from \"./instorageAdd.vue?vue&type=script&lang=js&\"\nexport * from \"./instorageAdd.vue?vue&type=script&lang=js&\"\nimport style0 from \"./instorageAdd.vue?vue&type=style&index=0&id=28d68242&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"28d68242\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}