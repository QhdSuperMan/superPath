(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-e96aa002"],{"19aa":function(e,t,a){var n=a("da84"),r=a("3a9b"),i=n.TypeError;e.exports=function(e,t){if(r(t,e))return e;throw i("Incorrect invocation")}},2266:function(e,t,a){var n=a("da84"),r=a("0366"),i=a("c65b"),o=a("825a"),s=a("0d51"),l=a("e95a"),u=a("07fa"),c=a("3a9b"),d=a("9a1f"),f=a("35a1"),p=a("2a62"),m=n.TypeError,h=function(e,t){this.stopped=e,this.result=t},_=h.prototype;e.exports=function(e,t,a){var n,b,v,g,y,w,k,x=a&&a.that,S=!(!a||!a.AS_ENTRIES),D=!(!a||!a.IS_ITERATOR),T=!(!a||!a.INTERRUPTED),$=r(t,x),E=function(e){return n&&p(n,"normal",e),new h(!0,e)},z=function(e){return S?(o(e),T?$(e[0],e[1],E):$(e[0],e[1])):T?$(e,E):$(e)};if(D)n=e;else{if(b=f(e),!b)throw m(s(e)+" is not iterable");if(l(b)){for(v=0,g=u(e);g>v;v++)if(y=z(e[v]),y&&c(_,y))return y;return new h(!1)}n=d(e,b)}w=n.next;while(!(k=i(w,n)).done){try{y=z(k.value)}catch(O){p(n,"throw",O)}if("object"==typeof y&&y&&c(_,y))return y}return new h(!1)}},2626:function(e,t,a){"use strict";var n=a("d066"),r=a("9bf2"),i=a("b622"),o=a("83ab"),s=i("species");e.exports=function(e){var t=n(e),a=r.f;o&&t&&!t[s]&&a(t,s,{configurable:!0,get:function(){return this}})}},4931:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search_container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"销售组织",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.companyListInvok,change:e.companyChange},model:{value:e.params.company_id,callback:function(t){e.$set(e.params,"company_id",t)},expression:"params.company_id"}},e._l(e.companyList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[a("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"客户名称",size:"mini",rules:e.rules.customer_name,prop:"customer_id"}},[a("el-select",{attrs:{filterable:"",placeholder:"请输入",loading:e.loading,remote:"","remote-method":e.clienteleListInvok},on:{focus:e.clienteleListInvok},model:{value:e.params.customer_id,callback:function(t){e.$set(e.params,"customer_id",t)},expression:"params.customer_id"}},[a("ul",{staticClass:"customer customer-ul4 customer-ul2"},[a("li",[e._v("客户编号")]),a("li",[e._v("客户名称")]),a("li",[e._v("联系人")]),a("li",[e._v("联系电话")]),a("li",[e._v("区域")])]),e._l(e.customerList,(function(t){return a("el-option",{key:t.customer_id,attrs:{label:t.customer_name,value:t.customer_id}},[a("ul",{staticClass:"customer customer-ul4"},[a("li",{attrs:{title:t.customer_id}},[e._v(e._s(t.customer_id))]),a("li",{attrs:{title:t.customer_name}},[e._v(e._s(t.customer_name))]),a("li",{attrs:{title:t.contact_name}},[e._v(e._s(t.contact_name))]),a("li",{attrs:{title:t.customer_mobile}},[e._v(e._s(t.customer_mobile))]),a("li",[e._v(e._s(t.province_name)+"/"+e._s(t.city_name)+"/"+e._s(t.area_name))])])])}))],2)],1),a("el-form-item",{attrs:{label:"业务日期",size:"mini",prop:"business_time",rules:e.rules.business_time}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","range-separator":"-","value-format":"yyyy-MM-dd"},model:{value:e.params.business_time,callback:function(t){e.$set(e.params,"business_time",t)},expression:"params.business_time"}})],1),a("el-form-item",{attrs:{label:"部门",size:"mini"}},[e._v(" "+e._s(function(){0==e.params.department_id&&(e.params.department_id=null)}())+" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.DepartmentListInvok},model:{value:e.params.department_id,callback:function(t){e.$set(e.params,"department_id",t)},expression:"params.department_id"}},e._l(e.departmentList,(function(e){return a("el-option",{key:e.department_id,attrs:{label:e.department_name,value:e.department_id}})})),1)],1)],1)],1),a("div",{staticClass:"add_delet"},[a("el-button",{staticClass:"addBtn",attrs:{icon:"el-icon-circle-plus-outline",type:"primary",size:"mini"},on:{click:e.addLine}},[e._v("增行")]),a("el-button",{attrs:{plain:"",icon:"el-icon-delete",size:"mini"},on:{click:e.deletes}},[e._v("删行")])],1),a("div",{staticClass:"table_container"},[a("el-table",{ref:"tableScroll",staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",data:e.TableData.list,border:"","max-height":"600"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",fixed:"left",align:"center",width:"44"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"brand_name",label:"品牌名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.brand_name))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_id",label:"商品编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.goods_id))])]}}])}),a("el-table-column",{attrs:{property:"goods_name",label:"商品名称","min-width":"500"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.params.customer_id?a("v-GoodsList",{attrs:{scopes:t,vxeParams:{company_id:e.params.company_id},changeGoods:e.handleSelect,showObj:{goods_id:"商品编号",goods_name:"商品名称"}}}):a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"请选择客户名称",placement:"top"}},[a("el-input",{attrs:{type:"text",placeholder:"请选择",disabled:""}})],1)]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_num",label:"返胎数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"number",placeholder:"请输入"},on:{change:function(a){return e.handleEdit(t.$index,t.row,1)}},model:{value:t.row.goods_num,callback:function(a){e.$set(t.row,"goods_num",a)},expression:"scope.row.goods_num"}})]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"unit_name",label:"单位",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.unit_name))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"return_type",label:"返胎类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.row.return_type,callback:function(a){e.$set(t.row,"return_type",a)},expression:"scope.row.return_type"}},[a("el-option",{attrs:{label:"返新胎入库",value:1}},[e._v("返新胎入库")]),a("el-option",{attrs:{label:"返旧胎入库",value:2}},[e._v("返旧胎入库")])],1)]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"remark",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{maxlength:"300",placeholder:"请输入","suffix-icon":"el-icon-edit-outline"},model:{value:t.row.remark,callback:function(a){e.$set(t.row,"remark",a)},expression:"scope.row.remark"}})]}}])})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.goBack}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)])},r=[],i=a("b85c"),o=a("2909"),s=a("5530"),l=(a("b680"),a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("4de4"),a("a630"),a("d81d"),a("ac1f"),a("1276"),a("159b"),a("e9c4"),a("caad"),a("a9e3"),a("2f62")),u=a("65b0"),c={name:"aftersaleThreeregisterAdd",data:function(){return{authority:{},TableData:{info_data:{},list:[]},timeValue:[],params:{},searchParams:{},goPage:1,pageSize:30,loading:!1,per_page:[30,50,100,500],multipleSelection:[],goodsList:[],options4:[],list:[]}},computed:Object(s["a"])({},Object(l["c"])(["threeregisterAdd_showGet","threeregisterDefault_showGet"])),methods:Object(s["a"])(Object(s["a"])({},Object(l["b"])(["threeregisterDefault_show"])),{},{handleSelect:function(e,t){var a=t.row;this.$set(a,"goods_id",e.goods_id),this.$set(a,"brand_name",e.brand_name),this.$set(a,"unit_name",e.unit_name?e.unit_name:"");var n=!!this.TableData.list[this.TableData.list.length-1].goods_id;n&&this.TableData.list.push({return_type:2})},change:function(e,t){this.TableData.list[t].brand_Name=e.goods_name.brand_name,this.TableData.list[t].goods_id=e.goods_name.goods_id,this.TableData.list[t].unit_name=e.goods_name.unit_name,this.TableData.list[t].remark=""},defaults:function(){this.loading=!1,this.options4=this.list},handleEdit:function(e,t,a){1==a?this.$nextTick((function(){t.goods_num=Math.abs(Math.ceil(t.goods_num))})):0==a&&this.$nextTick((function(){t.purchase_price=t.purchase_price.toFixed(2)}))},companyChange:function(e){this.$set(this.params,"department_id",""),this.$set(this.params,"customer_id",""),this.TableData.list=[]},goBack:function(){this.$router.push({path:"/aftersale/threeregister"}),this.threeregisterDefault_show({goPage:this.threeregisterAdd_showGet.goPage,pageSize:this.threeregisterAdd_showGet.pageSize,params:this.threeregisterDefault_showGet?this.threeregisterDefault_showGet.params:{}})},handleCurrentChange:function(e){this.params.page=e},handleSelectionChange:function(e){this.multipleSelection=e},addLine:function(){this.TableData.list.push({return_type:2}),this.$nextTick((function(){this.$refs.tableScroll.$el.childNodes[2].scrollTop=this.$refs.tableScroll.$el.childNodes[2].scrollHeight}))},deletes:function(){if(this.multipleSelection.length){var e=new Set(this.TableData.list),t=new Set(this.multipleSelection),a=new Set(Object(o["a"])(e).filter((function(e){return!t.has(e)})));this.TableData.list=Array.from(a)}else this.$message({message:"请先选择要删除的数据！",type:"warning"})},submit:function(){var e=this;if(this.params.customer_id){var t=this.TableData.list.length,a=!!this.TableData.list[t-1].goods_name;a||this.TableData.list.pop();var n=this.TableData.list.map((function(e){return{goods_id:e.goods_id,goods_num:e.goods_num?e.goods_num:1,return_type:e.return_type,remark:e.remark?e.remark:""}})),r="goods_id,goods_num,return_type".split(","),o=!0;if(n.forEach((function(t){var a,n=Object(i["a"])(r);try{for(n.s();!(a=n.n()).done;){var s=a.value;if(s in t&&t[s]||(o=!1),!o)break}}catch(l){n.e(l)}finally{n.f()}if(!o)return e.$message({message:"请先完善信息！",type:"warning"}),!1})),o){var s={customer_id:this.params.customer_id,company_id:this.params.company_id,business_time:this.params.business_time,department_id:this.params.department_id,goods_str:JSON.stringify(n)};this.$axMethod.addRegister(s).then((function(t){200==t.data.code&&(e.$message({message:t.data.data,type:"success"}),e.$router.push({path:"/aftersale/threeregister"}))}))}}else this.$message({message:"请先选择客户名称",type:"error"})}}),created:function(){var e=localStorage,t=e.employee_id,a=e.company_admin_id;[0,1,2].includes(Number(t))||a>0?this.$set(this,"params",{company_id:Number(localStorage.company_id),business_time:this.$publicFution.formatData(new Date)}):this.$set(this,"params",{company_id:Number(localStorage.company_id),department_id:Number(localStorage.department_id),business_time:this.$publicFution.formatData(new Date)}),Object(u["l"])(this,localStorage),this.TableData.list.push({return_type:2})}},d=c,f=(a("6fe5"),a("2877")),p=Object(f["a"])(d,n,r,!1,null,"763a96bc",null);t["default"]=p.exports},6062:function(e,t,a){"use strict";var n=a("6d61"),r=a("6566");n("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r)},6566:function(e,t,a){"use strict";var n=a("9bf2").f,r=a("7c73"),i=a("e2cc"),o=a("0366"),s=a("19aa"),l=a("2266"),u=a("7dd0"),c=a("2626"),d=a("83ab"),f=a("f183").fastKey,p=a("69f3"),m=p.set,h=p.getterFor;e.exports={getConstructor:function(e,t,a,u){var c=e((function(e,n){s(e,p),m(e,{type:t,index:r(null),first:void 0,last:void 0,size:0}),d||(e.size=0),void 0!=n&&l(n,e[u],{that:e,AS_ENTRIES:a})})),p=c.prototype,_=h(t),b=function(e,t,a){var n,r,i=_(e),o=v(e,t);return o?o.value=a:(i.last=o={index:r=f(t,!0),key:t,value:a,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=o),n&&(n.next=o),d?i.size++:e.size++,"F"!==r&&(i.index[r]=o)),e},v=function(e,t){var a,n=_(e),r=f(t);if("F"!==r)return n.index[r];for(a=n.first;a;a=a.next)if(a.key==t)return a};return i(p,{clear:function(){var e=this,t=_(e),a=t.index,n=t.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete a[n.index],n=n.next;t.first=t.last=void 0,d?t.size=0:e.size=0},delete:function(e){var t=this,a=_(t),n=v(t,e);if(n){var r=n.next,i=n.previous;delete a.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),a.first==n&&(a.first=r),a.last==n&&(a.last=i),d?a.size--:t.size--}return!!n},forEach:function(e){var t,a=_(this),n=o(e,arguments.length>1?arguments[1]:void 0);while(t=t?t.next:a.first){n(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!v(this,e)}}),i(p,a?{get:function(e){var t=v(this,e);return t&&t.value},set:function(e,t){return b(this,0===e?0:e,t)}}:{add:function(e){return b(this,e=0===e?0:e,e)}}),d&&n(p,"size",{get:function(){return _(this).size}}),c},setStrong:function(e,t,a){var n=t+" Iterator",r=h(t),i=h(n);u(e,t,(function(e,t){m(this,{type:n,target:e,state:r(e),kind:t,last:void 0})}),(function(){var e=i(this),t=e.kind,a=e.last;while(a&&a.removed)a=a.previous;return e.target&&(e.last=a=a?a.next:e.state.first)?"keys"==t?{value:a.key,done:!1}:"values"==t?{value:a.value,done:!1}:{value:[a.key,a.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),a?"entries":"values",!a,!0),c(t)}}},"6d61":function(e,t,a){"use strict";var n=a("23e7"),r=a("da84"),i=a("e330"),o=a("94ca"),s=a("6eeb"),l=a("f183"),u=a("2266"),c=a("19aa"),d=a("1626"),f=a("861d"),p=a("d039"),m=a("1c7e"),h=a("d44e"),_=a("7156");e.exports=function(e,t,a){var b=-1!==e.indexOf("Map"),v=-1!==e.indexOf("Weak"),g=b?"set":"add",y=r[e],w=y&&y.prototype,k=y,x={},S=function(e){var t=i(w[e]);s(w,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(v&&!f(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return v&&!f(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!f(e))&&t(this,0===e?0:e)}:function(e,a){return t(this,0===e?0:e,a),this})},D=o(e,!d(y)||!(v||w.forEach&&!p((function(){(new y).entries().next()}))));if(D)k=a.getConstructor(t,e,b,g),l.enable();else if(o(e,!0)){var T=new k,$=T[g](v?{}:-0,1)!=T,E=p((function(){T.has(1)})),z=m((function(e){new y(e)})),O=!v&&p((function(){var e=new y,t=5;while(t--)e[g](t,t);return!e.has(-0)}));z||(k=t((function(e,t){c(e,w);var a=_(new y,e,k);return void 0!=t&&u(t,a[g],{that:a,AS_ENTRIES:b}),a})),k.prototype=w,w.constructor=k),(E||O)&&(S("delete"),S("has"),b&&S("get")),(O||$)&&S(g),v&&w.clear&&delete w.clear}return x[e]=k,n({global:!0,forced:k!=y},x),h(k,e),v||a.setStrong(k,e,b),k}},"6fe5":function(e,t,a){"use strict";a("9014")},9014:function(e,t,a){},b680:function(e,t,a){"use strict";var n=a("23e7"),r=a("da84"),i=a("e330"),o=a("5926"),s=a("408a"),l=a("1148"),u=a("d039"),c=r.RangeError,d=r.String,f=Math.floor,p=i(l),m=i("".slice),h=i(1..toFixed),_=function(e,t,a){return 0===t?a:t%2===1?_(e,t-1,a*e):_(e*e,t/2,a)},b=function(e){var t=0,a=e;while(a>=4096)t+=12,a/=4096;while(a>=2)t+=1,a/=2;return t},v=function(e,t,a){var n=-1,r=a;while(++n<6)r+=t*e[n],e[n]=r%1e7,r=f(r/1e7)},g=function(e,t){var a=6,n=0;while(--a>=0)n+=e[a],e[a]=f(n/t),n=n%t*1e7},y=function(e){var t=6,a="";while(--t>=0)if(""!==a||0===t||0!==e[t]){var n=d(e[t]);a=""===a?n:a+p("0",7-n.length)+n}return a},w=u((function(){return"0.000"!==h(8e-5,3)||"1"!==h(.9,0)||"1.25"!==h(1.255,2)||"1000000000000000128"!==h(0xde0b6b3a7640080,0)}))||!u((function(){h({})}));n({target:"Number",proto:!0,forced:w},{toFixed:function(e){var t,a,n,r,i=s(this),l=o(e),u=[0,0,0,0,0,0],f="",h="0";if(l<0||l>20)throw c("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return d(i);if(i<0&&(f="-",i=-i),i>1e-21)if(t=b(i*_(2,69,1))-69,a=t<0?i*_(2,-t,1):i/_(2,t,1),a*=4503599627370496,t=52-t,t>0){v(u,0,a),n=l;while(n>=7)v(u,1e7,0),n-=7;v(u,_(10,n,1),0),n=t-1;while(n>=23)g(u,1<<23),n-=23;g(u,1<<n),v(u,1,1),g(u,2),h=y(u)}else v(u,0,a),v(u,1<<-t,0),h=y(u)+p("0",l);return l>0?(r=h.length,h=f+(r<=l?"0."+p("0",l-r)+h:m(h,0,r-l)+"."+m(h,r-l))):h=f+h,h}})},bb2f:function(e,t,a){var n=a("d039");e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},e2cc:function(e,t,a){var n=a("6eeb");e.exports=function(e,t,a){for(var r in t)n(e,r,t[r],a);return e}},f183:function(e,t,a){var n=a("23e7"),r=a("e330"),i=a("d012"),o=a("861d"),s=a("1a2d"),l=a("9bf2").f,u=a("241c"),c=a("057f"),d=a("90e3"),f=a("bb2f"),p=!1,m=d("meta"),h=0,_=Object.isExtensible||function(){return!0},b=function(e){l(e,m,{value:{objectID:"O"+h++,weakData:{}}})},v=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,m)){if(!_(e))return"F";if(!t)return"E";b(e)}return e[m].objectID},g=function(e,t){if(!s(e,m)){if(!_(e))return!0;if(!t)return!1;b(e)}return e[m].weakData},y=function(e){return f&&p&&_(e)&&!s(e,m)&&b(e),e},w=function(){k.enable=function(){},p=!0;var e=u.f,t=r([].splice),a={};a[m]=1,e(a).length&&(u.f=function(a){for(var n=e(a),r=0,i=n.length;r<i;r++)if(n[r]===m){t(n,r,1);break}return n},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:c.f}))},k=e.exports={enable:w,fastKey:v,getWeakData:g,onFreeze:y};i[m]=!0}}]);
//# sourceMappingURL=chunk-e96aa002.5e95691f.js.map