(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-6cf4992b"],{3798:function(t,e,i){t.exports=i.p+"img/liucheng.6b55f51d.png"},"6629b":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"params"},[t._m(0),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isShowConfirmOrder,expression:"!isShowConfirmOrder"}]},[i("div",{attrs:{id:"leixin"}},[i("div",{staticClass:"FirstTemplate"},t._l(t.orderArr,(function(e,r){return i("div",{key:r,class:e.isCheck?"active":"",on:{click:function(i){return t.templateChange(e,r)}}},[i("p",[t._v(t._s(e.template_name))]),e.isCheck?i("p",{staticClass:"checkIcon"},[i("i",{staticClass:"el-icon-circle-check"})]):t._e()])})),0),i("xTable",{ref:"xTable",attrs:{tableColumn:t.tableColumn,isEdit:function(){return!1}}})],1),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","margin-top":"20px"}},[i("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("提 交")])],1)]),t.isShowConfirmOrder?i("confirmOrder",{attrs:{data:t.confirmOrderData},on:{close:function(e){t.isShowConfirmOrder=!1}}}):t._e()],1)},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("img",{staticStyle:{"margin-left":"100px"},attrs:{src:i("3798"),alt:"",srcset:""}})])}],n=(i("d81d"),i("d3b7"),i("159b"),i("99af"),i("a9e3"),i("069e0")),o={data:function(){var t=this;return{tableColumn:[{title:"序号",type:"seq",width:50},{title:"商品编号",field:"goods_id",width:80},{title:"商品名称",field:"goods_name",width:400,editRender:{name:"vGoods",getParams:function(e){var i=e.row;return{params:{company_id:t.params.company_id,is_service:1},showObj:{goods_id:"商品编号",goods_name:"商品名称",unit_name:"单位",brand_name:"品牌",specification_type:"规格型号",factory_code:"工厂代码"},getIcon:function(){return i.goods_name?[{icon:"el-icon-close",title:"删除商品",iconMethod:function(){for(var t in i)i[t]=""}}]:[]}}},events:{change:function(t,e){var i=e.row,r=["brand_name","unit_name","goods_id","specification_type","factory_code","settlement_price","order_batch_quantity","inventory_goods_id"];r.forEach((function(e){i[e]=t[e]}))}}}},{title:"品牌",field:"brand_name",width:100},{title:"规格型号",field:"specification_type",width:100},{title:"单位",field:"unit_name",width:60},{title:"厂家产品码",field:"factory_code",width:100},{title:"起订量",field:"order_batch_quantity",width:132,headerAlign:"right",align:"right"},{title:"订货数量",field:"goods_num",width:132,headerAlign:"right",align:"right",editRender:{name:"number",autoselect:!0,formatter:"Positive",events:{input:this.handleEdit}}},{title:"结算单价",headerAlign:"right",align:"right",field:"settlement_price",width:132},{title:"金额",headerAlign:"right",align:"right",field:"subtotal_price",width:132},{title:"适配车型",field:"apply_vehicle_mode",width:132},{title:"备注",field:"abstract",width:200,editRender:{name:"Vinput",formatter:"String"}}]}}},s={name:"purchaseFirstMath",mixins:[o],data:function(){return{isShowConfirmOrder:!1,confirmOrderData:{},params:{},currentOrder:0,orderArr:[],goodsList:[]}},methods:{getData:function(){var t=this;this.$axMethod.getSalesFirstOrderInfo({is_sales:2}).then((function(e){var i=e.data;200===i.code&&(t.orderArr=i.data.order_list.map((function(t){return t.isCheck=!1,t})),t.goodsList=i.data.goods_list,t.orderArr[0]&&(t.orderArr[0].isCheck=!0),t.getTemplate())}))},getTemplate:function(){var t=this,e=[];this.orderArr.forEach((function(i){!0===i.isCheck&&t.goodsList.forEach((function(t){t.order_id==i.order_id&&e.push(t)}))})),this.$refs.xTable._proxy("loadData",e)},submit:function(){var t=this.$refs.xTable._proxy("getTableData").fullData.concat([]);if(t.length){var e="",i=this.$refs.xTable._proxy("getTableData").fullData.concat([]).map((function(t){return t.shop_goods_id=t.sku,0===Number(t.sku)&&(e+=t.goods_name+"  该商品未售卖，请联系供货商确认。</br>"),t}));if(e)return void this.$message({dangerouslyUseHTMLString:!0,type:"warning",message:e});this.confirmOrderData={type:0,order_type:2,data:i},this.isShowConfirmOrder=!0}else this.$message.error("请选择模板")},templateChange:function(t){t.isCheck=Boolean(!t.isCheck),console.log(t.isCheck),this.getTemplate()}},components:{confirmOrder:n["a"]},activated:function(){this.getData()}},d=s,c=(i("d37d"),i("2877")),l=Object(c["a"])(d,r,a,!1,null,"3d393b9a",null);e["default"]=l.exports},8812:function(t,e,i){},d37d:function(t,e,i){"use strict";i("8812")}}]);
//# sourceMappingURL=chunk-6cf4992b.e88183a6.js.map