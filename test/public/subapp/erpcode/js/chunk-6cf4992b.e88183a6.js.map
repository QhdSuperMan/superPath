{"version":3,"sources":["webpack://erpcode-[name]/./src/assets/liucheng.png","webpack://erpcode-[name]/./src/components/element/purchase/jybdpurchaseorder/firstMatch/index.vue?c78e","webpack://erpcode-[name]/./src/components/element/purchase/jybdpurchaseorder/firstMatch/config/index.js","webpack://erpcode-[name]/src/components/element/purchase/jybdpurchaseorder/firstMatch/index.vue","webpack://erpcode-[name]/./src/components/element/purchase/jybdpurchaseorder/firstMatch/index.vue?0086","webpack://erpcode-[name]/./src/components/element/purchase/jybdpurchaseorder/firstMatch/index.vue","webpack://erpcode-[name]/./src/components/element/purchase/jybdpurchaseorder/firstMatch/index.vue?2243"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","directives","name","rawName","value","isShowConfirmOrder","expression","attrs","_l","val","key","class","isCheck","on","$event","templateChange","_v","_s","template_name","_e","ref","tableColumn","staticStyle","submit","confirmOrderData","staticRenderFns","tableHeader","data","title","type","width","field","editRender","getParams","row","params","company_id","is_service","showObj","goods_id","goods_name","unit_name","brand_name","specification_type","factory_code","getIcon","icon","iconMethod","i","events","change","arr","forEach","headerAlign","align","autoselect","formatter","input","handleEdit","mixins","currentOrder","orderArr","goodsList","methods","getData","$axMethod","getTemplate","result","twoVal","order_id","push","$refs","xTable","_proxy","tableData","length","str","$message","dangerouslyUseHTMLString","message","order_type","error","Boolean","console","log","components","confirmOrder","activated","component"],"mappings":"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","file":"js/chunk-6cf4992b.e88183a6.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/liucheng.6b55f51d.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"params\"},[_vm._m(0),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isShowConfirmOrder),expression:\"!isShowConfirmOrder\"}]},[_c('div',{attrs:{\"id\":\"leixin\"}},[_c('div',{staticClass:\"FirstTemplate\"},_vm._l((_vm.orderArr),function(val,key){return _c('div',{key:key,class:val.isCheck ? 'active': '',on:{\"click\":function($event){return _vm.templateChange(val, key)}}},[_c('p',[_vm._v(_vm._s(val.template_name))]),(val.isCheck)?_c('p',{staticClass:\"checkIcon\"},[_c('i',{staticClass:\"el-icon-circle-check\"})]):_vm._e()])}),0),_c('xTable',{ref:\"xTable\",attrs:{\"tableColumn\":_vm.tableColumn,\"isEdit\":function () { return false}}})],1),_c('div',{staticClass:\"dialog-footer\",staticStyle:{\"text-align\":\"center\",\"margin-top\":\"20px\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\"提 交\")])],1)]),(_vm.isShowConfirmOrder)?_c('confirmOrder',{attrs:{\"data\":_vm.confirmOrderData},on:{\"close\":function($event){_vm.isShowConfirmOrder = false}}}):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('img',{staticStyle:{\"margin-left\":\"100px\"},attrs:{\"src\":require(\"@/assets/liucheng.png\"),\"alt\":\"\",\"srcset\":\"\"}})])}]\n\nexport { render, staticRenderFns }","export const tableHeader = {\n  data() {\n    return {\n      tableColumn: [\n        // {\n        //   type: \"checkbox\",\n        //   width: 44,\n        //   align: 'center'\n        // },\n        {\n          title: '序号',\n          type: \"seq\",\n          width: 50\n        },\n        {\n          title: '商品编号',\n          field: 'goods_id',\n          width: 80\n        },\n        {\n          title: '商品名称',\n          field: 'goods_name',\n          width: 400,\n          editRender: {\n            name: 'vGoods',\n            getParams: ({ row }) => {\n              return {\n                params: {\n                  company_id: this.params.company_id,\n                  is_service: 1\n                },\n                showObj: {\n                  goods_id: \"商品编号\",\n                  goods_name: \"商品名称\",\n                  unit_name: \"单位\",\n                  brand_name: \"品牌\",\n                  specification_type: \"规格型号\",\n                  factory_code: \"工厂代码\"\n                },\n                getIcon: () => {\n                  if (row.goods_name) {\n                    return [{\n                      icon: 'el-icon-close',\n                      title: '删除商品',\n                      iconMethod: () => {\n                        for (var i in row) {\n                          row[i] = ''\n                        }\n                      }\n                    }]\n                  } else {\n                    return []\n                  }\n                }\n              }\n            },\n            events: {\n              change: (value, { row }) => {\n                var arr = ['brand_name', 'unit_name', 'goods_id', 'specification_type', 'factory_code', 'settlement_price', 'order_batch_quantity', 'inventory_goods_id']\n                arr.forEach(val => {\n                  row[val] = value[val]\n                })\n              },\n            }\n          }\n        },\n        {\n          title: '品牌',\n          field: 'brand_name',\n          width: 100\n        },\n        {\n          title: '规格型号',\n          field: 'specification_type',\n          width: 100\n        },\n        {\n          title: '单位',\n          field: 'unit_name',\n          width: 60\n        },\n        {\n          title: '厂家产品码',\n          field: 'factory_code',\n          width: 100\n        },\n        {\n          title: '起订量',\n          field: 'order_batch_quantity',\n          width: 132,\n          headerAlign: \"right\", // 表头对齐方式\n          align: \"right\", // 列对齐方式\n        },\n        {\n          title: '订货数量',\n          field: 'goods_num',\n          width: 132,\n          headerAlign: \"right\", // 表头对齐方式\n          align: \"right\", // 列对齐方式\n          editRender: {\n            name: 'number',\n            autoselect: true,\n            formatter: 'Positive',\n            events: {\n              input: this.handleEdit\n            }\n          }\n        },\n        {\n          title: '结算单价',\n          headerAlign: \"right\", // 表头对齐方式\n          align: \"right\", // 列对齐方式\n          field: 'settlement_price',\n          width: 132,\n        },\n        {\n          title: '金额',\n          headerAlign: \"right\", // 表头对齐方式\n          align: \"right\", // 列对齐方式\n          field: 'subtotal_price',\n          width: 132,\n        },\n        {\n          title: '适配车型',\n          field: 'apply_vehicle_mode',\n          width: 132,\n        },\n        {\n          title: '备注',\n          field: 'abstract',\n          width: 200,\n          editRender: {\n            name: 'Vinput',\n            formatter: 'String'\n          }\n        }\n      ]\n    }\n  }\n}","<!--\n * @Author: 吴玉荣\n * @LastEditors: Please set LastEditors\n * @Date: 2021-01-11 15:51:33\n * @LastEditTime: 2021-01-21 17:43:07\n * @info: 描述\n-->\n<template>\n  <div class=\"params\">\n    <!-- 首配订单 -->\n    <div>\n      <img src=\"@/assets/liucheng.png\" alt=\"\" srcset=\"\" style=\"margin-left: 100px;\">\n    </div>\n    <div v-show='!isShowConfirmOrder'>\n      <div id=\"leixin\">\n        <div class='FirstTemplate'>\n          <div v-for='(val,key) in orderArr' :key='key' :class=\"val.isCheck ? 'active': ''\" @click=\"templateChange(val, key)\">\n            <p>{{ val.template_name }}</p>\n            <p v-if='val.isCheck' class='checkIcon'> <i class='el-icon-circle-check'></i> </p>\n          </div>\n        </div>\n        <xTable ref='xTable' :tableColumn='tableColumn' :isEdit=\"() => { return false}\" />\n      </div>\n      <div class=\"dialog-footer\" style=\"text-align:center;margin-top:20px;\">\n        <el-button type=\"primary\" @click=\"submit\">提 交</el-button>\n      </div>\n    </div>\n\n    <confirmOrder v-if='isShowConfirmOrder' :data='confirmOrderData' @close='isShowConfirmOrder = false' />\n  </div>\n</template>\n<script>\nimport confirmOrder from \"common/components/plugin/service/confirmOrder.vue\";\nimport { tableHeader } from \"./config/index.js\";\nexport default {\n  name: \"purchaseFirstMath\",\n  mixins: [tableHeader],\n  data() {\n    return {\n      isShowConfirmOrder: false,\n      confirmOrderData: {},\n      params: {},\n      currentOrder: 0,\n      orderArr: [],\n      goodsList: [],\n    };\n  },\n  methods: {\n    getData() {\n      this.$axMethod\n        .getSalesFirstOrderInfo({ is_sales: 2 })\n        .then(({ data }) => {\n          if (data.code === 200) {\n            this.orderArr = data.data.order_list.map((val) => {\n              val.isCheck = false;\n              return val;\n            });\n            this.goodsList = data.data.goods_list;\n            if (this.orderArr[0]) {\n              this.orderArr[0].isCheck = true;\n            }\n            this.getTemplate();\n          }\n        });\n    },\n    getTemplate() {\n      var result = [];\n      this.orderArr.forEach((val) => {\n        if (val.isCheck === true) {\n          this.goodsList.forEach((twoVal) => {\n            if (twoVal.order_id == val.order_id) {\n              result.push(twoVal);\n            }\n          });\n        }\n      });\n      this.$refs.xTable._proxy(\"loadData\", result);\n    },\n    submit() {\n      var tableData = this.$refs.xTable\n        ._proxy(\"getTableData\")\n        .fullData.concat([]);\n      if (tableData.length) {\n        var str = \"\";\n        var result = this.$refs.xTable\n          ._proxy(\"getTableData\")\n          .fullData.concat([])\n          .map((val) => {\n            val.shop_goods_id = val.sku;\n            if (Number(val.sku) === 0) {\n              str += val.goods_name + \"  该商品未售卖，请联系供货商确认。</br>\";\n            }\n            return val;\n          });\n        if (str) {\n          this.$message({\n            dangerouslyUseHTMLString: true,\n            type: \"warning\",\n            message: str,\n          });\n          return;\n        }\n        this.confirmOrderData = {\n          type: 0,\n          order_type: 2,\n          data: result,\n        };\n        this.isShowConfirmOrder = true;\n      } else {\n        this.$message.error(\"请选择模板\");\n      }\n    },\n    templateChange(val) {\n      val.isCheck = Boolean(!val.isCheck);\n      console.log(val.isCheck);\n      this.getTemplate();\n    },\n  },\n  components: {\n    confirmOrder,\n  },\n  activated() {\n    this.getData();\n  },\n};\n</script>\n\n<style scoped lang='less'>\n.params {\n  .clycle {\n    display: inline-block;\n    width: 15px;\n    height: 15px;\n    border-radius: 50%;\n    background-color: white;\n    color: black;\n  }\n  .FirstTemplate {\n    &::after {\n      content: \"\";\n      display: block;\n      clear: both;\n    }\n    .checkIcon {\n      position: absolute;\n      right: 6px;\n      bottom: -36px;\n      color: green;\n    }\n    margin: 20px;\n    text-align: center;\n    > div {\n      position: relative;\n      float: left;\n      width: 150px;\n      height: 100px;\n      margin-right: 20px;\n      border: solid 1px #e3eaf2;\n      border-radius: 10px;\n      line-height: 100px;\n    }\n    .active {\n      border-color: green;\n      // border-width: 2px;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3d393b9a&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=3d393b9a&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3d393b9a\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=3d393b9a&scoped=true&lang=less&\""],"sourceRoot":""}