(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-18b6d004"],{"0cb2":function(e,t,a){var i=a("e330"),n=a("7b0b"),r=Math.floor,l=i("".charAt),s=i("".replace),o=i("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,a,i,m,p){var d=a+e.length,h=i.length,f=u;return void 0!==m&&(m=n(m),f=c),s(p,f,(function(n,s){var c;switch(l(s,0)){case"$":return"$";case"&":return e;case"`":return o(t,0,a);case"'":return o(t,d);case"<":c=m[o(s,1,-1)];break;default:var u=+s;if(0===u)return n;if(u>h){var p=r(u/10);return 0===p?n:p<=h?void 0===i[p-1]?l(s,1):i[p-1]+l(s,1):n}c=i[u-1]}return void 0===c?"":c}))}},"2d54":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.checkPaymanage&&e.checkSerchmanage&&e.checkModifemanage,expression:"checkPaymanage&&checkSerchmanage&&checkModifemanage"}]},[a("div",{staticClass:"search_container"},[a("el-form",{ref:"filterFormRef",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"业务日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}})],1),a("el-form-item",{attrs:{label:"单据号",size:"mini"}},[a("el-input",{attrs:{maxlength:"100",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:this.onSearch(1)}},model:{value:e.params.payment_sn,callback:function(t){e.$set(e.params,"payment_sn",t)},expression:"params.payment_sn"}})],1),a("el-form-item",{attrs:{label:"财务组织",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:"",maxlength:"100"},on:{change:e.companyChange,focus:e.companyListInvok},model:{value:e.params.company_id,callback:function(t){e.$set(e.params,"company_id",t)},expression:"params.company_id"}},e._l(e.companyList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[a("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"部门",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:"",maxlength:"100"},on:{change:e.departmentChange,focus:e.DepartmentListInvok},model:{value:e.params.department_id,callback:function(t){e.$set(e.params,"department_id",t)},expression:"params.department_id"}},e._l(e.departmentList,(function(e){return a("el-option",{key:e.department_id,attrs:{label:e.department_name,value:e.department_id}})})),1)],1),a("el-form-item",{attrs:{label:"供应商(厂家)",size:"mini"}},[a("el-select",{attrs:{clearable:"",maxlength:"100","filter-method":e.supplierListInvok,filterable:"",placeholder:"请选择"},on:{change:e.supplierChangesave,focus:e.supplierListInvok},model:{value:e.params.supplier_id,callback:function(t){e.$set(e.params,"supplier_id",t)},expression:"params.supplier_id"}},e._l(e.supplierList,(function(e){return a("el-option",{key:e.supplier_id,attrs:{label:e.supplier_name,value:e.supplier_id}})})),1)],1),a("el-form-item",{attrs:{label:"往来类型",size:"mini"}},[a("el-select",{attrs:{clearable:"",filterable:"",maxlength:"100"},on:{change:e.factoryAccounts,focus:e.getFactoryAccountInvok},model:{value:e.params.factory_accounts_type_id,callback:function(t){e.$set(e.params,"factory_accounts_type_id",t)},expression:"params.factory_accounts_type_id"}},e._l(e.factoryAccountsList,(function(e){return a("el-option",{key:e.factory_accounts_type_id,attrs:{label:e.factory_accounts_type_name,value:e.factory_accounts_type_id}})})),1)],1),a("el-form-item",{attrs:{label:"审核状态",size:"mini"}},[a("el-select",{attrs:{clearable:""},model:{value:e.params.auditor_status,callback:function(t){e.$set(e.params,"auditor_status",t)},expression:"params.auditor_status"}},[a("el-option",{attrs:{label:"全部",value:0}},[e._v("全部")]),a("el-option",{attrs:{label:"未审核",value:1}},[e._v("未审核")]),a("el-option",{attrs:{label:"已审核",value:2}},[e._v("已审核")]),a("el-option",{attrs:{label:"作废",value:3}},[e._v("作废")])],1)],1),a("el-form-item",{attrs:{label:"审核日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:""},model:{value:e.timeValue1,callback:function(t){e.timeValue1=t},expression:"timeValue1"}})],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.onSearch(1)}}},[e._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.onReset}},[e._v("重置")])],1)],1),a("div",{staticClass:"add_delet"},[1==e.authority.b_add?a("el-button",{staticClass:"addBtn",attrs:{icon:"el-icon-circle-plus-outline",type:"primary",size:"mini"},on:{click:e.addFun}},[e._v("新增")]):e._e(),1==e.authority.b_del?a("el-button",{attrs:{plain:"",icon:"el-icon-delete",size:"mini"},on:{click:e.delFun}},[e._v("删除")]):e._e(),1==e.authority.b_pass?a("el-button",{staticClass:"iconfont icon-pass",attrs:{type:"primary",size:"mini"},on:{click:e.examineFun}},[e._v("审核")]):e._e(),1==e.authority.b_nopass?a("el-button",{attrs:{plain:"",icon:"iconfont icon-fanshenhe",size:"mini"},on:{click:e.AUDIT_GET}},[e._v("弃审")]):e._e(),1!=e.authority.b_invalid||e.is_company_service?e._e():a("el-button",{staticClass:"iconfont icon-zuofei",attrs:{plain:"",size:"mini"},on:{click:e.abolishFun}},[e._v("作废")])],1)],1),a("div",{staticClass:"table_container"},[a("xTable",{ref:"xTable",attrs:{ajax:{url:"getPaymentList",params:e.params},"row-style":e.selectRowChangeBg,footerMethod:e.footerMethod,tableColumn:e.tableColumn},on:{cellDblclick:e.handleClick}})],1)])])},n=[],r=(a("4de4"),a("d3b7"),a("caad"),a("2532"),a("d81d"),a("a9e3"),a("ac1f"),a("5319"),a("25f0"),a("b680"),a("8ba4"),{data:function(){var e=this,t=this.$createElement;return{footerData:{},tableColumn:[{type:"checkbox",width:44,align:"center"},{title:"操作",fixed:"right",width:80,slots:{default:function(a){return[t("el-button",{attrs:{size:"small",type:"text",disabled:1!==e.authority.b_info},on:{click:function(){return e.handleClick(a)}}},[" 查看 "]),t("el-button",{attrs:{size:"small",type:"text",disabled:!(1==a.row.auditor_status&&1==e.authority.b_edit)||2==a.row.bill_source},on:{click:function(){return e.updateClick(a.row)}}},[" 修改"])]}}},{title:"财务组织",field:"company_name",width:130},{title:"单据号",field:"payment_sn",width:180,slots:{default:function(a){return[t("el-link",{attrs:{disabled:1!==e.authority.b_info,type:"primary"},on:{click:function(){e.handleClick(a)}}},[a.row.payment_sn," "])]}}},{title:"供应商(厂家)",field:"supplier_name",width:150},{title:"物流公司",field:"logistics_name",width:200,visible:!Boolean(Number(localStorage.getItem("is_company_service")))},{title:"往来类型",field:"factory_accounts_type_name",width:180},{title:"付款金额",field:"total_price",headerAlign:"right",align:"right",formatter:"priceFormatNone",width:130},{title:"部门",field:"department_name",width:100},{field:"employee_name",title:"业务员",width:100},{title:"创建人",field:"add_user_name",width:120},{title:"业务日期",field:"business_time",width:100},{title:"单据时间",field:"add_time",width:180},{title:"供应商确认收款",field:"confirm_receipt",visible:Boolean(Number(localStorage.getItem("is_company_service"))),width:180},{title:"审核状态",field:"auditor_status_name",width:80},{title:"审核人",field:"auditor_name",width:130},{title:"审核时间",field:"auditor_time",width:180},{title:"修改人",field:"update_user_name",width:130},{title:"修改时间",field:"update_time",width:130},{title:"备注",field:"remark",width:150}]}},methods:{footerMethod:function(e){var t=this,a=e.columns,i=e.data;return[a.map((function(e,a){if(2===a)return"页小计";if(["total_price"].includes(e.property)){var n=t.$utils.sum(i,e.property);return"total_price"===e.property?n.toFixed(2).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):"num"===e.property?n.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):Number.isInteger(n)?n:n.toFixed(2)}return null})),a.map((function(e,a){return 2===a?"合计":"total_price"===e.property&&t.footerData.payment_total_price?(t.footerData.payment_total_price-0).toFixed(2).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):["total_price"].includes(e.property)?"加载中...":null}))]}}}),l={name:"purchasePaymanageDefault",mixins:[r],data:function(){return{authority:{},timeValue:[],timeValue1:[],checkPaymanage:!0,checkSerchmanage:!0,formInlineParams:{},manageInfo:{},checkModifemanage:!0}},methods:{factoryAccounts:function(e){e&&(this.params.factory_accounts_type_name=this.factoryAccountsList.filter((function(t){return t.factory_accounts_type_id===e}))[0].factory_accounts_type_name)},supplierChangesave:function(e){e&&(this.params.supplier_name=this.supplierList.filter((function(t){return t.supplier_id===e}))[0].supplier_name)},departmentChange:function(e){e&&(this.params.department_name=this.departmentList.filter((function(t){return t.department_id===e}))[0].department_name)},selectRowChangeBg:function(e){var t=e.row;return this.multipleSelection.length&&this.multipleSelection.map((function(e){return e.payment_id})).includes(t.payment_id)?"background:#d4e1ee":""},AUDIT_GET:function(){var e=this;if(this.multipleSelection.length<1)return this.$message({message:"请选择需要弃审的信息",type:"warning"}),!1;for(var t=[],a=0;a<this.multipleSelection.length;a++)t.push(this.multipleSelection[a].payment_id);var i=t.toString();this.$axMethod.auditorNoPassF({payment_id:i}).then((function(t){200==t.data.code&&e.$message({message:t.data.msg?t.data.msg:t.data.data,type:"success"}),e.onSearch()}))},companyChange:function(e){""!=e&&(this.params.company_name=this.companyList.filter((function(t){return t.company_id===e}))[0].company_name),this.$set(this.params,"supplier_id",""),this.$set(this.params,"department_id","")},onSearch:function(e){var t=this;this.timeValue?(this.params.start_time=this.timeValue[0],this.params.end_time=this.timeValue[1]):this.params.start_time=this.params.end_time="",this.timeValue1?(this.params.start_auditor_time=this.timeValue1[0],this.params.end_auditor_time=this.timeValue1[1]):this.params.start_auditor_time=this.params.end_auditor_time="",this.footerData={},this.$refs.xTable._getData(e),this.$axMethod.getPaymentListTotal(this.params).then((function(e){var a=e.data;200===a.code&&(t.footerData=a.data,t.$refs.xTable._proxy("updateFooter"))}))},examineFun:function(){if(this.multipleSelection.length<1)return this.$message({message:"请选择需要审核的信息",type:"warning"}),!1;for(var e=[],t=0;t<this.multipleSelection.length;t++)e.push(this.multipleSelection[t].payment_id);var a=e.toString(),i={examineID:"payment_id",eachData:{payment_id:a},examineApi:"paymentAuditorPass",list:{UrlApi:"getPaymentList",data:this.TableData,esData:{page:this.goPage}}};this.$common.examineFun(i,this.onSearch)},abolishFun:function(){if(this.multipleSelection.length<1)return this.$message({message:"请选择需要作废的信息",type:"warning"}),!1;for(var e=[],t=0;t<this.multipleSelection.length;t++)e.push(this.multipleSelection[t].payment_id);var a=e.toString(),i={examineID:"payment_id",eachData:{payment_id:a},examineApi:"paymentAuditorInvalid",list:{UrlApi:"getPaymentList",data:this.TableData,esData:{page:this.goPage}}};this.$common.examineFun(i,this.onSearch)},fexamineFun:function(){if(this.multipleSelection.length<1)return this.$message({message:"请选择需要审核的信息",type:"warning"}),!1;for(var e=[],t=0;t<this.multipleSelection.length;t++)e.push(this.multipleSelection[t].payment_id);var a=e.toString(),i={examineID:"payment_id",eachData:{payment_id:a},examineApi:"paymentAuditorNoPass",list:{UrlApi:"getPaymentList",data:this.TableData,esData:{page:this.goPage}}};this.$common.examineFun(i,this.onSearch)},onReset:function(){this.$set(this,"params",{}),this.timeValue=[],this.timeValue1=[],this.onSearch(1)},addFun:function(){this.$router.push({path:"/purchase/paymanage/paymangeAdd"})},delFun:function(){var e={deleID:"payment_id",deleSelect:this.multipleSelection,deleApi:"delPayment",list:{UrlApi:"getPaymentList",data:this.TableData,esData:{page:this.goPage}}};this.$common.deletes(e,"删除",this,this.onSearch)},handleClick:function(e){var t=e.row;this.$router.push({path:"/purchase/paymanage/paymanageSearch",query:{payment_id:t.payment_id}})},updateClick:function(e){this.$router.push({path:"/purchase/paymanage/paymangeAdd",query:{payment_id:e.payment_id}})}},activated:function(){this.onSearch(window.goPage)}},s=l,o=a("2877"),c=Object(o["a"])(s,i,n,!1,null,"35c1e4b6",null);t["default"]=c.exports},5319:function(e,t,a){"use strict";var i=a("2ba4"),n=a("c65b"),r=a("e330"),l=a("d784"),s=a("d039"),o=a("825a"),c=a("1626"),u=a("5926"),m=a("50c4"),p=a("577e"),d=a("1d80"),h=a("8aa5"),f=a("dc4a"),_=a("0cb2"),y=a("14c3"),g=a("b622"),v=g("replace"),b=Math.max,k=Math.min,x=r([].concat),w=r([].push),$=r("".indexOf),S=r("".slice),C=function(e){return void 0===e?e:String(e)},D=function(){return"$0"==="a".replace(/./,"$0")}(),F=function(){return!!/./[v]&&""===/./[v]("a","$0")}(),I=!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));l("replace",(function(e,t,a){var r=F?"$":"$0";return[function(e,a){var i=d(this),r=void 0==e?void 0:f(e,v);return r?n(r,e,i,a):n(t,p(i),e,a)},function(e,n){var l=o(this),s=p(e);if("string"==typeof n&&-1===$(n,r)&&-1===$(n,"$<")){var d=a(t,l,s,n);if(d.done)return d.value}var f=c(n);f||(n=p(n));var g=l.global;if(g){var v=l.unicode;l.lastIndex=0}var D=[];while(1){var F=y(l,s);if(null===F)break;if(w(D,F),!g)break;var I=p(F[0]);""===I&&(l.lastIndex=h(s,m(l.lastIndex),v))}for(var A="",P=0,z=0;z<D.length;z++){F=D[z];for(var L=p(F[0]),M=b(k(u(F.index),s.length),0),V=[],T=1;T<F.length;T++)w(V,C(F[T]));var N=F.groups;if(f){var E=x([L],V,M,s);void 0!==N&&w(E,N);var R=p(i(n,void 0,E))}else R=_(L,s,M,V,N,n);M>=P&&(A+=S(s,P,M)+R,P=M+L.length)}return A+S(s,P)}]}),!I||!D||F)},"8ba4":function(e,t,a){var i=a("23e7"),n=a("eac5");i({target:"Number",stat:!0},{isInteger:n})},b680:function(e,t,a){"use strict";var i=a("23e7"),n=a("da84"),r=a("e330"),l=a("5926"),s=a("408a"),o=a("1148"),c=a("d039"),u=n.RangeError,m=n.String,p=Math.floor,d=r(o),h=r("".slice),f=r(1..toFixed),_=function(e,t,a){return 0===t?a:t%2===1?_(e,t-1,a*e):_(e*e,t/2,a)},y=function(e){var t=0,a=e;while(a>=4096)t+=12,a/=4096;while(a>=2)t+=1,a/=2;return t},g=function(e,t,a){var i=-1,n=a;while(++i<6)n+=t*e[i],e[i]=n%1e7,n=p(n/1e7)},v=function(e,t){var a=6,i=0;while(--a>=0)i+=e[a],e[a]=p(i/t),i=i%t*1e7},b=function(e){var t=6,a="";while(--t>=0)if(""!==a||0===t||0!==e[t]){var i=m(e[t]);a=""===a?i:a+d("0",7-i.length)+i}return a},k=c((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!c((function(){f({})}));i({target:"Number",proto:!0,forced:k},{toFixed:function(e){var t,a,i,n,r=s(this),o=l(e),c=[0,0,0,0,0,0],p="",f="0";if(o<0||o>20)throw u("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return m(r);if(r<0&&(p="-",r=-r),r>1e-21)if(t=y(r*_(2,69,1))-69,a=t<0?r*_(2,-t,1):r/_(2,t,1),a*=4503599627370496,t=52-t,t>0){g(c,0,a),i=o;while(i>=7)g(c,1e7,0),i-=7;g(c,_(10,i,1),0),i=t-1;while(i>=23)v(c,1<<23),i-=23;v(c,1<<i),g(c,1,1),v(c,2),f=b(c)}else g(c,0,a),g(c,1<<-t,0),f=b(c)+d("0",o);return o>0?(n=f.length,f=p+(n<=o?"0."+d("0",o-n)+f:h(f,0,n-o)+"."+h(f,n-o))):f=p+f,f}})},eac5:function(e,t,a){var i=a("861d"),n=Math.floor;e.exports=Number.isInteger||function(e){return!i(e)&&isFinite(e)&&n(e)===e}}}]);
//# sourceMappingURL=chunk-18b6d004.b5083036.js.map