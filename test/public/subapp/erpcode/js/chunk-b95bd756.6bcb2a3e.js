(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-b95bd756"],{"0bb8":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("common",{attrs:{sourceType:2}})},r=[],o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"params"},[i("div",{attrs:{id:"leixin"}},[i("div",{staticClass:"search_container"},[i("el-form",{ref:"filterFormRef",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[i("el-form-item",{attrs:{label:"销售组织",size:"mini"}},[i("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.companyListInvok,change:e.companyChange},model:{value:e.params.company_id,callback:function(t){e.$set(e.params,"company_id",t)},expression:"params.company_id"}},e._l(e.companyList,(function(t){return i("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[i("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name))])])})),1)],1),i("el-form-item",{attrs:{label:"业务日期",size:"mini"}},[i("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}})],1),i("el-form-item",{attrs:{label:"单据号",size:"mini"}},[i("el-input",{attrs:{placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(1)}},model:{value:e.params.outstock_sn,callback:function(t){e.$set(e.params,"outstock_sn",t)},expression:"params.outstock_sn"}})],1),i("el-form-item",{attrs:{label:"选择客户",size:"mini"}},[i("el-select",{attrs:{filterable:"",placeholder:"请输入",loading:e.loading,remote:"","remote-method":e.clienteleListInvok},on:{change:e.getCustomer,focus:e.clienteleListInvok},model:{value:e.params.customer_id,callback:function(t){e.$set(e.params,"customer_id",t)},expression:"params.customer_id"}},[i("ul",{staticClass:"customer customer-ul4 customer-ul2"},[i("li",[e._v("客户编号")]),i("li",[e._v("客户名称")]),i("li",[e._v("联系人")]),i("li",[e._v("联系电话")]),i("li",[e._v("区域")])]),e._l(e.customerList,(function(t){return i("el-option",{key:t.customer_id,attrs:{label:t.customer_name,value:t.customer_id}},[i("ul",{staticClass:"customer customer-ul4"},[i("li",{attrs:{title:t.customer_id}},[e._v(e._s(t.customer_id))]),i("li",{attrs:{title:t.customer_name}},[e._v(e._s(t.customer_name))]),i("li",{attrs:{title:t.contact_name}},[e._v(e._s(t.contact_name))]),i("li",{attrs:{title:t.customer_mobile}},[e._v(e._s(t.customer_mobile))]),i("li",[e._v(e._s(t.province_name)+"/"+e._s(t.city_name)+"/"+e._s(t.area_name))])])])}))],2)],1),i("el-form-item",{attrs:{label:"业务员",size:"mini"}},[i("erpEmployee",{attrs:{fatherParams:e.params,modelLabel:"business_name",searchParams:{company_id:e.params.company_id}},model:{value:e.params.business_id,callback:function(t){e.$set(e.params,"business_id",t)},expression:"params.business_id"}})],1),i("el-form-item",{attrs:{label:"单据状态",size:"mini"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.params.auditor_status,callback:function(t){e.$set(e.params,"auditor_status",t)},expression:"params.auditor_status"}},[i("el-option",{attrs:{label:"全部",value:0}},[e._v("全部")]),i("el-option",{attrs:{label:"未审核",value:1}},[e._v("未审核")]),i("el-option",{attrs:{label:"已审核",value:2}},[e._v("已审核")])],1)],1),i("el-form-item",{attrs:{label:"关联订单号",size:"mini"}},[i("el-input",{attrs:{placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(1)}},model:{value:e.params.order_sn,callback:function(t){e.$set(e.params,"order_sn",t)},expression:"params.order_sn"}})],1),i("el-form-item",{attrs:{label:"电商订单号",size:"mini"}},[i("el-input",{attrs:{placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(1)}},model:{value:e.params.ec_order_sn,callback:function(t){e.$set(e.params,"ec_order_sn",t)},expression:"params.ec_order_sn"}})],1),i("el-form-item",{attrs:{label:"制单人",size:"mini"}},[i("el-select",{attrs:{filterable:""},on:{focus:e.EmployeeListInvok,change:function(t){e.employeeChange(t,"add_user_name")}},model:{value:e.params.add_user_id,callback:function(t){e.$set(e.params,"add_user_id",t)},expression:"params.add_user_id"}},e._l(e.employeeList,(function(e){return i("el-option",{key:e.employee_id,attrs:{label:e.employee_name,value:e.employee_id}})})),1)],1),i("el-form-item",{attrs:{label:"审核人",size:"mini"}},[i("el-select",{attrs:{filterable:""},on:{focus:e.EmployeeListInvok,change:function(t){e.employeeChange(t,"auditor_name")}},model:{value:e.params.auditor_id,callback:function(t){e.$set(e.params,"auditor_id",t)},expression:"params.auditor_id"}},e._l(e.employeeList,(function(e){return i("el-option",{key:e.employee_id,attrs:{label:e.employee_name,value:e.employee_id}})})),1)],1),i("el-form-item",{attrs:{label:"仓库名称",size:"mini"}},[i("el-select",{attrs:{clearable:"",multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},on:{change:e.warehouseChange,focus:e.warehouseInvok},model:{value:e.params.warehouse_id,callback:function(t){e.$set(e.params,"warehouse_id",t)},expression:"params.warehouse_id"}},e._l(e.warehouseList,(function(e){return i("el-option",{key:e.warehouse_id,attrs:{label:e.warehouse_name,value:e.warehouse_id}})})),1)],1),i("el-form-item",{attrs:{label:"审核日期",size:"mini"}},[i("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.auditValue,callback:function(t){e.auditValue=t},expression:" auditValue"}})],1),i("el-form-item",{attrs:{label:"回款状态",size:"mini"}},[i("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{clear:function(t){return e.clickClear(e.params,["return_price_status"])}},model:{value:e.params.return_price_status,callback:function(t){e.$set(e.params,"return_price_status",t)},expression:"params.return_price_status"}},[i("el-option",{attrs:{label:"全部",value:0}},[e._v("全部")]),i("el-option",{attrs:{label:"未回款",value:1}},[e._v("未回款")]),i("el-option",{attrs:{label:"部分回款",value:2}},[e._v("部分回款")]),i("el-option",{attrs:{label:"全部回款",value:3}},[e._v("全部回款")])],1)],1),i("el-form-item",{attrs:{label:"发货状态",size:"mini"}},[i("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{clear:function(t){return e.clickClear(e.params,["deliver_status"])}},model:{value:e.params.deliver_status,callback:function(t){e.$set(e.params,"deliver_status",t)},expression:"params.deliver_status"}},[i("el-option",{attrs:{label:"全部",value:0}},[e._v("全部")]),i("el-option",{attrs:{label:"未发货",value:1}},[e._v("未发货")]),i("el-option",{attrs:{label:"部分发货",value:2}},[e._v("部分发货")]),i("el-option",{attrs:{label:"全部发货",value:3}},[e._v("全部发货")])],1)],1),i("el-form-item",{attrs:{label:"详细地址",size:"mini"}},[i("el-input",{attrs:{placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(1)}},model:{value:e.params.address,callback:function(t){e.$set(e.params,"address",t)},expression:"params.address"}})],1),i("el-form-item",{attrs:{label:"部门",size:"mini"}},[e._v(" "+e._s(function(){0==e.params.department_id&&(e.params.department_id=null)}())+" "),i("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.DepartmentListInvok,change:e.departmentChange},model:{value:e.params.department_id,callback:function(t){e.$set(e.params,"department_id",t)},expression:"params.department_id"}},e._l(e.departmentList,(function(e){return i("el-option",{key:e.department_id,attrs:{label:e.department_name,value:e.department_id}})})),1)],1),i("el-form-item",{attrs:{label:"回款方式",size:"mini"}},[i("el-select",{attrs:{clearable:"",filterable:""},on:{clear:function(t){return e.clickClear(e.params,["payment_method"])}},model:{value:e.params.payment_method,callback:function(t){e.$set(e.params,"payment_method",t)},expression:"params.payment_method"}},[i("el-option",{attrs:{label:"全部",value:0}},[e._v("全部")]),i("el-option",{attrs:{label:"客户自结",value:1}},[e._v("客户自结")]),i("el-option",{attrs:{label:"物流代收",value:2}},[e._v("物流代收")]),i("el-option",{attrs:{label:"电商结算",value:3}},[e._v("电商结算")])],1)],1),i("el-form-item",{attrs:{label:"物流公司",size:"mini"}},[i("el-select",{attrs:{clearable:"",filterable:""},on:{clear:function(t){return e.clickClear(e.params,["settlement_customer_name"])},focus:e.logisticsInvok,change:e.getlogisticsChange},model:{value:e.params.logistics_id,callback:function(t){e.$set(e.params,"logistics_id",t)},expression:"params.logistics_id"}},e._l(e.logisticsList,(function(e){return i("el-option",{key:e.logistics_id,attrs:{label:e.logistics_name,value:e.logistics_id}})})),1)],1),i("el-form-item",{attrs:{label:"客户分类",size:"mini"}},[i("el-select",{attrs:{clearable:"",filterable:""},on:{focus:e.customerTypeInvok,change:e.customerTypeChange},model:{value:e.params.customer_type_id,callback:function(t){e.$set(e.params,"customer_type_id",t)},expression:"params.customer_type_id"}},e._l(e.customerTypeList,(function(e){return i("el-option",{key:e.customer_type_id,attrs:{label:e.customer_type_name,value:e.customer_type_id}})})),1)],1),i("el-form-item",{attrs:{label:"备注",size:"mini"}},[i("el-input",{attrs:{placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(1)}},model:{value:e.params.abstract,callback:function(t){e.$set(e.params,"abstract",t)},expression:"params.abstract"}})],1),i("el-form-item",{attrs:{label:"开票信息",size:"mini"}},[i("el-input",{attrs:{clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.clickSearch(1)}},model:{value:e.params.invoice_info,callback:function(t){e.$set(e.params,"invoice_info",t)},expression:"params.invoice_info"}})],1),i("el-form-item",{attrs:{size:"mini"}},[i("el-checkbox",{staticStyle:{margin:"0px 22px 0 62px"},attrs:{"false-label":"0","true-label":"1",name:"type"},model:{value:e.params.is_zero,callback:function(t){e.$set(e.params,"is_zero",t)},expression:"params.is_zero"}},[e._v("仅显示打印次数为0的单据")])],1),i("el-form-item",{attrs:{size:"mini"}},[i("el-checkbox",{staticStyle:{margin:"0px 22px 0 62px"},attrs:{"false-label":"0","true-label":"1",name:"type"},model:{value:e.params.is_freeze,callback:function(t){e.$set(e.params,"is_freeze",t)},expression:"params.is_freeze"}},[e._v("仅显示冻结单据")])],1),i("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.onSearch(1)}}},[e._v("查询")]),i("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1),i("div",{staticClass:"add_delet"},[1==e.authority.b_add?i("el-button",{staticClass:"addBtn",attrs:{icon:"el-icon-circle-plus-outline",type:"primary",size:"mini"},on:{click:e.addF}},[e._v("新增")]):e._e(),1==e.authority.b_del?i("el-button",{attrs:{plain:"",icon:"el-icon-delete",size:"mini"},on:{click:e.deletes}},[e._v("删除")]):e._e(),1==e.authority.b_pass?i("el-button",{attrs:{icon:"iconfont icon-pass",type:"primary",size:"mini"},on:{click:e.audit}},[e._v("审核")]):e._e(),1==e.authority.b_nopass?i("el-button",{attrs:{plain:"",icon:"iconfont icon-fanshenhe",size:"mini"},on:{click:function(t){return e.cancellation("salesAuditorNoPass")}}},[e._v("弃审")]):e._e(),1==e.authority.b_export_file?i("el-button",{attrs:{plain:"",icon:"el-icon-download",size:"mini"},on:{click:e.downLoadFile}},[e._v("下载模板")]):e._e(),1==e.authority.b_import?i("el-button",{staticClass:"addBtn",attrs:{plain:"",icon:"iconfont icon-daoru5",size:"mini"},on:{click:e.dialogEmployee}},[e._v("导入")]):e._e(),1==e.authority.b_export?i("el-dropdown",{staticStyle:{margin:"0 10px"}},[i("span",{staticStyle:{cursor:"pointer",color:"#4e90e2"},attrs:{"split-button":""}},[i("el-button",{attrs:{plain:"",icon:"iconfont icon-daochu10",size:"mini"}},[e._v("导出")])],1),i("el-dropdown-menu",{staticStyle:{"margin-top":"10px"},attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{nativeOn:{click:function(t){return e.exportOrder(1)}}},[e._v("导出Excel文件")]),i("el-dropdown-item",{nativeOn:{click:function(t){return e.exportOrder(2)}}},[e._v("导出CSV逗号分隔")])],1)],1):e._e(),i("el-dropdown",{style:{"margin-left":1==e.authority.b_export?0:"10px"},on:{command:e.printChange}},[i("span",{staticStyle:{cursor:"pointer",color:"#4e90e2"},attrs:{"split-button":""}},[i("el-button",{attrs:{plain:"",size:"mini",icon:"el-icon-printer"}},[e._v("批量打印")])],1),i("el-dropdown-menu",{staticStyle:{"margin-top":"10px"},attrs:{slot:"dropdown"},slot:"dropdown"},[1==e.authority.b_printingpick?i("el-dropdown-item",{attrs:{command:"1"}},[e._v("拣货单")]):e._e(),1==e.authority.b_printingoutstock?i("el-dropdown-item",{attrs:{command:"2"}},[e._v("出库单")]):e._e(),1==e.authority.b_printingpartslist?i("el-dropdown-item",{attrs:{command:"3"}},[e._v("汽配单")]):e._e()],1)],1)],1),i("xTable",{ref:"xTable",attrs:{ajax:{url:"salesOutstockListV2",params:e.params},footerMethod:e.footerMethod,tableColumn:e.tableColumn,xData:e.tableData,isShowTool:!0,dragable:1==e.sourceType},on:{getData:e.dealData}})],1),e.printingStatusGet?i("div",[i("lodopDelivery",{ref:"lodopDelivery",attrs:{title:e.title},on:{Search:e.onSearch}})],1):e._e(),i("upload",{ref:"upload",attrs:{options:e.options},on:{receiveUploadMsg:e.onSearch}})],1)},s=[],n=i("5530"),l=(i("d3b7"),i("159b"),i("4de4"),i("d81d"),i("25f0"),i("caad"),i("99af"),i("a15b"),i("e9c4"),i("b0c0"),i("65b0")),c=i("78d2"),u=(i("ac1f"),i("5319"),i("b680"),{data:function(){var e=this;this.$createElement;return{footerData:{},tableColumn:[{type:"checkbox",width:44,align:"center"},{type:"index",title:"序号",width:46},{field:"name",title:"操作",width:60,fixed:"right",slots:{default:function(t,i){return[i("el-dropdown",{on:{command:function(i){return e.handleCommand(i,t.row)}},style:"cursor:pointer"},[i("i",{class:"el-icon-more el-icon--right"}),i("el-dropdown-menu",{slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"seeF",disabled:!(1==e.authority.b_info)}},["查看"]),i("el-dropdown-item",{attrs:{command:"modifyF",disabled:!(1==t.row.auditor_status&&1==e.authority.b_edit)}},["修改"]),i("el-dropdown-item",{attrs:{command:"salesPickingOrders"},directives:[{name:"show",value:t.row.after_auditor_print_status?e.authority.b_printingpick&&2==t.row.auditor_status:e.authority.b_printingpick}]},["拣货单打印"]),i("el-dropdown-item",{attrs:{command:"outboundOrder"},directives:[{name:"show",value:t.row.after_auditor_print_status?e.authority.b_printingoutstock&&2==t.row.auditor_status:e.authority.b_printingoutstock}]},["出库单打印"]),i("el-dropdown-item",{attrs:{command:"autoPartsList"},directives:[{name:"show",value:t.row.after_auditor_print_status?e.authority.b_printingpartslist&&2==t.row.auditor_status:e.authority.b_printingpartslist}]},["汽配单打印"])])])]}}},{title:"销售组织",field:"company_name",width:150},{title:"单据号",field:"instorage_sn",width:170,slots:{default:function(t,i){return[i("a",{style:{cursor:"pointer"},on:{click:function(){e.seeF(t.row)}},attrs:{type:"text",size:"small"}},[t.row.outstock_sn," "])]}}},{title:"客户名称",field:"customer_name",width:100},{title:"业务员",field:"business_name",width:84},{title:"订单来源",field:"is_erp_title",width:80},{title:"出库数量",field:"outstock_num",headerAlign:"right",align:"right",width:80},{title:"优惠金额",field:"discount_total_amount",headerAlign:"right",align:"right",width:80},{title:"出库金额",field:"outstock_price",headerAlign:"right",align:"right",width:100,formatter:"priceFormat"},{title:"门店优惠金额",field:"shop_discount_price",headerAlign:"right",align:"right",width:100},{title:"原价金额",field:"original_price",headerAlign:"right",align:"right",width:100},{field:"sub_revenue_price",showOverflow:!0,headerAlign:"right",align:"right",title:"税额",width:100},{field:"sub_no_revenue_price",showOverflow:!0,headerAlign:"right",align:"right",title:"不含税金额",width:100},{title:"使用返利",field:"rebate_price",headerAlign:"right",align:"right",width:100,formatter:"priceFormat"},{title:"使用授信",field:"credit_price",headerAlign:"right",align:"right",width:100,formatter:"priceFormat"},{title:"使用预收",field:"deposits_price",headerAlign:"right",align:"right",width:100,formatter:"priceFormat"},{title:"回款金额",field:"receipt_price",headerAlign:"right",align:"right",sortable:!0,sortMethod:function(e,t){return e.receipt_price-t.receipt_price},formatter:"priceFormat",width:100},{title:"未回款金额",field:"unreceipt_price",headerAlign:"right",align:"right",sortable:!0,formatter:"priceFormat",width:100,sortMethod:function(e,t){return e.unreceipt_price-t.unreceipt_price}},{title:"已退货金额",field:"return_amount",headerAlign:"right",align:"right",width:100,formatter:"priceFormat"},{title:"单据状态",field:"auditor_status_name",width:130},{title:"审核人",field:"auditor_name",width:130},{title:"制单人",field:"add_user_name",width:130},{title:"业务日期",field:"business_time",width:130},{title:"单据时间",field:"add_time",width:130},{title:"审核时间",field:"auditor_time",width:130},{title:"修改人",field:"update_user_name",width:130},{title:"修改时间",field:"update_time",width:130},{title:"关联订单号",field:"order_sn",width:156},{title:"电商订单号",field:"ec_order_sn",width:156,formatter:function(e){var t=e.row,i=e.column;return 0!=t.ec_order_sn?t[i.property]:""}},{title:"部门",field:"department_name",width:100},{title:"回款方式",field:"payment_method",width:100},{title:"物流公司",field:"settlement_customer_name",width:100},{title:"意向物流",field:"intentional_logistics",width:100},{title:"客户分类",field:"customer_type_name",width:100},{title:"详细地址",field:"address",width:300},{title:"打印次数",field:"print_times",width:80},{title:"备注",field:"abstract",width:200},{title:"开票信息",field:"invoice_info",width:200}]}},methods:{dealData:function(e){200===e.data.code&&(this.footerData=e.data.data.desc)},footerMethod:function(e){var t=this,i=e.columns,a=e.data;return[i.map((function(e,i){if(1===i)return"页小计";if(["outstock_num","outstock_price","discount_total_amount","sub_revenue_price","sub_no_revenue_price","rebate_price","credit_price","deposits_price","receipt_price","return_amount","unreceipt_price","shop_discount_price","original_price"].includes(e.property)){var r=t.$utils.sum(a,e.property);return"outstock_num"===e.property?r.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):r.toFixed(2).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}return null})),i.map((function(e,i){if(1===i)return"合计";if("outstock_num"===e.property&&t.footerData.sum_number)return t.footerData.sum_number.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");var a=null;return"outstock_price"===e.property&&t.footerData.sum_outprice&&(a=t.footerData.sum_outprice),"credit_price"===e.property&&t.footerData.sum_credit_price&&(a=t.footerData.sum_credit_price),"rebate_price"===e.property&&t.footerData.sum_rebate_price&&(a=t.footerData.sum_rebate_price),"discount_total_amount"===e.property&&t.footerData.sum_discount_total_amount&&(a=t.footerData.sum_discount_total_amount),"sub_revenue_price"===e.property&&t.footerData.sub_revenue_price&&(a=t.footerData.sub_revenue_price),"sub_no_revenue_price"===e.property&&t.footerData.sub_no_revenue_price&&(a=t.footerData.sub_no_revenue_price),"shop_discount_price"===e.property&&t.footerData.shop_discount_price_total&&(a=t.footerData.shop_discount_price_total),"original_price"===e.property&&t.footerData.original_price_total&&(a=t.footerData.original_price_total),"return_amount"===e.property&&t.footerData.sum_return_amount&&(a=t.footerData.sum_return_amount),"deposits_price"===e.property&&t.footerData.sum_deposits_price&&(a=t.footerData.sum_deposits_price),"receipt_price"===e.property&&t.footerData.sum_return_price&&(a=t.footerData.sum_return_price),"unreceipt_price"===e.property&&t.footerData.sum_unreturn_price&&(a=t.footerData.sum_unreturn_price),null!==a?(a-0).toFixed(2).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):["outstock_num","outstock_price","credit_price","rebate_price","discount_total_amount","receipt_price","return_amount","deposits_price","unreceipt_price"].includes(e.property)?"加载中...":null}))]}}}),d=i("2f62"),p={mixins:[u],data:function(){return{options:{title:"销售出库",url:"/sales/outstockExcel/importClaim"},title:null,auditValue:null,loading:!1,params:{warehouse_id:[]},printstack:!0,hasAuditorStatusPrint:null}},props:["sourceType"],components:{lodopDelivery:c["a"]},computed:Object(n["a"])({},Object(d["c"])(["printingStatusGet"])),methods:Object(n["a"])(Object(n["a"])({},Object(d["b"])(["printingStatus"])),{},{clickClear:function(e,t){t.forEach((function(t){e[t]=""}))},customerTypeChange:function(e){var t=this;this.customerTypeList.some((function(i){if(i.customer_type_id==e)return t.params.customer_type_name=i.customer_type_name,!0}))},warehouseChange:function(e){var t=this,i=[];""!=e&&e.forEach((function(e){var a=t.warehouseList.filter((function(t){return t.warehouse_id===e}))[0].warehouse_name;i.push({warehouse_name:a,warehouse_id:e})}))},dialogEmployee:function(){this.$refs.upload.stateOpen()},exportOrder:function(e){var t=this.multipleSelection.map((function(e){return e.outstock_id})),i=Object.assign({},this.params,{export_type:e,id_arr:t.toString()});this.$axMethod.salesOutExportUrl(i).then((function(e){200==e.data.code&&(window.location.href=e.data.data.url)}))},downLoadFile:function(){this.$axMethod.salesOutdownloadFile({}).then((function(e){200==e.data.code&&(window.location.href=e.data.data.url)}))},handleCommand:function(e,t){["seeF","modifyF"].includes(e)?this[e](t):this.lodopDe(t,0,e)},printChange:function(e){for(var t=this,i=!1,a=this.multipleSelection,r=1;r<a.length;r++)if(a[r-1].company_id!=a[r].company_id){i=!0;break}if(this.multipleSelection.length)if(i)this.$message({message:"请选择相同公司单据进行打印",type:"warning"});else{var o=!0,s=[];if(this.multipleSelection.forEach((function(e){1==e.after_auditor_print_status&&2!=e.auditor_status&&(s.push(e.outstock_sn),o=!1)})),o)1==e?(this.$set(this,"title","salesPickingOrders"),this.printingStatus(!0),this.$nextTick((function(){t.$refs.lodopDelivery.printList(t.multipleSelection,["outstock_id"])}))):2==e?(this.$set(this,"title","outboundOrder"),this.printingStatus(!0),this.$nextTick((function(){t.$refs.lodopDelivery.printList(t.multipleSelection,["outstock_id"])}))):(this.$set(this,"title","autoPartsList"),this.printingStatus(!0),this.$nextTick((function(){t.$refs.lodopDelivery.printList(t.multipleSelection,["outstock_id"])})));else{var n=s.map((function(e,t){return"".concat(t+1,".").concat(e)}));this.$alert('以下未审核的单据不可打印：<br/>\n            <div style="color:#e6a23c">\n              '.concat(n.join("，"),"\n            <div>"),"提示",{dangerouslyUseHTMLString:!0})}}else this.$message({message:"请选择单据进行打印",type:"error"})},getCustomer:function(e){""!=e&&(this.params.customer_name=this.customerList.filter((function(t){return t.customer_id===e}))[0].customer_name)},lodopDe:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0;this.printingStatus(!0),this.$set(this,"title",a),this.$nextTick((function(){t.$refs.lodopDelivery.printPdf({outstock_id:e.outstock_id},i)}))},employeeChange:function(e,t){this.params[t]=""!=e?this.employeeList.filter((function(t){return t.employee_id===e}))[0].employee_name:null},companyChange:function(e){""!=e&&(this.params.company_name=this.companyList.filter((function(t){return t.company_id===e}))[0].company_name),this.$set(this.params,"add_user_id",""),this.$set(this.params,"auditor_id",""),this.$set(this.params,"business_id",""),this.$set(this.params,"customer_id",""),this.$set(this.params,"department_id",""),this.$set(this.params,"logistics_id",""),this.$set(this.params,"warehouse_id","")},getlogisticsChange:function(e){e&&(this.params.settlement_customer_name=this.logisticsList.filter((function(t){return t.logistics_id===e}))[0].logistics_name)},departmentChange:function(e){e&&(this.params.department_name=this.departmentList.filter((function(t){return t.department_id===e}))[0].department_name)},addF:function(){1===this.sourceType?this.$router.push({path:"/sales/salesout/salesoutAdd"}):this.$router.push({path:"/inventory/salesoutstorage/instroageSalesoutAdd"})},modifyF:function(e){if(e&&1==e.is_execute)return this.$message.error("wms系统正在操作此单据，暂不支持单据修改"),!1;1===this.sourceType?this.$router.push({path:"/sales/salesout/salesoutModify",query:{id:e.outstock_id,order_id:e.order_id?e.order_id:""}}):this.$router.push({path:"/inventory/salesoutstorage/salesoutModify",query:{id:e.outstock_id,order_id:e.order_id?e.order_id:""}})},seeF:function(e){1===this.sourceType?this.$router.push({path:"/sales/salesout/salesamend",query:{id:e.outstock_id,printStatus:e.after_auditor_print_status}}):this.$router.push({path:"/inventory/salesoutstorage/salesoutSee",query:{id:e.outstock_id,printStatus:e.after_auditor_print_status}})},audit:function(){for(var e=this,t=!1,i=this.multipleSelection,a=1;a<i.length;a++)if(i[a-1].company_id!=i[a].company_id){t=!0;break}if(this.multipleSelection.length)if(t)this.$message({message:"请选择相同公司单据进行审核",type:"warning"});else{var r=[];for(a=0;a<this.multipleSelection.length;a++)r.push({order_id:this.multipleSelection[a].outstock_id,serial_number:a});var o={company_id:this.multipleSelection[0].company_id,bill_id:JSON.stringify(r),operation:2,bill_type:2,is_info:0};this.$axMethod.v2setBillCostControl(o).then((function(t){var i=t.data.data;if(200==t.data.code)if(i.length>0)if(0==i[0].bill_setting_status){var a="";1==e.multipleSelection.length?i.forEach((function(e,t){a+=t+1+"."+e.name+"<br>"})):(i=e.$publicFution.deduplication(i,"order_name"),i.forEach((function(e,t){a+=t+1+"."+e.order_name+"<br>"}))),e.$confirm(' <div class="colorblue">'.concat(a,"</div> <br>以上商品售价低于成本价，是否继续提交？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,showClose:!1,type:"warning",distinguishCancelAndClose:!0}).then((function(){e.auditEntity()})).catch((function(e){}))}else e.$message({message:"商品售价低于成本价，审核失败！",type:"warning"}),i.forEach((function(t,i){e.colorFlag.push(t.order_name)})),e.tableData.forEach((function(t){-1!=e.colorFlag.indexOf(t.outstock_sn)&&(t.canNotDelete=!0)})),e.tableData.push({}),e.tableData.pop();else e.auditEntity()}))}else this.$message({message:"请选择需要审核的信息",type:"warning"})},auditEntity:function(){for(var e=this,t=this,i=[],a=0;a<this.multipleSelection.length;a++)i.push(this.multipleSelection[a].outstock_id);var r=i.toString(),o={examineID:"outstock_id",eachData:{outstock_id:r},examineApi:"salesOutstockAuidtorPass",list:{UrlApi:"salesOutstockListV2",data:this.tableData,esData:this.params}};this.$baseData.checkCarDoctor({bill_type:9,bill_id:r,operation_type:4}).then((function(){e.$axMethod.safetyStockCheck({bill_logogram:"xsck",order_type:2,bill_id:r}).then((function(){Object(l["m"])(e,{goods_info:r,status:2,type:1},(function(){t.$common.examineFun(o,t.onSearch)}))}))}))},cancellation:function(e){var t=this;if(this.multipleSelection.length<1){var i="";return"salesOutstockAuditorInvalid"==e?i="作废":"salesAuditorNoPass"==e&&(i="弃审"),this.$message({message:"请选择需要".concat(i,"的信息"),type:"warning"}),!1}for(var a=[],r=0;r<this.multipleSelection.length;r++)a.push(this.multipleSelection[r].outstock_id);var o=a.toString(),s={examineID:"outstock_id",eachData:{outstock_id:o},examineApi:e,list:{UrlApi:"salesOutstockListV2",data:this.TableData,esData:this.searchParams.params}};this.$baseData.checkCarDoctor({bill_type:9,bill_id:o,operation_type:5}).then((function(){t.$common.examineFun(s,t.onSearch)}))},onReset:function(){this.$set(this,"params",{auditor_status:0,return_price_status:0,deliver_status:0,payment_method:0,is_zero:0,is_freeze:0}),this.timeValue=[],this.auditValue=[],this.onSearch()},onSearch:function(e){this.footerData={},this.timeValue?(this.params.business_start_time=this.timeValue[0],this.params.business_end_time=this.timeValue[1]):this.params.business_start_time=this.params.business_end_time="",this.auditValue?(this.params.auditor_start_time=this.auditValue[0],this.params.auditor_end_time=this.auditValue[1]):this.params.auditor_start_time=this.params.auditor_end_time="",this.$refs.xTable._getData(e)},deletes:function(){var e=this;if(this.multipleSelection.length<1)return this.$message({message:"请选择需要删除的信息",type:"warning"}),!1;for(var t=[],i=0;i<this.multipleSelection.length;i++)t.push(this.multipleSelection[i].outstock_id);var a=t.toString(),r={deleID:"outstock_id",deleSelect:this.multipleSelection,deleApi:"salesOutstockDelOutstock",list:{UrlApi:"salesOutstockListV2",data:this.TableData,esData:this.searchParams.params}};this.$baseData.checkCarDoctor({bill_type:9,bill_id:a,operation_type:3}).then((function(){e.$common.deletes(r,"删除",e,e.onSearch)}))}}),created:function(){this.hasAuditorStatusPrint=window.localStorage.hasAuditorStatusPrint,this.authority=JSON.parse(localStorage.getItem("authority")),this.$set(this,"params",{auditor_status:0,return_price_status:0,deliver_status:0,payment_method:0})},activated:function(){this.checked="no"!==localStorage.getItem("isShowOrderMoney"),this.onSearch(window.goPage)}},m=p,_=(i("89bf"),i("2877")),h=Object(_["a"])(m,o,s,!1,null,"c211c004",null),f=h.exports,b={name:"inventorysalesSalesoutIndex",data:function(){return{}},components:{common:f}},v=b,g=Object(_["a"])(v,a,r,!1,null,null,null);t["default"]=g.exports},"0cb2":function(e,t,i){var a=i("e330"),r=i("7b0b"),o=Math.floor,s=a("".charAt),n=a("".replace),l=a("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,i,a,d,p){var m=i+e.length,_=a.length,h=u;return void 0!==d&&(d=r(d),h=c),n(p,h,(function(r,n){var c;switch(s(n,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,i);case"'":return l(t,m);case"<":c=d[l(n,1,-1)];break;default:var u=+n;if(0===u)return r;if(u>_){var p=o(u/10);return 0===p?r:p<=_?void 0===a[p-1]?s(n,1):a[p-1]+s(n,1):r}c=a[u-1]}return void 0===c?"":c}))}},5319:function(e,t,i){"use strict";var a=i("2ba4"),r=i("c65b"),o=i("e330"),s=i("d784"),n=i("d039"),l=i("825a"),c=i("1626"),u=i("5926"),d=i("50c4"),p=i("577e"),m=i("1d80"),_=i("8aa5"),h=i("dc4a"),f=i("0cb2"),b=i("14c3"),v=i("b622"),g=v("replace"),y=Math.max,k=Math.min,w=o([].concat),x=o([].push),$=o("".indexOf),S=o("".slice),D=function(e){return void 0===e?e:String(e)},C=function(){return"$0"==="a".replace(/./,"$0")}(),O=function(){return!!/./[g]&&""===/./[g]("a","$0")}(),z=!n((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));s("replace",(function(e,t,i){var o=O?"$":"$0";return[function(e,i){var a=m(this),o=void 0==e?void 0:h(e,g);return o?r(o,e,a,i):r(t,p(a),e,i)},function(e,r){var s=l(this),n=p(e);if("string"==typeof r&&-1===$(r,o)&&-1===$(r,"$<")){var m=i(t,s,n,r);if(m.done)return m.value}var h=c(r);h||(r=p(r));var v=s.global;if(v){var g=s.unicode;s.lastIndex=0}var C=[];while(1){var O=b(s,n);if(null===O)break;if(x(C,O),!v)break;var z=p(O[0]);""===z&&(s.lastIndex=_(n,d(s.lastIndex),g))}for(var L="",A=0,F=0;F<C.length;F++){O=C[F];for(var E=p(O[0]),T=y(k(u(O.index),n.length),0),M=[],I=1;I<O.length;I++)x(M,D(O[I]));var V=O.groups;if(h){var P=w([E],M,T,n);void 0!==V&&x(P,V);var j=p(a(r,void 0,P))}else j=f(E,n,T,M,V,r);T>=A&&(L+=S(n,A,T)+j,A=T+E.length)}return L+S(n,A)}]}),!z||!C||O)},"5a6c":function(e,t,i){},"89bf":function(e,t,i){"use strict";i("5a6c")},b680:function(e,t,i){"use strict";var a=i("23e7"),r=i("da84"),o=i("e330"),s=i("5926"),n=i("408a"),l=i("1148"),c=i("d039"),u=r.RangeError,d=r.String,p=Math.floor,m=o(l),_=o("".slice),h=o(1..toFixed),f=function(e,t,i){return 0===t?i:t%2===1?f(e,t-1,i*e):f(e*e,t/2,i)},b=function(e){var t=0,i=e;while(i>=4096)t+=12,i/=4096;while(i>=2)t+=1,i/=2;return t},v=function(e,t,i){var a=-1,r=i;while(++a<6)r+=t*e[a],e[a]=r%1e7,r=p(r/1e7)},g=function(e,t){var i=6,a=0;while(--i>=0)a+=e[i],e[i]=p(a/t),a=a%t*1e7},y=function(e){var t=6,i="";while(--t>=0)if(""!==i||0===t||0!==e[t]){var a=d(e[t]);i=""===i?a:i+m("0",7-a.length)+a}return i},k=c((function(){return"0.000"!==h(8e-5,3)||"1"!==h(.9,0)||"1.25"!==h(1.255,2)||"1000000000000000128"!==h(0xde0b6b3a7640080,0)}))||!c((function(){h({})}));a({target:"Number",proto:!0,forced:k},{toFixed:function(e){var t,i,a,r,o=n(this),l=s(e),c=[0,0,0,0,0,0],p="",h="0";if(l<0||l>20)throw u("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return d(o);if(o<0&&(p="-",o=-o),o>1e-21)if(t=b(o*f(2,69,1))-69,i=t<0?o*f(2,-t,1):o/f(2,t,1),i*=4503599627370496,t=52-t,t>0){v(c,0,i),a=l;while(a>=7)v(c,1e7,0),a-=7;v(c,f(10,a,1),0),a=t-1;while(a>=23)g(c,1<<23),a-=23;g(c,1<<a),v(c,1,1),g(c,2),h=y(c)}else v(c,0,i),v(c,1<<-t,0),h=y(c)+m("0",l);return l>0?(r=h.length,h=p+(r<=l?"0."+m("0",l-r)+h:_(h,0,r-l)+"."+_(h,r-l))):h=p+h,h}})}}]);
//# sourceMappingURL=chunk-b95bd756.6bcb2a3e.js.map