(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-1b4a657a"],{"52be":function(t,e,a){"use strict";a.d(e,"a",(function(){return p}));a("410a"),a("1269");var s,o,i,r=a("1a53"),n=(a("fca2"),navigator.userAgent),l=n.match(/Chrome\D?\d+/i);function c(){try{if(n.match(/Windows\sPhone/i))return!0;if(n.match(/iPhone|iPod|iPad/i))return!0;if(n.match(/Android/i))return!0;if(n.match(/Edge\D?\d+/i))return!0;var t=n.match(/Trident\D?\d+/i),e=n.match(/MSIE\D?\d+/i),a=n.match(/OPR\D?\d+/i),s=n.match(/Firefox\D?\d+/i),o=n.match(/x64/i);if(!t&&!e&&o)return!0;if(s){if(s=s[0].match(/\d+/),s[0]>=41||o)return!0}else if(a){if(a=a[0].match(/\d+/),a[0]>=32)return!0}else if(!t&&!e&&l&&(l=l[0].match(/\d+/),l[0]>=41))return!0;return!1}catch(i){return!0}}function d(){}function m(){if("loading"!=i&&"complete"!=i){i="loading";var t=document.head||document.getElementsByTagName("head")[0]||document.documentElement,e=document.createElement("script"),a=document.createElement("script"),s="https://localhost:8443/CLodopfuncs.js?priority=1",r="https://localhost:8444/CLodopfuncs.js?priority=0",n="https://localhost.lodop.net:8443/CLodopfuncs.js?priority=1",c="https://localhost.lodop.net:8444/CLodopfuncs.js?priority=0";try{var m=l[0].match(/\d+/)[0];m>=84?(e.src=n,a.src=c):(e.src=s,a.src=r)}catch(p){e.src="https://localhost:8443/CLodopfuncs.js?priority=1",a.src="https://localhost:8444/CLodopfuncs.js?priority=0"}e.onload=a.onload=function(){i="complete",d()},e.onerror=a.onerror=function(t){i="complete",d()},t.insertBefore(e,t.firstChild),t.insertBefore(a,t.firstChild),o=!!(e.src+a.src).match(/\/\/localho|\/\/127.0.0./i)}}function p(t,e){var a=L&&!!T.match(/x64/i);l[0].match(/\d+/)[0]>=84?a?"install_lodop64":"install_lodop32":"CLodop_Setup_for_Win32NT_https_3.083Extend";var n,d="<br><font color='#FF00FF'>打印控件未安装!点击这里<a href='https://gyl.taijierp.com/open/TjerpLop/DownLodTJERPLodop' target='_self'>执行安装</a>,安装后请刷新页面或重新进入。</font>",m="<br><font color='#FF00FF'>打印控件需要升级!点击这里<a href='https://gyl.taijierp.com/open/TjerpLop/DownLodTJERPLodop' target='_self'>执行升级</a>,升级后请重新进入。</font>",p="<br><font color='#FF00FF'>打印控件未安装!点击这里<a href='https://gyl.taijierp.com/open/TjerpLop/DownLodTJERPLodop' target='_self'>执行安装</a>,安装后请刷新页面或重新进入。</font>",u="<br><font color='#FF00FF'>打印控件需要升级!点击这里<a href='https://gyl.taijierp.com/open/TjerpLop/DownLodTJERPLodop' target='_self'>执行升级</a>,升级后请重新进入。</font>",_="<br><br><font color='#FF00FF'>（注意：如曾安装过Lodop旧版附件npActiveXPLugin,请在【工具】->【附加组件】->【扩展】中先卸它）</font>",h="<br><br><font color='#FF00FF'>(如果此前正常，仅因浏览器升级或重安装而出问题，需重新执行以上安装）</font>",g="<br><font color='#FF00FF'>Web打印服务CLodop未安装启动，点击这里<a href='https://gyl.taijierp.com/open/TjerpLop/DownLodTJERPLodop' target='_self'>下载执行安装</a>",f="<br>（若此前已安装过，可<a href='CLodop.protocol:setup' target='_self'>点这里直接再次启动</a>）",b="，成功后请刷新本页面。</font>",v="<br><font color='#FF00FF'>Web打印服务CLodop需升级!点击这里<a href='https://gyl.taijierp.com/open/TjerpLop/DownLodTJERPLodop' target='_self'>执行升级</a>,升级后请刷新页面。</font>";try{var T=navigator.userAgent,L=!!T.match(/MSIE/i)||!!T.match(/Trident/i);if(c()){try{n=getCLodop()}catch(S){}if(!n&&"complete"!==i)return void("loading"==i?Object(r["b"])({title:"消息",message:"网页还没下载完毕，请稍等一下再操作",dangerouslyUseHTMLString:!0}):Object(r["b"])({title:"消息",message:"没有加载CLodop的主js，请先调用loadCLodop过程",dangerouslyUseHTMLString:!0}));if(!n)return void Object(r["b"])({title:"消息",message:g+(o?f:"")+b,dangerouslyUseHTMLString:!0});CLODOP.CVERSION<"4.1.0.1"&&l[0].match(/\d+/)[0]>=84&&Object(r["b"])({title:"消息",message:v,dangerouslyUseHTMLString:!0}),e&&e.parentNode&&e.parentNode.removeChild(e),t&&t.parentNode&&t.parentNode.removeChild(t)}else{a=L&&!!T.match(/x64/i);if(t||e?n=L?t:e:s?n=s:(n=document.createElement("object"),n.setAttribute("width",0),n.setAttribute("height",0),n.setAttribute("style","position:absolute;left:0px;top:-100px;width:0px;height:0px;"),L?n.setAttribute("classid","clsid:2105C259-1E0C-4534-8141-A753534CB4CA"):n.setAttribute("type","application/x-print-lodop"),document.documentElement.appendChild(n),s=n),!n||!n.VERSION){if(T.indexOf("Chrome")>=0&&Object(r["b"])({title:"消息",message:h,dangerouslyUseHTMLString:!0}),T.indexOf("Firefox")>=0){var k=a?p:d;Object(r["b"])({title:"消息",message:_+k,dangerouslyUseHTMLString:!0})}return n}}if(n.VERSION<"6.2.2.0"&&l[0].match(/\d+/)[0]>=84&&!c()){var y=a?u:m;Object(r["b"])({title:"消息",message:y,dangerouslyUseHTMLString:!0})}return n.SET_LICENSES("甲乙丙丁（北京）电子商务股份有限公司","3A6CA10946B11B73566A29C9FB3098D5","",""),n}catch(S){alert("getLodop出错:"+S)}}c()&&m()},"8c75":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[null!=t.params?a("div",[a("div",{attrs:{id:"print-header"}},[a("table",{staticClass:"header",staticStyle:{width:"100%"},attrs:{cellpadding:"0",cellspacing:"0"}},[t._m(0),a("tr"),a("tr",[a("td",[a("b",[t._v("单据日期:")]),t._v(t._s(t.TableData.instoragList.business_time))]),a("td",{attrs:{colspan:"2"}},[a("b",[t._v("库存组织:")]),t._v(t._s(t.TableData.instoragList.company_name))])]),a("tr",[a("td",{attrs:{colspan:"2"}},[a("b",[t._v("仓库名称:")]),t._v(t._s(t.TableData.instoragList.warehouse_name))]),a("td",[a("b",[t._v("库管员:")]),t._v(t._s(t.TableData.instoragList.keeper_name))])])])]),a("div",{attrs:{id:"print-body"}},[a("table",{staticClass:"body",staticStyle:{width:"100%"},attrs:{cellpadding:"0",cellspacing:"0"}},[t._m(1),a("tbody",t._l(t.TableData.goodsList,(function(e,s){return a("tr",{key:s},[a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(s+1))]),a("td",[t._v(t._s(e.goods_id))]),a("td",[t._v(t._s(e.goods_name))]),a("td",[t._v(t._s(e.batch))]),a("td",[t._v(t._s(e.allocation_name))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.stocks))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.real_stocks))]),a("td",[t._v(t._s(e.remark))])])})),0),a("tfoot",[a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"2"}},[t._v("本页小计")]),a("td"),a("td"),a("td"),a("td",{staticStyle:{"text-align":"right"},attrs:{tdata:"subSum",format:"0"}},[t.stocksSum?a("font",{attrs:{color:"#0000FF"}},[t._v(" ### ")]):a("font",{attrs:{color:"#0000FF"}})],1),a("td",{staticStyle:{"text-align":"right"},attrs:{tdata:"subSum",format:"0"}},[t.stocksSum?a("font",{attrs:{color:"#0000FF"}},[t._v("###")]):a("font",{attrs:{color:"#0000FF"}})],1),a("td")]),a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"2"}},[t._v("总计")]),a("td"),a("td"),a("td"),a("td",{staticStyle:{"text-align":"right"},attrs:{tdata:"subSum",format:"0"}},[a("font",{attrs:{color:"#0000FF"}},[t._v(t._s(t.stocksSum))])],1),a("td",{staticStyle:{"text-align":"right"},attrs:{tdata:"subSum",format:"0"}},[a("font",{attrs:{color:"#0000FF"}},[t._v(t._s(t.realStocksSum))])],1),a("td")])])])]),t._m(2)]):t._e()])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{colspan:"2"}},[a("h2",{staticStyle:{"text-align":"center","padding-bottom":"0px","font-size":"13.5pt","line-height":"24pt",margin:"0px"}},[t._v("盘点单")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{width:"8%"}},[t._v("序号")]),a("th",{attrs:{width:"10%"}},[t._v("商品编号")]),a("th",{staticStyle:{"word-break":"break-all"},attrs:{width:"25%"}},[t._v("商品名称")]),a("th",{attrs:{width:"10%"}},[t._v("年周/批次")]),a("th",{attrs:{width:"12%"}},[t._v("货位名称")]),a("th",{attrs:{width:"10%"}},[t._v("账面数量")]),a("th",{attrs:{width:"10%"}},[t._v("实盘数量")]),a("th",{attrs:{width:"15%"}},[t._v("备注")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"print-pages"}},[a("p",{staticStyle:{"text-align":"center","font-size":"9pt"}},[t._v(" 页码： "),a("span",{attrs:{tdata:"pageNO"}},[t._v("第 ## 页")]),t._v(" / "),a("span",{attrs:{tdata:"pageCount"}},[t._v("共 ## 页")])])])}],i=(a("b1f0"),a("1e09"),a("42aa"),a("e3df"),a("fd3a"),a("410a"),a("6f78"),a("52be")),r=a("65b0"),n=(i["a"],{data:function(){return{params:null,warehouseList:{options:[]},companyList:[],getEmployeeList:{options:[]},employeeList:{options:[]},TableData:{},stocksSum:null,realStocksSum:null}},methods:{list:function(t){var e=this;this.params=t,this.$set(this.TableData,"instoragList",t.instoragList);var a=t.goodsList.length;if(a)try{this.stocksSum=t.goodsList.filter((function(t){return t.stocks})).map((function(t){return t.stocks})).reduce((function(t,e){return Number(t)+Number(e)}),0),this.realStocksSum=t.goodsList.filter((function(t){return t.real_stocks})).map((function(t){return t.real_stocks})).reduce((function(t,e){return Number(t)+Number(e)}),0)}catch(c){}else{if(this.stocksSum=null,1===t.instoragList.company_id)this.$set(this.TableData.instoragList,"company_name",localStorage.getItem("company_name"));else{var s=this.companyList.filter((function(e){return e.company_id==t.instoragList.company_id}));this.$set(this.TableData.instoragList,"company_name",s[0].company_name)}var o=this.warehouseList.options.filter((function(e){return e.warehouse_id==t.instoragList.warehouse_id}));if(this.TableData.instoragList.warehouse_id&&this.$set(this.TableData.instoragList,"warehouse_name",o[0].warehouse_name),void 0!=t.instoragList.keeper_id||null!=t.instoragList.keeper_id){var i=this.getEmployeeList.options.filter((function(e){return e.employee_id==t.instoragList.keeper_id}));this.$set(this.TableData.instoragList,"keeper_name",i[0].employee_name)}else this.$set(this.TableData.instoragList,"keeper_name",null)}if(a<32){for(var r=JSON.parse(JSON.stringify(t.goodsList)),n=32-a,l=0;l<=n;l++)r.push({zone:0});this.$set(this.TableData,"goodsList",r)}else this.$set(this.TableData,"goodsList",t.goodsList);setTimeout((function(){e.CreatePrintPages()}),10)},printPdf:function(t){this.list(t)},getRootPath:function(){var t=window.document.location.href,e=t.split("//")[1].split(".")[0];return e},CreatePrintPages:function(){var t=Object(i["a"])();if(!t)return!1;t.strStyle,this.getRootPath(),t=Object(i["a"])();var e=[],a=[];t.PRINT_INIT(""),e=["30mm","80mm","40mm","5mm"],a=["12mm","40mm","240mm","280mm"],t.SET_PRINT_PAGESIZE(1,0,0,"A4"),t.SET_PREVIEW_WINDOW(1,0,0,1e3,600,""),t.SET_SHOW_MODE("LANDSCAPE_DEFROTATED",1),t.SET_SHOW_MODE("HIDE_PAPER_BOARD",1),t.SET_PRINT_MODE("AUTO_CLOSE_PREWINDOW",1),t.SET_PRINT_MODE("CUSTOM_TASK_NAME","盘点单"),t.ADD_PRINT_HTM(a[0],"10mm","185mm",e[0],document.getElementById("print-header").innerHTML),t.SET_PRINT_STYLEA(0,"ItemType",1),t.SET_PRINT_STYLEA(0,"LinkedItem",1),t.ADD_PRINT_TABLE(a[1],"10mm","185mm",e[1],document.getElementById("print-body").innerHTML),t.SET_PRINT_STYLEA(0,"LinkedItem",2),t.SET_PRINT_STYLEA(0,"Vorient",3),t.ADD_PRINT_HTM(a[3],"10mm","185mm",e[3],document.getElementById("print-pages").innerHTML),t.SET_PRINT_STYLEA(0,"ItemType",1),t.PREVIEW()}},mounted:function(){Object(r["k"])(this,{type:1}),this.$common.options("getWarehouseListOption",this.warehouseList),this.$common.options("getEmployeeListOption",this.getEmployeeList)}}),l=n,c=a("2877"),d=Object(c["a"])(l,s,o,!1,null,"6ba5f5eb",null);e["a"]=d.exports},d73e:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"seePage"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("库存管理")]),a("el-breadcrumb-item",{staticClass:"attrbute"},[a("span",{on:{click:t.goBack}},[t._v("库存盘点")])]),a("el-breadcrumb-item",[t._v("查看库存盘点")])],1),a("div",{staticClass:"search_container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.TableData}},[a("el-form-item",{attrs:{label:"库存组织：",size:"mini"}},[t._v(" "+t._s(t.TableData.instoragList.company_name)+" ")]),a("el-form-item",{attrs:{label:"单据号：",size:"mini"}},[t._v(" "+t._s(t.TableData.instoragList.stock_taking_sn)+" ")]),a("el-form-item",{attrs:{label:"业务日期：",size:"mini"}},[t._v(" "+t._s(t.TableData.instoragList.business_time)+" ")]),a("el-form-item",{attrs:{label:"仓库名称：",size:"mini"}},[t._v(" "+t._s(t.TableData.instoragList.warehouse_name)+" ")]),a("el-form-item",{attrs:{label:"货位：",size:"mini"}},[t._v(" "+t._s(t.TableData.instoragList.host_allocation_name)+" ")]),a("el-form-item",{attrs:{label:"盘盈入库单号：",size:"mini"}},[t._v(" "+t._s(t.TableData.instoragList.instorage_sn)+" ")]),a("el-form-item",{attrs:{label:"盘亏出库单号：",size:"mini"}},[t._v(" "+t._s(t.TableData.instoragList.outstock_sn)+" ")]),a("el-form-item",{attrs:{label:"商品类型：",size:"mini"}},[t._v(" "+t._s(t.TableData.instoragList.goods_type_name)+" ")]),a("el-form-item",{attrs:{label:"品牌名称：",size:"mini"}},[t._v(" "+t._s(t.TableData.instoragList.brand_name)+" ")]),a("el-form-item",{attrs:{label:"商品名称：",size:"mini"}},[t._v(" "+t._s(t.TableData.instoragList.host_goods_name)+" ")]),a("el-form-item",{attrs:{label:"库管员：",size:"mini"}},[t._v(" "+t._s(t.TableData.instoragList.keeper_name)+" ")]),a("el-form-item",{attrs:{label:"审核状态：",size:"mini"}},[t._v(" "+t._s(t.TableData.instoragList.auditor_status_name)+" ")]),a("el-form-item",{attrs:{label:"备注：",size:"mini"}},[t._v(" "+t._s(t.TableData.instoragList.remark)+" ")])],1)],1),a("div",{staticClass:"table_container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:t.TableData.goodsList,"max-height":"600","summary-method":t.getSummaries,"show-summary":""}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"index",align:"center",label:"序号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_id",label:"商品编号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_name",label:"商品名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("pre",[t._v(t._s(e.row.goods_name))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"batch",label:"年周/批次"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"unit_name",label:"单位"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"allocation_name",label:"货位名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"stocks",label:"账面数量",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"real_stocks",label:"实盘数量",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"stocks_num",label:"盘盈/亏数量",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"remark",label:"备注"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"is_entity","min-width":"160",label:"是否为实物库存"}})],1)],1),a("div",{staticClass:"refundauditFoot"},[""!=t.TableData.instoragList.update_user_name?a("span",[t._v("修改人："+t._s(t.TableData.instoragList.update_user_name))]):a("span",[t._v("创建人："+t._s(t.TableData.instoragList.add_user_name))]),0!=t.TableData.instoragList.update_time?a("span",[t._v("修改时间："+t._s(t.TableData.instoragList.update_time))]):a("span",[t._v("创建时间："+t._s(t.TableData.instoragList.add_time))])]),a("div",[a("takestockPrint",{ref:"printRef"})],1),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","margin-top":"20px"}},[1==t.TableData.instoragList.auditor_status?[1==t.authority.b_pass?a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.audit("auditorPassTakeStock")}}},[t._v("审核")]):t._e(),1==t.authority.b_invalid?a("el-button",{on:{click:function(e){return t.audit("auditorInvalidTakeStock")}}},[t._v("作废")]):t._e()]:t._e(),2==t.TableData.instoragList.auditor_status||3==t.TableData.instoragList.auditor_status||1!=t.authority.b_invalid&&1!=t.authority.b_pass?[a("el-button",{on:{click:t.goBack}},[t._v("返回")])]:a("el-button",{on:{click:t.goBack}},[t._v("取消")]),1==t.takestockSeeGet.after_auditor_print_status?[2==t.TableData.instoragList.auditor_status?a("el-button",{attrs:{type:"primary"},on:{click:t.printF}},[t._v("打印")]):t._e()]:[a("el-button",{attrs:{type:"primary"},on:{click:t.printF}},[t._v("打印")])]],2)],1)},o=[],i=a("5530"),r=(a("d3b7"),a("159b"),a("caad"),a("d81d"),a("a9e3"),a("2f62")),n=a("8c75"),l=(a("65b0"),{name:"instorageTakestockTakestockSee",data:function(){return{hasAuditorStatusPrint:null,authority:{},TableData:{instoragList:{}},params:{},per_page:[30,50,100,500],goPage:1,pageSize:30}},components:{takestockPrint:n["a"]},computed:Object(i["a"])({},Object(r["c"])(["takestockIndexGet","takestockSeeGet"])),methods:Object(i["a"])(Object(i["a"])({},Object(r["b"])(["takestockIndexACT"])),{},{goBack:function(){this.$router.push({path:"/inventory/takestock"}),this.takestockIndexACT({goPage:this.takestockSeeGet.goPage,params:this.takestockSeeGet.params,pageSize:this.takestockSeeGet.pageSize})},printF:function(){var t=this;this.$nextTick((function(){t.$refs.printRef.printPdf(t.TableData)}))},getSummaries:function(t){var e=t.columns,a=t.data,s=[];return e.forEach((function(t,e){if(0!==e){if(["stocks","real_stocks","stocks_num"].includes(t.property)){var o=a.map((function(e){return Number(e[t.property])}));s[e]=o.reduce((function(t,e){Number(e);return Number(t+e)}),0)}}else s[e]="合计"})),s},audit:function(t){var e=this;"auditorPassTakeStock"==t?this.$axMethod.safetyStockCheck({bill_logogram:"pkck",order_type:2,bill_id:this.params.stock_taking_id}).then((function(a){e.$axios({method:"post",url:e.$api[t],data:{stock_taking_id:e.params.stock_taking_id}}).then((function(t){200==t.data.code&&(e.$message({message:t.data.msg?t.data.msg:t.data.data,type:"success"}),e.goBack())}))})):this.$axios({method:"post",url:this.$api[t],data:{stock_taking_id:this.params.stock_taking_id}}).then((function(t){200==t.data.code&&(e.$message({message:t.data.msg?t.data.msg:t.data.data,type:"success"}),e.goBack())}))},initData:function(){var t=this;this.$axMethod.infoTakeStock(this.params).then((function(e){var a=e.data;"200"==a.code&&(t.TableData=a.data)}))}}),created:function(){this.hasAuditorStatusPrint=window.localStorage.hasAuditorStatusPrint,this.authority=JSON.parse(localStorage.getItem("authority")),this.takestockSeeGet.stock_taking_id&&(this.params={stock_taking_id:this.takestockSeeGet.stock_taking_id},this.initData())}}),c=l,d=a("2877"),m=Object(d["a"])(c,s,o,!1,null,null,null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-1b4a657a.347098f6.js.map