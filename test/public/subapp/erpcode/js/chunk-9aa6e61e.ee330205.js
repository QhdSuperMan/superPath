(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-9aa6e61e"],{"32a2":function(e,t,a){},"5bf1":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("售后管理")]),a("el-breadcrumb-item",[e._v("公司三包")]),a("el-breadcrumb-item",{staticClass:"attrbute"},[a("span",{on:{click:e.goBack}},[e._v("三包订单")])]),a("el-breadcrumb-item",[e._v(e._s(e.threeorderAdd_Get.amend?"修改":"新增")+"三包订单")])],1),a("div",{directives:[{name:"clock",rawName:"v-clock"}],staticClass:"search_container hkfsUI"},[a("el-form",{ref:"TableDataRef",attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"销售组织",rules:e.rules.company_id,prop:"company_id",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:"",disabled:!!e.threeorderAdd_Get.amend},on:{focus:e.companyListInvok,change:e.companyChange},model:{value:e.params.company_id,callback:function(t){e.$set(e.params,"company_id",t)},expression:"params.company_id"}},e._l(e.companyList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[a("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"客户名称",rules:e.rules.customer_id,prop:"customer_id",size:"mini"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请输入",loading:e.loading,remote:"","remote-method":e.clienteleListInvok,disabled:!!e.threeorderAdd_Get.amend},on:{change:e.getCustomerInfo,focus:e.clienteleListInvok},model:{value:e.params.customer_id,callback:function(t){e.$set(e.params,"customer_id",t)},expression:"params.customer_id"}},[a("ul",{staticClass:"customer customer-ul4 customer-ul2"},[a("li",[e._v("客户编号")]),a("li",[e._v("客户名称")]),a("li",[e._v("联系人")]),a("li",[e._v("联系电话")]),a("li",[e._v("区域")])]),e._l(e.customerList,(function(t){return a("el-option",{key:t.customer_id,attrs:{label:t.customer_name,value:t.customer_id}},[a("ul",{staticClass:"customer customer-ul4"},[a("li",{attrs:{title:t.customer_id}},[e._v(e._s(t.customer_id))]),a("li",{attrs:{title:t.customer_name}},[e._v(e._s(t.customer_name))]),a("li",{attrs:{title:t.contact_name}},[e._v(e._s(t.contact_name))]),a("li",{attrs:{title:t.customer_mobile}},[e._v(e._s(t.customer_mobile))]),a("li",[e._v(e._s(t.province_name)+"/"+e._s(t.city_name)+"/"+e._s(t.area_name))])])])}))],2)],1),a("el-form-item",{attrs:{label:"部门",size:"mini"}},[e._v(" "+e._s(function(){0==e.params.department_id&&(e.params.department_id=null)}())+" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.DepartmentListInvok,change:e.departmentChange},model:{value:e.params.department_id,callback:function(t){e.$set(e.params,"department_id",t)},expression:"params.department_id"}},e._l(e.departmentList,(function(e){return a("el-option",{key:e.department_id,attrs:{label:e.department_name,value:e.department_id}})})),1)],1),a("el-form-item",{attrs:{label:"业务员",size:"mini"}},[e._v(" "+e._s(function(){0==e.params.business_id&&(e.params.business_id=null)}())+" "),a("el-select",{attrs:{clearable:""},on:{focus:function(t){return e.EmployeeListInvok(1)}},model:{value:e.params.business_id,callback:function(t){e.$set(e.params,"business_id",t)},expression:"params.business_id"}},e._l(e.employeeList,(function(e){return a("el-option",{key:e.employee_id,attrs:{label:e.employee_name,value:e.employee_id}})})),1)],1),a("el-form-item",{attrs:{label:"业务日期",size:"mini",prop:"business_time",rules:e.rules.business_time}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd"},model:{value:e.params.business_time,callback:function(t){e.$set(e.params,"business_time",t)},expression:"params.business_time"}})],1),a("el-form-item",{attrs:{label:"出库类型",size:"mini"}},[[a("span",[e._v("三包出库")])]],2),a("el-form-item",{attrs:{label:"送货需求",size:"mini"}},[e._v(" "+e._s(function(){0==e.params.delivery_demand_id&&(e.params.delivery_demand_id=null)}())+" "),a("el-select",{attrs:{clearable:""},on:{focus:e.getDeliveryDemandListInvok},model:{value:e.params.delivery_demand_id,callback:function(t){e.$set(e.params,"delivery_demand_id",t)},expression:"params.delivery_demand_id"}},e._l(e.deliveryDemandList,(function(e){return a("el-option",{key:e.delivery_demand_id,attrs:{label:e.delivery_demand_name,value:e.delivery_demand_id}})})),1)],1),a("el-form-item",{attrs:{label:"交货方式",size:"mini"}},[e._v(" "+e._s(function(){0==e.params.hand_over_id&&(e.params.hand_over_id=null)}())+" "),a("el-select",{attrs:{clearable:""},on:{focus:e.getHandoverListInvok},model:{value:e.params.hand_over_id,callback:function(t){e.$set(e.params,"hand_over_id",t)},expression:"params.hand_over_id"}},e._l(e.handoverList,(function(e){return a("el-option",{key:e.hand_over_id,attrs:{label:e.hand_over_name,value:e.hand_over_id}})})),1)],1),a("el-form-item",{staticClass:"wauto",attrs:{label:"所属区域",size:"mini",prop:"cityList"}},[e.defaultArea&&e.defaultArea.length?a("getAreaList",{attrs:{defaultArea:e.defaultArea},on:{changeDefaultArea:e.changeDefaultArea}}):e._e()],1),a("el-form-item",{attrs:{label:"收货人",size:"mini",prop:"consignee_name",rules:e.rules.consignee_name}},[a("el-input",{attrs:{maxLength:"7"},model:{value:e.params.consignee_name,callback:function(t){e.$set(e.params,"consignee_name",t)},expression:"params.consignee_name"}})],1),a("el-form-item",{attrs:{label:"手机号码",size:"mini"}},[a("el-input",{model:{value:e.params.consignee_mobile,callback:function(t){e.$set(e.params,"consignee_mobile",t)},expression:"params.consignee_mobile"}})],1),a("el-form-item",{attrs:{label:"回款方式",size:"mini"}},[a("el-select",{model:{value:e.params.payment_method,callback:function(t){e.$set(e.params,"payment_method",t)},expression:"params.payment_method"}},[a("el-option",{attrs:{label:"客户自结",value:1}},[e._v("客户自结")]),a("el-option",{attrs:{label:"物流代收",value:2}},[e._v("物流代收")])],1)],1),a("el-form-item",{attrs:{label:"详细地址",size:"mini",prop:"address",rules:e.rules.address}},[a("el-input",{model:{value:e.params.address,callback:function(t){e.$set(e.params,"address",t)},expression:"params.address"}})],1),a("el-form-item",{attrs:{label:"意向物流",size:"mini",prop:"intentional_logistics_id"}},[e._v(" "+e._s(function(){0==e.params.intentional_logistics_id&&(e.params.intentional_logistics_id=null)}())+" "),a("el-select",{attrs:{clearable:"",filterable:"",disabled:e.addDisabled,"filter-method":e.logisticsInvok},on:{focus:e.logisticsInvok,change:e.logisticsChanges},model:{value:e.params.intentional_logistics_id,callback:function(t){e.$set(e.params,"intentional_logistics_id",t)},expression:"params.intentional_logistics_id"}},e._l(e.logisticsList,(function(e){return a("el-option",{key:e.logistics_id,attrs:{label:e.logistics_name,value:e.logistics_id}})})),1)],1),a("el-form-item",{attrs:{label:"摘要",size:"mini"}},[a("el-input",{model:{value:e.params.abstract,callback:function(t){e.$set(e.params,"abstract",t)},expression:"params.abstract"}})],1)],1)],1),a("div",{staticClass:"add_delet"},[a("el-button",{staticClass:"addBtn",attrs:{icon:"el-icon-circle-plus-outline",type:"primary",size:"mini"},on:{click:e.addF}},[e._v("引用单据")]),a("el-button",{staticClass:"addBtn",attrs:{icon:"el-icon-circle-plus-outline",type:"primary",size:"mini"},on:{click:e.addLineF}},[e._v("增行")]),a("el-button",{attrs:{plain:"",icon:"el-icon-delete",size:"mini"},on:{click:e.deleteF}},[e._v("删行")])],1),a("div",{staticClass:"table_container"},[a("xTable",{ref:"xTable",attrs:{isEdit:e.isEdit,tableColumn:e.tableColumn,showFooter:!0,footerMethod:e.footerMethod}})],1),a("br"),a("el-form",{ref:"TableDataRef2",staticClass:"priceFoot",attrs:{model:e.params,inline:!0}},[a("el-form-item",{attrs:{label:"本单使用返利："}},[a("el-input",{staticClass:"element_input",attrs:{type:"input","suffix-icon":"el-icon-edit-outline",disabled:Number(e.params.rebate_balance)<=0||e.totalPrice<0},on:{change:e.countSettlementPrice},model:{value:e.params.rebate_price,callback:function(t){e.$set(e.params,"rebate_price",t)},expression:"params.rebate_price"}}),a("span",{staticClass:"yeban"},[e._v("余额:"+e._s(e._f("priceFormat")(e.params.rebate_balance?e.params.rebate_balance:0)))])],1),a("el-form-item",{attrs:{label:"本单使用授信："}},[a("el-input",{staticClass:"element_input",attrs:{type:"input","suffix-icon":"el-icon-edit-outline",disabled:Number(e.params.credit_balance)<=0||e.totalPrice<0},on:{change:e.countSettlementPrice},model:{value:e.params.credit_price,callback:function(t){e.$set(e.params,"credit_price",t)},expression:"params.credit_price"}}),a("span",{staticClass:"yeban"},[e._v("余额:"+e._s(e._f("priceFormat")(e.params.credit_balance?e.params.credit_balance:0)))])],1),a("el-form-item",{attrs:{label:"本单使用预收："}},[a("el-input",{staticClass:"element_input",attrs:{"suffix-icon":"el-icon-edit-outline",type:"input",disabled:Number(e.params.deposits)<=0||e.totalPrice<0},on:{change:e.countSettlementPrice},model:{value:e.params.deposits_price,callback:function(t){e.$set(e.params,"deposits_price",t)},expression:"params.deposits_price"}}),a("span",{staticClass:"yeban"},[e._v("余额:"+e._s(e._f("priceFormat")(e.params.deposits?e.params.deposits:0)))])],1),a("el-form-item",{attrs:{label:"客户余额："}},[a("el-input",{staticClass:"element_input",attrs:{disabled:""},model:{value:e.params.balance,callback:function(t){e.$set(e.params,"balance",t)},expression:"params.balance"}}),a("el-button",{attrs:{type:"primary"},on:{click:e.seeMoneyDetail}},[e._v("查看往来")])],1),a("el-form-item",{attrs:{label:"本单结算金额："}},[a("span",[e._v(e._s(e.params.settlement_price))])])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.goBack}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit("TableDataRef")}}},[e._v("确 定")])],1),e.salesDocumentsVisible?a("threeorderDalog",{ref:"company",attrs:{companyId:e.params.company_id,customerId:e.params.customer_id,customerName:e.params.customer_name},on:{callBack:e.orderSourceCallBack}}):e._e()],1)},s=[],r=a("5530"),o=(a("4de4"),a("d3b7"),a("d81d"),a("99af"),a("159b"),a("caad"),a("2532"),a("a15b"),a("a9e3"),a("b680"),a("e9c4"),a("2f62")),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"clock",rawName:"v-clock"}]},[a("el-dialog",{staticClass:"dialogForm",attrs:{"close-on-click-modal":!1,title:"引用公司理赔数据",visible:!0,width:"1300px"},on:{close:e.closeDialog}},[a("div",{staticClass:"search_container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"审核状态",size:"mini"}},[a("span",[e._v("已审核")])]),a("br"),a("el-form-item",{attrs:{label:"业务日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:""},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}})],1),a("el-form-item",{attrs:{label:"客户名称",rules:e.rules.customer_id,prop:"customer_id",size:"mini"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请输入",loading:e.loading,remote:"","remote-method":e.clienteleListInvok},on:{focus:e.clienteleListInvok},model:{value:e.params.customer_id,callback:function(t){e.$set(e.params,"customer_id",t)},expression:"params.customer_id"}},[a("ul",{staticClass:"customer customer-ul4 customer-ul2"},[a("li",[e._v("客户编号")]),a("li",[e._v("客户名称")]),a("li",[e._v("联系人")]),a("li",[e._v("联系电话")]),a("li",[e._v("区域")])]),e._l(e.customerList,(function(t){return a("el-option",{key:t.customer_id,attrs:{label:t.customer_name,value:t.customer_id}},[a("ul",{staticClass:"customer customer-ul4"},[a("li",{attrs:{title:t.customer_id}},[e._v(e._s(t.customer_id))]),a("li",{attrs:{title:t.customer_name}},[e._v(e._s(t.customer_name))]),a("li",{attrs:{title:t.contact_name}},[e._v(e._s(t.contact_name))]),a("li",{attrs:{title:t.customer_mobile}},[e._v(e._s(t.customer_mobile))]),a("li",[e._v(e._s(t.province_name)+"/"+e._s(t.city_name)+"/"+e._s(t.area_name))])])])}))],2)],1),a("el-form-item",{attrs:{label:"商品名称",size:"mini"}},[a("el-input",{staticClass:"shortSearchInput",attrs:{placeholder:"请输入"},model:{value:e.params.goods_name,callback:function(t){e.$set(e.params,"goods_name",t)},expression:"params.goods_name"}})],1),a("el-form-item",{attrs:{label:"公司理赔单据号",size:"mini"}},[a("el-input",{staticClass:"shortSearchInput",attrs:{placeholder:"请输入"},model:{value:e.params.company_claim_sn,callback:function(t){e.$set(e.params,"company_claim_sn",t)},expression:"params.company_claim_sn"}})],1),a("el-form-item",{attrs:{label:"胎号",size:"mini"}},[a("el-input",{staticClass:"shortSearchInput",attrs:{placeholder:"请输入"},model:{value:e.params.tire_un,callback:function(t){e.$set(e.params,"tire_un",t)},expression:"params.tire_un"}})],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"table_container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading1,expression:"loading1"}],staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:e.TableData.tableData,"max-height":"450"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",fixed:"left",align:"center",width:"44"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"company_claim_sn",width:"150px",label:"公司理赔单据号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"customer_name",label:"客户名称","min-width":"130"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"brand_name",label:"品牌名称","min-width":"130"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_id",label:"商品编号","min-width":"150"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_name",label:"商品名称","min-width":"500"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("pre",[e._v(e._s(t.row.goods_name))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"tire_un",label:"胎号","min-width":"130"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_price",label:"原销售价",align:"right","min-width":"130"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"discount_price",label:"原折后价",align:"right","min-width":"130"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"new_goods_price",label:"最新销售价",align:"right","min-width":"130"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"abrasion_price",label:"磨损费",align:"right","min-width":"130"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"intube_price",label:"内垫费",align:"right","min-width":"130"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"claim_price",label:"理赔单价",align:"right","min-width":"130"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"business_time",label:"业务日期","min-width":"130"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"add_time",label:"单据时间","min-width":"130"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"remark",label:"备注"}})],1)],1),a("div",{staticClass:"page_container"},[a("div",{staticClass:"pageNumber"},[e._v("每页显示")]),a("el-pagination",{staticClass:"erp-pagination",attrs:{"current-page":e.goPage,"page-size":e.pageSize1,"page-sizes":[30,50,100,500],layout:"total,sizes, prev, pager, next,jumper",prevText:"上一页",nextText:"下一页",total:e.TableData.total},on:{"size-change":e.handleSizeChange,"update:currentPage":function(t){e.goPage=t},"update:current-page":function(t){e.goPage=t},"current-change":e.handleCurrentChange}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.closeDialog()}}},[e._v("取 消")]),a("el-button",{staticClass:"tx",attrs:{type:"primary"},on:{click:function(t){return e.dialogSubmitForm()}}},[e._v("确 定")])],1)])],1)},l=[],c=(a("25f0"),a("e87e")),m=a("65b0"),d={data:function(){return{authority:{},TableData:{tableData:[],total:10},goPage:1,pageSize:30,per_page:[30,50,100,500],params:{},loading:!0,searchParams:{},timeValue:[],dialogmultipleSelection:[],addmultipleSelection:[]}},props:{companyId:{type:[Number,String]},customerId:{type:[Number,String]},customerName:{type:[Number,String]}},methods:{handleSizeChange:function(e){Object.assign(this.searchParams.params,{per_page:e,page:1}),Object(m["g"])(this.searchParams)},handleCurrentChange:function(e){Object.assign(this.searchParams.params,{page:e}),Object(m["g"])(this.searchParams)},handleSelectionChange:function(e){this.addmultipleSelection=e},onSearch:function(){this.timeValue&&2==this.timeValue.length?(this.params.start_time=this.timeValue[0],this.params.end_time=this.timeValue[1]):this.params.start_time=this.params.end_time="",Object.assign(this.searchParams.params,this.params,{page:1}),Object(m["g"])(this.searchParams)},onReset:function(){this.$set(this,"params",{company_id:this.companyId,customer_id:this.customerId,customer_name:this.customerName}),this.timeValue=[],this.$set(this,"searchParams",{params:{customer_id:this.customerId},TableData:this.TableData,API:"referenceClaimList",vm:this}),Object(m["g"])(this.searchParams)},closeDialog:function(){this.$parent.salesDocumentsVisible=!1},dialogSubmitForm:function(){var e=this;for(var t in this.addmultipleSelection)this.dialogmultipleSelection.push(this.addmultipleSelection[t].company_claim_goods_id);var a=this.dialogmultipleSelection;this.$axios({method:"get",url:c["a"].getGoodsListPublics,params:{company_claim_goods_id:a.toString()}}).then((function(t){if(200==t.data.code){e.$emit("callBack",t.data.data);var a=e.$parent.TableData.tableData.map((function(e){return e.company_claim_goods_id}));t.data.data.forEach((function(t){a.includes(t.company_claim_goods_id)||e.$parent.TableData.tableData.push(Object.assign({},t,{business_type:1,goods_price:t.goods_price,tire_un:t.tire_un}))})),t.data.data[0].customer_id!==e.customerId&&(e.$parent.params.customer_id=e.params.customer_id,e.$set(e.$parent,"customerList",[{customer_id:t.data.data[0].customer_id,customer_name:t.data.data[0].customer_name}]),e.$parent.getCustomerInfo(3)),e.$parent.salesDocumentsVisible=!1}}))}},mounted:function(){this.$set(this,"params",{company_id:this.companyId,customer_id:this.customerId,customer_name:this.customerName}),this.$set(this,"searchParams",{params:this.params,TableData:this.TableData,API:"referenceClaimList",vm:this}),Object(m["g"])(this.searchParams),Object(m["l"])(this,this.params)}},p=d,u=a("2877"),_=Object(u["a"])(p,n,l,!1,null,"269e2388",null),h=_.exports,b=a("d12c"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search_container"},[a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.info.title,visible:!0,width:"1100px"},on:{close:e.closeDialog}},[a("div",{staticClass:"search_container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"业务日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.timeVal,callback:function(t){e.timeVal=t},expression:"timeVal"}})],1),a("el-form-item",{attrs:{label:"选择客户",size:"mini"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.formInline.customer_id,callback:function(t){e.$set(e.formInline,"customer_id",t)},expression:"formInline.customer_id"}},e._l(e.selesTomerList.options,(function(t){return a("el-option",{key:t.customer_id,attrs:{label:t.customer_name,value:t.customer_id}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.customer_name))])])})),1)],1),a("el-form-item",{attrs:{label:"返利类型",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.formInline.rebate_type_id,callback:function(t){e.$set(e.formInline,"rebate_type_id",t)},expression:"formInline.rebate_type_id"}},e._l(e.rebateTypeList.options,(function(e){return a("el-option",{key:e.rebate_id,attrs:{label:e.rebate_name,value:e.rebate_id}})})),1)],1),a("el-form-item",{attrs:{label:"返利单据号",size:"mini"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:e.formInline.consignee_name,callback:function(t){e.$set(e.formInline,"consignee_name",t)},expression:"formInline.consignee_name"}})],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini"},on:{click:e.onSearch}},[e._v("查询")])],1)],1)],1),a("div",{staticClass:"table_container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:e.TableData.tableData,"max-height":"600"},on:{"selection-change":e.handleSelectionChange}},[e.info.flag?e._e():a("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",fixed:"left",align:"center",width:"44",label:"选择"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"rebate_sn",label:"返利单据号",width:"180"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"customer_name",label:"客户名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"right",property:"total_price",label:"返利金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("priceFormat")(t.row.total_price))+" ")]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"rebate_name",label:"返利类型"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"cycle_name",label:"返利周期"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"business_time",label:"业务日期"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"remark",label:"备注"}})],1)],1),a("div",{staticClass:"page_container"},[a("div",{staticClass:"pageNumber"},[e._v("每页显示")]),a("el-pagination",{staticClass:"erp-pagination",attrs:{"page-sizes":e.per_page,layout:"total,sizes, prev, pager, next,jumper",prevText:"上一页",nextText:"下一页",total:e.TableData.total},on:{"current-change":e.handleCurrentChange}})],1),e.info.flag?a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.closeDialog()}}},[e._v("关 闭")])],1):a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.closeDialog()}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("确 定")])],1)])],1)},g=[],v={data:function(){return{TableData:{tableData:[],total:10},per_page:[10,20,30],manageList:[],multipleSelection:[],formInline:{},params:{customer_id:String(this.selectData.customer_id),is_use:this.selectData.is_use},timeVal:null,info:{}}},props:{selesTomerList:{type:[Object],default:[]},rebateTypeList:{type:[Object],default:[]},selectData:{type:[Object]},status:{default:"1"},auditorStatus:{default:0}},methods:{closeDialog:function(){this.$parent.showRebateCustomVisible=!1},formatStatus:function(e){return 0==e.is_use?"否":"是"},handleSelectionChange:function(e){this.multipleSelection=e},handleCurrentChange:function(e){this.currentPage=e;var t=Object(r["a"])(Object(r["a"])({page:e},this.params),this.formInline);this.$common.handleCurrentChange("getCustomerRebateList",t,this.TableData)},onSearch:function(){this.timeVal&&(this.params.start_time=this.timeVal[0],this.params.end_time=this.timeVal[1]),Object.assign(this.params,this.formInline),this.$common.initData("getCustomerRebateList",this.TableData,this.params)},submit:function(){this.$emit("getRebateCustom",this.multipleSelection),this.closeDialog()}},mounted:function(){1==this.status?this.info={flag:!0,title:"查看客户返利"}:this.info={flag:!1,title:"选择客户返利"},2==this.auditorStatus&&(this.params.auditor_status=2),this.$common.initData("getCustomerRebateList",this.TableData,this.params)}},y=v,w=Object(u["a"])(y,f,g,!1,null,null,null),x=w.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"选择三包换胎出库信息",visible:!0,width:"1300px"},on:{close:e.closeDialog}},[a("div",{staticClass:"search_container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[e.TableData.tableData.length>0?a("el-form-item",{attrs:{label:"商品名称",size:"mini"}},[a("span",{staticStyle:{width:"200px",display:"inline-block"}},[e._v(e._s(e.TableData.tableData[0].goods_name))])]):e._e(),e.TableData.tableData.length>0?a("el-form-item",{attrs:{label:"商品编号",size:"mini"}},[a("span",[e._v(e._s(e.TableData.tableData[0].goods_id))])]):e._e(),a("br"),a("el-form-item",{attrs:{label:"仓库名称",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{focus:e.getWarehouse,change:e.changeAll},model:{value:e.params.warehouse_id,callback:function(t){e.$set(e.params,"warehouse_id",t)},expression:"params.warehouse_id"}},e._l(e.warehouseList.options,(function(e){return a("el-option",{key:e.warehouse_id,attrs:{label:e.warehouse_name,value:e.warehouse_id}})})),1)],1),a("el-form-item",{attrs:{label:"货位名称",size:"mini"}},[a("el-select",{staticClass:"el_slect",attrs:{clearable:"",placeholder:"请选择",size:"mini"},model:{value:e.params.allocation_id,callback:function(t){e.$set(e.params,"allocation_id",t)},expression:"params.allocation_id"}},e._l(e.allocationInventoryList,(function(e){return a("el-option",{key:e.allocation_id,attrs:{label:e.allocation_name,value:e.allocation_id}})})),1)],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"table_container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading1,expression:"loading1"}],staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:e.TableData.tableData,"max-height":"600"},on:{"row-click":e.handleCurrentChanges}},[a("el-table-column",{staticClass:"radio_scope",attrs:{"show-overflow-tooltip":!0,property:"batch_id",label:"选择",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.row.batch_id},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(e._s(null))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"batch",label:"年周/批次"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"warehouse_name",label:"仓库名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"allocation_name",label:"货位名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"available_stocks",label:"可用库存"}})],1)],1),a("div",{staticClass:"page_container"},[a("div",{staticClass:"pageNumber"},[e._v("每页显示")]),a("el-pagination",{staticClass:"erp-pagination",attrs:{"current-page":e.goPage,"page-size":e.pageSize1,"page-sizes":e.per_page,layout:"total,sizes, prev, pager, next,jumper",prevText:"上一页",nextText:"下一页",total:e.TableData.total},on:{"size-change":e.handleSizeChange,"update:currentPage":function(t){e.goPage=t},"update:current-page":function(t){e.goPage=t},"current-change":e.handleCurrentChange}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.closeDialog()}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dialogSubmitForm()}}},[e._v("确 定")])],1)])],1)},k=[],D={data:function(){return{params:{},TableData:{tableData:[],total:10},warehouseList:{options:[]},allocationInventoryList:[],radio:"",loading:!0,searchParams:{},goPage:1,pageSize:30,per_page:[30,50,100,500],multipleSelection:null}},props:["stockInfo"],methods:{getWarehouse:function(){this.$common.options("getWarehouseListOption",this.warehouseList,{company_id:localStorage.getItem("company_id")})},dialogSubmitForm:function(){if(null!=this.multipleSelection){var e=this.stockInfo.index,t=Object.assign({},this.$parent.TableData.tableData[e],this.multipleSelection);this.$set(this.$parent.TableData.tableData,e,t),this.$parent.stock_data=!1}},closeDialog:function(){this.$parent.stock_data=!1},handleCurrentChanges:function(e){this.multipleSelection=e},onSearch:function(){Object.assign(this.searchParams.params,this.params,{page:1}),Object(m["g"])(this.searchParams)},onReset:function(){this.$set(this,"params",{}),this.$set(this,"searchParams",{params:{company_id:this.stockInfo.company_id,goods_id:this.stockInfo.goods_id},TableData:this.TableData,API:"getGoodsBatchList",vm:this}),Object(m["g"])(this.searchParams)},changeAll:function(e){var t=this;this.$set(this.params,"allocation_id",""),this.$axMethod.allocationInventoryList({warehouse_id:e}).then((function(e){var a=e.data;"200"==a.code&&(t.allocationInventoryList=a.data)}))},handleSizeChange:function(e){Object.assign(this.searchParams.params,{per_page:e,page:1}),Object(m["g"])(this.searchParams)},handleCurrentChange:function(e){Object.assign(this.searchParams.params,{page:e}),Object(m["g"])(this.searchParams)}},created:function(){this.$set(this,"searchParams",{params:{company_id:this.stockInfo.company_id,goods_id:this.stockInfo.goods_id},TableData:this.TableData,API:"getGoodsBatchList",vm:this}),Object(m["g"])(this.searchParams)}},C=D,S=(a("b91f"),Object(u["a"])(C,$,k,!1,null,"a955cea6",null)),T=S.exports;a("8ba4");function A(){var e=new Date,t=new Date(e.getFullYear(),0,1),a=t.getDay(),i=1;0!=a&&(i=7-a+1),t=new Date(e.getFullYear(),0,1+i);var s=Math.ceil((e.valueOf()-t.valueOf())/864e5),r=2==String(Math.ceil(s/7)+1).length?Math.ceil(s/7)+1:"0".concat(Math.ceil(s/7)+1),o=e.getFullYear().toString().substring(2);return"".concat(r).concat(o)}var I={business_time:"",company_id:"",payment_method:"",credit_price:0,rebate_price:0,deposits_price:0,settlement_price:0,customer_id:"",credit_balance:0,deposits:"",balance:"",rebate_balance:0,delivery_demand_id:"",hand_over_id:"",department_id:"",business_id:"",intentional_logistics_id:0,settlement_customer_id:0,consignee_name:"",address:"",consignee_mobile:"",customer_name:"",cityList:"",province_id:"",city_id:"",area_id:"",outstorage_type_id:"",order_price:0,intentional_logistics:""},L={company_claim_goods_id:"",business_type:2,brand_id:"",stocks:"",available_stocks:"",brand_name:"",goods_id:"",goods_sn:"",goods_name:"",tire_un:"",goods_num:"",goods_price:"",discount_price:"",new_goods_price:"",abrasion_price:"",intube_price:"",claim_price:"",total_price:"",warehouse_id:"",warehouse_name:"",remark:""},z={company_claim_goods_id:"",business_type:2,brand_id:"",stocks:"",available_stocks:"",brand_name:"",goods_id:"",goods_sn:"",goods_name:"",tire_un:"",goods_num:0,goods_price:0,discount_price:0,new_goods_price:0,abrasion_price:0,intube_price:0,claim_price:0,total_price:0,warehouse_id:"",warehouse_name:"",remark:"",batch:"",batch_id:"",production_time:"",allocation_id:"",allocation_name:""},P={data:function(){var e=this;return{tableColumn:[{type:"checkbox",width:44},{field:"brand_name",title:"业务类型",width:110,formatter:function(e){var t=e.row;return 1==t.business_type?"三包折款":"三包销售"}},{field:"brand_name",title:"品牌名称",width:160},{title:"商品编号",field:"goods_id",width:100},{title:"商品名称",field:"goods_name",width:350,editRender:{name:"vGoods",getParams:function(t){t.row;return{params:{company_id:e.params.company_id,customer_id:e.params.customer_id,order_id:e.params.order_id||0,type:1}}},events:{change:function(t,a){var i=a.row,s=["goods_id","goods_sn","stocks","available_stocks","brand_id","brand_name","new_goods_price"];t.new_goods_price=t.unit_price,s.forEach((function(e){i[e]=t[e]})),["batch","batch_id","production_time","allocation_id","allocation_name","warehouse_name","warehouse_id"].forEach((function(e){i[e]=null}));var r=e.$refs.xTable._proxy("getTableData").fullData.concat([]);r[r.length-1].goods_id&&e.addLineF()}}},events:{change:function(t,a){var i=a.row,s=["goods_id","goods_sn","stocks","available_stocks","brand_id","brand_name","new_goods_price"];s.forEach((function(e){i[e]=t[e]})),["batch","batch_id","production_time","allocation_id","allocation_name","warehouse_name","warehouse_id"].forEach((function(e){i[e]=null}));var r=e.$refs.xTable._proxy("getTableData").fullData.concat([]);r[r.length-1].goods_id&&e.addLineF()}}},{title:"胎号",field:"tire_un",width:100},{title:"数量",field:"goods_num",headerAlign:"right",align:"right",width:130,editRender:{name:"number",events:{input:function(t){var a=t.row,i=t.column,s={num:"goods_num",price:"new_goods_price",totalPrice:"total_price"};e.$publicFution.computeTotal(a,s,i.property,e),e.$refs.xTable._proxy("updateFooter")}}}},{title:"原销售价",field:"goods_price",headerAlign:"right",align:"right",width:130},{title:"原折后价",field:"discount_price",headerAlign:"right",align:"right",width:130},{title:"最新销售价",field:"new_goods_price",headerAlign:"right",align:"right",width:130,editRender:{name:"Vinput",events:{input:function(t){var a=t.row,i=t.column,s={num:"goods_num",price:"new_goods_price",totalPrice:"total_price"};e.$publicFution.computeTotal(a,s,i.property,e),e.$refs.xTable._proxy("updateFooter")}}}},{title:"磨损费",field:"abrasion_price",headerAlign:"right",align:"right",width:130,formatter:function(e){var t=e.row,a=e.column;return 1!=t.business_type?"":t[a.property]}},{title:"内垫费",field:"intube_price",headerAlign:"right",align:"right",width:130,formatter:function(e){var t=e.row,a=e.column;return 1!=t.business_type?"":t[a.property]}},{title:"理赔单价",field:"claim_price",headerAlign:"right",align:"right",width:130,formatter:function(e){var t=e.row,a=e.column;return 1!=t.business_type?"":t[a.property]}},{title:"小计金额",field:"total_price",headerAlign:"right",align:"right",width:130,formatter:function(e){var t=e.row;if(1==t.business_type)t.total_price=t.claim_price?-t.claim_price:0;else{var a=t.goods_num*t.new_goods_price;t.total_price=isNaN(a)?0:Number(a).toFixed(2)}return t.total_price}},{title:"年周/批次",field:"batch",width:120,editRender:{name:"vBatch",getParams:function(t){var a=t.row;return{url:"getGoodsBatchList",params:{company_id:e.params.company_id,warehouse_id:e.params.warehouse_id,goods_id:a.goods_id?a.goods_id:""}}},events:{change:function(e,t){var a=t.row;["batch","batch_id","production_time","allocation_id","allocation_name","warehouse_name","warehouse_id"].forEach((function(t){a[t]=e[t]}))}}}},{title:"仓库名称",field:"warehouse_name",width:130},{title:"货位名称",field:"allocation_name",width:130},{title:"备注",field:"remark",width:200,editRender:{name:"Vinput",formatter:"String"}}]}},methods:{isEdit:function(e){var t=e.column,a=e.row;e.$rowIndex;return"goods_num"!==t.property&&"goods_name"!==t.property&&"new_goods_price"!==t.property&&"batch"!==t.property||1!=a.business_type||(this.$publicFution.confirm("三包折款不允许修改"),!1)},addLineF:function(){if(!this.params.customer_id)return this.$message.warning("请先选择客户"),!1;this.TableData.tableData.push({business_type:2,discount_price:null,tire_un:""}),this.$refs.xTable._proxy("insertAt",L,-1)},deleteF:function(){this.$refs.xTable._proxy("getCheckboxRecords").length?(this.$refs.xTable._proxy("removeSelecteds"),this.getCountThreeApportion()):this.$message.warning("请先选择要删除的订单！")},footerMethod:function(e){var t=this,a=e.columns;return[a.map((function(e,a){if(1===a)return"合计";if(["goods_num","abrasion_price","intube_price","claim_price","subtotal_price","total_price"].includes(e.property)){var i;i=t.$refs.xTable?t.$utils.sum(t.$refs.xTable._proxy("getTableData").fullData,e.property):0;var s=Number.isInteger(i)?i:i.toFixed(2);return"total_price"===e.property&&(t.totalPrice=s,t.totalPrice<=0&&(t.$set(t.params,"credit_price",0),t.$set(t.params,"rebate_price",0),t.$set(t.params,"deposits_price",0)),t.countSettlementPrice()),s}return null}))]},getWeek:A}},N={name:"aftersaleThreeorderAdd",mixins:[P],data:function(){return{defaultArea:[0],salesDocumentsVisible:!1,rebateTypeList:{},status:null,totalPrice:0,params:{},loading:!1}},components:{getAreaList:b["a"],threeorderDalog:h,rebateCustom:x,Stock:T},methods:Object(r["a"])(Object(r["a"])({},Object(o["b"])(["threeorderIndexACT","three_seeMoney"])),{},{logisticsChanges:function(e){this.params.logistics_name=e?this.logisticsList.filter((function(t){return t.logistics_id==e}))[0].logistics_name:""},paymentMethodChange:function(){this.$set(this.params,"settlement_customer_id",0)},goBack:function(){this.threeorderIndexACT({params:this.threeorderIndex_Get?this.threeorderIndex_Get.params:{},goPage:this.threeorderAdd_Get.goPage,pageSize:this.threeorderAdd_Get.pageSize}),this.$router.push({path:"/aftersale/threeorder"})},seeMoneyDetail:function(){this.$router.push({path:"/aftersale/threeorder/three_seeMoney"})},addF:function(){this.params.customer_id?this.salesDocumentsVisible=!0:this.$message({message:"请先选择客户名称",type:"warning"})},orderSourceCallBack:function(e){var t=this.$refs.xTable._proxy("getTableData").fullData.concat([]).map((function(e){return e.company_claim_goods_id})),a=this.$refs.xTable._proxy("getTableData").fullData.concat([]);e.forEach((function(e){t.includes(e.company_claim_goods_id)||a.push(Object.assign({},e,{business_type:1,goods_price:e.goods_price,tire_un:e.tire_un,goods_num:0}))})),this.$refs.xTable._proxy("loadData",a)},getCustomerInfo:function(e){var t=this,a={customer_id:this.params.customer_id,is_three_packs:1};if(e&&(a.company_id=this.customerList.filter((function(t){return t.customer_id===e}))[0].company_id),!e)return this.params.consignee_name="",this.defaultArea=[0],this.params.address="",void(this.params.consignee_mobile="");this.params.customer_id&&(this.params.customer_name=this.customerList.filter((function(e){return e.customer_id==t.params.customer_id}))[0].customer_name),this.$axMethod.getCustomerInfoNEWqx(a).then((function(a){var i=a.data;Object.assign(i.data,{employee_id:i.data.business_id,employee_name:i.data.business_name}),Object(m["l"])(t,i.data);["rebate_balance","customer_mobile","business_id","deposits","balance","credit_balance"].forEach((function(e){"customer_mobile"==e?t.$set(t.params,"consignee_mobile",i.data["customer_mobile"]):t.$set(t.params,e,i.data[e])}));3!=e&&t.$refs.xTable._proxy("loadData",[])})).then((function(e){t.$axMethod.getDefaultAddress(a).then((function(e){var a=e.data;200==a.code&&(t.$set(t.params,"address",a.data.address),t.$set(t.params,"consignee_name",a.data.consignee_name),t.defaultArea=[a.data.province_id,a.data.city_id,a.data.area_id],t.params.cityList=t.defaultArea.join(","),["province_id","city_id","area_id"].forEach((function(e,a){t.params[e]=t.defaultArea[a]})))}))}))},countSettlementPrice:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(t){var a=["rebate_price","credit_price","deposits_price"];a.forEach((function(t){e.$set(e.params,t,!e.params[t]||e.params[t]<0?null:e.params[t])}))}var i=Number(this.totalPrice)-Number(this.params.rebate_price)-Number(this.params.credit_price)-Number(this.params.deposits_price);this.$set(this.params,"settlement_price",i.toFixed(2))},changeDefaultArea:function(e){this.params.cityList=e.join(","),this.params.province_id=e[0],this.params.city_id=e[1],this.params.area_id=e[2]},submit:function(e){var t=this;this.params.rebate_price||(this.params.rebate_price=0),this.countSettlementPrice(),this.params.goods_json=[];var a=this.$refs.xTable._proxy("getTableData").fullData.concat([]);if(0===a.length)return this.$message.warning("请先添加单据！"),!1;if(a[a.length-1].goods_name||a.pop(),Number(this.params.rebate_price)>Number(this.params.rebate_balance))return this.$message.warning("本单返利金额不得大于返利余额！"),!1;if(Number(this.params.credit_price)>Number(this.params.credit_balance)&&Number(this.params.credit_balance)>=0)return this.$message.warning("本单使用授信不得大于授信额度！"),!1;if(Number(this.params.deposits_price)>Number(this.params.deposits)&&Number(this.params.deposits)>=0)return this.$message.warning("本单使用预收不得大于客户预收余额！"),!1;var i=!0;this.$refs[e].validate((function(e){if(e){a.forEach((function(e){t.params.goods_json.push(t.$publicFution.filter(z,e))}));var s=t.params.goods_json.filter((function(e,t){e.goods_price=Number(e.goods_price),e.new_goods_price=Number(e.new_goods_price),e.goods_num=Number(e.goods_num);var a=e.goods_id&&(0!=e.new_goods_price||0===e.new_goods_price)&&(0!=e.goods_price||0===e.goods_price)&&(0!=e.goods_num||0===e.goods_num);if(!a)return e.index=t+1,e}));if(s.length&&(t.$message.warning(s[0].goods_id&&void 0!=s[0].goods_name?"请完善 ".concat(s[0].goods_name," 商品信息"):"第 ".concat(s[0].index," 条商品未填写完整")),i=!1),!i)return!1;t.params.outstorage_type_id=10001,t.params.order_price=t.totalPrice,t.params.goods_json=JSON.stringify(t.params.goods_json),Object.assign(t.params,{intentional_logistics:t.params.logistics_name});var r=t.threeorderAdd_Get.amend?"editOrder":"addOrder";t.$axMethod[r](t.params).then((function(e){var a=e.data;"200"==a.code&&(t.$message.success(a.msg),t.goBack())}))}}))},companyChange:function(e){1==e||(this.$set(this.params,"customer_id",""),this.$set(this.TableData,"tableData",[]),this.params.credit_balance=null,this.params.deposits=null,this.params.balance=null,this.params.rebate_balance=null),this.$set(this.params,"delivery_demand_id",0),this.$set(this.params,"hand_over_id",0),this.$set(this.params,"department_id",""),this.$set(this.params,"business_id",""),this.$set(this.params,"intentional_logistics_id",""),this.$set(this.params,"settlement_customer_id",""),this.params.consignee_name="",this.defaultArea=[0],this.params.address="",this.params.consignee_mobile=""},departmentChange:function(e){}}),computed:Object(r["a"])({},Object(o["c"])(["threeorderIndex_Get","threeorderAdd_Get"])),mounted:function(){var e=this;if(this.threeorderAdd_Get.amend){var t="",a={order_id:this.threeorderAdd_Get.order_id};this.$axMethod.getOrderInfo(a).then((function(a){var i=a.data;e.params=i.data.order_info,e.$refs.xTable._proxy("loadData",i.data.goods_list),t=i.data.order_info.customer_id,e.$set(e.params,"payment_method",i.data.order_info.payment_method),Object.assign(i.data.order_info,{logistics_id:i.data.order_info.intentional_logistics_id,logistics_name:i.data.order_info.intentional_logistics,employee_id:i.data.order_info.business_id,employee_name:i.data.order_info.business_name}),Object(m["l"])(e,i.data.order_info),e.logisticsList.push({logistics_id:i.data.order_info.intentional_logistics_id,logistics_name:i.data.order_info.intentional_logistics}),e.defaultArea=[i.data.order_info.province_id,i.data.order_info.city_id,i.data.order_info.area_id],e.params.cityList=e.defaultArea.join(","),e.params.province_id=e.defaultArea[0],e.params.city_id=e.defaultArea[1],e.params.area_id=e.defaultArea[2],e.$axMethod.getCustomerInfoNEWqx({customer_id:t,company_id:i.data.order_info.company_id,is_three_packs:1}).then((function(t){if(200==t.data.code){e.$set(e.params,"balance",t.data.data.balance);var a=[{topName:"rebate_balance",bottomName:"rebate_price"},{topName:"credit_balance",bottomName:"credit_price"},{topName:"deposits",bottomName:"deposits_price"}];a.forEach((function(a){var i=a.topName,s=a.bottomName;e.$set(e.params,i,(Number(t.data.data[i])+Number(e.params[s])).toFixed(2))}))}}))}))}else this.params=Object.assign({},this.$publicFution.deepCopy(I),{business_time:this.$publicFution.formatData(new Date),company_id:Number(localStorage.company_id),payment_method:1}),Object(m["l"])(this,localStorage);this.$common.options("getRebateTypeListOption",this.rebateTypeList)}},j=N,O=(a("e43b"),Object(u["a"])(j,i,s,!1,null,"65c4c2ca",null));t["default"]=O.exports},"737a":function(e,t,a){},"8ba4":function(e,t,a){var i=a("23e7"),s=a("eac5");i({target:"Number",stat:!0},{isInteger:s})},b680:function(e,t,a){"use strict";var i=a("23e7"),s=a("da84"),r=a("e330"),o=a("5926"),n=a("408a"),l=a("1148"),c=a("d039"),m=s.RangeError,d=s.String,p=Math.floor,u=r(l),_=r("".slice),h=r(1..toFixed),b=function(e,t,a){return 0===t?a:t%2===1?b(e,t-1,a*e):b(e*e,t/2,a)},f=function(e){var t=0,a=e;while(a>=4096)t+=12,a/=4096;while(a>=2)t+=1,a/=2;return t},g=function(e,t,a){var i=-1,s=a;while(++i<6)s+=t*e[i],e[i]=s%1e7,s=p(s/1e7)},v=function(e,t){var a=6,i=0;while(--a>=0)i+=e[a],e[a]=p(i/t),i=i%t*1e7},y=function(e){var t=6,a="";while(--t>=0)if(""!==a||0===t||0!==e[t]){var i=d(e[t]);a=""===a?i:a+u("0",7-i.length)+i}return a},w=c((function(){return"0.000"!==h(8e-5,3)||"1"!==h(.9,0)||"1.25"!==h(1.255,2)||"1000000000000000128"!==h(0xde0b6b3a7640080,0)}))||!c((function(){h({})}));i({target:"Number",proto:!0,forced:w},{toFixed:function(e){var t,a,i,s,r=n(this),l=o(e),c=[0,0,0,0,0,0],p="",h="0";if(l<0||l>20)throw m("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return d(r);if(r<0&&(p="-",r=-r),r>1e-21)if(t=f(r*b(2,69,1))-69,a=t<0?r*b(2,-t,1):r/b(2,t,1),a*=4503599627370496,t=52-t,t>0){g(c,0,a),i=l;while(i>=7)g(c,1e7,0),i-=7;g(c,b(10,i,1),0),i=t-1;while(i>=23)v(c,1<<23),i-=23;v(c,1<<i),g(c,1,1),v(c,2),h=y(c)}else g(c,0,a),g(c,1<<-t,0),h=y(c)+u("0",l);return l>0?(s=h.length,h=p+(s<=l?"0."+u("0",l-s)+h:_(h,0,s-l)+"."+_(h,s-l))):h=p+h,h}})},b91f:function(e,t,a){"use strict";a("32a2")},d12c:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-cascader",{attrs:{filterable:e.filterable,placeholder:"请选择",options:e.options,clearable:"",size:"mini",props:e.prop},on:{change:e.changes,"expand-change":e.handleItemChange},model:{value:e.newDefaultArea,callback:function(t){e.newDefaultArea=t},expression:"newDefaultArea"}})],1)},s=[],r=(a("e3df"),a("42aa"),a("b1f0"),{data:function(){return{options:[],newDefaultArea:[]}},props:{defaultArea:{type:Array},filterable:{type:Boolean,default:!1},Level:{type:Number,default:3},prop:{type:Object,default:function(){return{value:"value",children:"cities"}}}},methods:{changes:function(e){var t=this;this.$nextTick((function(){t.$emit("changeDefaultArea",t.newDefaultArea)}))},handleItemChange:function(e){var t,a=this;1==e.length&&(t=e[0]),2==e.length&&(t=e[1]),this.$axios({method:"get",url:this.$api.getAreaListOption,params:{p_id:t,is_page:1}}).then((function(t){for(var i in a.options){if(1==e.length&&a.options[i].value==e[0]&&!a.options[i].cities.length)for(var s in t.data.data){var r={};r.label=t.data.data[s].area_name,r.value=t.data.data[s].area_id,3==a.Level&&(r.cities=[]),a.options[i].cities.push(r)}if(2==e.length&&3==a.Level)for(var o in a.options[i].cities)if(a.options[i].cities[o].value==e[1]&&!a.options[i].cities[o].cities.length)for(var n in t.data.data){var l={};l.label=t.data.data[n].area_name,l.value=t.data.data[n].area_id,a.options[i].cities[o].cities.push(l)}}}))},initAddress:function(){var e=this,t={level:2},a=this;a.$axMethod.getAreaList(t).then((function(t){var i={};for(var s in t.data.data){i={label:t.data.data[s].area_name,value:t.data.data[s].area_id,cities:[]};a.options.push(i)}if(e.defaultArea.length<=1)return!1;var r={level:3,p_id:a.defaultArea[0]};a.$axMethod.getAreaList(r).then((function(t){for(var i in a.options)if(a.options[i].value==r.p_id&&!a.options[i].cities.length)for(var s in t.data.data){var o={label:t.data.data[s].area_name,value:t.data.data[s].area_id,cities:[]};a.options[i].cities.push(o)}if(e.defaultArea.length<=2)return!1;var n={level:4,p_id:a.defaultArea[1]};a.$axMethod.getAreaList(n).then((function(e){for(var t in a.options)for(var i in a.options[t].cities)if(a.options[t].cities[i].value==n.p_id&&!a.options[t].cities[i].cities.length)for(var s in e.data.data){var r={label:e.data.data[s].area_name,value:e.data.data[s].area_id};a.options[t].cities[i].cities.push(r)}}))}))}))}},mounted:function(){var e=this;if(this.defaultArea.length>1)this.newDefaultArea=this.defaultArea.filter((function(e){return e})),this.initAddress();else{var t={level:2};this.$axMethod.getAreaList(t).then((function(t){var a={};for(var i in t.data.data){a={label:t.data.data[i].area_name,value:t.data.data[i].area_id,cities:[]};e.options.push(a)}}))}},watch:{defaultArea:{handler:function(e,t){this.options=[],this.newDefaultArea=this.defaultArea,this.initAddress()},deep:!0}}}),o=r,n=a("2877"),l=Object(n["a"])(o,i,s,!1,null,null,null);t["a"]=l.exports},e43b:function(e,t,a){"use strict";a("737a")},eac5:function(e,t,a){var i=a("861d"),s=Math.floor;e.exports=Number.isInteger||function(e){return!i(e)&&isFinite(e)&&s(e)===e}}}]);
//# sourceMappingURL=chunk-9aa6e61e.ee330205.js.map