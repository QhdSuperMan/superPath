(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-28a8a086"],{"0cb2":function(t,e,a){var r=a("e330"),i=a("7b0b"),s=Math.floor,o=r("".charAt),l=r("".replace),n=r("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,p=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,a,r,m,_){var u=a+t.length,h=r.length,d=p;return void 0!==m&&(m=i(m),d=c),l(_,d,(function(i,l){var c;switch(o(l,0)){case"$":return"$";case"&":return t;case"`":return n(e,0,a);case"'":return n(e,u);case"<":c=m[n(l,1,-1)];break;default:var p=+l;if(0===p)return i;if(p>h){var _=s(p/10);return 0===_?i:_<=h?void 0===r[_-1]?o(l,1):r[_-1]+o(l,1):i}c=r[p-1]}return void 0===c?"":c}))}},"3acf":function(t,e,a){},5319:function(t,e,a){"use strict";var r=a("2ba4"),i=a("c65b"),s=a("e330"),o=a("d784"),l=a("d039"),n=a("825a"),c=a("1626"),p=a("5926"),m=a("50c4"),_=a("577e"),u=a("1d80"),h=a("8aa5"),d=a("dc4a"),f=a("0cb2"),v=a("14c3"),b=a("b622"),w=b("replace"),y=Math.max,g=Math.min,x=s([].concat),S=s([].push),k=s("".indexOf),$=s("".slice),C=function(t){return void 0===t?t:String(t)},N=function(){return"$0"==="a".replace(/./,"$0")}(),L=function(){return!!/./[w]&&""===/./[w]("a","$0")}(),P=!l((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}));o("replace",(function(t,e,a){var s=L?"$":"$0";return[function(t,a){var r=u(this),s=void 0==t?void 0:d(t,w);return s?i(s,t,r,a):i(e,_(r),t,a)},function(t,i){var o=n(this),l=_(t);if("string"==typeof i&&-1===k(i,s)&&-1===k(i,"$<")){var u=a(e,o,l,i);if(u.done)return u.value}var d=c(i);d||(i=_(i));var b=o.global;if(b){var w=o.unicode;o.lastIndex=0}var N=[];while(1){var L=v(o,l);if(null===L)break;if(S(N,L),!b)break;var P=_(L[0]);""===P&&(o.lastIndex=h(l,m(o.lastIndex),w))}for(var T="",D=0,F=0;F<N.length;F++){L=N[F];for(var O=_(L[0]),z=y(g(p(L.index),l.length),0),j=[],I=1;I<L.length;I++)S(j,C(L[I]));var V=L.groups;if(d){var E=x([O],j,z,l);void 0!==V&&S(E,V);var A=_(r(i,void 0,E))}else A=f(O,l,z,j,V,i);z>=D&&(T+=$(l,D,z)+A,D=z+O.length)}return T+$(l,D)}]}),!P||!N||L)},"73a3":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"search_container"},[a("el-form",{ref:"filterFormRef",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.params}},[a("el-form-item",{attrs:{label:"销售组织",size:"mini"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},on:{focus:t.companyListInvok},model:{value:t.params.company_id,callback:function(e){t.$set(t.params,"company_id",e)},expression:"params.company_id"}},t._l(t.companyList,(function(e){return a("el-option",{key:e.company_id,attrs:{label:e.company_name,value:e.company_id}},[a("span",{class:1==e.type?"optionStyle":""},[t._v(t._s(e.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"客户名称",size:"mini"}},[a("el-select",{attrs:{filterable:"",clearable:"",remote:"",placeholder:"请输入",loading:t.loading,"remote-method":t.clienteleListInvok},on:{focus:t.clienteleListInvok},model:{value:t.params.customer_id,callback:function(e){t.$set(t.params,"customer_id",e)},expression:"params.customer_id"}},[a("ul",{staticClass:"customer customer-ul4 customer-ul2"},[a("li",[t._v("客户编号")]),a("li",[t._v("客户名称")]),a("li",[t._v("联系人")]),a("li",[t._v("联系电话")]),a("li",[t._v("区域")])]),t._l(t.customerList,(function(e){return a("el-option",{key:e.customer_id,attrs:{label:e.customer_name,value:e.customer_id}},[a("ul",{staticClass:"customer customer-ul4"},[a("li",{attrs:{title:e.customer_id}},[t._v(t._s(e.customer_id))]),a("li",{attrs:{title:e.customer_name}},[t._v(t._s(e.customer_name))]),a("li",{attrs:{title:e.contact_name}},[t._v(t._s(e.contact_name))]),a("li",{attrs:{title:e.customer_mobile}},[t._v(t._s(e.customer_mobile))]),a("li",[t._v(t._s(e.province_name)+"/"+t._s(e.city_name)+"/"+t._s(e.area_name))])])])}))],2)],1),a("el-form-item",{attrs:{label:"商品名称",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.params.goods_name,callback:function(e){t.$set(t.params,"goods_name",e)},expression:"params.goods_name"}})],1),a("el-form-item",{staticStyle:{width:"450px"},attrs:{label:"",size:"mini"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},on:{change:t.payChnage},model:{value:t.params.type,callback:function(e){t.$set(t.params,"type",e)},expression:"params.type"}},[a("el-option",{attrs:{label:"厂家理赔单起止日期",value:"0"}},[t._v("厂家理赔单起止日期")]),a("el-option",{attrs:{label:"公司理赔单起止日期",value:"1"}},[t._v("公司理赔单起止日期")])],1),a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:""},on:{change:t.change},model:{value:t.timeValue,callback:function(e){t.timeValue=e},expression:"timeValue"}})],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.onSearch("filterFormRef")}}},[t._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.onReset}},[t._v("重置")])],1)],1)],1),1==t.authority.b_export&&t.listShow?a("div",{staticClass:"add_delet"},[a("el-dropdown",{attrs:{placement:"bottom-start"}},[a("span",{staticStyle:{cursor:"pointer",color:"#4e90e2"},attrs:{"split-button":""}},[a("el-button",{attrs:{plain:"",icon:"iconfont icon-daochu10",size:"mini"}},[t._v("导出")])],1),a("el-dropdown-menu",{staticStyle:{"margin-top":"10px"},attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(e){return t.exportOrder(1)}}},[t._v("导出Excel文件")]),a("el-dropdown-item",{nativeOn:{click:function(e){return t.exportOrder(2)}}},[t._v("导出CSV逗号分隔")])],1)],1)],1):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"table_container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading1,expression:"loading1"}],ref:"table1",staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:t.TableData.tableData,"max-height":t.tableHeight,"summary-method":t.getSummaries,"show-summary":""}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"c_company_name",width:"180",label:"销售组织"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"c_customer_name",width:"202",label:"客户名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"c_goods_sn",width:"190",label:"商品编号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"c_goods_name","min-width":"500",label:"商品名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"c_tire_un",width:"138px",label:"胎号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"c_symptom_name",width:"138px;",label:"公司鉴定病象"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"c_company_status_name",width:"138px;",label:"公司鉴定结果"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"c_abrasion_price",width:"138px;",label:"公司磨损费",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("priceFormatNone")(e.row.c_abrasion_price))+" ")]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"c_intube_price",width:"138px;",label:"公司内垫费",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("priceFormatNone")(e.row.c_intube_price))+" ")]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"c_goods_price",width:"138px;",label:"商品售价",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("priceFormatNone")(e.row.c_goods_price))+" ")]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"c_business_time",width:"138px;",label:"公司理赔业务日期"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"c_company_claim_sn",width:"138px;",label:"公司理赔单据号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"m_symptom_name",width:"138px;",label:"厂家鉴定病象"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"m_manufacturers_status_name",width:"138px;",label:"厂家鉴定结果"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"m_abrasion_price",width:"138px;",label:"厂家磨损费",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("priceFormatNone")(e.row.m_abrasion_price))+" ")]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"m_inner_price",width:"138px;",label:"厂家内垫费",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("priceFormatNone")(e.row.m_inner_price))+" ")]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"m_purchase_price",width:"138px;",label:"商品采购价",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("priceFormatNone")(e.row.m_purchase_price))+" ")]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"m_business_time",width:"138px;",label:"厂家理赔业务日期"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"m_manufacturers_claim_sn",width:"138px;",label:"厂家理赔单据号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"c_claim_price",width:"138px;",label:"公司理赔单价",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("priceFormatNone")(e.row.c_claim_price))+" ")]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"m_factory_price",width:"138px;",label:"厂家理赔单价",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("priceFormatNone")(e.row.m_factory_price))+" ")]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"profit",width:"138px;",label:"最终盈亏",align:"right"}})],1),a("div",{directives:[{name:"clock",rawName:"v-clock"}],ref:"table_sum",staticClass:"table_sum"},[a("ul",{staticStyle:{overflow:"hidden",width:"3556px"}},[a("li",{staticStyle:{width:"1071px","text-align":"center"}},[t._v(" 总计 ")]),a("li",{staticStyle:{width:"136px"}}),a("li",{staticStyle:{width:"136px"}}),a("li",{staticStyle:{width:"136px"}}),a("li",{staticStyle:{width:"136px","text-align":"right"}},[t._v(" "+t._s(t._f("priceFormatNone")(t.TableData.allList.total_c_abrasion_price))+" ")]),a("li",{staticStyle:{width:"136px","text-align":"right"}},[t._v(" "+t._s(t._f("priceFormatNone")(t.TableData.allList.total_c_intube_price))+" ")]),a("li",{staticStyle:{width:"136px"}}),a("li",{staticStyle:{width:"136px"}}),a("li",{staticStyle:{width:"136px"}}),a("li",{staticStyle:{width:"136px"}}),a("li",{staticStyle:{width:"136px"}}),a("li",{staticStyle:{width:"136px"}},[t._v(" "+t._s(t._f("priceFormatNone")(t.TableData.allList.total_m_abrasion_price)))]),a("li",{staticStyle:{width:"136px"}},[t._v(" "+t._s(t._f("priceFormatNone")(t.TableData.allList.total_m_inner_price)))]),a("li",{staticStyle:{width:"136px"}}),a("li",{staticStyle:{width:"136px"}}),a("li",{staticStyle:{width:"136px"}}),a("li",{staticStyle:{width:"136px","text-align":"right"}},[t._v(" "+t._s(t._f("priceFormatNone")(t.TableData.allList.total_c_claim_price)))]),a("li",{staticStyle:{width:"136px"}},[t._v(" "+t._s(t._f("priceFormatNone")(t.TableData.allList.total_m_factory_price)))]),a("li",{staticStyle:{width:"130px"}},[t._v(" "+t._s(t._f("priceFormatNone")(t.TableData.allList.total_profit)))])])]),a("div",{staticClass:"table_info"},[a("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[a("el-col",{attrs:{span:12}},[a("div",[t._v("业务日期起始:"+t._s(t.params.start_time))])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"textAr"},[t._v("业务日期截止:"+t._s(t.params.end_time))])])],1),a("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[a("el-col",{attrs:{span:12}},[a("div",[t._v("生成时间："+t._s(t.TableData.allList.search_time))])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"textAr"},[t._v("制表人："+t._s(t.TableData.allList.make_user))])])],1)],1),a("div",{staticClass:"page_container"},[a("div",{staticClass:"pageNumber"},[t._v("每页显示")]),a("el-pagination",{staticClass:"erp-pagination",attrs:{"current-page":t.goPage,"page-size":t.pageSize1,"page-sizes":t.per_page,layout:"total,sizes, prev, pager, next,jumper",prevText:"上一页",nextText:"下一页",total:t.TableData.total},on:{"size-change":t.handleSizeChange,"update:currentPage":function(e){t.goPage=e},"update:current-page":function(e){t.goPage=e},"current-change":t.handleCurrentChange}})],1)],1)])},i=[],s=(a("d3b7"),a("159b"),a("d81d"),a("a9e3"),a("ac1f"),a("5319"),a("25f0"),a("65b0")),o={name:"reportAftersalesdetrpt",data:function(){return{authority:{},params:{},searchParams:{},listShow:!1,timeValue:null,exportType:null,TableData:{allList:{},tableData:[]},SelesTomer:{options:[]},departmentList:{options:[]},companyList:[],goPage:1,pageSize:30,per_page:[30,50,100,500],loading:!1,flag:!0,tableHeight:600}},methods:{payChnage:function(t){var e="company_start_time",a="company_end_time";0==t?(e="manufactor_start_time",a="manufactor_end_time",this.params.company_start_time&&delete this.params.company_start_time,this.params.company_end_time&&delete this.params.company_end_time):1==t&&(e="company_start_time",a="company_end_time",this.params.manufactor_start_time&&delete this.params.manufactor_start_time,this.params.manufactor_end_time&&delete this.params.manufactor_end_time),this.timeValue?(this.params[e]=this.timeValue[0],this.params[a]=this.timeValue[1]):(this.params[e]="",this.params[a]="")},change:function(t){var e=this;if(t)1==this.params.type?(this.params.start_time=this.params.company_start_time=t[0],this.params.end_time=this.params.company_end_time=t[1]):(this.params.start_time=this.params.manufactor_start_time=t[0],this.params.end_time=this.params.manufactor_end_time=t[1]);else{var a=["company_start_time","company_end_time","manufactor_start_time","manufactor_end_time","start_time","end_time"];a.forEach((function(t){e.params[t]&&delete e.params[t]}))}},onReset:function(){this.$set(this,"params",{type:"1"}),this.timeValue=[],this.$set(this,"searchParams",{params:{type:"1"},TableData:this.TableData,API:"claimProfitList",vm:this}),Object.assign(this.searchParams.params,this.params,{page:1}),Object(s["g"])(this.searchParams,2)},exportOrder:function(t){if(0==this.listShow)return this.$message({message:"请查询需要导出的数据",type:"error"}),!1;Object.assign(this.params,{export_type:t});this.$axMethod.exportClaimProfitListUrl(this.params).then((function(t){200==t.data.code&&(window.location.href=t.data.data.url)}))},getSummaries:function(t){var e=t.columns,a=t.data,r=[];return e.forEach((function(t,e){if(2!==e){var i=a.map((function(e){return Number(e[t.property])}));i.every((function(t){return isNaN(t)}))?r[e]="":(r[e]=i.reduce((function(t,e){var a=Number(e);return isNaN(a)?t:t+e}),0),r[e]=7===e||8===e||14===e||15===e||19===e||20===e||21===e?r[e].toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):"")}else r[e]="本页合计"})),r},onSearch:function(){this.listShow=!0,this.$set(this,"searchParams",{params:{},TableData:this.TableData,API:"claimProfitList",vm:this}),Object.assign(this.searchParams.params,this.params,{page:1}),Object(s["g"])(this.searchParams,2,s["o"].bind(this))},handleSizeChange:function(t){Object.assign(this.searchParams.params,{per_page:t,page:1}),Object(s["g"])(this.searchParams)},handleCurrentChange:function(t){Object.assign(this.searchParams.params,{page:t}),Object(s["g"])(this.searchParams)}},created:function(){this.authority=JSON.parse(localStorage.getItem("authority")),this.$set(this,"params",{type:"1"})},mounted:function(){var t=this.$refs.table1.$el.getElementsByClassName("el-table__body-wrapper")[0],e=this.$refs.table_sum;t.addEventListener("scroll",(function(){e.scrollLeft=this.scrollLeft})),e.addEventListener("scroll",(function(){t.scrollLeft=this.scrollLeft}))}},l=o,n=(a("f9f6"),a("2877")),c=Object(n["a"])(l,r,i,!1,null,"3d0ba274",null);e["default"]=c.exports},f9f6:function(t,e,a){"use strict";a("3acf")}}]);
//# sourceMappingURL=chunk-28a8a086.d23a5567.js.map