(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-63fe8792"],{"0cb2":function(t,e,a){var i=a("e330"),r=a("7b0b"),o=Math.floor,n=i("".charAt),s=i("".replace),l=i("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,d=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,a,i,u,p){var m=a+t.length,f=i.length,h=d;return void 0!==u&&(u=r(u),h=c),s(p,h,(function(r,s){var c;switch(n(s,0)){case"$":return"$";case"&":return t;case"`":return l(e,0,a);case"'":return l(e,m);case"<":c=u[l(s,1,-1)];break;default:var d=+s;if(0===d)return r;if(d>f){var p=o(d/10);return 0===p?r:p<=f?void 0===i[p-1]?n(s,1):i[p-1]+n(s,1):r}c=i[d-1]}return void 0===c?"":c}))}},"13bb":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{attrs:{id:"leixin"}},[a("div",{staticClass:"search_container"},[a("el-form",{attrs:{inline:!0,model:t.params}},[a("el-form-item",{staticClass:"organization",attrs:{label:"库存组织",size:"mini"}},[a("el-select",{attrs:{clearable:"",multiple:"","collapse-tags":"",placeholder:"请选择",filterable:""},on:{focus:t.companyListInvok,change:t.companyChange},model:{value:t.companyidList,callback:function(e){t.companyidList=e},expression:"companyidList"}},t._l(t.companyList,(function(e){return a("el-option",{key:e.company_id,attrs:{label:e.company_name,value:e.company_id}},[a("span",{class:1==e.type?"optionStyle":""},[t._v(t._s(e.company_name))])])})),1)],1),a("br"),a("el-form-item",{attrs:{label:"商品编号",size:"mini"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch(1)}},model:{value:t.params.goods_id,callback:function(e){t.$set(t.params,"goods_id",e)},expression:"params.goods_id"}})],1),a("el-form-item",{attrs:{label:"商品名称",size:"mini"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch(1)}},model:{value:t.params.goods_name,callback:function(e){t.$set(t.params,"goods_name",e)},expression:"params.goods_name"}})],1),a("el-form-item",{attrs:{label:"仓库名称",size:"mini"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},on:{focus:t.warehouseInvok,change:t.warehouseChange},model:{value:t.params.warehouse_id,callback:function(e){t.$set(t.params,"warehouse_id",e)},expression:"params.warehouse_id"}},t._l(t.warehouseList,(function(e){return a("el-option",{key:e.warehouse_id,attrs:{label:e.warehouse_name,value:e.warehouse_id}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.warehouse_name))])])})),1)],1),a("el-form-item",{attrs:{label:"货位",size:"mini"}},[a("erpAllocation",{attrs:{disabled:!t.params.warehouse_id,searchParams:{company_id:t.params.company_id,warehouse_id:t.params.warehouse_id,is_incomplete:3}},model:{value:t.params.allocation_id,callback:function(e){t.$set(t.params,"allocation_id",e)},expression:"params.allocation_id"}})],1),a("el-form-item",{attrs:{label:"品牌",size:"mini"}},[a("getBrand",{model:{value:t.params.brand_id,callback:function(e){t.$set(t.params,"brand_id",e)},expression:"params.brand_id"}})],1),a("el-form-item",{attrs:{label:"类型",size:"mini"}},[a("jybd-cascader",{ref:"cascader",on:{cascaderChange:t.handleChange}})],1),a("el-form-item",{attrs:{label:"工厂代码",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch(1)}},model:{value:t.params.factory_code,callback:function(e){t.$set(t.params,"factory_code",e)},expression:"params.factory_code"}})],1),a("el-form-item",{attrs:{size:"mini"}},[a("el-checkbox",{staticStyle:{margin:"0px 22px 0 62px"},model:{value:t.availableStocksFlag,callback:function(e){t.availableStocksFlag=e},expression:"availableStocksFlag"}},[t._v("包含库存为0的商品")])],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.onSearch(1)}}},[t._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.onReset}},[t._v("重置")])],1)],1)],1),a("div",{staticClass:"add_delet"},[1==t.authority.b_export?a("el-dropdown",{staticStyle:{margin:"0 10px"}},[a("span",{staticStyle:{cursor:"pointer",color:"#4e90e2"},attrs:{"split-button":""}},[a("el-button",{attrs:{plain:"",icon:"iconfont icon-daochu10",size:"mini"}},[t._v("导出")])],1),a("el-dropdown-menu",{staticStyle:{"margin-top":"10px"},attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(e){return t.exportOrder(1)}}},[t._v("导出Excel文件")]),a("el-dropdown-item",{nativeOn:{click:function(e){return t.exportOrder(2)}}},[t._v("导出CSV逗号分隔")])],1)],1):t._e()],1),a("div",{staticClass:"table_container"},[a("xTable",{ref:"xTable",attrs:{isShowTool:!0,ajax:{url:"getGoodsInventoryListV2",params:t.params},fieldUrl:"v2/inventory/InventoryGoods/getGoodsInventoryList",sign:t.indexSign,rowClassName:{name:"sign_row",isDisable:!1},footerMethod:t.footerMethod,tableColumn:t.tableColumn}})],1)])])},r=[],o=(a("a15b"),a("65b0")),n=(a("d81d"),a("caad"),a("ac1f"),a("5319"),a("d3b7"),a("25f0"),a("b680"),a("8ba4"),a("a9e3"),{data:function(){var t=this.$createElement;return{footerData:{},tableColumn:[{type:"seq",title:"序号",width:50},{title:"库存组织",field:"company_name",width:180},{title:"商品编号",field:"goods_id",width:110},{title:"商品名称",field:"goods_name",width:400},{title:"工厂代码",field:"factory_code",width:150},{title:"年周/批次",field:"batch",width:100},{title:"生产日期",field:"production_time",width:80,slots:{header:function(){return[t("el-tooltip",{class:"item",attrs:{content:"Bottom center",effect:"light"}},[t("p",{slot:"content"},[" 生产日期列后期将会隐藏， 同时新增商品入库日期列 "])," ",t("span",{class:"el-icon-question",style:"cursor:pointer;font-weight:bold;"},[" 生产日期 "])," "])]}}},{title:"仓库名称",field:"warehouse_name",width:132},{title:"货位",field:"allocation_name",width:100},{title:"货位数量",field:"stocks",headerAlign:"right",align:"right",width:80},{title:"成本价",field:"cost_price",headerAlign:"right",align:"right",formatter:"priceFormat",width:120},{title:"销售价",field:"sale_price",headerAlign:"right",align:"right",formatter:"priceFormat",width:120},{title:"成本金额",field:"subtotal_amount",headerAlign:"right",align:"right",formatter:"priceFormatNone",width:120},{title:"是否为实物库存",field:"is_entity",width:120}]}},methods:{footerMethod:function(t){var e=this,a=t.columns,i=t.data;return[a.map((function(t,a){if(2===a)return"页小计";if(["stocks","subtotal_amount"].includes(t.property)){var r=e.$utils.sum(i,t.property);return"subtotal_amount"===t.property?r.toFixed(2).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):"stocks"===t.property?r.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):Number.isInteger(r)?r:r.toFixed(2)}return null})),a.map((function(t,a){return 2===a?"合计":"stocks"===t.property&&e.footerData.total_stocks?e.footerData.total_stocks.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):"subtotal_amount"===t.property&&e.footerData.total_subtotal_amount?(e.footerData.total_subtotal_amount-0).toFixed(2).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):["stocks","subtotal_amount"].includes(t.property)?"加载中...":null}))]}}}),s={name:"inventoryInventorygoods",mixins:[n],data:function(){return{showAllocationList:!0,availableStocksFlag:0,companyidList:[],TableData:{tableData:[],allList:{},total:10},loading:!1,loadingsum:!0,TableDataSum:{},params:{export_type:1}}},methods:{companyChange:function(t){this.$set(this.params,"company_id",t.join()),this.$set(this.params,"warehouse_id",""),this.$set(this.params,"allocation_id","")},handleChange:function(t){this.params.goods_type_id=t[2]},onReset:function(){this.$refs.cascader.clear(),this.$set(this,"params",{}),this.companyidList=[],this.availableStocksFlag=null,this.allocationInventoryList=null,this.onSearch(1)},warehouseChange:function(t){this.showAllocationList=!1,this.$set(this.params,"allocation_id",0)},onSearch:function(t){var e=this;this.params.stocks=this.availableStocksFlag?1:0,this.$axMethod.getAllGoodsInventoryList(this.params).then((function(t){200==t.data.code&&(e.footerData=t.data.data,e.$refs.xTable._proxy("updateFooter"))})),this.$refs.xTable._getData(t),console.log(this.params)},exportFile:function(){var t={params:this.params,API:"v2ExportGoodsInventoryUrl"};Object(o["d"])(t)},exportOrder:function(t){var e=Object.assign(this.params,{export_type:t});this.$axMethod.exportGoodsInventoryUrl(e).then((function(t){200==t.data.code&&(window.location.href=t.data.data.url)}))}},mounted:function(){this.authority=JSON.parse(localStorage.getItem("authority")),this.onSearch()}},l=s,c=(a("25fb"),a("9330"),a("2877")),d=Object(c["a"])(l,i,r,!1,null,"024abea4",null);e["default"]=d.exports},"25fb":function(t,e,a){"use strict";a("d77b")},5319:function(t,e,a){"use strict";var i=a("2ba4"),r=a("c65b"),o=a("e330"),n=a("d784"),s=a("d039"),l=a("825a"),c=a("1626"),d=a("5926"),u=a("50c4"),p=a("577e"),m=a("1d80"),f=a("8aa5"),h=a("dc4a"),b=a("0cb2"),v=a("14c3"),g=a("b622"),_=g("replace"),y=Math.max,w=Math.min,x=o([].concat),k=o([].push),$=o("".indexOf),S=o("".slice),C=function(t){return void 0===t?t:String(t)},I=function(){return"$0"==="a".replace(/./,"$0")}(),F=function(){return!!/./[_]&&""===/./[_]("a","$0")}(),O=!s((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}));n("replace",(function(t,e,a){var o=F?"$":"$0";return[function(t,a){var i=m(this),o=void 0==t?void 0:h(t,_);return o?r(o,t,i,a):r(e,p(i),t,a)},function(t,r){var n=l(this),s=p(t);if("string"==typeof r&&-1===$(r,o)&&-1===$(r,"$<")){var m=a(e,n,s,r);if(m.done)return m.value}var h=c(r);h||(r=p(r));var g=n.global;if(g){var _=n.unicode;n.lastIndex=0}var I=[];while(1){var F=v(n,s);if(null===F)break;if(k(I,F),!g)break;var O=p(F[0]);""===O&&(n.lastIndex=f(s,u(n.lastIndex),_))}for(var L="",z=0,D=0;D<I.length;D++){F=I[D];for(var A=p(F[0]),M=y(w(d(F.index),s.length),0),N=[],E=1;E<F.length;E++)k(N,C(F[E]));var T=F.groups;if(h){var j=x([A],N,M,s);void 0!==T&&k(j,T);var G=p(i(r,void 0,j))}else G=b(A,s,M,N,T,r);M>=z&&(L+=S(s,z,M)+G,z=M+A.length)}return L+S(s,z)}]}),!O||!I||F)},8739:function(t,e,a){},"8ba4":function(t,e,a){var i=a("23e7"),r=a("eac5");i({target:"Number",stat:!0},{isInteger:r})},9330:function(t,e,a){"use strict";a("8739")},b680:function(t,e,a){"use strict";var i=a("23e7"),r=a("da84"),o=a("e330"),n=a("5926"),s=a("408a"),l=a("1148"),c=a("d039"),d=r.RangeError,u=r.String,p=Math.floor,m=o(l),f=o("".slice),h=o(1..toFixed),b=function(t,e,a){return 0===e?a:e%2===1?b(t,e-1,a*t):b(t*t,e/2,a)},v=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},g=function(t,e,a){var i=-1,r=a;while(++i<6)r+=e*t[i],t[i]=r%1e7,r=p(r/1e7)},_=function(t,e){var a=6,i=0;while(--a>=0)i+=t[a],t[a]=p(i/e),i=i%e*1e7},y=function(t){var e=6,a="";while(--e>=0)if(""!==a||0===e||0!==t[e]){var i=u(t[e]);a=""===a?i:a+m("0",7-i.length)+i}return a},w=c((function(){return"0.000"!==h(8e-5,3)||"1"!==h(.9,0)||"1.25"!==h(1.255,2)||"1000000000000000128"!==h(0xde0b6b3a7640080,0)}))||!c((function(){h({})}));i({target:"Number",proto:!0,forced:w},{toFixed:function(t){var e,a,i,r,o=s(this),l=n(t),c=[0,0,0,0,0,0],p="",h="0";if(l<0||l>20)throw d("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return u(o);if(o<0&&(p="-",o=-o),o>1e-21)if(e=v(o*b(2,69,1))-69,a=e<0?o*b(2,-e,1):o/b(2,e,1),a*=4503599627370496,e=52-e,e>0){g(c,0,a),i=l;while(i>=7)g(c,1e7,0),i-=7;g(c,b(10,i,1),0),i=e-1;while(i>=23)_(c,1<<23),i-=23;_(c,1<<i),g(c,1,1),_(c,2),h=y(c)}else g(c,0,a),g(c,1<<-e,0),h=y(c)+m("0",l);return l>0?(r=h.length,h=p+(r<=l?"0."+m("0",l-r)+h:f(h,0,r-l)+"."+f(h,r-l))):h=p+h,h}})},d77b:function(t,e,a){},eac5:function(t,e,a){var i=a("861d"),r=Math.floor;t.exports=Number.isInteger||function(t){return!i(t)&&isFinite(t)&&r(t)===t}}}]);
//# sourceMappingURL=chunk-63fe8792.edc4ab24.js.map