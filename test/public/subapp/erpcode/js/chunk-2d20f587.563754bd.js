(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-2d20f587"],{b2de:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{attrs:{id:"leixin"}},[a("div",{staticClass:"search_container"},[a("el-form",{ref:"filterFormRef",attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"调出组织",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.companyListInvok},model:{value:e.params.company_id,callback:function(t){e.$set(e.params,"company_id",t)},expression:"params.company_id"}},e._l(e.companyList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[a("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"调入组织",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.companyListInvok},model:{value:e.params.new_company_id,callback:function(t){e.$set(e.params,"new_company_id",t)},expression:"params.new_company_id"}},e._l(e.companyList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[a("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"业务日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}})],1),a("el-form-item",{attrs:{label:"单据号",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.params.transfer_sn,callback:function(t){e.$set(e.params,"transfer_sn",t)},expression:"params.transfer_sn"}})],1),a("el-form-item",{attrs:{label:"审核状态",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.params.auditor_status,callback:function(t){e.$set(e.params,"auditor_status",t)},expression:"params.auditor_status"}},[a("el-option",{attrs:{label:"全部",value:0}},[e._v("全 部")]),a("el-option",{attrs:{label:"未审核",value:1}},[e._v("未审核")]),a("el-option",{attrs:{label:"已审核",value:2}},[e._v("已审核")]),a("el-option",{attrs:{label:"作废",value:3}},[e._v("作废")])],1)],1),a("el-form-item",{attrs:{size:"mini",label:"打印状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.params.print_times,callback:function(t){e.$set(e.params,"print_times",t)},expression:"params.print_times"}},[a("el-option",{attrs:{label:"全部",value:0}},[e._v("全 部")]),a("el-option",{attrs:{label:"未打印",value:1}},[e._v("未打印")]),a("el-option",{attrs:{label:"已打印",value:2}},[e._v("已打印")])],1)],1),a("el-form-item",{attrs:{label:"部门",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.DepartmentListInvok},model:{value:e.params.department_id,callback:function(t){e.$set(e.params,"department_id",t)},expression:"params.department_id"}},e._l(e.departmentList,(function(e){return a("el-option",{key:e.department_id,attrs:{label:e.department_name,value:e.department_id}})})),1)],1),a("el-form-item",{attrs:{label:"审核日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.timeValue2,callback:function(t){e.timeValue2=t},expression:"timeValue2"}})],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"add_delet"},[1==e.authority.b_add?a("el-button",{staticClass:"addBtn",attrs:{icon:"el-icon-circle-plus-outline",type:"primary",size:"mini"},on:{click:e.AddF}},[e._v("新增")]):e._e(),1==e.authority.b_del?a("el-button",{attrs:{plain:"",icon:"el-icon-delete",size:"mini"},on:{click:e.deletes}},[e._v("删除")]):e._e(),1==e.authority.b_pass?a("el-button",{attrs:{icon:"iconfont icon-pass",type:"primary",size:"mini"},on:{click:function(t){return e.examineFun(2)}}},[e._v("审核")]):e._e(),1==e.authority.b_nopass?a("el-button",{attrs:{plain:"",size:"mini",icon:"iconfont icon-fanshenhe"},on:{click:e.AUDIT_GET}},[e._v("弃审")]):e._e(),1==e.authority.b_invalid?a("el-button",{attrs:{plain:"",icon:"iconfont icon-zuofei",size:"mini"},on:{click:function(t){return e.examineFun(3)}}},[e._v("作废")]):e._e()],1),a("div",{staticClass:"table_container"},[a("xTable",{ref:"xTable",attrs:{ajax:{url:"getTransferList",params:e.params},tableColumn:e.tableColumn,xData:e.tableData}})],1),a("publicPrint",{ref:"printDelieveryBill",attrs:{title:"warehouseTransfer",returnParams:"info_data",returnTableData:"list"},on:{Search:e.onSearch}})],1)])},n=[],r=a("5530"),s=(a("d3b7"),a("4de4"),a("ac1f"),a("1276"),a("caad"),a("2532"),a("25f0"),a("65b0")),l=a("2f62"),o=a("78d2"),m={data:function(){var e=this;this.$createElement;return{tableColumn:[{type:"checkbox",align:"center",width:44},{title:"调出组织",field:"company_name",width:150},{title:"调入组织",field:"new_company_name",width:150},{title:"单据号",field:"transfer_sn",width:156},{title:"数量",field:"goods_num",width:150},{title:"部门",field:"department_name",width:100},{title:"创建人",field:"add_user_name",width:100},{title:"业务日期",field:"business_time",width:130},{title:"单据时间",field:"add_time",width:100},{title:"审核状态",field:"auditor_status_name",width:100},{title:"审核人",field:"auditor_name",width:100},{title:"审核时间",field:"auditor_time",width:130},{title:"修改人",field:"update_user_name",width:100},{title:"修改时间",field:"update_time",width:150},{title:"备注",field:"remark",width:150},{title:"打印次数",field:"print_times",width:100},{title:"操作",width:120,fixed:"right",slots:{default:function(t,a){return[a("el-button",{attrs:{size:"small",type:"text",disabled:1!==e.authority.b_info},on:{click:function(){return e.seeDetail(t,t.row)}}},[" 查看 "]),a("el-button",{attrs:{size:"small",type:"text",disabled:!(1==t.row.auditor_status&&1==e.authority.b_edit)},on:{click:function(){return e.modifeF(t,t.row)}}},["修改"]),a("el-button",{attrs:{size:"small",type:"text",disabled:!(1==t.row.after_auditor_print_status&&1==e.authority.b_print&&2==t.row.auditor_status||1!=t.row.after_auditor_print_status&&1==e.authority.b_print)},on:{click:function(){return e.printSheet(t.row)}}},[" 打印  "])]}}}]}}},d={name:"instorageTransferwareTransferwareIndex",mixins:[m],data:function(){return{printFlag:!1,timeValue2:[],dialogFormVisible:!1,tableHeight:600}},components:{publicPrint:o["a"]},computed:Object(r["a"])({},Object(l["c"])(["transferwareIndexGet"])),methods:Object(r["a"])(Object(r["a"])({},Object(l["b"])(["transferwareAddACT","transferwareSeeACT","transferwareModifyACT","transferwareIndexACT"])),{},{AUDIT_GET:function(){var e=this;if(this.multipleSelection.length<1)return this.$message({message:"请选择需要弃审的信息",type:"warning"}),!1;for(var t=[],a=0;a<this.multipleSelection.length;a++)t.push(this.multipleSelection[a].transfer_id);var i=t.toString();this.$axMethod.v2unAuditorTransfer({transfer_id:i}).then((function(t){200==t.data.code&&(e.$message({message:t.data.msg,type:"success"}),e.$refs.xTable._getData())}))},companyChange:function(e){this.params.company_name=this.companyList.filter((function(t){return t.company_id==e}))[0].company_name},seeDetail:function(e,t){this.$router.push({path:"/inventory/transferware/transferwareSee"}),this.transferwareSeeACT({transfer_id:t.transfer_id,goPage:this.goPage,params:this.params,pageSize:this.pageSize,after_auditor_print_status:t.after_auditor_print_status})},AddF:function(){this.$router.push({path:"/inventory/transferware/transferwareAdd"}),this.transferwareAddACT({transfer_id:"",params:this.params})},printSheet:function(e){var t=this;this.$nextTick((function(){t.$refs.printDelieveryBill.printPdf({transfer_id:e.transfer_id})}))},judge:function(e){var t=localStorage.getItem("company_str").split(",");return 1==localStorage.getItem("role_id")||(!(!t.includes(e.company_id)||!t.includes(e.new_company_id))||(t.includes(e.new_company_id.toString())?!!t.includes(e.company_id.toString())||(this.$message({message:"权限不足：暂无调出组织权限",type:"warning"}),!1):(this.$message({message:"权限不足：暂无调入组织权限",type:"warning"}),!1)))},modifeF:function(e,t){if(!this.judge(t))return!1;this.$router.push({path:"/inventory/transferware/transferwareAdd"}),this.transferwareAddACT({transfer_id:t.transfer_id,goPage:this.goPage,params:this.params,pageSize:this.pageSize})},onReset:function(e){this.timeValue=[],this.timeValue2=null,this.params.print_times="",this.$set(this,"params",{}),this.$refs.xTable._getData()},onSearch:function(){this.timeValue&&2==this.timeValue.length?(this.params.business_start_time=this.timeValue[0],this.params.business_end_time=this.timeValue[1]):this.params.business_start_time=this.params.business_end_time="",this.timeValue2&&2==this.timeValue2.length?(this.params.auditor_start_time=this.timeValue2[0],this.params.auditor_end_time=this.timeValue2[1]):this.params.auditor_start_time=this.params.auditor_end_time="",this.$refs.xTable._getData()},deletes:function(){if(this.multipleSelection.length<1)return this.$message({message:"请选择需要操作的信息",type:"warning"}),!1;var e={deleID:"transfer_id",deleSelect:this.multipleSelection,deleApi:"delTransferBills",list:{UrlApi:"getTransferList",data:this.TableData,esData:this.params}},t=this;this.$common.deletes(e,"删除",this,(function(){t.$refs.xTable._getData()}))},examineFun:function(e){var t=this,a=this;if(this.multipleSelection.length<1)return this.$message({message:"请选择需要操作的信息",type:"warning"}),!1;for(var i=[],n=0;n<this.multipleSelection.length;n++)i.push(this.multipleSelection[n].transfer_id);var r=i.toString(),l={examineID:"transfer_id",eachData:{transfer_id:r,auditor_status:e},examineApi:2==e?"transferWarehouseAuidtorPass":"transferWarehouseAuditorInvalid",list:{}},o=this;2==e?this.$axMethod.safetyStockCheck({bill_logogram:"tcyk",order_type:2,bill_id:r}).then((function(e){Object(s["m"])(t,{goods_info:r,status:2,type:5},(function(){a.$common.examineFun(l,a.onSearch)}))})):this.$common.examineFun(l,(function(){o.$refs.xTable._getData()}))}}),activated:function(){this.onSearch()}},c=d,u=a("2877"),p=Object(u["a"])(c,i,n,!1,null,"1c00b4ad",null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d20f587.563754bd.js.map