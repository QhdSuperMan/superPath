(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-0cf4cf65","chunk-080a3223"],{"01c6":function(t,e,i){"use strict";i("42cd")},"14ec":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("instoragesee",{attrs:{goBackUrl:t.goBackUrl,title:t.title}})],1)},r=[],s=i("80dd"),o={data:function(){return{title:"库存管理",goBackUrl:"/inventory/purchaseinstorage"}},components:{instoragesee:s["default"]}},n=o,l=i("2877"),d=Object(l["a"])(n,a,r,!1,null,"219af87d",null);e["default"]=d.exports},"42cd":function(t,e,i){},"80dd":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"seePage"},[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",[t._v(t._s(t.title))]),i("el-breadcrumb-item",{staticClass:"attrbute"},[i("span",{on:{click:t.goBack}},[t._v("采购入库")])]),i("el-breadcrumb-item",[t._v("查看采购入库单")])],1),i("div",{staticClass:"search_container"},[i("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[i("el-form-item",{attrs:{label:"采购组织：",size:"mini"}},[t._v(" "+t._s(t.instoragList.company_name)+" ")]),i("el-form-item",{attrs:{label:"单据号：",size:"mini"}},[t._v(" "+t._s(t.instoragList.instorage_sn)+" ")]),i("el-form-item",{attrs:{label:"来源单据:",size:"mini"}},[t._v(" "+t._s(t.instoragList.order_sn)+" ")]),i("el-form-item",{attrs:{label:"业务日期：",size:"mini"}},[t._v(" "+t._s(t.instoragList.business_time)+" ")]),i("el-form-item",{attrs:{label:"入库类型：",size:"mini"}},[t._v(" "+t._s(t.instoragList.type)+" ")]),i("el-form-item",{attrs:{label:"仓库名称：",size:"mini"}},[t._v(" "+t._s(t.instoragList.warehouse_name)+" ")]),i("el-form-item",{attrs:{label:"供应商(厂家)：",size:"mini"}},[t._v(" "+t._s(t.instoragList.supplier_name)+" ")]),i("el-form-item",{attrs:{label:"部门：",size:"mini"}},[t._v(" "+t._s(t.instoragList.department_name)+" ")]),i("el-form-item",{attrs:{label:"采购员：",size:"mini"}},[t._v(" "+t._s(t.instoragList.buyer_name)+" ")]),i("el-form-item",{attrs:{label:"付款方式：",size:"mini"}},[t._v(" "+t._s(t.instoragList.receivables_mode_name)+" ")]),i("el-form-item",{attrs:{label:"分摊方式：",size:"mini"}},[t._v(" "+t._s(t.instoragList.other_price_type_name)+" ")]),t.params.notFieldAuthHeader&&t.params.notFieldAuthHeader.includes("other_price")?t._e():i("el-form-item",{attrs:{label:"其他费用：",size:"mini"}},[t._v(" "+t._s(t.instoragList.other_price)+" ")]),i("el-form-item",{attrs:{label:"厂家发货单号：",size:"mini"}},[t._v(" "+t._s(t.instoragList.factorysend_sn)+" ")]),i("el-form-item",{attrs:{label:"厂家发货日期：",size:"mini"}},[t._v(" "+t._s(t.instoragList.factorysend_time)+" ")]),i("el-form-item",{attrs:{label:"审核状态：",size:"mini"}},[t._v(" "+t._s(t.instoragList.auditor_status_name)+" ")]),i("el-form-item",{attrs:{label:"交货方式",size:"mini"}},[t._v(" "+t._s(t.instoragList.transaction_type_name)+" ")]),i("el-form-item",{attrs:{label:"入库来源",size:"mini"}},[t._v(" "+t._s(t.instoragList.instorage_source_name)+" ")])],1)],1),i("div",{staticClass:"table_container"},[i("xTable",{ref:"xTable",attrs:{ajax:{url:"purchaseInfoInStorage",params:{instorage_id:t.$route.query.instorage_id,is_info_caller:1},result:"data.data.goodsList"},fieldUrl:"purchase/InStorage/infoInStorage",sign:t.indexSign,isPage:!1,footerMethod:t.footerMethod,tableColumn:t.tableColumn},on:{getData:t.getTableData}}),i("div",[i("el-form",{ref:"paramsFooter",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.instoragList}},[i("el-form-item",{staticStyle:{width:"900px"},attrs:{label:"单据备注：",size:"mini"}},[i("span",[t._v(t._s(t.instoragList.remark))])]),i("br"),i("el-form-item",{attrs:{label:"创建人：",size:"mini"}},[i("el-input",{attrs:{maxlength:"100",disabled:""},model:{value:t.instoragList.add_user_name,callback:function(e){t.$set(t.instoragList,"add_user_name",e)},expression:"instoragList.add_user_name"}})],1),i("el-form-item",{attrs:{label:"创建时间：",size:"mini"}},[i("el-input",{attrs:{maxlength:"100",disabled:""},model:{value:t.instoragList.add_time,callback:function(e){t.$set(t.instoragList,"add_time",e)},expression:"instoragList.add_time"}})],1),i("el-form-item",{attrs:{label:"修改人：",size:"mini"}},[i("el-input",{attrs:{maxlength:"100",disabled:""},model:{value:t.instoragList.update_user_name,callback:function(e){t.$set(t.instoragList,"update_user_name",e)},expression:"instoragList.update_user_name"}})],1),i("el-form-item",{attrs:{label:"修改时间：",size:"mini"}},[i("el-input",{attrs:{maxlength:"100",disabled:""},model:{value:t.instoragList.update_time,callback:function(e){t.$set(t.instoragList,"update_time",e)},expression:"instoragList.update_time"}})],1)],1)],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[1==t.$route.query.after_auditor_print_status?[1==t.authority.b_print&&2==t.TableData.instoragList.auditor_status?i("el-button",{attrs:{type:"primary"},on:{click:t.printSheet}},[t._v("打印")]):t._e()]:[1==t.authority.b_printinginstorage?i("el-button",{attrs:{type:"primary"},on:{click:t.printSheet}},[t._v("打印")]):t._e()],1==t.instoragList.auditor_status?[1==t.authority.b_pass?i("el-button",{attrs:{type:"primary"},on:{click:t.shenHe}},[t._v("审 核")]):t._e(),1==t.authority.b_invalid?i("el-button",{on:{click:t.abolishFun}},[t._v("作 废")]):t._e()]:t._e(),2==t.instoragList.auditor_status?[1==t.authority.b_nopass?i("el-button",{on:{click:t.AUDIT_GET}},[t._v("弃审")]):t._e()]:t._e(),2==t.instoragList.auditor_status||3==t.instoragList.auditor_status||1!=t.authority.b_invalid&&1!=t.authority.b_pass?[i("el-button",{on:{click:t.goBack}},[t._v("返 回")])]:i("el-button",{on:{click:t.goBack}},[t._v("取 消")])],2),i("errorDialog",{attrs:{errorData:t.trunErrTable,errorState:t.errorState,titleName:[{field:"serial",title:" 行号/单据号",width:200},{field:"msg",title:"失败原因"}]}}),i("printInstorage",{ref:"printInstorage",attrs:{title:"purchaseReceipt",fieldUrl:"purchase/InStorage/printInStorage"}})],1)},r=[],s=i("5530"),o=(i("d3b7"),i("159b"),i("a9e3"),i("4de4"),i("caad"),i("2f62")),n=i("78d2"),l=(i("d81d"),{data:function(){return{tableColumn:[{type:"index",title:"序号",width:50},{title:"商品编号",field:"goods_id",width:80},{title:"商品名称",field:"goods_name",width:400},{title:"年周/批次",field:"batch",width:88},{title:"单位",field:"unit_name",width:88},{field:"instorage_type_name",showOverflow:"tooltip",title:"入库类型",width:200},{title:"入库数量",field:"goods_num",headerAlign:"right",align:"right",width:70},{field:"incomplete_reason",title:"转不良品原因",width:250,showOverflow:"tooltip",showHeaderOverflow:"tooltip"},{title:"采购价",field:"purchase_price",headerAlign:"right",align:"right",formatter:"priceFormat",width:100},{title:"小计金额",field:"subtotal_price",headerAlign:"right",align:"right",formatter:"priceFormat",width:100},{title:"税额",field:"revenue_price",headerAlign:"right",align:"right",formatter:"priceFormat",width:100},{title:"不含税金额",field:"no_revenue_price",showOverflow:!0,headerAlign:"right",formatter:"priceFormat",align:"right",width:100},{title:"其他费用",field:"other_price",headerAlign:"right",align:"right",formatter:"priceFormat",width:100},{title:"货位",field:"allocation_name",width:130},{title:"销售指导价",headerAlign:"right",align:"right",field:"guidance_price",width:100},{title:"工厂代码",field:"factory_code",width:100},{title:"供货方式",field:"supply_mode_name",width:100},{title:"备注",field:"remark"}]}},methods:{footerMethod:function(t){var e=this,i=t.columns,a=t.data;return[i.map((function(t,i){if(2===i)return"页小计";if(["goods_num","subtotal_price","other_price","no_revenue_price","revenue_price"].includes(t.property)){var r=e.$utils.sum(a,t.property);return"goods_num"===t.property?e.$publicFution.priceFormatNone(r,0):e.$publicFution.priceFormatNone(r)}return null}))]},getTableData:function(t){var e=t.data;200===e.code&&(this.TableData=e.data)}}}),d=i("9d20"),u={name:"purchaseInstorageSee",mixins:[l],data:function(){return{goodsList:[],authority:{},loading:!1,indexSign:{},trunErrTable:{},errorState:!1,instoragList:{},chaid:!1,hasAuditorStatusPrint:null}},props:{title:{type:String,default:"采购管理"},goBackUrl:{type:String,default:"/purchase/instorage"}},components:{printInstorage:n["a"],errorDialog:d["a"]},computed:Object(s["a"])({},Object(o["c"])(["printingStatusGet"])),methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])(["printingStatus"])),{},{goBack:function(){this.$router.push({path:this.goBackUrl})},getTableData:function(t){this.goodsList=t.data.data.goodsList,this.instoragList=t.data.data.instoragList,this.params=t.data.data,this.goodsList=t.data.data.goodsList},AUDIT_GET:function(){var t=this;this.$baseData.checkCarDoctor({bill_type:1,bill_id:this.$route.query.instorage_id,operation_type:5}).then((function(){t.$axMethod.unAuditorPass({instorage_id:t.$route.query.instorage_id,is_list:2}).then((function(e){if(200==e.data.code){var i=e.data.data;if(i.length){var a=[];i.forEach((function(t){a.push(Number(t.serial))}));var r=t.goodsList.filter((function(t){return 1==a.includes(t.serial_number)}));t.indexSign={arr:r,str:"serial_number"},t.trunErrTable={data:i,msg:e.data.msg},t.errorState=!0}else{var s=e.data.msg?e.data.msg:i;t.$message({message:s,type:"success"}),t.goBack()}}}))}))},printSheet:function(){this.$refs.printInstorage.printPdf({instorage_id:this.$route.query.instorage_id})},shenHe:function(){var t=this;this.$baseData.checkCarDoctor({bill_type:1,bill_id:this.$route.query.instorage_id,operation_type:4}).then((function(){t.$axios({method:"post",url:t.$api.purchaseAuditorPassInStorage,data:{instorage_id:t.$route.query.instorage_id}}).then((function(e){200==e.data.code&&(t.$message({message:e.data.msg,type:"success"}),t.goBack())}))}))},abolishFun:function(){var t=this;this.$baseData.checkCarDoctor({bill_type:1,bill_id:this.$route.query.instorage_id,operation_type:6}).then((function(){t.$axios({method:"post",url:t.$api.purchaseAuditorInvalidInStorage,data:{instorage_id:t.$route.query.instorage_id}}).then((function(e){200==e.data.code&&(t.$message({message:e.data.data,type:"success"}),t.goBack())}))}))}}),created:function(){console.log(this)},mounted:function(){this.authority=JSON.parse(localStorage.getItem("authority")),this.hasAuditorStatusPrint=window.localStorage.hasAuditorStatusPrint}},c=u,m=(i("01c6"),i("2877")),_=Object(m["a"])(c,a,r,!1,null,"0fe9379e",null);e["default"]=_.exports},9374:function(t,e,i){},"9d20":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"errorDialog"},[i("vxe-modal",{attrs:{width:"520",showHeader:"false","mask-closable":"true"},on:{close:t.close},model:{value:t.errorState,callback:function(e){t.errorState=e},expression:"errorState"}},[i("div",{staticClass:"titles"},[t._v("提示:"+t._s(t.errorData.msg))]),i("vxe-grid",{attrs:{height:"200","show-overflow":"tooltip",border:"",columns:t.titleName,size:"mini",data:t.errorData.data}})],1)],1)},r=[],s={props:{errorData:{type:Object,default:function(){return{}}},errorState:{type:Boolean,default:!1},titleName:{type:Array,default:function(){return[{type:"seq",title:"序号",width:50},{field:"serial",width:200,title:"单据号"},{field:"msg",title:"失败原因"}]}}},methods:{close:function(){this.$parent.errorState=!1}}},o=s,n=(i("fa01"),i("a43d"),i("2877")),l=Object(n["a"])(o,a,r,!1,null,"21c7364e",null);e["a"]=l.exports},a43d:function(t,e,i){"use strict";i("9374")},c1ac:function(t,e,i){},fa01:function(t,e,i){"use strict";i("c1ac")}}]);
//# sourceMappingURL=chunk-0cf4cf65.8e0815f6.js.map