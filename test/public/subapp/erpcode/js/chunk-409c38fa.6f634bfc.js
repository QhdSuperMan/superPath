(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-409c38fa"],{"19aa":function(t,e,a){var o=a("da84"),i=a("3a9b"),l=o.TypeError;t.exports=function(t,e){if(i(e,t))return t;throw l("Incorrect invocation")}},2266:function(t,e,a){var o=a("da84"),i=a("0366"),l=a("c65b"),n=a("825a"),r=a("0d51"),s=a("e95a"),c=a("07fa"),u=a("3a9b"),p=a("9a1f"),m=a("35a1"),d=a("2a62"),h=o.TypeError,f=function(t,e){this.stopped=t,this.result=e},b=f.prototype;t.exports=function(t,e,a){var o,_,g,v,w,y,x,k=a&&a.that,D=!(!a||!a.AS_ENTRIES),S=!(!a||!a.IS_ITERATOR),$=!(!a||!a.INTERRUPTED),O=i(e,k),z=function(t){return o&&d(o,"normal",t),new f(!0,t)},j=function(t){return D?(n(t),$?O(t[0],t[1],z):O(t[0],t[1])):$?O(t,z):O(t)};if(S)o=t;else{if(_=m(t),!_)throw h(r(t)+" is not iterable");if(s(_)){for(g=0,v=c(t);v>g;g++)if(w=j(t[g]),w&&u(b,w))return w;return new f(!1)}o=p(t,_)}y=o.next;while(!(x=l(y,o)).done){try{w=j(x.value)}catch(C){d(o,"throw",C)}if("object"==typeof w&&w&&u(b,w))return w}return new f(!1)}},2626:function(t,e,a){"use strict";var o=a("d066"),i=a("9bf2"),l=a("b622"),n=a("83ab"),r=l("species");t.exports=function(t){var e=o(t),a=i.f;n&&e&&!e[r]&&a(e,r,{configurable:!0,get:function(){return this}})}},6062:function(t,e,a){"use strict";var o=a("6d61"),i=a("6566");o("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},6566:function(t,e,a){"use strict";var o=a("9bf2").f,i=a("7c73"),l=a("e2cc"),n=a("0366"),r=a("19aa"),s=a("2266"),c=a("7dd0"),u=a("2626"),p=a("83ab"),m=a("f183").fastKey,d=a("69f3"),h=d.set,f=d.getterFor;t.exports={getConstructor:function(t,e,a,c){var u=t((function(t,o){r(t,d),h(t,{type:e,index:i(null),first:void 0,last:void 0,size:0}),p||(t.size=0),void 0!=o&&s(o,t[c],{that:t,AS_ENTRIES:a})})),d=u.prototype,b=f(e),_=function(t,e,a){var o,i,l=b(t),n=g(t,e);return n?n.value=a:(l.last=n={index:i=m(e,!0),key:e,value:a,previous:o=l.last,next:void 0,removed:!1},l.first||(l.first=n),o&&(o.next=n),p?l.size++:t.size++,"F"!==i&&(l.index[i]=n)),t},g=function(t,e){var a,o=b(t),i=m(e);if("F"!==i)return o.index[i];for(a=o.first;a;a=a.next)if(a.key==e)return a};return l(d,{clear:function(){var t=this,e=b(t),a=e.index,o=e.first;while(o)o.removed=!0,o.previous&&(o.previous=o.previous.next=void 0),delete a[o.index],o=o.next;e.first=e.last=void 0,p?e.size=0:t.size=0},delete:function(t){var e=this,a=b(e),o=g(e,t);if(o){var i=o.next,l=o.previous;delete a.index[o.index],o.removed=!0,l&&(l.next=i),i&&(i.previous=l),a.first==o&&(a.first=i),a.last==o&&(a.last=l),p?a.size--:e.size--}return!!o},forEach:function(t){var e,a=b(this),o=n(t,arguments.length>1?arguments[1]:void 0);while(e=e?e.next:a.first){o(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!g(this,t)}}),l(d,a?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return _(this,0===t?0:t,e)}}:{add:function(t){return _(this,t=0===t?0:t,t)}}),p&&o(d,"size",{get:function(){return b(this).size}}),u},setStrong:function(t,e,a){var o=e+" Iterator",i=f(e),l=f(o);c(t,e,(function(t,e){h(this,{type:o,target:t,state:i(t),kind:e,last:void 0})}),(function(){var t=l(this),e=t.kind,a=t.last;while(a&&a.removed)a=a.previous;return t.target&&(t.last=a=a?a.next:t.state.first)?"keys"==e?{value:a.key,done:!1}:"values"==e?{value:a.value,done:!1}:{value:[a.key,a.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),a?"entries":"values",!a,!0),u(e)}}},"6d61":function(t,e,a){"use strict";var o=a("23e7"),i=a("da84"),l=a("e330"),n=a("94ca"),r=a("6eeb"),s=a("f183"),c=a("2266"),u=a("19aa"),p=a("1626"),m=a("861d"),d=a("d039"),h=a("1c7e"),f=a("d44e"),b=a("7156");t.exports=function(t,e,a){var _=-1!==t.indexOf("Map"),g=-1!==t.indexOf("Weak"),v=_?"set":"add",w=i[t],y=w&&w.prototype,x=w,k={},D=function(t){var e=l(y[t]);r(y,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(g&&!m(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return g&&!m(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!m(t))&&e(this,0===t?0:t)}:function(t,a){return e(this,0===t?0:t,a),this})},S=n(t,!p(w)||!(g||y.forEach&&!d((function(){(new w).entries().next()}))));if(S)x=a.getConstructor(e,t,_,v),s.enable();else if(n(t,!0)){var $=new x,O=$[v](g?{}:-0,1)!=$,z=d((function(){$.has(1)})),j=h((function(t){new w(t)})),C=!g&&d((function(){var t=new w,e=5;while(e--)t[v](e,e);return!t.has(-0)}));j||(x=e((function(t,e){u(t,y);var a=b(new w,t,x);return void 0!=e&&c(e,a[v],{that:a,AS_ENTRIES:_}),a})),x.prototype=y,y.constructor=x),(z||C)&&(D("delete"),D("has"),_&&D("get")),(C||O)&&D(v),g&&y.clear&&delete y.clear}return k[t]=x,o({global:!0,forced:x!=w},k),f(x,t),g||a.setStrong(x,t,_),x}},bb2f:function(t,e,a){var o=a("d039");t.exports=!o((function(){return Object.isExtensible(Object.preventExtensions({}))}))},ddd2:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a(t.commont,{tag:"component"})],1)},i=[],l=a("5530"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"search_container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.params}},[a("el-form-item",{attrs:{label:"库存组织",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{change:t.companyChange},model:{value:t.params.company_id,callback:function(e){t.$set(t.params,"company_id",e)},expression:"params.company_id"}},t._l(t.companyList,(function(e){return a("el-option",{key:e.company_id,attrs:{label:e.company_name,value:e.company_id}},[a("span",{class:1==e.type?"optionStyle":""},[t._v(t._s(e.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"业务日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.timeValue,callback:function(e){t.timeValue=e},expression:"timeValue"}})],1),a("el-form-item",{attrs:{label:"部门",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{change:t.departmentChange},model:{value:t.params.department_id,callback:function(e){t.$set(t.params,"department_id",e)},expression:"params.department_id"}},t._l(t.departmentList.options,(function(t){return a("el-option",{key:t.department_id,attrs:{label:t.department_name,value:t.department_id}})})),1)],1),a("el-form-item",{attrs:{label:"单据号",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.params.instorage_sn,callback:function(e){t.$set(t.params,"instorage_sn",e)},expression:"params.instorage_sn"}})],1),a("el-form-item",{attrs:{label:"供应商(厂家)",size:"mini"}},[a("el-select",{attrs:{clearable:"",maxlength:"100","filter-method":t.supplierChange,filterable:"",placeholder:"请选择"},on:{focus:t.supplier},model:{value:t.params.supplier_id,callback:function(e){t.$set(t.params,"supplier_id",e)},expression:"params.supplier_id"}},t._l(t.supplierList,(function(t){return a("el-option",{key:t.supplier_id,attrs:{label:t.supplier_name,value:t.supplier_id}})})),1)],1),a("el-form-item",{attrs:{label:"商品名称",size:"mini"}},[a("el-input",{model:{value:t.params.goods_name,callback:function(e){t.$set(t.params,"goods_name",e)},expression:"params.goods_name"}})],1),a("el-form-item",{attrs:{label:"商品编号",size:"mini"}},[a("el-input",{model:{value:t.params.goods_sn,callback:function(e){t.$set(t.params,"goods_sn",e)},expression:"params.goods_sn"}})],1),a("el-form-item",{attrs:{label:"仓库名称",size:"mini"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},on:{focus:t.getWarehouseFouse,change:t.getAllocation},model:{value:t.params.warehouse_id,callback:function(e){t.$set(t.params,"warehouse_id",e)},expression:"params.warehouse_id"}},t._l(t.warehouseList.options,(function(t){return a("el-option",{key:t.warehouse_id,attrs:{label:t.warehouse_name,value:t.warehouse_id}})})),1)],1),a("el-form-item",{attrs:{label:"货位名称",size:"mini"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:t.params.allocation_id,callback:function(e){t.$set(t.params,"allocation_id",e)},expression:"params.allocation_id"}},t._l(t.allocationList.options,(function(t){return a("el-option",{key:t.allocation_id,attrs:{label:t.allocation_name,value:t.allocation_id}})})),1)],1),a("el-form-item",{attrs:{label:"货位分配状态",size:"mini"}},[a("el-select",{attrs:{clearable:""},model:{value:t.params.auditor_status,callback:function(e){t.$set(t.params,"auditor_status",e)},expression:"params.auditor_status"}},[a("el-option",{attrs:{label:"全部",value:2}},[t._v("全部")]),a("el-option",{attrs:{label:"待分配",value:0}},[t._v("待分配")]),a("el-option",{attrs:{label:"已分配",value:1}},[t._v("已分配")])],1)],1),a("el-form-item",{attrs:{label:"入库类型",size:"mini"}},[a("el-select",{attrs:{clearable:""},model:{value:t.params.type,callback:function(e){t.$set(t.params,"type",e)},expression:"params.type"}},[a("el-option",{attrs:{label:"采购入库",value:0}}),a("el-option",{attrs:{label:"其他入库",value:2}})],1)],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.onSearch}},[t._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.onReset}},[t._v("重置")])],1)],1),a("div",{staticClass:"add_delet"},[1==t.authority.b_allot?a("el-button",{staticClass:"addBtn",attrs:{plain:"",size:"mini"},on:{click:t.branch}},[t._v("分配货位")]):t._e()],1)],1),a("div",{staticClass:"table_container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:t.TableData.tableData,"max-height":"600"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",fixed:"left",align:"center",width:"44"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"company_name",width:"150",label:"库存组织"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_id","min-width":"170",label:"商品编号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_name","min-width":"500",label:"商品名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("pre",[t._v(t._s(e.row.goods_name))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"batch",width:"120",label:"年周/批次"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"supplier_name",width:"150",label:"供应商(厂家)"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_num",width:"90",label:"入库数量",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"warehouse_name",width:"132",label:"仓库"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"allocation_name",width:"180",label:"货位"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"allocation_num",width:"180",label:"货位分配数量",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"is_allot",width:"120",label:"货位分配状态"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"business_time",width:"180",label:"业务日期"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"instorage_add_time",width:"170",label:"单据时间"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"instorage_sn",width:"180",label:"单据号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"type",width:"70",label:"入库类型"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"department_name",width:"100",label:"部门"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"remark",width:"180",label:"备注"}})],1)],1),a("div",{staticClass:"page_container"},[a("div",{staticClass:"pageNumber"},[t._v("每页显示")]),a("el-pagination",{staticClass:"erp-pagination",attrs:{"current-page":t.goPage,"page-size":10,"page-sizes":t.per_page,layout:"total,sizes, prev, pager, next,jumper",prevText:"上一页",nextText:"下一页",total:t.TableData.total},on:{"size-change":t.handleSizeChange,"update:currentPage":function(e){t.goPage=e},"update:current-page":function(e){t.goPage=e},"current-change":t.handleCurrentChange}})],1)])},r=[],s=(a("d81d"),a("2f62")),c=a("65b0"),u={data:function(){return{authority:{},timeValue:[],params:{auditor_status:0},customerList:{options:[]},departmentList:{options:[]},companyList:[],supplierList:[],warehouseList:{options:[]},allocationList:{options:[]},TableData:{tableData:[],total:10},per_page:[30,50,100,500],pageSize:30,multipleSelection:[],goPage:1,searchParams:{}}},methods:Object(l["a"])(Object(l["a"])({},Object(s["b"])(["allocationBranch_show"])),{},{getWarehouseFouse:function(){this.$common.options("getWarehouseListOption",this.warehouseList,{company_id:this.params.company_id,department_id:this.params.department_id})},departmentChange:function(t){this.$set(this.params,"warehouse_id","")},onReset:function(){this.timeValue=[],this.$set(this,"params",{auditor_status:0}),this.$set(this,"searchParams",{params:this.params,TableData:this.TableData,API:"getGoodsPlacementList",vm:this}),Object(c["g"])(this.searchParams)},supplierChange:function(t){var e={company_id:this.params.company_id,supplier_name:t};Object(c["n"])(this,e)},onSearch:function(){this.timeValue?(this.params.start_time=this.timeValue[0],this.params.end_time=this.timeValue[1]):this.params.start_time=this.params.end_time="",Object.assign(this.searchParams.params,this.params,{page:1}),Object(c["g"])(this.searchParams)},companyChange:function(t){this.$set(this.params,"supplier_id",""),this.$set(this.params,"warehouse_id",""),Object(c["i"])(this,this.params,1)},supplier:function(){var t={company_id:this.params.company_id,supplier_name:null};Object(c["n"])(this,t)},branch:function(){this.multipleSelection.length?this.allocationBranch_show({commont:"allocationBranch",instorage_goods_id:this.multipleSelection.map((function(t){return t.instorage_goods_id}))}):this.$message({message:"请先选择要分配的货位！",type:"warning"})},handleSelectionChange:function(t){this.multipleSelection=t},handleSizeChange:function(t){Object.assign(this.searchParams.params,{per_page:t,page:1}),Object(c["g"])(this.searchParams)},handleCurrentChange:function(t){Object.assign(this.searchParams.params,{page:t}),Object(c["g"])(this.searchParams)},getAllocation:function(t){this.allocationList.options=[],this.$set(this.params,"allocation_id",""),this.$common.options("getAllocationListOption",this.allocationList,{warehouse_id:t})}}),mounted:function(){this.authority=JSON.parse(localStorage.getItem("authority")),this.$set(this,"params",{auditor_status:0}),Object(c["k"])(this,{type:1}),this.$set(this,"searchParams",{params:this.params,TableData:this.TableData,API:"getGoodsPlacementList",vm:this}),Object(c["g"])(this.searchParams),this.$common.options("getWarehouseListOption",this.warehouseList,{company_id:this.params.company_id})}},p=u,m=a("2877"),d=Object(m["a"])(p,n,r,!1,null,"5a2bef1f",null),h=d.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("库存管理")]),a("el-breadcrumb-item",{staticClass:"attrbute"},[a("span",{on:{click:t.goBack}},[t._v("货位分配")])]),a("el-breadcrumb-item",[t._v("分配货位")])],1),a("div",{staticClass:"search_container"},[a("div",{staticClass:"add_delet"},[a("el-button",{staticClass:"addAlloction",attrs:{plain:"",size:"mini"},on:{click:t.deleteF}},[t._v("删行")])],1)]),a("div",{staticClass:"table_container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:t.TableData,"max-height":"600"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",fixed:"left",align:"center",width:"44"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"company_name","min-width":"180",label:"库存组织"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"instorage_sn","min-width":"180",label:"单据号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_id",width:"160",label:"商品编号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_name",label:"商品名称","min-width":"500"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("pre",[t._v(t._s(e.row.goods_name))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"batch",width:"120",label:"年周/批次"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"supplier_name",width:"150",label:"供应商(厂家)"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"goods_num",width:"90",label:"入库数量",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"warehouse_name",width:"132",label:"仓库"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"allocation_id",width:"180",label:"货位"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{staticClass:"el_slect",attrs:{placeholder:"请选择",size:"mini"},model:{value:e.row.allocation_id,callback:function(a){t.$set(e.row,"allocation_id",a)},expression:"scope.row.allocation_id"}},t._l(e.row.allocationInventoryList,(function(t){return a("el-option",{key:t.allocation_id,attrs:{label:t.allocation_name,value:t.allocation_id}})})),1)]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,width:"180",label:"货位分配数量"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{type:"number",placeholder:"请输入","suffix-icon":"el-icon-edit-outline"},on:{change:function(a){return t.handleEdit(e.$index,e.row)}},model:{value:e.row.allocation_num,callback:function(a){t.$set(e.row,"allocation_num",a)},expression:"scope.row.allocation_num"}})]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"remark",width:"180",label:"备注"}})],1)],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"新增仓库类型",center:"",visible:t.dialogFormVisible,width:"450px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm}},[a("el-form-item",{attrs:{label:"所属仓库"}},[t._v(" "+t._s(t.warehouse_name)+" ")]),a("el-form-item",{attrs:{label:"货位名称",prop:"allocation_name",rules:t.rules.allocation_name}},[a("el-input",{staticStyle:{width:"250px"},model:{value:t.ruleForm.allocation_name,callback:function(e){t.$set(t.ruleForm,"allocation_name",e)},expression:"ruleForm.allocation_name"}})],1),a("el-form-item",{attrs:{label:"备注",size:"medium"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{type:"text",maxlength:"300"},model:{value:t.ruleForm.remark,callback:function(e){t.$set(t.ruleForm,"remark",e)},expression:"ruleForm.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.dialogFormsubmit("ruleForm")}}},[t._v("确 定")])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.goBack()}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm()}}},[t._v("确 定")])],1)],1)},b=[],_=a("2909"),g=a("ade3"),v=(a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("4de4"),a("a630"),a("159b"),a("e9c4"),a("a15b"),{data:function(){var t;return t={authority:{},pageSize:30,goPage:1,params:{},instorage_goods_id:null,TableData:[],per_page:[30,50,100,500]},Object(g["a"])(t,"goPage",1),Object(g["a"])(t,"pageSize",30),Object(g["a"])(t,"dialogFormVisible",!1),Object(g["a"])(t,"ruleForm",{warehouse_id:""}),Object(g["a"])(t,"searchParams",{}),Object(g["a"])(t,"warehouse_name",""),Object(g["a"])(t,"multipleSelection",[]),t},methods:Object(l["a"])(Object(l["a"])({},Object(s["b"])(["allocationDefault_show"])),{},{goBack:function(){this.allocationDefault_show({commont:"allocationDefault"})},handleEdit:function(t,e){this.$nextTick((function(){e.allocation_num<0?e.allocation_num=0:e.allocation_num=Math.ceil(e.allocation_num)}))},initData:function(){var t=this;this.$axios({method:"get",url:this.$api.infoGoodsPlacement,params:this.searchParams}).then((function(e){var a=e.data;if(200==a.code)return t.$set(t,"TableData",a.data),a})).then((function(e){for(var a=function(a,o){t.$axMethod.allocationInventoryList({warehouse_id:e.data[a].warehouse_id}).then((function(e){t.$set(t.TableData[a],"allocationInventoryList",e.data.data)}))},o=0,i=e.data.length;o<i;o++)a(o,i)}))},handleSelectionChange:function(t){this.multipleSelection=t},deleteF:function(){if(this.multipleSelection.length){var t=new Set(this.TableData),e=new Set(this.multipleSelection),a=new Set(Object(_["a"])(t).filter((function(t){return!e.has(t)})));this.TableData=Array.from(a)}else this.$message({message:"请先选择要删除的数据！",type:"warning"})},dialogFormsubmit:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.error("error submit!!"),!1;e.$axios({method:"post",url:e.$api.addAllocation,data:e.ruleForm}).then((function(t){var a=t.data;200==a.code&&(e.dialogFormVisible=!1,e.$message({message:a.data,type:"success"}))}))}))},submitForm:function(){var t=this,e=!0;if(this.TableData.forEach((function(a){if(a.allocation_num>a.goods_num)return t.$message.warning("货位分配数量不得大于入库数量"),e=!1,!1})),!e)return!1;var a=JSON.stringify(this.TableData.map((function(t){return{instorage_goods_id:t.instorage_goods_id,allocation_id:t.allocation_id}})));this.$axMethod.addGoodsPlacement({placement_info:a}).then((function(e){var a=e.data;"200"==a.code&&(t.$message.success(a.data),t.goBack())}))}}),computed:Object(l["a"])({},Object(s["c"])(["allocationBranch_showGet"])),mounted:function(){this.$set(this.params,"instorage_goods_id",this.allocationBranch_showGet.instorage_goods_id.join(",")),this.searchParams=Object.assign({},this.params),this.initData()}}),w=v,y=Object(m["a"])(w,f,b,!1,null,"e9559c2c",null),x=y.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search_container seePage"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("库存管理")]),a("el-breadcrumb-item",{staticClass:"attrbute"},[a("span",{on:{click:t.goBack}},[t._v("货位分配")])]),a("el-breadcrumb-item",[t._v("查看货位")])],1),a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"库存组织：",size:"mini"}},[t._v(" "+t._s(t.TableData.infoList.company_name)+" ")]),a("el-form-item",{attrs:{label:"仓库名称：",size:"mini"}},[t._v(" "+t._s(t.TableData.infoList.warehouse_name)+" ")]),a("el-form-item",{attrs:{label:"商品名称：",size:"mini"}},[t._v(" "+t._s(t.TableData.infoList.goods_name)+" ")]),a("el-form-item",{attrs:{label:"批次：",size:"mini"}},[t._v(" "+t._s(t.TableData.infoList.batch)+" ")]),a("el-form-item",{attrs:{label:"数量：",size:"mini"}},[t._v(" "+t._s(t.TableData.infoList.num)+" ")])],1),a("div",{staticClass:"table_container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:t.TableData.tableData,"max-height":"600"}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"allocation_name",label:"货位名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"allot_num",label:"分配时货位数量",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"now_num",label:"货位分配数量",align:"right"}})],1)],1),a("div",{staticClass:"page_container"},[a("div",{staticClass:"pageNumber"},[t._v("每页显示")]),a("el-pagination",{staticClass:"erp-pagination",attrs:{"current-page":t.goPage,"page-size":t.pageSize1,"page-sizes":t.per_page,layout:"total,sizes, prev, pager, next,jumper",prevText:"上一页",nextText:"下一页",total:t.TableData.total},on:{"size-change":t.handleSizeChange,"update:currentPage":function(e){t.goPage=e},"update:current-page":function(e){t.goPage=e},"current-change":t.handleCurrentChange}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.goBack}},[t._v("返 回")])],1)],1)},D=[],S={data:function(){return{authority:{},instorage_goods_id:null,TableData:{infoList:{},tableData:[],per_page:[30,50,100,500],total:10},per_page:[30,50,100,500],pageSize:30,goPage:1}},methods:Object(l["a"])(Object(l["a"])({handleSizeChange:function(t){var e=this,a=this;this.$axios({method:"get",url:a.$api.seekGoodsPlacement,params:{instorage_goods_id:this.instorage_goods_id,per_page:t}}).then((function(t){var a=t.data;200==a.code&&(e.$set(e,"TableData",a.data.data),e.TableData.tableData=a.data.data.data,e.TableData.infoList=a.data.goodsInfo)}))},handleCurrentChange:function(t){var e=this,a=this;this.$axios({method:"get",url:a.$api.seekGoodsPlacement,params:{instorage_goods_id:this.instorage_goods_id,page:t}}).then((function(t){var a=t.data;200==a.code&&(e.$set(e,"TableData",a.data.data),e.TableData.tableData=a.data.data.data,e.TableData.infoList=a.data.goodsInfo)}))}},Object(s["b"])(["allocationDefault_show"])),{},{goBack:function(){this.allocationDefault_show({commont:"allocationDefault"})}}),computed:Object(l["a"])({},Object(s["c"])(["allocationSearch_showGet"])),created:function(){var t=this,e=this;this.$axios({method:"get",url:e.$api.seekGoodsPlacement,params:{instorage_goods_id:this.allocationSearch_showGet.instorage_goods_id}}).then((function(e){var a=e.data;200==a.code&&(t.$set(t,"TableData",a.data.data),t.TableData.tableData=a.data.data.data,t.TableData.infoList=a.data.goodsInfo)})),this.instorage_goods_id=this.allocationSearch_showGet.instorage_goods_id}},$=S,O=Object(m["a"])($,k,D,!1,null,"c7a85710",null),z=O.exports,j={name:"instoragePlaceallotPlaceallot",components:{allocationDefault:h,allocationBranch:x,allocationSearch:z},data:function(){return{commont:"allocationDefault"}},computed:Object(l["a"])({},Object(s["c"])(["allocationDefault_showGet","allocationBranch_showGet","allocationSearch_showGet"])),watch:{allocationDefault_showGet:function(){this.commont=this.allocationDefault_showGet.commont},allocationBranch_showGet:function(){this.commont=this.allocationBranch_showGet.commont},allocationSearch_showGet:function(){this.commont=this.allocationSearch_showGet.commont}}},C=j,T=Object(m["a"])(C,o,i,!1,null,"3c1f80e5",null);e["default"]=T.exports},e2cc:function(t,e,a){var o=a("6eeb");t.exports=function(t,e,a){for(var i in e)o(t,i,e[i],a);return t}},f183:function(t,e,a){var o=a("23e7"),i=a("e330"),l=a("d012"),n=a("861d"),r=a("1a2d"),s=a("9bf2").f,c=a("241c"),u=a("057f"),p=a("90e3"),m=a("bb2f"),d=!1,h=p("meta"),f=0,b=Object.isExtensible||function(){return!0},_=function(t){s(t,h,{value:{objectID:"O"+f++,weakData:{}}})},g=function(t,e){if(!n(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,h)){if(!b(t))return"F";if(!e)return"E";_(t)}return t[h].objectID},v=function(t,e){if(!r(t,h)){if(!b(t))return!0;if(!e)return!1;_(t)}return t[h].weakData},w=function(t){return m&&d&&b(t)&&!r(t,h)&&_(t),t},y=function(){x.enable=function(){},d=!0;var t=c.f,e=i([].splice),a={};a[h]=1,t(a).length&&(c.f=function(a){for(var o=t(a),i=0,l=o.length;i<l;i++)if(o[i]===h){e(o,i,1);break}return o},o({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},x=t.exports={enable:y,fastKey:g,getWeakData:v,onFreeze:w};l[h]=!0}}]);
//# sourceMappingURL=chunk-409c38fa.6f634bfc.js.map