(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-2d0b95f9"],{3358:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{attrs:{id:"leixin"}},[a("div",{staticClass:"search_container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"库存组织",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.companyListInvok,change:e.companyChange},model:{value:e.params.company_id,callback:function(t){e.$set(e.params,"company_id",t)},expression:"params.company_id"}},e._l(e.companyList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[a("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"业务日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}})],1),a("el-form-item",{attrs:{label:"单据号",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入单据号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.params.stock_taking_sn,callback:function(t){e.$set(e.params,"stock_taking_sn",t)},expression:"params.stock_taking_sn"}})],1),a("el-form-item",{attrs:{label:"仓库名称",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{focus:e.warehouseInvok,change:e.warehouseChange},model:{value:e.params.warehouse_id,callback:function(t){e.$set(e.params,"warehouse_id",t)},expression:"params.warehouse_id"}},e._l(e.warehouseList,(function(e){return a("el-option",{key:e.warehouse_id,attrs:{label:e.warehouse_name,value:e.warehouse_id}})})),1)],1),a("el-form-item",{attrs:{label:"库管员",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.EmployeeListInvok,change:e.employeeChange},model:{value:e.params.keeper_id,callback:function(t){e.$set(e.params,"keeper_id",t)},expression:"params.keeper_id"}},e._l(e.employeeList,(function(e){return a("el-option",{key:e.employee_id,attrs:{label:e.employee_name,value:e.employee_id}})})),1)],1),a("el-form-item",{attrs:{label:"盘盈入库单号",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入盘盈入库单号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.params.instorage_sn,callback:function(t){e.$set(e.params,"instorage_sn",t)},expression:"params.instorage_sn"}})],1),a("el-form-item",{attrs:{label:"盘亏出库单号",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入盘亏出库单号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.params.outstock_sn,callback:function(t){e.$set(e.params,"outstock_sn",t)},expression:"params.outstock_sn"}})],1),a("el-form-item",{attrs:{label:"审核状态",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.params.auditor_status,callback:function(t){e.$set(e.params,"auditor_status",t)},expression:"params.auditor_status"}},[a("el-option",{attrs:{label:"全部",value:0}},[e._v("全部")]),a("el-option",{attrs:{label:"未审核",value:1}},[e._v("未审核")]),a("el-option",{attrs:{label:"已审核",value:2}},[e._v("已审核")]),a("el-option",{attrs:{label:"作废",value:3}},[e._v("作废")])],1)],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"add_delet"},[1==e.authority.b_add?a("el-button",{staticClass:"addBtn",attrs:{icon:"el-icon-circle-plus-outline",type:"primary",size:"mini"},on:{click:e.AddF}},[e._v("新增")]):e._e(),1==e.authority.b_del?a("el-button",{attrs:{plain:"",icon:"el-icon-delete",size:"mini"},on:{click:e.delF}},[e._v("删除")]):e._e(),1==e.authority.b_pass?a("el-button",{attrs:{icon:"iconfont icon-pass",type:"primary",size:"mini"},on:{click:function(t){return e.auditorOrInvalid(1)}}},[e._v("审核")]):e._e(),1==e.authority.b_invalid?a("el-button",{attrs:{plain:"",icon:"iconfont icon-zuofei",size:"mini"},on:{click:function(t){return e.auditorOrInvalid(2)}}},[e._v("作废")]):e._e()],1),a("div",{staticClass:"table_container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading1,expression:"loading1"}],staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:e.TableData.tableData,"max-height":"600"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",fixed:"left",align:"center",width:"44"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"index",align:"center",width:"44",label:"序号"}}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==e.authority.b_info?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.seeDetail(t,t.row)}}},[e._v(" 查看 ")]):e._e(),1==t.row.auditor_status&&1==e.authority.b_edit?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.AddF(t,t.row)}}},[e._v(" 修改 ")]):a("el-button",{attrs:{disabled:"",type:"text",size:"small"}},[e._v(" 修改 ")])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"company_name","min-width":"180",label:"库存组织"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"stock_taking_sn","min-width":"170",label:"单据号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.seeDetail(t,t.row)}}},[e._v(" "+e._s(t.row.stock_taking_sn)+" ")])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"business_time","min-width":"100",label:"业务日期"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"warehouse_name","min-width":"150",label:"仓库名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"total_stocks","min-width":"100",label:"账面总数量",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"total_real_stocks","min-width":"100",label:"实盘总数量",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"total_stocks_num","min-width":"100",label:"盘盈/亏总数量",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"keeper_name","min-width":"100",label:"库管员"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"remark","min-width":"100",label:"备注"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"auditor_status_name","min-width":"100",label:"审核状态"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"add_user_name","min-width":"100",label:"创建人"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"add_time","min-width":"160",label:"单据时间"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"auditor_name","min-width":"100",label:"审核人"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"auditor_time","min-width":"160",label:"审核时间"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"update_user_name","min-width":"100",label:"修改人"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"update_time","min-width":"160",label:"修改时间"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"instorage_sn","min-width":"160",label:"盘盈入库单号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"outstock_sn","min-width":"160",label:"盘亏出库单号"}})],1)],1),a("div",{staticClass:"page_container"},[a("div",{staticClass:"pageNumber"},[e._v("每页显示")]),a("el-pagination",{staticClass:"erp-pagination",attrs:{"current-page":e.goPage,"page-size":e.pageSize1,"page-sizes":e.per_page,layout:"total,sizes, prev, pager, next,jumper",prevText:"上一页",nextText:"下一页",total:e.TableData.total},on:{"size-change":e.handleSizeChange,"update:currentPage":function(t){e.goPage=t},"update:current-page":function(t){e.goPage=t},"current-change":e.handleCurrentChange}})],1)])])},s=[],o=a("5530"),l=(a("4de4"),a("d3b7"),a("99af"),a("2f62")),n=a("65b0"),r={name:"instorageTakestockTakestockIndex",data:function(){return{timeValue2:[],loading:!1,dialogFormVisible:!1}},computed:Object(o["a"])({},Object(l["c"])(["takestockIndexGet"])),methods:Object(o["a"])(Object(o["a"])({},Object(l["b"])(["takestockAddACT","takestockSeeACT","takestockModifyACT","takestockIndexACT"])),{},{companyChange:function(e){e&&(this.params.company_name=this.companyList.filter((function(t){return t.company_id===e}))[0].company_name),this.$set(this.params,"warehouse_id",""),this.$set(this.params,"keeper_id","")},warehouseChange:function(e){e&&(this.params.warehouse_name=this.warehouseList.filter((function(t){return t.warehouse_id===e}))[0].warehouse_name)},employeeChange:function(e){e&&(this.params.keeper_name=this.employeeList.filter((function(t){return t.employee_id===e}))[0].employee_name)},auditorOrInvalid:function(e){var t,a,i,s=this,o=this;if(1==e?(t="auditorPassTakeStock",a="审核",i=Object.assign({},this.searchParams.params)):(t="auditorInvalidTakeStock",a="作废",i=Object.assign({},this.searchParams.params,{type:"2"})),this.multipleSelection.length<1)return this.$message({message:"请选择需要".concat(a,"的信息"),type:"warning"}),!1;for(var l=[],r=0;r<this.multipleSelection.length;r++)l.push(this.multipleSelection[r].stock_taking_id);var c=l.toString(),p={noConfirm:!0,examineID:"stock_taking_id",eachData:{stock_taking_id:c},examineApi:t,list:{UrlApi:"getTakeStockList",data:this.TableData,esData:i}};1==e?this.$axMethod.safetyStockCheck({bill_logogram:"pkck",order_type:2,bill_id:c}).then((function(e){Object(n["m"])(s,{goods_info:c,status:2,type:6},(function(){o.$common.examineFun(p)}))})):this.$common.examineFun(p)},seeDetail:function(e,t){this.$router.push({path:"/inventory/takestock/takestockSee"}),this.takestockSeeACT({stock_taking_id:t.stock_taking_id,type:this.type,goPage:this.goPage,params:this.params,pageSize:this.pageSize,after_auditor_print_status:t.after_auditor_print_status})},AddF:function(e,t){this.$router.push({path:"/inventory/takestock/takestockAdd"}),this.takestockAddACT({goPage:this.goPage,params:this.params,pageSize:this.pageSize,stock_taking_id:t?t.stock_taking_id:""})},onReset:function(e){this.$set(this,"params",{auditor_status:0,type:this.type}),this.timeValue=[],this.timeValue2=null,this.$set(this,"searchParams",{params:this.params,TableData:this.TableData,API:"getTakeStockList",vm:this}),Object(n["g"])(this.searchParams)},onSearch:function(){this.timeValue&&2==this.timeValue.length?(this.params.start_time=this.timeValue[0],this.params.end_time=this.timeValue[1]):this.params.start_time=this.params.end_time="",this.timeValue2&&2==this.timeValue2.length?(this.params.aud_start_time=this.timeValue2[0],this.params.aud_end_time=this.timeValue2[1]):this.params.aud_start_time=this.params.aud_end_time="",Object.assign(this.searchParams.params,this.params,{page:1}),this.takestockIndexACT({params:this.params,goPage:this.goPage,pageSize:this.pageSize}),Object(n["g"])(this.searchParams)},delF:function(){var e={deleID:"stock_taking_id",deleSelect:this.multipleSelection,deleApi:"delTakeStock",list:{UrlApi:"getTakeStockList",data:this.TableData,esData:this.searchParams.params}};this.$common.deletes(e,"删除",this)}}),mounted:function(){if(this.authority=JSON.parse(localStorage.getItem("authority")),this.$set(this,"params",{auditor_status:0}),this.takestockIndexGet&&this.takestockIndexGet.params){if(this.takestockIndexGet.params.start_time){var e=this.takestockIndexGet.params,t=e.start_time,a=e.end_time;this.timeValue=this.timeValue.concat([t,a])}Object.assign(this.takestockIndexGet.params,{employee_id:this.takestockIndexGet.params.keeper_id,employee_name:this.takestockIndexGet.params.keeper_name}),this.$set(this,"params",this.takestockIndexGet.params),Object(n["l"])(this,this.takestockIndexGet.params)}this.takestockIndexGet.goPage&&(this.params.page=this.takestockIndexGet.goPage,this.params.per_page=this.takestockIndexGet.pageSize),this.$set(this,"searchParams",{params:this.params,TableData:this.TableData,API:"getTakeStockList",vm:this}),Object(n["g"])(this.searchParams)}},c=r,p=a("2877"),m=Object(p["a"])(c,i,s,!1,null,null,null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d0b95f9.5c8c50cf.js.map