(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-2d0cc035"],{"4bb3":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"params"},[a("div",{attrs:{id:"leixin"}},[a("div",{staticClass:"search_container"},[a("el-form",{ref:"filterFormRef",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"销售组织",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{change:e.companyChange,focus:e.companyListInvok},model:{value:e.params.company_id,callback:function(t){e.$set(e.params,"company_id",t)},expression:"params.company_id"}},e._l(e.companyList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[a("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"单据号",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.params.other_delivery_sn,callback:function(t){e.$set(e.params,"other_delivery_sn",t)},expression:"params.other_delivery_sn"}})],1),a("el-form-item",{attrs:{label:"部门",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.DepartmentListInvok,change:e.departmentChange},model:{value:e.params.department_id,callback:function(t){e.$set(e.params,"department_id",t)},expression:"params.department_id"}},e._l(e.departmentList,(function(e){return a("el-option",{key:e.department_id,attrs:{label:e.department_name,value:e.department_id}})})),1)],1),a("el-form-item",{attrs:{label:"业务日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}})],1),a("el-form-item",{attrs:{label:"审核状态",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.params.auditor_status,callback:function(t){e.$set(e.params,"auditor_status",t)},expression:"params.auditor_status"}},[a("el-option",{attrs:{label:"全部",value:0}},[e._v("全部")]),a("el-option",{attrs:{label:"未审核",value:1}},[e._v("未审核")]),a("el-option",{attrs:{label:"已审核",value:2}},[e._v("已审核")]),a("el-option",{attrs:{label:"作废",value:3}},[e._v("作废")])],1)],1),a("el-form-item",{attrs:{label:"物流公司",size:"mini"}},[a("el-select",{attrs:{clearable:""},on:{focus:e.logisticsInvok,change:e.logisticsChange},model:{value:e.params.logistics_id,callback:function(t){e.$set(e.params,"logistics_id",t)},expression:"params.logistics_id"}},e._l(e.logisticsList,(function(e){return a("el-option",{key:e.logistics_id,attrs:{label:e.logistics_name,value:e.logistics_id}})})),1)],1),a("el-form-item",{attrs:{label:"物流票号",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.params.logistics_number,callback:function(t){e.$set(e.params,"logistics_number",t)},expression:"params.logistics_number"}})],1),a("el-form-item",{attrs:{label:"运费结算方式",size:"mini"}},[a("el-select",{attrs:{clearable:""},on:{focus:e.PostageTypeListInvok,change:e.postageTypeChange},model:{value:e.params.postage_type_id,callback:function(t){e.$set(e.params,"postage_type_id",t)},expression:"params.postage_type_id"}},e._l(e.postageTypeList,(function(e){return a("el-option",{key:e.postage_type_id,attrs:{label:e.postage_type_name,value:e.postage_type_id}})})),1)],1),a("el-form-item",{attrs:{label:"发货类型",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.params.delivery_type,callback:function(t){e.$set(e.params,"delivery_type",t)},expression:"params.delivery_type"}},[a("el-option",{attrs:{label:"全部",value:0}},[e._v("全部")]),a("el-option",{attrs:{label:"三包出库发货",value:1}},[e._v("三包出库发货")]),a("el-option",{attrs:{label:"返胎出库发货",value:2}},[e._v("返胎出库发货")]),a("el-option",{attrs:{label:"旧胎退回发货",value:3}},[e._v("旧胎退回发货")])],1)],1),a("el-form-item",{attrs:{label:"发货方式",size:"mini"}},[a("el-select",{attrs:{clearable:"",filterable:""},model:{value:e.params.send_mode,callback:function(t){e.$set(e.params,"send_mode",t)},expression:"params.send_mode"}},[a("el-option",{attrs:{label:"物流发货",value:1}},[e._v("物流发货")]),a("el-option",{attrs:{label:"客户自提",value:2}},[e._v("客户自提")]),a("el-option",{attrs:{label:"自提物流",value:3}},[e._v("自提物流")])],1)],1),a("el-form-item",{attrs:{label:"司机",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.params.driver_name,callback:function(t){e.$set(e.params,"driver_name",t)},expression:"params.driver_name"}})],1),a("el-form-item",{attrs:{label:"车牌号",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.params.license_number,callback:function(t){e.$set(e.params,"license_number",t)},expression:"params.license_number"}})],1),a("el-form-item",{attrs:{size:"mini"}},[a("el-checkbox",{staticStyle:{margin:"0px 22px 0 62px"},attrs:{"false-label":"0","true-label":"1",name:"type"},model:{value:e.params.is_zero,callback:function(t){e.$set(e.params,"is_zero",t)},expression:"params.is_zero"}},[e._v("仅显示打印次数为0的单据")])],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"add_delet"},[1==e.authority.b_add?a("el-button",{staticClass:"addBtn",attrs:{icon:"el-icon-circle-plus-outline",type:"primary",size:"mini"},on:{click:e.addF}},[e._v("新增")]):e._e(),1==e.authority.b_del?a("el-button",{attrs:{plain:"",icon:"el-icon-delete",size:"mini"},on:{click:e.deletes}},[e._v("删除")]):e._e(),1==e.authority.b_pass?a("el-button",{attrs:{icon:"iconfont icon-pass",type:"primary",size:"mini"},on:{click:function(t){return e.audit("auditorPassOtherDelivery","审核")}}},[e._v("审核")]):e._e(),1==e.authority.b_invalid?a("el-button",{attrs:{icon:"iconfont icon-zuofei",size:"mini"},on:{click:function(t){return e.audit("auditorInvalidOtherDelivery","作废")}}},[e._v("作废")]):e._e(),1==e.authority.b_nopass?a("el-button",{attrs:{plain:"",icon:"iconfont icon-fanshenhe",size:"mini"},on:{click:function(t){return e.audit("unAuditorPassOtherDelivery","弃审")}}},[e._v("弃审")]):e._e(),1==e.authority.b_print?a("el-button",{attrs:{plain:"",size:"mini",icon:"el-icon-printer"},on:{click:function(t){return e.printF(!0)}}},[e._v("批量打印")]):e._e()],1),a("div",{staticClass:"table_container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading1,expression:"loading1"}],staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:e.TableData.tableData,"max-height":e.tableHeight,"summary-method":e.getSummaries,"show-summary":"","row-style":e.selectRowChangeBg},on:{"selection-change":e.handleSelectionChange,"row-dblclick":function(t){return e.examine(e.TableData.tableData,t)}}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",fixed:"left",align:"center",width:"44"}}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==e.authority.b_info&&1==t.row.is_auth?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.examine(t,t.row)}}},[e._v(" 查看 ")]):a("el-button",{attrs:{disabled:"",type:"text",size:"small"}},[e._v(" 查看 ")]),1==t.row.auditor_status&&1==e.authority.b_edit&&1==t.row.is_auth?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.addF(t.row)}}},[e._v(" 修改 ")]):a("el-button",{attrs:{disabled:"",type:"text",size:"small"}},[e._v(" 修改 ")]),1==t.row.after_auditor_print_status?[1==e.authority.b_print&&2==t.row.auditor_status&&1==t.row.is_auth?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.lodopDe(t.row)}}},[e._v(" 打印 ")]):a("el-button",{attrs:{disabled:"",type:"text",size:"small"}},[e._v(" 打印 ")])]:[1==e.authority.b_print&&1==t.row.is_auth?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.lodopDe(t.row)}}},[e._v(" 打印 ")]):a("el-button",{attrs:{disabled:"",type:"text",size:"small"}},[e._v(" 打印 ")])]]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"company_name",width:"150",label:"销售组织"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"other_delivery_sn",width:"156",label:"单据号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{attrs:{href:"javaScript:;"},on:{click:function(a){return e.examine(t,t.row)}}},[e._v(e._s(t.row.other_delivery_sn))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"department_name",width:"100",label:"部门"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"delivery_type",width:"100",label:"发货类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.delivery_type?a("span",[e._v("三包出库发货")]):e._e(),2==t.row.delivery_type?a("span",[e._v("返胎出库发货")]):e._e(),3==t.row.delivery_type?a("span",[e._v("旧胎退回发货")]):e._e()]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"business_time",width:"88",label:"业务日期"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"logistics_name",width:"120",label:"物流公司"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"logistics_number",width:"120",label:"物流票号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"right",property:"postage_price",width:"120",label:"运费金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("priceFormat")(t.row.postage_price))+" ")]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"postage_type_name",width:"88",label:"运费结算方式"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"driver_name",width:"120",label:"司机"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"license_number",width:"120",label:"车牌号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"add_user_name",width:"84",label:"操作员"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"auditor_name",width:"84",label:"审核人"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"auditor_status_name",width:"70",label:"审核状态"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"send_mode_name",width:"160",label:"发货方式"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"print_times",width:"64",label:"打印次数"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"auditor_time",width:"140",label:"审核时间"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"add_time",width:"140",label:"单据时间"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"remark","min-width":"130",label:"备注"}})],1)],1),a("div",{staticClass:"page_container"},[a("div",{staticClass:"pageNumber"},[e._v("每页显示")]),a("el-pagination",{staticClass:"erp-pagination",attrs:{"current-page":e.goPage,"page-size":e.pageSize1,"page-sizes":e.per_page,layout:"total,sizes, prev, pager, next,jumper",prevText:"上一页",nextText:"下一页",total:e.TableData.total},on:{"size-change":e.handleSizeChange,"update:currentPage":function(t){e.goPage=t},"update:current-page":function(t){e.goPage=t},"current-change":e.handleCurrentChange}})],1)]),e.printingStatusGet?a("div",[a("lodopDelivery",{ref:"lodopDelivery",attrs:{title:e.title},on:{Search:e.onSearch}})],1):e._e()])},l=[],s=a("5530"),r=(a("d3b7"),a("159b"),a("d81d"),a("99af"),a("a15b"),a("4de4"),a("caad"),a("2532"),a("2f62")),o=a("65b0"),n=a("78d2"),p={name:"instorageOtherDeliveryOtherDeliveryIndex",data:function(){return{lock:0,outerVisible:!1,pages:1,title:null,TableData:{tableData:[],allList:{},total:10},timeValue2:null,params:{auditor_status:0,delivery_type:0},availableStocksFlag:1,tableHeight:600}},components:{lodopDelivery:n["a"]},computed:Object(s["a"])({},Object(r["c"])(["otherDeliveryIndexGet","printingStatusGet"])),methods:Object(s["a"])(Object(s["a"])({},Object(r["b"])(["printingStatus","otherDeliveryAddACT","otherdeliveryIndexACT","otherDeliverySeeACT"])),{},{getSummaries:function(e){var t=this,a=e.columns,i=(e.data,[]);return a.forEach((function(e,a){i[a]=1!==a?8===a?t.TableData.allList.total_postage_price:"":"合计"})),i},printF:function(){for(var e=this,t=!1,a=!1,i=this.multipleSelection,l=1;l<i.length;l++)if(i[l-1].company_id!=i[l].company_id){t=!0;break}for(l=0;l<i.length;l++)if(0==i[l].is_auth){a=!0;break}if(this.multipleSelection.length)if(t)this.$message({message:"请选择相同公司单据进行打印",type:"warning"});else if(a)this.$message({message:"已选择单据有个别公司未有打印权限",type:"warning"});else{var s=!0,r=[];if(this.multipleSelection.forEach((function(e){1==e.after_auditor_print_status&&2!=e.auditor_status&&(r.push(e.delivery_sn),s=!1)})),s)this.multipleSelection.forEach((function(t){e.lodopDe(t,!0)}));else{var o=r.map((function(e,t){return"".concat(t+1,".").concat(e)}));this.$alert('以下未审核的单据不可打印：<br/>\n            <div style="color:#e6a23c">\n              '.concat(o.join("，"),"\n            <div>"),"提示",{dangerouslyUseHTMLString:!0})}}else this.$message({message:"请选择单据进行打印",type:"warning"})},lodopDe:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.printingStatus(!0),this.$set(this,"title","otherShipmentToPrint"),this.$nextTick((function(){t.$refs.lodopDelivery.printPdf({other_delivery_id:e.other_delivery_id},a)}))},postageTypeChange:function(e){e&&(this.params.postage_type_name=this.postageTypeList.filter((function(t){return t.postage_type_id===e}))[0].postage_type_name)},logisticsChange:function(e){e&&(this.params.logistics_name=this.logisticsList.filter((function(t){return t.logistics_id===e}))[0].logistics_name)},departmentChange:function(e){e&&(this.params.department_name=this.departmentList.filter((function(t){return t.department_id===e}))[0].department_name)},selectRowChangeBg:function(e){var t=e.row;e.rowIndex;return this.multipleSelection.length&&this.multipleSelection.map((function(e){return e.other_delivery_id})).includes(t.other_delivery_id)?"background:#d4e1ee":""},companyChange:function(e){""!=e&&(this.params.company_name=this.companyList.filter((function(t){return t.company_id===e}))[0].company_name),this.$set(this.params,"logistics_id",""),Object(o["a"])(this,this.params)},logogram:function(){this.outerVisible=!0},audit:function(e,t){if(this.multipleSelection.length<1)return this.$message({message:"请选择需要".concat(t,"的信息"),type:"warning"}),!1;for(var a=[],i=0;i<this.multipleSelection.length;i++)a.push(this.multipleSelection[i].other_delivery_id);var l=a.toString(),s={examineID:"other_delivery_id",eachData:{other_delivery_id:l},examineApi:e,list:{UrlApi:"getOtherDeliveryList",data:this.TableData}};this.$common.examineFun(s)},addF:function(e){this.otherDeliveryAddACT({other_delivery_id:e?e.other_delivery_id:null,params:this.params,goPage:this.goPage,pageSize:this.pageSize}),this.$router.push({path:"/inventory/otherdelivery/otherDeliveryAdd"})},onReset:function(){this.$set(this,"params",{is_zero:0,auditor_status:0,delivery_type:0}),this.timeValue=[],this.timeValue2=null,this.$set(this,"searchParams",{params:{},TableData:this.TableData,API:"getOtherDeliveryList",vm:this}),Object(o["g"])(this.searchParams,2)},timeF:function(){this.timeValue&&2==this.timeValue.length?(this.params.business_start_time=this.timeValue[0],this.params.business_end_time=this.timeValue[1]):this.params.business_start_time=this.params.business_end_time="",this.timeValue2&&2==this.timeValue2.length?(this.params.auditor_start_time=this.timeValue2[0],this.params.auditor_end_time=this.timeValue2[1]):this.params.auditor_start_time=this.params.auditor_end_time=""},onSearch:function(){this.timeF(),Object.assign(this.searchParams.params,this.params,{page:1}),this.otherdeliveryIndexACT({goPage:this.goPage,params:this.params,pageSize:this.pageSize}),Object(o["g"])(this.searchParams,2)},deletes:function(){var e={deleID:"other_delivery_id",deleSelect:this.multipleSelection,deleApi:"delOtherDelivery",list:{UrlApi:"getOtherDeliveryList",data:this.TableData,esData:{page:this.pages}}};this.$common.deletes(e,"删除",this)},examine:function(e,t){1==t.is_auth&&(this.otherDeliverySeeACT({other_delivery_id:t.other_delivery_id,params:this.params,goPage:this.goPage,pageSize:this.pageSize}),this.$router.push({path:"/inventory/otherdelivery/otherDeliverySee"}))},handleSizeChange:function(e){Object.assign(this.searchParams.params,{per_page:e,page:1}),Object(o["g"])(this.searchParams,2)},handleCurrentChange:function(e){Object.assign(this.searchParams.params,{page:e}),Object(o["g"])(this.searchParams,2)}}),mounted:function(){if(this.otherDeliveryIndexGet&&this.otherDeliveryIndexGet.params){if(this.otherDeliveryIndexGet.params.business_start_time){var e=this.otherDeliveryIndexGet.params,t=e.business_start_time,a=e.business_end_time;this.timeValue=this.timeValue.concat([t,a])}this.$set(this,"params",this.otherDeliveryIndexGet.params),Object(o["l"])(this,this.otherDeliveryIndexGet.params)}this.$set(this,"searchParams",{params:this.params,TableData:this.TableData,API:"getOtherDeliveryList",vm:this}),Object(o["g"])(this.searchParams,2,o["o"].bind(this)),window.onresize=o["o"].bind(this)}},c=p,m=a("2877"),u=Object(m["a"])(c,i,l,!1,null,"eb141546",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0cc035.b0a8a80a.js.map