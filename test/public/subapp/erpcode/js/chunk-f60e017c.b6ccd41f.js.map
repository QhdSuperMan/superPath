{"version":3,"sources":["webpack://erpcode-[name]/./src/components/element/sales/salesoutmanage/salesout/config/salesoutModifyCommon.vue?a43c","webpack://erpcode-[name]/./src/components/element/sales/salesoutmanage/salesout/config/salesoutModify.js","webpack://erpcode-[name]/src/components/element/sales/salesoutmanage/salesout/config/salesoutModifyCommon.vue","webpack://erpcode-[name]/./src/components/element/inventory/outstorage/salesoutstorage/salesoutModify.vue?5aae","webpack://erpcode-[name]/./src/components/element/sales/salesoutmanage/salesout/config/salesoutModifyCommon.vue?13dc","webpack://erpcode-[name]/./src/components/element/sales/salesoutmanage/salesout/config/salesoutModifyCommon.vue?f267","webpack://erpcode-[name]/./src/components/element/sales/salesoutmanage/salesout/config/salesoutModifyCommon.vue","webpack://erpcode-[name]/src/components/element/inventory/outstorage/salesoutstorage/salesoutModify.vue","webpack://erpcode-[name]/./src/components/element/inventory/outstorage/salesoutstorage/salesoutModify.vue?c186","webpack://erpcode-[name]/./src/components/element/inventory/outstorage/salesoutstorage/salesoutModify.vue"],"names":["getBusinessName","list","row","vm","i","length","business_type_id","business_type_name","getIndexShop","box","$refs","xTable","getTableData","fullData","binding_sign","giftUpdate","that","num","undefined","$message","warning","mixins","data","dialogArryrow","tableColumn","type","width","title","field","showOverflow","editRender","autofocus","slots","edit","scope","h","a","rowIndex","$event","changeBusinessType","businessTypeList","map","val","default","addDisabled","name","getParams","_this","params","company_id","customer_id","warehouse_id","bill_type","isTotal","showObj","goods_id","goods_name","factory_code","shorthand_code","available_stocks","stocks","getIcon","icon","iconMethod","goSelectShop","events","change","this","changeGoods","autoselect","getOutIcon","batchInvok","dialogTableBatch","production_time","batch_id","batch","warehouse_name","allocation_id","allocation_name","Object","assign","input","is_price","handleEdit","confirm","getSlots","getHistryPrice","value","$rowIndex","column","headerAlign","align","formatter","sortable","tableData","methods","activeMethod","step","property","policy_id","salesorderAddGet","order_id","electricityOrderStatus","ec_type","footerMethod","columns","columnIndex","includes","totalPrice","$utils","sum","countSettlementPrice","Number","isInteger","toFixed","tool_Config","id","zoom","setting","storage","immediate","indexchart","historylist","currentScope","rowgoodsid","timeValueks","Date","referenceDisabled","styleArry","dialogChooseProducts","stategoods","saveNumBatchObj","loading","loading_demo","addChandise2","dialogBillVisible","autoGetBatch","multipleSelection","dataTableIndex","dataTable","datas","dialogTableVisible","defaultArea","batchMultiple","sumprice","hideClass","index","TableData","defaultAreaName","customerNaN","username","localStorage","getItem","tkgoPage","loadSign","props","components","getAreaList","sourceBill","historicalPrices","formData","d","date","month","day","year","join","handleCurrentChange","unit_price","is_erp","flag","business_time","goods_info","JSON","stringify","$axios","method","url","$api","getPromotionPolicyListCx","copyRow","$getRowIndex","concat","_XID","insertAt","records","updateFooter","clearGift","copyArr","arr","forEach","allData","filter","loadData","batchListInitalList","setFiled","key","getSaveBatchId","getAvailable_stocks","rowObj","igFiledArr","indexOf","obj","chooseProducts_confirm","getArr","item","real_num","goods_num","loadTime","newGoods_info","push","setTimeout","goodsdialog","toFixedTwo","_isNaN","parseFloat","rideCount","num1","num2","divCount","opens","tableRowClassName","notAdd","renderHeaderpro","goBack","sourceType","$router","focusprice","$axMethod","datableMeth","$set","getSummaries","param","sums","values","reduce","prev","curr","orderAdd","unshift","next","realNum","sales_price","discount_unit_price","discount_price","total_price","keyArr","xtable","remove","handleSelectionChangelist","closeDialog","departmentF","department_name","departmentList","changeDefaultArea","cityList","addressId","province_id","city_id","area_id","paymentMethodChange","payment_method","TableDataRef","clearValidate","settlementCustomerChange","settlement_customer_name","logisticsList","logisticsChanges","logistics_name","warehousechange","warehouseList","referenceOrder","dialogformInline","realNums","subtotal_price","renderHeader","addRow","rowClassName","backgroundColor","color","valArry","_value","replace","settlement_price","price","goodsPrice","discount_unitPrice","taxrate","revenue_price","no_revenue_price","BuoyancyFactor","order","$publicFution","computeTotal","callback","reloadRow","minus","major","deleteRow","removeSelecteds","batchChange","seeMoneyDetail","path","accountloglist_showIndexACT","goPage","pageSize","remark","result","code","defaultBatch","unit_name","hasEmptyData","submitInfo","console","log","regroup","arry","allocationObj","element","operation","is_info","objs","foo","catch","clickEnd","parse","newParams","order_goods_id","sale_price","$baseData","preSubmit","clearActived","some","tk","$confirm","submit","formName","state","validate","valid","sumbitStack","previous","current","confirmButtonText","cancelButtonText","initialize","formatData","company_name","dealLogistics","settlement_customer_id","logistics_id","pushObj","mounted","$route","query","outstock_id","authority","getNormalOutstockInfoPublics","max","employee_id","business_id","employee_name","business_name","Documents_operation","eval","status","render","_vm","_h","$createElement","_c","_self","attrs","staticRenderFns","_v","_s","staticClass","on","ref","rules","companyListInvok","model","$$v","expression","_l","class","clienteleListInvok","customer_name","contact_name","customer_mobile","province_name","city_name","area_name","department_id","DepartmentListInvok","directives","rawName","staticStyle","logisticsInvok","delivery_demand_id","getDeliveryDemandListInvok","delivery_demand_name","hand_over_id","getHandoverListInvok","hand_over_name","outstock_type_id","warehouseInvok","trigger","selected","isArrow","isDel","isTab","isEdit","mode","autoClear","nativeOn","apply","arguments","_f","rebate_balance","credit_balance","deposits","_e","add_user_name","add_time","auditor_name","auditor_time","update_user_name","update_time","slot","b_add","batchList","component","common"],"mappings":"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","file":"js/chunk-f60e017c.b6ccd41f.js","sourcesContent":["export * from \"-!../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./salesoutModifyCommon.vue?vue&type=style&index=0&id=d3d284c6&lang=less&scoped=true&\"","// 获取业务员\nfunction getBusinessName(list, row, vm) {\n  if (list) {\n    for (var i = 0; i < list.length; i++) {\n      if (row.business_type_id === list[i].business_type_id) {\n        return list[i].business_type_name + getIndexShop(row, vm)\n      }\n    }\n  }\n}\n// 获取是哪行的赠品\nfunction getIndexShop(row, vm) {\n  if (row.business_type_id === 10003) {\n    var box = vm.$refs.xTable.getTableData().fullData;\n    for (var i = 0; i < box.length; i++) {\n      if (box[i].binding_sign === row.binding_sign && box[i].business_type_id !== 10003) {\n        return '(行' + (i + 1) + ')'\n      }\n    }\n  }\n  return ''\n}\n// 赠品是否可以修改方法\nfunction giftUpdate(row, that) {\n  var num = 0;\n  var box = that.$refs.xTable.getTableData().fullData;\n  for (var i = 0; i < box.length; i++) {\n    if (row.binding_sign !== undefined && box[i].binding_sign === row.binding_sign) {\n      num++\n    }\n    if (num >= 2 && row.business_type_id === 10003) {\n      that.$message.warning('当前满足促销政策不可修改')\n      return false\n    }\n  }\n  return true\n}\nconst mixins = {\n  data() {\n    return {\n      dialogArryrow: null,//多批次弹出框row\n      tableColumn: [{\n        type: 'checkbox',\n        width: 40\n      },\n      {\n        type: 'index',\n        title: '序号',\n        width: 50\n      },\n      {\n        title: '业务类型', // 同element-ui的 lable\n        field: 'business_type_id', // 同element的 prop   property \n        width: 110,\n        showOverflow: true,\n        editRender: {\n          type: 'default',\n          autofocus: '.el-input__inner'\n        },\n        slots: {\n          edit: (scope, h) => {\n            var { row, rowIndex } = scope\n            var a =\n              <el-select v-model={row.business_type_id}\n                onChange={($event) => {\n                  row.business_type_id = $event\n                  this.changeBusinessType(scope)\n                }}>\n                {\n                  this.businessTypeList.map((val) => {\n                    return <el-option label={val.business_type_name} value={val.business_type_id} key={val.business_type_id}\n                    ></el-option>\n                  })\n                }\n              </el-select>\n            return [\n              a\n            ]\n          },\n          default: ({ row, rowIndex }, h) => {\n            var a\n            a = <span>{getBusinessName(this.businessTypeList, row, this)}</span>\n            if (!this.addDisabled) {\n              return [<span>{row.business_type_name}</span>]\n            } else {\n              return [\n                a\n              ]\n            }\n\n          }\n        }\n      },\n      {\n        field: 'goods_id',\n        title: '商品编号',\n        width: 80,\n        showOverflow: true\n      },\n      {\n        field: 'goods_name',\n        title: '商品名称',\n        width: 300,\n        showOverflow: true,\n        editRender: {\n          name: 'vGoods',\n          getParams: (scope) => {\n            let _this = this\n            return {\n              params: {\n                company_id: this.params.company_id || 0,\n                customer_id: this.params.customer_id || 0,\n                warehouse_id: this.params.warehouse_id || 0,\n                bill_type: 2,\n                isTotal: 1,\n              },\n              showObj: {\n                goods_id: \"商品编号\",\n                goods_name: \"商品名称\",\n                factory_code: \"工厂代码\",\n                shorthand_code: \"速记码\",\n                available_stocks: \"可用库存\",\n                stocks: \"在库库存\"\n              },\n              getIcon() { // 渲染器内部图标 返回一个数组 (非必传 默认为空)\n                return [{\n                  icon: 'el-icon-plus', // 渲染器图标 基于element图标 (非必传 默认为查询图标)\n                  iconMethod() { // 渲染器图标点击方法 (非必传)\n                    _this.goSelectShop(scope)\n                  }\n                }]\n              },\n            }\n          },\n          events: {\n            change: this.changeGoods\n          }\n        }\n      },\n      {\n        field: 'batch',\n        title: '年周/批次',\n        width: 200,\n        showOverflow: true,\n        editRender: {\n          autoselect: true,\n          name: 'vBatch',\n          getParams: (scope) => {\n            let _this = this\n            return {\n              params: {\n                company_id: this.params.company_id,\n                warehouse_id: this.params.warehouse_id,\n                goods_id: scope.row.goods_id,\n                bill_type: 2\n              },\n              getOutIcon() { // 渲染器内部图标 返回一个数组 (非必传 默认为空)\n                if (!_this.addDisabled) {\n                  return [{\n                    icon: 'icon-copy', // 渲染器图标 基于element图标 (非必传 默认为查询图标)\n                    iconMethod() { // 渲染器图标点击方法 (非必传)\n                      _this.dialogArryrow = scope\n                      _this.batchInvok(scope.row, '', 2)\n                      _this.dialogTableBatch = true\n                    }\n                  }]\n                } else {\n                  return []\n                }\n              },\n            }\n          },\n          events: {\n            change: (val, { row }) => {\n              if (!row.goods_id) {\n                return false\n              }\n              const {\n                production_time,\n                batch_id,\n                batch,\n                stocks,\n                available_stocks,\n                warehouse_id,\n                warehouse_name,\n                allocation_id,\n                allocation_name\n              } = val;\n              Object.assign(row, {\n                production_time,\n                batch_id,\n                batch,\n                stocks,\n                available_stocks,\n                warehouse_id,\n                warehouse_name,\n                allocation_id,\n                allocation_name\n              });\n            }\n          }\n        }\n      },\n      {\n        field: 'production_time',\n        title: '生产日期',\n        showOverflow: true,\n        width: 80\n      },\n      {\n        field: 'real_num',\n        title: '数量',\n        showOverflow: true,\n        editRender: {\n          autoselect: true,\n          name: 'number',\n          events: {\n            input: (scope) => {\n              scope.row.is_price = 1\n              this.handleEdit(scope)\n            },\n            change: (scope) => {\n              this.confirm(scope)\n            }\n          }\n        }\n      },\n      {\n        field: 'unit_price',\n        title: '售价',\n        showOverflow: true,\n        width: 150,\n        editRender: {\n          autoselect: true,\n          name: 'Vinput',\n          getSlots: (scope) => {\n            if (this.addDisabled) {\n              this.dialogArryrow = scope\n              return <el-link onClick={() => { this.getHistryPrice(scope) }}>历史价</el-link>\n            }\n          },\n          events: {\n            input: (scope) => {\n              scope.row.is_price = 1\n              this.handleEdit(scope)\n            },\n            change: (scope) => {\n              this.confirm(scope)\n            }\n          },\n\n        }\n      }, {\n        field: 'sales_price',\n        title: '商品金额',\n        showOverflow: true,\n        editRender: {\n          autoselect: true,\n          name: 'Vinput',\n          events: {\n            input: (scope) => {\n              scope.row.is_price = 1\n              this.handleEdit(scope)\n            },\n            change: (scope, value) => {\n              var { row, $rowIndex, column } = scope\n              this.confirm(scope)\n            }\n          },\n        }\n      }, {\n        field: 'discount_unit_price',\n        title: '优惠单价',\n        showOverflow: true,\n        editRender: {\n          autoselect: true,\n          name: 'vNumber',\n          events: {\n            input: (scope) => {\n              this.handleEdit(scope)\n            }\n          },\n        }\n      }, {\n        field: 'discount_price',\n        title: '优惠金额',\n        showOverflow: true,\n        editRender: {\n          autoselect: true,\n          name: 'vNumber',\n          events: {\n            input: (scope) => {\n              this.handleEdit(scope)\n            }\n          },\n        }\n      }, {\n        field: 'total_price',\n        showOverflow: true,\n        title: '小计金额'\n      },\n      {\n        title: '门店优惠金额',\n        field: 'shop_discount_price',\n        headerAlign: \"right\", // 表头对齐方式\n        align: \"right\", // 列对齐方式\n        width: 100\n      },\n      {\n        title: '原价金额',\n        field: 'original_price',\n        headerAlign: \"right\", // 表头对齐方式\n        align: \"right\", // 列对齐方式\n        width: 100\n      },\n      {\n        field: 'revenue_price',\n        showOverflow: true,\n        title: '税额',\n        editRender: {\n          autoselect: true,\n          name: 'Vinput',\n          formatter: 'Positive',\n          events: {\n            input: (scope) => {\n              this.handleEdit(scope)\n            }\n          },\n        }\n      }, {\n        field: 'no_revenue_price',\n        showOverflow: true,\n        title: '不含税金额'\n      }, {\n        field: 'warehouse_name',\n        title: '仓库',\n        showOverflow: true,\n        width: 120,\n      }, {\n        field: 'allocation_name',\n        title: '货位',\n        showOverflow: true,\n        sortable: true,\n        width: 120,\n      }, {\n        field: 'unit_name',\n        title: '单位',\n        showOverflow: true,\n        width: 110\n      }, {\n        field: 'policy_name',\n        title: '促销政策',\n        showOverflow: true,\n        width: 150\n      }, {\n        title: '工厂代码',\n        field: 'factory_code',\n        showOverflow: true,\n        width: 120\n      },\n      {\n        title: '速记码',\n        field: 'shorthand_code',\n        showOverflow: true,\n        width: 120\n      },\n      {\n        field: 'remark',\n        title: '备注',\n        width: 150,\n        showOverflow: true,\n        editRender: {\n          name: 'Vinput',\n          formatter: 'String'\n        }\n      }\n      ],\n      tableData: [],\n    }\n  },\n  methods: {\n    activeMethod({ column, row }) {\n      var step = true;\n      if (!this.addDisabled) {\n        if (column.property === 'real_num' || column.property === 'batch' || column.property === 'revenue_price') {\n          if (!row.goods_name) {\n            this.$message.warning('请先选择商品')\n            return false\n          } else if (column.property === 'real_num' && this.electricityOrderStatus &&\n            (this.ec_type != \"sourcing_order\" && this.ec_type != 'liancai_order')) {//如果是电商订单则数量不允许输入\n            this.$message.warning('电商订单不允许部分出库！')\n            return false\n          }\n          // step = giftUpdate(row, this)\n        }\n        else {\n          this.$message.warning('引用订单只能修改数量，批次和税额')\n          step = false\n        }\n        return step;\n      } else {\n        if (column.property === \"goods_name\") {\n          if (row.business_type_id === 10003) {\n            step = giftUpdate(row, this)\n          }\n        }\n        if (column.property === \"batch\") {\n          if (!row.goods_id) {\n            this.$message.warning('请先选择商品')\n            step = false\n          }\n        }\n        if (column.property === \"sales_price\" || column.property === 'unit_price') {\n          if (row.business_type_id === 10007 && row.policy_id) {\n            this.$message.warning('特价不允许修改售价和商品金额')\n            step = false\n          }\n        }\n        if (column.property === 'discount_unit_price' || column.property === 'discount_price') {\n          if (row.business_type_id !== 10001 && row.policy_id) {\n            this.$message.warning('当前满足促销政策不可修改')\n            step = false\n          }\n        }\n        if (column.property === 'discount_price' || column.property === 'discount_unit_price' || column.property ===\n          'sales_price' || column.property === 'unit_price') {\n          if (row.business_type_id === 10001) {\n            if (!row.goods_name) {\n              this.$message.warning('请先选择商品')\n              step = false\n            }\n          }\n          if (row.business_type_id === 10002 || row.business_type_id === 10003) {\n            this.$message.warning('赠品不可修改')\n            step = false\n          }\n        }\n        if (column.property === 'real_num') {\n          if (!row.goods_name) {\n            this.$message.warning('请先选择商品')\n            return false\n          }\n          step = giftUpdate(row, this)\n        }\n        if (column.property === 'business_type_id') {\n          if (this.salesorderAddGet && this.salesorderAddGet.order_id) {\n            this.$message.warning('修改不可编辑')\n            return false\n          }\n          if (row.policy_id) {\n            this.$message.warning('当前满足促销政策不可修改')\n            return false\n          }\n          step = giftUpdate(row, this)\n        }\n        return step;\n      }\n    },\n    footerMethod({ columns, data }) {\n      return [\n        columns.map((column, columnIndex) => {\n          if (columnIndex === 1) {\n            return \"合计\";\n          }\n          if (\n            [\"total_price\", \"discount_price\", \"real_num\"].includes(\n              column.property\n            )\n          ) {\n            if (column.property == 'total_price') {\n              this.totalPrice = this.$utils.sum(data, column.property);\n              this.countSettlementPrice();\n            }\n            var num = this.$utils.sum(data, column.property);\n            return Number.isInteger(num) ? num : num.toFixed(2)\n          }\n          return null;\n        })\n      ];\n    }\n  }\n}\nexport default mixins","<template>\n  <!-- 新增销售出库页面 -->\n  <div>\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item>{{ sourceType === 1 ? '销售管理' : '库存管理'}}</el-breadcrumb-item>\n      <el-breadcrumb-item class=\"attrbute\">\n        <span @click=\"goBack\">销售出库</span>\n      </el-breadcrumb-item>\n      <el-breadcrumb-item>修改销售出库</el-breadcrumb-item>\n    </el-breadcrumb>\n    <el-form :inline=\"true\" :model=\"params\" ref=\"TableDataRef\">\n      <el-form-item label=\"销售组织\" size=\"mini\" prop=\"company_id\" :rules=\"rules.company_id\">\n        <el-select v-model=\"params.company_id\" placeholder=\"请选择\" @focus=\"companyListInvok\" disabled filterable>\n          <el-option v-for=\"item in companyList\" :key=\"item.company_id\" :label=\"item.company_name\" :value=\"item.company_id\">\n            <span :class=\"item.type==1 ? 'optionStyle': ''\">{{ item.company_name }}</span>\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"单据号\" size=\"mini\">\n        <el-input v-model=\"params.outstock_sn\" disabled></el-input>\n      </el-form-item>\n      <el-form-item label=\"业务日期\" size=\"mini\" prop=\"business_time\" :rules=\"rules.business_time\">\n        <el-date-picker v-model=\"params.business_time\" type=\"date\" :disabled=\"referenceDisabled\" value-format=\"yyyy-MM-dd\">\n        </el-date-picker>\n      </el-form-item>\n      <el-form-item label=\"客户名称\" size=\"mini\" prop=\"customer_id\" :rules=\"rules.customer_id\">\n        <el-select v-model=\"params.customer_id\" filterable ref=\"customerId\" placeholder=\"请先选择客户\" clearable disabled @focus=\"clienteleListInvok\" :loading=\"loading\" remote :remote-method=\"clienteleListInvok\">\n          <ul class=\"customer customer-ul4 customer-ul2\">\n            <li>客户编号</li>\n            <li>客户名称</li>\n            <li>联系人</li>\n            <li>联系电话</li>\n            <li>区域</li>\n          </ul>\n          <el-option v-for=\"item in customerList\" :key=\"item.customer_id\" :label=\"item.customer_name\" :value=\"item.customer_id\">\n            <ul class=\"customer customer-ul4\">\n              <li :title=\"item.customer_id\">{{ item.customer_id }}</li>\n              <li :title=\"item.customer_name\">{{ item.customer_name }}</li>\n              <li :title=\"item.contact_name\">{{item.contact_name}}</li>\n              <li :title=\"item.customer_mobile\">{{item.customer_mobile}}</li>\n              <li>{{item.province_name}}/{{item.city_name}}/{{item.area_name}}</li>\n            </ul>\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"部门\" size=\"mini\">\n        {{(function(){if(params.department_id == 0)params.department_id = null})()}}\n        <el-select clearable v-model=\"params.department_id\" :disabled='electricityOrderStatus == 1' placeholder=\"请选择\" @change=\"departmentF\" filterable @focus=\"DepartmentListInvok\">\n          <el-option :label=\"item.department_name\" :value=\"item.department_id\" :key=\"item.department_id\" v-for=\"item in departmentList\"></el-option>\n        </el-select>\n      </el-form-item>\n      <!-- <div v-show=\"hideClass\"> -->\n      <el-form-item label=\"业务员\" size=\"mini\" v-show=\"hideClass\">\n        <erpEmployee v-model=\"params.business_id\" :fatherParams='params' modelLabel=\"business_name\"  :disabled=\"referenceDisabled\" :searchParams=\"{ company_id: params.company_id }\" />\n      </el-form-item>\n      <el-form-item label=\"收货人\" size=\"mini\" v-show=\"hideClass\">\n        <el-input v-model=\"params.consignee_name\" maxlength=\"7\" :disabled=\"referenceDisabled\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"电话\" size=\"mini\" v-show=\"hideClass\">\n        <el-input v-model=\"params.consignee_mobile\" :disabled=\"referenceDisabled\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"所属区域\" size=\"mini\" class=\"wauto\" style=\"min-width:312px\" v-show=\"hideClass\">\n        <getAreaList v-if=\"defaultArea &&addDisabled\" @changeDefaultArea=\"changeDefaultArea\" :defaultArea=\"defaultArea\" />\n        <el-input v-model=\"defaultAreaName\" disabled v-else></el-input>\n      </el-form-item>\n      <el-form-item label=\"详细地址\" size=\"mini\" v-show=\"hideClass\">\n        <el-input v-model=\"params.address\" :disabled=\"referenceDisabled\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"关联单据号\" size=\"mini\" style=\"cursor:pointer\" v-show=\"hideClass\">\n        <el-input v-model=\"params.order_sn\" disabled></el-input>\n      </el-form-item>\n      <el-form-item label=\"回款方式\" size=\"mini\">\n        {{(function(){if(params.payment_method == 0)params.payment_method = null})()}}\n        <el-select v-model=\"params.payment_method\" @change=\"paymentMethodChange\" :disabled=\"referenceDisabled\">\n          <el-option label=\"客户自结\" :value=\"1\">客户自结</el-option>\n          <el-option label=\"物流代收\" :value=\"2\">物流代收</el-option>\n          <el-option label=\"电商结算\" :value=\"3\">电商结算</el-option>\n        </el-select>\n\n      </el-form-item>\n      <el-form-item label=\"物流公司\" size=\"mini\" v-show=\"hideClass\" prop=\"settlement_customer_id\" :rules=\"rules.settlement_customer_id\" v-if='params.payment_method === 2'>\n        <!-- {{(function(){if(params.settlement_customer_id == 0)params.settlement_customer_id = null})()}} -->\n        <el-select clearable v-model=\"params.settlement_customer_id\" filterable @focus=\"logisticsInvok\" @change=\"logisticsChanges\" :filter-method=\"logisticsInvok\">\n          <el-option v-for=\"item in logisticsList\" :label=\"item.logistics_name\" :value=\"item.logistics_id\" :key=\"item.logistics_id\">\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"物流公司\" size=\"mini\" v-show=\"hideClass\" prop=\"settlement_customer_id\" v-else>\n        <!-- {{(function(){if(params.settlement_customer_id == 0)params.settlement_customer_id = null})()}} -->\n        <el-select clearable v-model=\"params.settlement_customer_id\" filterable @focus=\"logisticsInvok\" @change=\"logisticsChanges\" :filter-method=\"logisticsInvok\">\n          <el-option v-for=\"item in logisticsList\" :label=\"item.logistics_name\" :value=\"item.logistics_id\" :key=\"item.logistics_id\">\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"送货需求\" size=\"mini\" v-show=\"hideClass\">\n        {{(function(){if(params.delivery_demand_id == 0)params.delivery_demand_id = null})()}}\n        <el-select clearable v-model=\"params.delivery_demand_id\" @focus=\"getDeliveryDemandListInvok\" :disabled=\"referenceDisabled\">\n          <el-option v-for=\"item in deliveryDemandList\" :label=\"item.delivery_demand_name\" :value=\"item.delivery_demand_id\" :key=\"item.delivery_demand_id\">\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"交货方式\" size=\"mini\" v-show=\"hideClass\">\n        {{(function(){if(params.hand_over_id == 0)params.hand_over_id = null})()}}\n        <el-select clearable v-model=\"params.hand_over_id\" @focus=\"getHandoverListInvok\" :disabled=\"referenceDisabled\">\n          <el-option v-for=\"item in handoverList\" :label=\"item.hand_over_name\" :value=\"item.hand_over_id\" :key=\"item.hand_over_id\">\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"出库类型\" size=\"mini\" v-show=\"hideClass\">\n        {{(function(){params.outstock_type_id = 10002})()}}\n        <el-input value=\"销售出库\" disabled></el-input>\n      </el-form-item>\n      <el-form-item label=\"仓库名称\" size=\"mini\" v-show=\"hideClass\">\n        {{(function(){if(params.warehouse_id == 0)params.warehouse_id = null})()}}\n        <el-select clearable v-model=\"params.warehouse_id\" @focus=\"warehouseInvok\" @change=\"warehousechange\">\n          <el-option v-for=\"item in warehouseList\" :label=\"item.warehouse_name\" :value=\"item.warehouse_id\" :key=\"item.warehouse_id\">\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"打印次数\" size=\"mini\" v-show=\"hideClass\">\n        <el-input v-model=\"params.print_times\" disabled></el-input>\n      </el-form-item>\n      <el-form-item label=\"单据状态:\" size=\"mini\" v-show=\"hideClass\">\n        <el-input v-model=\"params.auditor_status_name\" disabled></el-input>\n      </el-form-item>\n      <el-form-item label=\"摘要\" size=\"mini\" v-show=\"hideClass\">\n        <el-input v-model=\"params.abstract\" type=\"text\" maxlength=\"300\" placeholder=\"摘要最多300个字\"></el-input>\n      </el-form-item>\n      <!-- </div> -->\n      <p style=\"text-align:center;font-size: 14px;cursor: pointer;color:#409eff\" @click=\"hideClass=!hideClass\">\n        <i :class=\"hideClass?'el-icon-caret-top':'el-icon-caret-bottom'\"></i>\n        <span>{{hideClass?'收缩':'展开'}}</span>\n      </p>\n    </el-form>\n    <div class=\"add_delet\">\n      <el-button icon=\"el-icon-circle-plus-outline\" type=\"primary\" @click=\"referenceOrder\" class=\"addBtn\" size=\"mini\" v-show=\"referenceDisabled\">参照订单</el-button>\n      <el-button icon=\"el-icon-circle-plus-outline\" type=\"primary\" @click=\"addRow\" class=\"addBtn\" size=\"mini\" title=\"选择客户\" v-show=\"addDisabled\">增行</el-button>\n      <el-button plain icon=\"el-icon-delete\" @click=\"deleteRow\" size=\"mini\">删行</el-button>\n    </div>\n    <div class=\"table_container\">\n      <vxe-grid border ref=\"xTable\" show-overflow='tooltip' show-footer=\"true\" :toolbar=\"tool_Config\" :sort-config=\"{trigger:'cell'}\" :row-style=\"rowClassName\" size=\"mini\" :footer-method=\"footerMethod\" max-height=\"500px\" :data=\"TableData\" resizable height=\"500px\" column-min-width=\"100\" :mouse-config=\"{selected: true}\" :columns=\"tableColumn\" :keyboard-config=\"{isArrow: true, isDel: false, isTab: true, isEdit: true}\" :edit-config=\"{trigger: 'click', mode: 'cell',autoClear:false,activeMethod:activeMethod}\"></vxe-grid>\n    </div>\n    <br>\n    <div v-if=\"addDisabled\">\n      <el-form :model=\"params\" class=\"db priceFoot\" ref=\"TableDataRef2\" :inline=\"true\">\n        <el-form-item label=\"本单使用返利：\">\n          <el-input v-model=\"params.rebate_price\" type=\"number\" class=\"element_input\" @blur=\"countSettlementPrice(2)\" @keyup.native=\"value => countSettlementPrice(1)\"></el-input>\n          <span class=\"yeban\">余额:{{params.rebate_balance?params.rebate_balance:0|priceFormat}}</span>\n        </el-form-item>\n        <el-form-item label=\"本单使用授信：\">\n          <el-input v-model=\"params.credit_price\" class=\"element_input\" @blur=\"countSettlementPrice(2)\" @keyup.native=\"value => countSettlementPrice(1)\" type=\"number\"></el-input>\n          <span class=\"yeban\">余额:{{params.credit_balance?params.credit_balance:0|priceFormat}}</span>\n        </el-form-item>\n        <el-form-item label=\"本单使用预收：\">\n          <el-input v-model=\"params.deposits_price\" class=\"element_input\" type=\"number\" @blur=\"countSettlementPrice(2)\" @keyup.native=\"value => countSettlementPrice(1)\"></el-input>\n          <span class=\"yeban\">余额:{{params.deposits?params.deposits:0|priceFormat}}</span>\n        </el-form-item>\n        <el-form-item label=\"客户余额：\">\n          <el-input v-model=\"params.balance\" class=\"element_input\" disabled size=\"mini\"></el-input>\n          <el-button type=\"primary\" @click=\"seeMoneyDetail\">查看往来</el-button>\n        </el-form-item>\n        <el-form-item label=\"本单结算金额：\" size=\"mini\">\n          <el-input v-model=\"params.settlement_price\" disabled class=\"element_input\" type=\"number\"></el-input>\n        </el-form-item>\n      </el-form>\n    </div>\n    <div>\n      <span style='font-size: 14px;'>开票信息：</span>\n      <el-input type='textarea' v-model=\"params.invoice_info\" placeholder=\"请输入开票金额\" style='width: 50%;vertical-align: text-top;'></el-input>\n    </div>\n    <div class=\"refundauditFoot\">\n      <span>制单人：{{params.add_user_name ? params.add_user_name : username}}</span>\n      <span>单据时间：{{params.add_time}}</span>\n      <span>审核人：{{params.auditor_name}}</span>\n      <span>审核时间：{{params.auditor_time}}</span>\n      <span>修改人：{{params.update_user_name}}</span>\n      <span>修改时间：{{params.update_time}}</span>\n    </div>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"goBack\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"preSubmit( 'TableDataRef',false)\">保 存</el-button>\n      <el-button type=\"primary\" @click=\"preSubmit( 'TableDataRef',true)\" v-if=\"authority.b_add==1\">保存并新增</el-button>\n    </div>\n    <!-- 新增多批次 -->\n    <el-dialog title=\"多批次\" :visible.sync=\"dialogTableBatch\" width=\"40%\">\n      <el-table :highlight-current-row=\"true\" tooltip-effect=\"light\" border :data=\"batchList\" max-height=\"300\" @selection-change=\"handleSelectionChangelist\">\n        <el-table-column :show-overflow-tooltip=\"true\" type=\"selection\" fixed=\"left\" align=\"center\" width=\"44\"></el-table-column>\n        <el-table-column :show-overflow-tooltip=\"true\" property=\"batch\" width=\"100\" label=\"年周/批次\" align=\"right\">\n        </el-table-column>\n        <el-table-column :show-overflow-tooltip=\"true\" property=\"warehouse_name\" label=\"仓库名称\" align=\"right\">\n        </el-table-column>\n        <el-table-column :show-overflow-tooltip=\"true\" property=\"allocation_name\" label=\"货位名称\" align=\"right\">\n        </el-table-column>\n        <el-table-column :show-overflow-tooltip=\"true\" property=\"production_time\" label=\"生产日期\" align=\"right\">\n        </el-table-column>\n        <el-table-column :show-overflow-tooltip=\"true\" property=\"stocks\" label=\"在库库存\" align=\"right\">\n        </el-table-column>\n        <el-table-column :show-overflow-tooltip=\"true\" property=\"available_stocks\" label=\"批次可用库存\" align=\"right\">\n        </el-table-column>\n      </el-table>\n      <div style=\"text-align: center;padding: 10px;\">\n        <el-button @click=\"orderAdd(dialogArryrow)\" size=\"small\" style=\"width:100px;\" type=\"primary\">确定</el-button>\n      </div>\n    </el-dialog>\n\n    <!-- 选择商品 -->\n    <goodsPopout v-if='dialogChooseProducts' @close='dialogChooseProducts = false' :searchParams='{company_id:params.company_id,\n          warehouse_id:params.warehouse_id,\n          customer_id: params.customer_id,\n          warehouse_name:params.warehouse_name}' @submit=\"chooseProducts_confirm\" />\n    <!-- 参照订单 -->\n    <div v-if=\"dialogBillVisible\">\n      <el-dialog :close-on-click-modal=\"false\" title=\"选择订单\" class=\"dialogForm\" :visible.sync=\"dialogBillVisible\" width=\"1300px\">\n        <source-bill @dialogformInline=\"dialogformInline\" :pardata=\"params\" @closedialog=\"closeDialog\"></source-bill>\n      </el-dialog>\n    </div>\n    <historicalPrices v-if='dialogTableVisible' v-model=\"dialogTableVisible\" @sumbitData='handleCurrentChange' :searchParams='{ company_id: params.company_id,goods_id:currentScope.row && currentScope.row.goods_id }' :company_id='params.company_id' />\n  </div>\n</template>\n<script>\nimport getAreaList from \"common/components/public/getAreaList\";\nimport sourceBill from \"./sourceBill.vue\";\nimport mixin from \"./salesoutModify.js\";\nimport { mapActions } from \"vuex\";\nimport { opthionList, repertory } from \"common/utils/public_function/commonUtils\";\nimport historicalPrices from \"@/components/element/sales/config/historicalPrices.vue\";\nexport default {\n  mixins: [mixin],\n  data() {\n    return {\n      //按钮控制\n      tool_Config: {\n        id: \"JYBDXSCK\",\n        zoom: true,\n        setting: {\n          // 动态列配置\n          storage: true, // 是否存在本地\n          immediate: true, // 是否实时生效\n        },\n      },\n      indexchart: {},\n      historylist: {}, //历史售价弹框对象\n      currentScope: null, // 当前操作的对象\n      rowgoodsid: \"\",\n      timeValueks: [new Date(), new Date()], //三个月的时间范围\n      dialogTableBatch: false,\n      referenceDisabled: false, //引用订单按钮是否可以点击\n      styleArry: [],\n      //按钮控制\n      dialogChooseProducts: false, //商品多选\n      stategoods: false,\n      saveNumBatchObj: {},\n      loading: false,\n      loading_demo: false,\n      addChandise2: false,\n      addDisabled: false, //增行按钮是否可点击,等于true的时候不可点击\n      dialogBillVisible: false, //引用订单弹框\n      autoGetBatch: true, //是否自动带出批号\n      multipleSelection: [],\n      dataTableIndex: null,\n      dataTable: [],\n      ec_type: \"\",\n      electricityOrderStatus: \"\",\n      datas: null,\n      dialogTableVisible: false,\n      defaultArea: [0], //默认的区域id\n      totalPrice: 0, //合并计算总价\n      binding_sign: 1, //商品绑定的唯一标志\n      batchMultiple: [], //批次选择\n      sumprice: null,\n      businessTypeList: [\n        { business_type_name: \"特价\", business_type_id: 10007 },\n        { business_type_name: \"满折\", business_type_id: 10006 },\n        { business_type_name: \"满减\", business_type_id: 10005 },\n        { business_type_name: \"满赠\", business_type_id: 10004 },\n        { business_type_name: \"赠品\", business_type_id: 10003 },\n        { business_type_name: \"客户赠胎\", business_type_id: 10002 },\n        { business_type_name: \"商品订购\", business_type_id: 10001 },\n      ],\n      hideClass: true,\n      index: null,\n      TableData: [],\n      defaultAreaName: \"\", // 所属区域\n      customerNaN: null,\n      username: localStorage.getItem(\"realname\"),\n      tkgoPage: 1,\n      loadSign: true,\n    };\n  },\n  props: [\"sourceType\"],\n  components: {\n    getAreaList, //区域列表\n    sourceBill, //来源单号\n    historicalPrices,\n  },\n  methods: {\n    ...mapActions([\"accountloglist_showIndexACT\"]),\n    formData(date) {\n      var d = new Date(date),\n        month = \"\" + (d.getMonth() + 1),\n        day = \"\" + d.getDate(),\n        year = d.getFullYear();\n\n      if (month.length < 2) month = \"0\" + month;\n      if (day.length < 2) day = \"0\" + day;\n      return [year, month, day].join(\"-\");\n    },\n    getHistryPrice(scope) {\n      this.currentScope = scope;\n      this.dialogTableVisible = true;\n    },\n    handleCurrentChange(val) {\n      this.currentScope.row.unit_price = val.unit_price;\n      this.currentScope.row.is_price = 1;\n      this.confirm(this.currentScope);\n      this.handleEdit(this.currentScope);\n    },\n    // 促销政策逻辑\n    confirm(scope) {\n      // 电商订单不请求接口\n      if (this.params.is_erp === 1) {\n        return;\n      }\n      if (this.order_id) {\n        return;\n      }\n      var { row, $rowIndex } = scope;\n      if (\n        row.business_type_id !== 10003 &&\n        row.business_type_id !== 10002 &&\n        this.params.customer_id &&\n        row.goods_id &&\n        this.params.business_time\n      ) {\n        this.flag = true;\n        // 如果是赠品和赠胎不调取促销政策的接口 客户存在 商品存在才掉接口\n        let params = {\n          customer_id: this.params.customer_id,\n          company_id: this.params.company_id,\n          business_time: this.params.business_time,\n          goods_info: [\n            {\n              is_price: row.is_price,\n              binding_sign: row.binding_sign,\n              business_type_id: row.business_type_id,\n              goods_id: row.goods_id,\n              goods_num: row.real_num,\n              goods_name: row.goods_name,\n              sales_price: row.unit_price ? row.unit_price : 0,\n              goods_price: row.sales_price,\n            },\n          ],\n        };\n        params.goods_info = JSON.stringify(params.goods_info);\n        this.$axios({\n          method: \"post\",\n          url: this.$api.getPromotionPolicyListCx,\n          data: params,\n        })\n          .then((res) => {\n            this.flag = false;\n            if (res.data.code == 200) {\n              let ss = [];\n              res.data.data.forEach((item) => {\n                ss.push({\n                  binding_sign: item.binding_sign,\n                  discount_price: item.discount_price,\n                  discount_unit_price: item.discount_unit_price,\n                  business_type_id: item.business_type_id,\n                  sales_price: item.goods_price, //商品金额\n                  unit_price: item.sales_price, //售价\n                  total_price: item.subtotal_price, //小计金额\n                  policy_id: item.policy_id,\n                  real_num: item.goods_num,\n                  policy_name: item.policy_name,\n                  goods_name: item.goods_name,\n                  goods_id: item.goods_id,\n                  unit_name: item.unit_name,\n                });\n              });\n\n              this.clearGift([row]); // 清除赠品 单行编辑清除赠品\n              if (ss.length != 0) {\n                var box = [\n                  \"binding_sign\",\n                  \"discount_price\",\n                  \"discount_unit_price\",\n                  \"business_type_id\",\n                  \"total_price\",\n                  \"sales_price\",\n                  \"unit_price\",\n                  \"policy_id\",\n                  \"policy_name\", //增加促销政策的名称展示\n                ];\n                box.forEach((val) => {\n                  row[val] = ss[0][val];\n                });\n                this.handleEdit(scope);\n                if (ss.length >= 2) {\n                  //带有赠品的情况\n                  let a = ss.splice(1, ss.length);\n                  this.copyRow(row, a);\n                }\n              }\n            }\n          })\n          .catch(() => {\n            this.flag = false;\n          });\n      }\n    },\n    // 复制行 插入行\n    copyRow(row, records) {\n      var index = this.$refs.xTable.$getRowIndex(row);\n      var box = this.$refs.xTable.getTableData().fullData.concat([]);\n      delete row._XID;\n      if (index < box.length - 1) {\n        this.$refs.xTable.insertAt(records ? records : row, box[index + 1]);\n      } else {\n        this.$refs.xTable.insertAt(records ? records : row, -1);\n      }\n      this.$refs.xTable.updateFooter();\n    },\n    // 清除绑定赠品，赠胎\n    clearGift(arr) {\n      var copyArr = arr.concat([]),\n        allData = this.$refs.xTable.getTableData().fullData;\n      copyArr.forEach((val) => {\n        if (val.binding_sign !== undefined && val.business_type_id !== 10003) {\n          allData = allData.filter((twoVal) => {\n            return (\n              val.binding_sign !== twoVal.binding_sign ||\n              twoVal.business_type_id !== 10003\n            );\n          });\n        }\n      });\n      this.$refs.xTable.loadData(allData);\n    },\n    // 添加 batchList 列表字段\n    batchListInitalList(obj, rowObj = {}, igFiledArr = []) {\n      let setFiled = [\n        \"batch\",\n        \"batch_id\",\n        \"warehouse_id\",\n        \"warehouse_name\",\n        \"allocation_id\",\n        \"allocation_name\",\n        \"production_time\",\n        \"sale_price\",\n        \"available_stocks\",\n      ]; // 自动设置选中项\n      setFiled.forEach((key) => {\n        if (key == \"available_stocks\") {\n          // 进入修改页面验证需要使用\n          let getSaveBatchId = this.saveNumBatchObj[obj[\"batch_id\"]];\n          let getAvailable_stocks = obj[key];\n          if (getSaveBatchId) {\n            getAvailable_stocks = getSaveBatchId;\n          }\n          rowObj[key] = getAvailable_stocks;\n        } else {\n          if (igFiledArr.indexOf(key) < 0) {\n            rowObj[key] = obj[key];\n          }\n        }\n      });\n      return rowObj;\n    },\n    // 商品选择完毕 并关闭弹框\n    chooseProducts_confirm(getArr) {\n      getArr.forEach((item, index) => {\n        item.real_num = item.goods_num;\n        // item.unit_price = item.sale_price\n        item.business_type_id = 10001;\n        this.handleEdit({ row: item, column: { property: \"real_num\" } });\n        // batchList 数组中需要使用的字段\n        let batchListObj = this.batchListInitalList(item);\n        this.$set(item, \"batchList\", [batchListObj]);\n      });\n      // 关闭窗口\n      this.dialogChooseProducts = false;\n      let loadTime = 0;\n      // 如果一次添加大于十条数据就进行页面加载\n      if (getArr.length >= 10) {\n        this.loading_demo = true;\n        loadTime = 200;\n      }\n      let newGoods_info = [];\n      // 删除 TableData.goods_info 中得商品信息为 空得字段\n      this.TableData.forEach((item) => {\n        if (item.goods_name) {\n          newGoods_info.push(item);\n        }\n      });\n      // 防止添加过多行后页面卡顿\n      setTimeout(() => {\n        // 把获取的数组放入到增加行中\n        this.$set(this, \"TableData\", newGoods_info.concat(getArr));\n        setTimeout(() => {\n          this.loading_demo = false;\n        });\n      }, loadTime);\n    },\n    goodsdialog(val) {\n      this.addChandise2 = true;\n    },\n    // 保留两位小数\n    toFixedTwo(num) {\n      const _isNumber = Number(num);\n      const _isNaN = isNaN(_isNumber);\n      if (!_isNaN) {\n        num = parseFloat(num).toFixed(2);\n      }\n      return num;\n    },\n    // 乘法计算\n    rideCount(num1, num2) {\n      return this.toFixedTwo(num1 * num2);\n    },\n    // 除法计算\n    divCount(sum, num) {\n      return this.toFixedTwo(sum / num);\n    },\n    //  打开选择商品得弹框\n    goSelectShop() {\n      if (this.params.customer_id) {\n        this.dialogChooseProducts = true;\n      } else {\n        this.$message.warning(\"请先选择客户！\");\n      }\n    },\n    opens() {\n      this.stategoods = true;\n    },\n    tableRowClassName({ row, rowIndex }) {\n      if (row.notAdd) {\n        return \"warning-row\";\n      }\n      return \"\";\n    },\n    renderHeaderpro() {\n      return (\n        <el-tooltip class=\"item\" content=\"Bottom center\" effect=\"light\">\n          <p slot=\"content\">生产日期列后期将会隐藏，同时新增商品入库日期列</p>\n          <span\n            class=\"el-icon-question\"\n            style=\"cursor:pointer;font-weight:bold;\"\n          >\n            生产日期\n          </span>\n        </el-tooltip>\n      );\n    },\n    goBack() {\n      if (this.sourceType === 1) {\n        this.$router.push({ path: \"/sales/salesout\" });\n      } else {\n        this.$router.push({ path: \"/inventory/salesoutstorage\" });\n      }\n    },\n    focusprice(scope) {\n      let { index = scope.$rowIndex, row = scope.row } = scope;\n      if (!row.goods_id) {\n        this.dataTable = [];\n        return false;\n      }\n      this.$axMethod\n        .getHistoryOrder({\n          goods_id: row.goods_id,\n          customer_id: this.params.customer_id,\n        })\n        .then((res) => {\n          this.dataTable = res.data.data;\n          this.dialogTableVisible = true;\n          this.dataTableIndex = index;\n        });\n    },\n    datableMeth(value) {\n      let row = this.dialogArryrow.row;\n      this.$set(row, \"unit_price\", Number(value.unit_price));\n      this.handleEdit({ row: row, column: { property: \"unit_price\" } });\n      this.dialogTableVisible = false;\n    },\n    getSummaries(param) {\n      // 合并计算\n      this.datas = param;\n      const { columns, data } = param;\n      const sums = [];\n      columns.forEach((column, index) => {\n        if (index === 1) {\n          sums[index] = \"合计\";\n          return;\n        }\n        if ([\"total_price\", \"discount_price\"].includes(column.property)) {\n          const values = data.map((item) => Number(item[column.property] || 0));\n          sums[index] = values.reduce((prev, curr) => {\n            const value = Number(curr);\n            return Number(prev + curr);\n          }, 0);\n\n          if (\"total_price\" == column.property) {\n            this.totalPrice = Number(sums[index]);\n            this.countSettlementPrice();\n          }\n          sums[index] = sums[index].toFixed(2);\n        }\n        if (column.property === \"real_num\") {\n          const values = data.map((item) => Number(item[column.property]));\n          sums[index] = values.reduce((prev, curr) => {\n            const value = Number(curr) || 0;\n            return Number(prev + value);\n          }, 0);\n        }\n      });\n      return sums;\n    },\n    orderAdd(scope) {\n      let row = scope.row,\n        index = scope.$rowIndex;\n      let keyArr = [\n        \"order_goods_id\",\n        \"unit_credit_price\",\n        \"unit_rebate_price\",\n        \"unit_deposits_price\",\n        \"remark\",\n      ];\n      this.index = index; //把当前哪一行点击批次进行存储\n      let realNum = row.real_num; //列表实际出库数量20\n      //available_stocks 弹框可用库存\n      if (row.batch_id) {\n        //如果一开始就没有选择批次\n        this.batchMultiple.unshift(row);\n        var obj = {};\n        this.batchMultiple = this.batchMultiple.reduce((item, next) => {\n          obj[next.batch_id]\n            ? \"\"\n            : (obj[next.batch_id] = true && item.push(next));\n          return item;\n        }, []);\n      }\n      this.batchMultiple.map((val, index) => {\n        if (realNum >= val.available_stocks) {\n          val.real_num = val.available_stocks;\n          val.business_type_name = row.business_type_name;\n          val.business_type_id = row.business_type_id;\n          realNum = realNum - val.available_stocks;\n          val.unit_price = row.unit_price;\n          val.sales_price = Number(val.real_num * val.unit_price).toFixed(2); //商品金额等于商品数量*商品单价\n          val.discount_unit_price = row.discount_unit_price; //优惠单价\n          val.discount_price = Number(\n            val.discount_unit_price * val.real_num\n          ).toFixed(2); //优惠金额等于优惠单价*数量\n          val.total_price = val.sales_price - val.discount_price; //小计金额等于商品金额-优惠金额\n          val.warehouse_id = val.warehouse_id;\n          val.allocation_id = val.allocation_id;\n          val.allocation_name = val.allocation_name;\n          keyArr.forEach((item, index) => {\n            val[item] = row[item];\n          });\n        } else if (!realNum) {\n          val.real_num = 0;\n          val.unit_price = row.unit_price;\n          val.business_type_name = row.business_type_name;\n          val.business_type_id = row.business_type_id;\n          val.sales_price = Number(val.real_num * val.unit_price).toFixed(2); //商品金额等于商品数量*商品单价\n          val.discount_unit_price = row.discount_unit_price; //优惠单价\n          val.discount_price = Number(\n            val.discount_unit_price * val.real_num\n          ).toFixed(2); //优惠金额等于优惠单价*数量\n          val.total_price = val.sales_price - val.discount_price; //小计金额等于商品金额-优惠金额\n          val.warehouse_id = val.warehouse_id;\n          val.allocation_id = val.allocation_id;\n          val.allocation_name = val.allocation_name;\n          keyArr.forEach((item, index) => {\n            val[item] = row[item];\n          });\n        } else {\n          val.real_num = realNum;\n          realNum = 0;\n          val.unit_price = row.unit_price;\n          val.business_type_name = row.business_type_name;\n          val.business_type_id = row.business_type_id;\n          val.sales_price = Number(val.real_num * val.unit_price).toFixed(2); //商品金额等于商品数量*商品单价\n          val.discount_unit_price = row.discount_unit_price; //优惠单价\n          val.discount_price = Number(\n            val.discount_unit_price * val.real_num\n          ).toFixed(2); //优惠金额等于优惠单价*数量\n          val.total_price = val.sales_price - val.discount_price; //小计金额等于商品金额-优惠金额\n          val.warehouse_id = val.warehouse_id;\n          val.allocation_id = val.allocation_id;\n          val.allocation_name = val.allocation_name;\n          keyArr.forEach((item, index) => {\n            val[item] = row[item];\n          });\n        }\n        return val;\n      });\n      let xtable = this.$refs.xTable;\n      xtable.insertAt(this.batchMultiple, row);\n      xtable.remove(row);\n      this.dialogTableBatch = false;\n    },\n    handleSelectionChangelist(val) {\n      if (val.length != 0) {\n        this.batchMultiple = val;\n      }\n    },\n    closeDialog(val) {\n      this.dialogBillVisible = false;\n    },\n    departmentF(val) {\n      if (val) {\n        this.params.department_name = this.departmentList.filter(\n          (obj) => obj.department_id == val\n        )[0].department_name;\n      }\n    },\n    changeDefaultArea(addressId) {\n      this.params.cityList = addressId.join(\",\");\n      this.params.province_id = addressId[0];\n      this.params.city_id = addressId[1];\n      this.params.area_id = addressId[2];\n    },\n    paymentMethodChange(val) {\n      if (this.params.payment_method === 2) {\n        setTimeout(() => {\n          this.$refs.TableDataRef.validateField([\"settlement_customer_id\"]);\n        }, 50);\n      } else {\n        this.$refs.TableDataRef.clearValidate(\"settlement_customer_id\");\n      }\n    },\n    // 回款方式 1\n    settlementCustomerChange(val) {\n      if (val) {\n        this.params.settlement_customer_name = this.logisticsList.filter(\n          (obj) => obj.logistics_id == val\n        )[0].logistics_name;\n      } else {\n        this.params.settlement_customer_name = \"\";\n      }\n    },\n    logisticsChanges(val) {\n      if (val) {\n        this.params.logistics_name = this.logisticsList.filter(\n          (obj) => obj.logistics_id == val\n        )[0].logistics_name;\n      } else {\n        this.params.logistics_name = \"\";\n      }\n    },\n    warehousechange(val) {\n      if (!val) return;\n      this.params.warehouse_name = this.warehouseList.filter(\n        (obj) => obj.warehouse_id == val\n      )[0].warehouse_name;\n    },\n    referenceOrder() {\n      this.dialogBillVisible = true;\n    },\n    dialogformInline(val, num) {\n      let { goods_info, ec_type, is_erp } = val;\n      this.sumprice = num; //引用订单单据商品数量\n      this.ec_type = ec_type;\n      this.electricityOrderStatus = is_erp;\n      goods_info.forEach((val) => {\n        val.realNums = val.real_num;\n        val.sales_price = val.real_num * val.unit_price;\n        val.total_price = val.subtotal_price;\n        if (val.batch_id) {\n          this.batchList.push({\n            batch: val.batch,\n            batch_id: val.batch_id,\n            warehouse_name: val.warehouse_name,\n            warehouse_id: val.warehouse_id || \"\", // 2019/11/26 添加仓库ID\n            allocation_name: val.allocation_name,\n            available_stocks: val.available_stocks,\n            stocks: val.stocks,\n          });\n        }\n      });\n      this.defaultArea = [val.province_id, val.city_id, val.area_id];\n      this.$set(this, \"TableData\", goods_info);\n      this.dialogBillVisible = false;\n      this.$refs.xTable.updateFooter();\n    },\n    renderHeader(h, { column, $index }) {\n      //新增修改显示必填项\n      return (\n        <span class=\"start\" style=\"cursor:pointer\">\n          {column.label}\n        </span>\n      );\n    },\n    addRow() {\n      let xtable = this.$refs.xTable;\n      xtable\n        .createRow({\n          binding_sign: this.binding_sign++,\n          discount_unit_price: \"\",\n          outstock_goods_id: 0,\n          sales_price: \"\",\n          discount_price: \"\",\n          unit_price: \"\",\n          real_num: \"\",\n          remark: \"\",\n          business_type_id: 10001,\n        })\n        .then((newRow) => {\n          xtable.insertAt(newRow, -1);\n        });\n    },\n    rowClassName({ $rowIndex, column, columnIndex, $columnIndex }) {\n      if (\n        this.styleArry.includes($rowIndex + 1 + \"\") ||\n        this.styleArry.includes($rowIndex + 1)\n      ) {\n        return {\n          backgroundColor: \"#fdecea\",\n          color: \"#5F5F5F\",\n        };\n      }\n    },\n    // input/blur 事件 type 1 input事件 2 blur事件\n    countSettlementPrice(type = 1) {\n      // 本单使用返利+本单使用授信+本单结算金额=订单的合计金额；\n      let valArry = [\"rebate_price\", \"credit_price\", \"deposits_price\"];\n      valArry.forEach((value) => {\n        let _value = this.params[value];\n        if (_value < 0) {\n          _value = _value.replace(/[^0-9.]/, \"\");\n        } else if (_value == undefined) {\n          _value = \"0.00\";\n        }\n        if (!_value && type == 2) _value = \"0.00\"; // 失焦\n        if (type == 2) {\n          _value = Number(_value).toFixed(2);\n        }\n        this.$set(this.params, value, _value);\n      });\n      let settlement_price =\n        Number(this.totalPrice) -\n        Number(this.params.rebate_price) -\n        Number(this.params.credit_price) -\n        Number(this.params.deposits_price);\n      this.$set(this.params, \"settlement_price\", settlement_price.toFixed(2));\n    },\n    handleEdit({ row, column }) {\n      if (column.property === \"goods_name\") {\n        return;\n      }\n      let _this = this;\n      var obj = {\n        num: \"real_num\", // 商品数量的key\n        price: \"unit_price\", // 商品价格的key\n        goodsPrice: \"sales_price\", // 商品总金额的key  数量 * 单价\n        discount_unitPrice: \"discount_unit_price\", // 优惠单价的 key\n        discount_price: \"discount_price\", // 优惠金额的key\n        totalPrice: \"total_price\", // 商品小计金额\n        taxrate: \"taxrate\", // 税率\n        revenue_price: \"revenue_price\", // 税额\n        no_revenue_price: \"no_revenue_price\", // 不纳税额\n        BuoyancyFactor: \"BuoyancyFactor\", //上调比例\n      };\n      var order = true;\n      if (this.order_id) {\n        order = false;\n      }\n      this.$publicFution.computeTotal(row, obj, column.property, this, {\n        callback: () => {\n          let xtable = _this.$refs.xTable;\n          xtable.reloadRow(row);\n          xtable.updateFooter();\n        },\n        minus: true, //允许负数\n        major: order,\n      });\n      // 合并计算\n    },\n    deleteRow() {\n      let xtable = this.$refs.xTable;\n      xtable.removeSelecteds();\n      if (!xtable.getTableData().fullData.length) {\n        if (this.order_id) {\n          this.referenceDisabled = true; //引用订单按钮是否可以点击\n        } else {\n          this.addDisabled = true; //增行按钮是否可点击,等于true的时候不可点击\n        }\n      }\n      xtable.updateFooter();\n      this.styleArry = [];\n    },\n    batchChange(val, index) {\n      const {\n        production_time,\n        batch_id,\n        batch,\n        stocks,\n        available_stocks,\n        warehouse_id,\n        warehouse_name,\n        allocation_id,\n        allocation_name,\n      } = val;\n      Object.assign(val, {\n        production_time,\n        batch_id,\n        batch,\n        stocks,\n        available_stocks,\n        warehouse_id,\n        warehouse_name,\n        allocation_id,\n        allocation_name,\n      });\n    },\n    seeMoneyDetail() {\n      this.$router.push({\n        path: \"/custom/accountloglist\",\n      });\n      this.accountloglist_showIndexACT({\n        params: this.params,\n        goPage: this.goPage,\n        pageSize: this.pageSize,\n      });\n    },\n    changeGoods(value, scope) {\n      let row = scope.row;\n      Object.assign(row, value, {\n        discount_unit_price: \"\",\n        sales_price: \"\",\n        discount_price: \"\",\n        unit_price: \"\",\n        real_num: \"\",\n        total_price: \"\",\n        remark: \"\",\n        business_type_id: 10001,\n      });\n      if (this.autoGetBatch) {\n        value.batch = null;\n        value.batch_id = null;\n        value.warehouse_name = null;\n        value.allocation_name = null;\n        Object.assign(row, value);\n        this.batchInvok(row, \"\", 2, (result) => {\n          if (result.code === 200) {\n            var obj = result.data[0];\n            let defaultBatch = {\n              batch: obj.batch || \"\",\n              batch_id: obj.batch_id || \"\",\n              warehouse_id: obj.warehouse_id || \"\", // 2019/11/26 添加仓库ID\n              warehouse_name: obj.warehouse_name || \"\",\n              allocation_name: obj.allocation_name || \"\",\n              allocation_id: obj.allocation_id || \"\", // 没有更新货位id会报货位不存在\n            };\n            this.batchList.push(defaultBatch);\n            Object.assign(row, defaultBatch);\n          }\n        });\n      } else {\n        this.$set(row, \"unit_name\", value.unit_name);\n        this.$set(row, \"goods_id\", value.goods_id);\n        this.$set(row, \"batch\", null);\n        this.$set(row, \"unit_price\", value.unit_price ? value.unit_price : 0);\n      }\n      //若为赠品\n      if ([10002, 10003].includes(row.business_type_id)) {\n        this.$set(row, \"sales_price\", 0);\n        this.$set(row, \"total_price\", 0);\n        this.$set(row, \"discount_unit_price\", 0);\n      }\n      this.confirm(scope);\n      var hasEmptyData = true;\n      let xtable = this.$refs.xTable;\n      xtable.getTableData().fullData.forEach((item) => {\n        if (!item.goods_id) hasEmptyData = false;\n      });\n      if (hasEmptyData) {\n        this.addRow();\n      }\n    },\n    submitInfo(state) {\n      let vm = this;\n      let arry = [\n        \"serial_number\",\n        \"binding_sign\",\n        \"batch_id\",\n        \"goods_id\",\n        \"allocation_id\",\n        \"goods_name\",\n        \"goods_sn\",\n        \"warehouse_id\",\n        \"warehouse_name\",\n        \"batch\",\n        \"production_time\",\n        \"real_num\",\n        \"order_goods_id\",\n        \"sales_price\",\n        \"total_price\",\n        \"outstock_goods_id\",\n        \"unit_price\",\n        \"cost_price\",\n        \"discount_unit_price\",\n        \"discount_price\",\n        \"business_type_id\",\n        \"business_type_name\",\n        \"unit_credit_price\",\n        \"unit_rebate_price\",\n        \"unit_deposits_price\",\n        \"policy_name\",\n        \"policy_id\",\n        \"factory_code\",\n        \"remark\",\n        \"allocation_id_str\",\n        \"taxrate\",\n        \"revenue_price\",\n        \"no_revenue_price\",\n        \"invoice_info\",\n      ];\n      let TableData = this.$refs.xTable\n        .getTableData()\n        .fullData.concat([])\n        .filter((item) => {\n          return !!item.goods_id;\n        });\n      console.log(TableData.length);\n      if (!TableData.length) {\n        this.$message.warning(\"请先选择商品！\");\n        return false;\n      }\n      let regroup = [];\n      TableData.forEach((element, index) => {\n        regroup.push({});\n        arry.forEach((val) => {\n          if (val == \"allocation_id_str\") {\n            let allocationObj = {};\n            allocationObj[element.allocation_id] = element.real_num;\n            this.$set(regroup[index], val, allocationObj);\n          } else if (val == \"serial_number\") {\n            this.$set(regroup[index], val, index + 1);\n          } else if (val == \"real_num\") {\n            this.$set(regroup[index], val, element[val] ? element[val] : 0);\n          } else if (val == \"outstock_goods_id\") {\n            this.$set(regroup[index], val, element[val] ? element[val] : 0);\n          } else {\n            this.$set(regroup[index], val, element[val] ? element[val] : \"\");\n          }\n        });\n      });\n      this.params.goods_info = JSON.stringify(regroup);\n      let newParams = Object.assign(\n        {},\n        {\n          type: this.referenceDisabled ? 0 : 1,\n          order_type: 0,\n        },\n        this.params\n      );\n      let obj = {\n        company_id: this.params.company_id,\n        goods_info: this.params.goods_info,\n        operation: 1,\n        bill_type: 2,\n        is_info: 0,\n      };\n      let objs = {\n        async foo() {\n          return vm.$axMethod\n            .v2setBillCostControl(obj)\n            .then((res) => {\n              let s = res.data.data;\n              if (res.data.code == 200) {\n                if (s.length > 0) {\n                  if (s[0].bill_setting_status == 0) {\n                    //提醒逻辑\n                    let test = \"\";\n                    s.forEach((item, index) => {\n                      test += index + 1 + \".\" + item.name + \"<br>\";\n                    });\n                    vm.$confirm(\n                      ` <div class=\"colorblue\">${test}</div> <br>以上商品售价低于成本价，是否继续提交？`,\n                      \"提示\",\n                      {\n                        confirmButtonText: \"确定\",\n                        cancelButtonText: \"取消\",\n                        dangerouslyUseHTMLString: true,\n                        showClose: false,\n                        type: \"warning\",\n                        distinguishCancelAndClose: false, // 将取消（点击取消按钮）与关闭（点击关闭按钮或遮罩层、按下 ESC 键）进行区分\n                      }\n                    )\n                      .then(() => {\n                        // throw new Error(\"出错了里面\");\n                        vm.clickEnd(state, newParams);\n                      })\n                      .catch(() => {});\n                  } else {\n                    // 禁止逻辑\n                    vm.$message({\n                      message: \"商品售价低于成本价，保存失败！\",\n                      type: \"warning\",\n                    });\n                    s.forEach((item) => {\n                      vm.styleArry.push(Number(item.serial_number));\n                    });\n                  }\n                } else {\n                  vm.clickEnd(state, newParams);\n                  throw new Error(\"出错了\");\n                }\n              }\n            })\n            .catch((error) => {\n              console.log(error);\n            });\n        },\n      };\n      objs.foo().catch(() => {\n        this.clickEnd(state, newParams);\n      });\n    },\n    clickEnd(state, newParams) {\n      let vm = this;\n      // 校验安全库存金额参数\n      var box = JSON.parse(newParams.goods_info).map((item) => {\n        return {\n          warehouse_id: item.warehouse_id,\n          warehouse_name: item.warehouse_name,\n          allocation_id: item.allocation_id,\n          goods_id: item.goods_id,\n          order_goods_id: item.order_goods_id || 0,\n          sale_price: item.unit_price || 0,\n          batch: item.batch,\n          batch_id: item.batch_id,\n          goods_num: item.real_num,\n        };\n      });\n      // 校验对接车郎中\n      this.$baseData\n        .checkCarDoctor({\n          company_id: this.params.company_id,\n          company_name: this.params.company_name,\n          bill_type: 9,\n          bill_id: this.outstock_id,\n          operation_type: 2,\n          goods_info: JSON.stringify(box),\n        })\n        .then(() => {\n          this.$baseData\n            .checkComputation(JSON.parse(newParams.goods_info), {\n              goods_num: \"real_num\",\n              total_price: \"total_price\",\n              goods_price: \"unit_price\",\n              discounted_price: \"discount_unit_price\",\n            })\n            .then(() => {\n              // 校验安全库存金额\n              this.$axMethod\n                .safetyStockCheck({\n                  bill_sn: this.params.outstock_sn,\n                  bill_id: this.outstock_id,\n                  company_id: this.params.company_id,\n                  company_name: this.params.company_name,\n                  business_time: this.params.business_time,\n                  bill_logogram: \"xsck\",\n                  order_type: 1,\n                  goods_info: JSON.stringify(box),\n                })\n                .then((data) => {\n                  repertory(\n                    this,\n                    {\n                      company_id: this.params.company_id,\n                      goods_info: this.params.goods_info,\n                      status: 1,\n                      type: 1,\n                    },\n                    function () {\n                      vm.$axMethod\n                        .salesOutstockEditOut(newParams)\n                        .then(({ data }) => {\n                          if (data.code == \"200\") {\n                            vm.$message({\n                              message: data.data,\n                              type: \"success\",\n                            });\n                            if (state) {\n                              vm.$router.push({\n                                path: \"/sales/salesout/salesoutAdd\",\n                              });\n                              vm.initialize();\n                              vm.$refs.xTable.remove();\n                              vm.$refs.xTable.updateFooter();\n                              vm.referenceDisabled = false;\n                              vm.addDisabled = true;\n                            } else {\n                              vm.goBack();\n                            }\n                          } else {\n                            vm.styleArry = data.data;\n                          }\n                        });\n                    }\n                  );\n                });\n            });\n        });\n    },\n    preSubmit(formName, state) {\n      this.$refs.xTable.clearActived();\n      let TableData = this.$refs.xTable.getTableData().fullData.concat([]);\n      let tk = \"n\";\n      if (this.params.warehouse_id != undefined) {\n        TableData.some((item) => {\n          if (\n            item.warehouse_id &&\n            item.warehouse_id != this.params.warehouse_id\n          ) {\n            tk = \"y\";\n            return;\n          }\n        });\n      }\n      if (tk == \"y\") {\n        this.$confirm(\n          \"表头仓库和表体商品仓库不一致，是否清空表头仓库\",\n          \"提示\",\n          {\n            confirmButtonText: \"是\",\n            cancelButtonText: \"否\",\n            type: \"warning\",\n            distinguishCancelAndClose: true, // 将取消（点击取消按钮）与关闭（点击关闭按钮或遮罩层、按下 ESC 键）进行区分\n          }\n        )\n          .then(() => {\n            this.params.warehouse_id = \"\";\n            this.submit(formName, state);\n          })\n          .catch((action) => {\n            if (action == \"cancel\") {\n              // 点击否\n              this.submit(formName, state);\n            }\n          });\n      } else {\n        this.submit(formName, state);\n      }\n    },\n    submit(formName, state) {\n      let TableData = this.$refs.xTable.getTableData().fullData.concat([]);\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          let sumbitStack = true;\n          if (!TableData.length) {\n            this.$message.error(\"请先选择订单\");\n            sumbitStack = false;\n          }\n          for (var i = 0; i < TableData.length; i++) {\n            if (!TableData[i].batch_id && TableData[i].goods_id) {\n              this.$message.error(\"请完善批次信息\");\n              sumbitStack = false;\n              return;\n            }\n          }\n          if (!sumbitStack) return false;\n          if (this.addDisabled) {\n            //引用单据\n            let sum = TableData.reduce((previous, current) => {\n              return Number(previous.real_num) + Number(current.real_num);\n            });\n            if (sum < this.sumprice) {\n              var flag = \"y\";\n            }\n            if (\n              sum != this.sumprice &&\n              this.electricityOrderStatus &&\n              this.ec_type != \"sourcing_order\" &&\n              this.ec_type != \"liancai_order\"\n            ) {\n              this.$message.error(\"电商订单不允许部分出库\");\n              return false;\n            }\n            if (flag == \"y\" && this.params.is_erp == 1) {\n              this.$confirm(\"商城订单只允许一次出库，请谨慎操作！\", \"提示\", {\n                confirmButtonText: \"确定\",\n                cancelButtonText: \"取消\",\n                type: \"warning\",\n              })\n                .then(() => {\n                  this.submitInfo(state);\n                })\n                .catch(() => {\n                  this.$message({\n                    type: \"info\",\n                    message: \"已取消新增出库单\",\n                  });\n                });\n            } else {\n              this.submitInfo(state);\n            }\n          } else {\n            this.submitInfo(state);\n          }\n        }\n      });\n    },\n    initialize() {\n      this.$set(this, \"params\", {\n        business_time: this.$publicFution.formatData(new Date()),\n        company_id: Number(localStorage.company_id),\n        company_name: localStorage.company_name,\n        payment_method: 1,\n      });\n      opthionList(this, window.localStorage);\n    },\n    // 处理关于意向物流\n    dealLogistics(data) {\n      if (data.settlement_customer_id) {\n        let pushObj = {\n          logistics_id: data.settlement_customer_id,\n          logistics_name: data.settlement_customer_name,\n        };\n        this.logisticsList.push(pushObj);\n      }\n      if (\n        data.settlement_customer_id &&\n        data.settlement_customer_id != data.settlement_customer_id\n      ) {\n        let pushObj = {\n          logistics_id: data.settlement_customer_id,\n          logistics_name: data.settlement_customer_name,\n        };\n        this.logisticsList.push(pushObj);\n      }\n    },\n  },\n  mounted() {\n    this.order_id = this.$route.query && this.$route.query.order_id;\n    this.outstock_id = this.$route.query && this.$route.query.id;\n    this.authority = JSON.parse(localStorage.getItem(\"authority\"));\n    if (this.order_id) {\n      this.referenceDisabled = true;\n      this.$axios({\n        method: \"get\",\n        url: this.$api.getNormalOutstockInfoPublics,\n        params: {\n          outstock_id: this.outstock_id,\n        },\n      }).then(({ data }) => {\n        let { goods_info, ec_type, is_erp } = data.data;\n        this.ec_type = ec_type;\n        this.electricityOrderStatus = is_erp;\n        var max = 0;\n        goods_info = goods_info.map((val) => {\n          val.is_price = 1;\n          if (val.binding_sign > max) {\n            max = val.binding_sign;\n          }\n          return val;\n        });\n        this.binding_sign = max + 1;\n        this.defaultAreaName = `${data.data.province_name}/${data.data.city_name}/${data.data.area_name}`;\n        this.$set(this, \"TableData\", goods_info);\n        delete data.data.goods_info;\n        this.params = data.data;\n        Object.assign(data.data, {\n          employee_id: data.data.business_id,\n          employee_name: data.data.business_name,\n        });\n        opthionList(this, data.data);\n        if (!this.params.settlement_customer_name) {\n          this.params.settlement_customer_id = null;\n        }\n        this.logisticsList = [\n          {\n            logistics_name: this.params.settlement_customer_name,\n            logistics_id: this.params.settlement_customer_id,\n          },\n        ];\n        // wz alter 20191114 希军提出 引用出库单后回款方式显示数字 故该数组添加对象\n        this.dealLogistics(data.data);\n      });\n      //引用单据\n    } else {\n      this.addDisabled = true;\n      this.$axios({\n        method: \"get\",\n        url: this.$api.getNormalOutstockInfoPublics,\n        params: {\n          outstock_id: this.outstock_id,\n        },\n      })\n        .then(({ data }) => {\n          let { goods_info } = data.data;\n          this.electricityOrderStatus = data.data.is_erp;\n          // 虚拟滚动\n          var max = 0;\n          goods_info = goods_info.map((val) => {\n            val.is_price = 1;\n            if (val.binding_sign > max) {\n              max = val.binding_sign;\n            }\n            return val;\n          });\n          this.binding_sign = max + 1;\n          goods_info.forEach((item) => {\n            item.sales_price = item.sales_price;\n          });\n          this.defaultAreaName = `${data.data.province_name}/${data.data.city_name}/${data.data.area_name}`;\n          this.defaultArea = [\n            data.data.province_id,\n            data.data.city_id,\n            data.data.area_id,\n          ];\n          this.params.cityList = this.defaultArea.join(\",\");\n          this.params.province_id = this.defaultArea[0];\n          this.params.city_id = this.defaultArea[1];\n          this.params.area_id = this.defaultArea[2];\n          this.$set(this, \"TableData\", goods_info);\n          delete data.data.goods_info;\n          this.params = data.data;\n          if (!this.params.settlement_customer_name) {\n            this.params.settlement_customer_id = null;\n          }\n          Object.assign(data.data, {\n            employee_id: data.data.business_id,\n            employee_name: data.data.business_name,\n          });\n          opthionList(this, data.data);\n          if (!this.params.settlement_customer_name) {\n            this.params.settlement_customer_id = null;\n          }\n          this.logisticsList = [\n            {\n              logistics_name: this.params.settlement_customer_name,\n              logistics_id: this.params.settlement_customer_id,\n            },\n          ];\n          // wz alter 20191114 希军提出 引用出库单后回款方式显示数字 故该数组添加对象\n          this.dealLogistics(data.data);\n        })\n        .then(() => {\n          this.$axMethod\n            .getCustomerInfoNEWqx({\n              customer_id: this.params.customer_id,\n              company_id: this.params.company_id,\n            })\n            .then(({ data }) => {\n              if (data.code == 200) {\n                this.$set(this.params, \"balance\", data.data.balance);\n                let arr = [\n                  {\n                    topName: \"rebate_balance\",\n                    bottomName: \"rebate_price\",\n                  },\n                  {\n                    topName: \"credit_balance\",\n                    bottomName: \"credit_price\",\n                  },\n                  {\n                    topName: \"deposits\",\n                    bottomName: \"deposits_price\",\n                  },\n                ];\n                arr.forEach(({ topName, bottomName }) => {\n                  this.$set(\n                    this.params,\n                    topName,\n                    (\n                      Number(data.data[topName]) +\n                      Number(this.params[bottomName])\n                    ).toFixed(2)\n                  );\n                });\n              }\n            });\n        });\n      //直接新增\n    }\n    if (localStorage.Documents_operation) {\n      let state = localStorage.getItem(\"Documents_operation\");\n      this.autoGetBatch = eval(state)[0].status == 1 ? true : false;\n    }\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.el-table .warning-row {\n  background: oldlace;\n}\n\n.el-table .success-row {\n  background: #f0f9eb;\n}\n.table_container {\n  position: relative;\n  /deep/ .vxe-grid.is--maximize {\n    top: 0px;\n    .vxe-toolbar {\n      position: static;\n      // right: 0px;\n      // top: 0px;\n    }\n  }\n  /deep/ .vxe-toolbar {\n    position: absolute;\n    right: 0px;\n    top: -38px;\n  }\n}\n</style>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('common',{attrs:{\"sourceType\":2}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',[_vm._v(_vm._s(_vm.sourceType === 1 ? '销售管理' : '库存管理'))]),_c('el-breadcrumb-item',{staticClass:\"attrbute\"},[_c('span',{on:{\"click\":_vm.goBack}},[_vm._v(\"销售出库\")])]),_c('el-breadcrumb-item',[_vm._v(\"修改销售出库\")])],1),_c('el-form',{ref:\"TableDataRef\",attrs:{\"inline\":true,\"model\":_vm.params}},[_c('el-form-item',{attrs:{\"label\":\"销售组织\",\"size\":\"mini\",\"prop\":\"company_id\",\"rules\":_vm.rules.company_id}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\",\"disabled\":\"\",\"filterable\":\"\"},on:{\"focus\":_vm.companyListInvok},model:{value:(_vm.params.company_id),callback:function ($$v) {_vm.$set(_vm.params, \"company_id\", $$v)},expression:\"params.company_id\"}},_vm._l((_vm.companyList),function(item){return _c('el-option',{key:item.company_id,attrs:{\"label\":item.company_name,\"value\":item.company_id}},[_c('span',{class:item.type==1 ? 'optionStyle': ''},[_vm._v(_vm._s(item.company_name))])])}),1)],1),_c('el-form-item',{attrs:{\"label\":\"单据号\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.params.outstock_sn),callback:function ($$v) {_vm.$set(_vm.params, \"outstock_sn\", $$v)},expression:\"params.outstock_sn\"}})],1),_c('el-form-item',{attrs:{\"label\":\"业务日期\",\"size\":\"mini\",\"prop\":\"business_time\",\"rules\":_vm.rules.business_time}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"disabled\":_vm.referenceDisabled,\"value-format\":\"yyyy-MM-dd\"},model:{value:(_vm.params.business_time),callback:function ($$v) {_vm.$set(_vm.params, \"business_time\", $$v)},expression:\"params.business_time\"}})],1),_c('el-form-item',{attrs:{\"label\":\"客户名称\",\"size\":\"mini\",\"prop\":\"customer_id\",\"rules\":_vm.rules.customer_id}},[_c('el-select',{ref:\"customerId\",attrs:{\"filterable\":\"\",\"placeholder\":\"请先选择客户\",\"clearable\":\"\",\"disabled\":\"\",\"loading\":_vm.loading,\"remote\":\"\",\"remote-method\":_vm.clienteleListInvok},on:{\"focus\":_vm.clienteleListInvok},model:{value:(_vm.params.customer_id),callback:function ($$v) {_vm.$set(_vm.params, \"customer_id\", $$v)},expression:\"params.customer_id\"}},[_c('ul',{staticClass:\"customer customer-ul4 customer-ul2\"},[_c('li',[_vm._v(\"客户编号\")]),_c('li',[_vm._v(\"客户名称\")]),_c('li',[_vm._v(\"联系人\")]),_c('li',[_vm._v(\"联系电话\")]),_c('li',[_vm._v(\"区域\")])]),_vm._l((_vm.customerList),function(item){return _c('el-option',{key:item.customer_id,attrs:{\"label\":item.customer_name,\"value\":item.customer_id}},[_c('ul',{staticClass:\"customer customer-ul4\"},[_c('li',{attrs:{\"title\":item.customer_id}},[_vm._v(_vm._s(item.customer_id))]),_c('li',{attrs:{\"title\":item.customer_name}},[_vm._v(_vm._s(item.customer_name))]),_c('li',{attrs:{\"title\":item.contact_name}},[_vm._v(_vm._s(item.contact_name))]),_c('li',{attrs:{\"title\":item.customer_mobile}},[_vm._v(_vm._s(item.customer_mobile))]),_c('li',[_vm._v(_vm._s(item.province_name)+\"/\"+_vm._s(item.city_name)+\"/\"+_vm._s(item.area_name))])])])})],2)],1),_c('el-form-item',{attrs:{\"label\":\"部门\",\"size\":\"mini\"}},[_vm._v(\" \"+_vm._s((function(){if(_vm.params.department_id == 0){ _vm.params.department_id = null }})())+\" \"),_c('el-select',{attrs:{\"clearable\":\"\",\"disabled\":_vm.electricityOrderStatus == 1,\"placeholder\":\"请选择\",\"filterable\":\"\"},on:{\"change\":_vm.departmentF,\"focus\":_vm.DepartmentListInvok},model:{value:(_vm.params.department_id),callback:function ($$v) {_vm.$set(_vm.params, \"department_id\", $$v)},expression:\"params.department_id\"}},_vm._l((_vm.departmentList),function(item){return _c('el-option',{key:item.department_id,attrs:{\"label\":item.department_name,\"value\":item.department_id}})}),1)],1),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hideClass),expression:\"hideClass\"}],attrs:{\"label\":\"业务员\",\"size\":\"mini\"}},[_c('erpEmployee',{attrs:{\"fatherParams\":_vm.params,\"modelLabel\":\"business_name\",\"disabled\":_vm.referenceDisabled,\"searchParams\":{ company_id: _vm.params.company_id }},model:{value:(_vm.params.business_id),callback:function ($$v) {_vm.$set(_vm.params, \"business_id\", $$v)},expression:\"params.business_id\"}})],1),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hideClass),expression:\"hideClass\"}],attrs:{\"label\":\"收货人\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"maxlength\":\"7\",\"disabled\":_vm.referenceDisabled},model:{value:(_vm.params.consignee_name),callback:function ($$v) {_vm.$set(_vm.params, \"consignee_name\", $$v)},expression:\"params.consignee_name\"}})],1),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hideClass),expression:\"hideClass\"}],attrs:{\"label\":\"电话\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"disabled\":_vm.referenceDisabled},model:{value:(_vm.params.consignee_mobile),callback:function ($$v) {_vm.$set(_vm.params, \"consignee_mobile\", $$v)},expression:\"params.consignee_mobile\"}})],1),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hideClass),expression:\"hideClass\"}],staticClass:\"wauto\",staticStyle:{\"min-width\":\"312px\"},attrs:{\"label\":\"所属区域\",\"size\":\"mini\"}},[(_vm.defaultArea &&_vm.addDisabled)?_c('getAreaList',{attrs:{\"defaultArea\":_vm.defaultArea},on:{\"changeDefaultArea\":_vm.changeDefaultArea}}):_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.defaultAreaName),callback:function ($$v) {_vm.defaultAreaName=$$v},expression:\"defaultAreaName\"}})],1),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hideClass),expression:\"hideClass\"}],attrs:{\"label\":\"详细地址\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"disabled\":_vm.referenceDisabled},model:{value:(_vm.params.address),callback:function ($$v) {_vm.$set(_vm.params, \"address\", $$v)},expression:\"params.address\"}})],1),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hideClass),expression:\"hideClass\"}],staticStyle:{\"cursor\":\"pointer\"},attrs:{\"label\":\"关联单据号\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.params.order_sn),callback:function ($$v) {_vm.$set(_vm.params, \"order_sn\", $$v)},expression:\"params.order_sn\"}})],1),_c('el-form-item',{attrs:{\"label\":\"回款方式\",\"size\":\"mini\"}},[_vm._v(\" \"+_vm._s((function(){if(_vm.params.payment_method == 0){ _vm.params.payment_method = null }})())+\" \"),_c('el-select',{attrs:{\"disabled\":_vm.referenceDisabled},on:{\"change\":_vm.paymentMethodChange},model:{value:(_vm.params.payment_method),callback:function ($$v) {_vm.$set(_vm.params, \"payment_method\", $$v)},expression:\"params.payment_method\"}},[_c('el-option',{attrs:{\"label\":\"客户自结\",\"value\":1}},[_vm._v(\"客户自结\")]),_c('el-option',{attrs:{\"label\":\"物流代收\",\"value\":2}},[_vm._v(\"物流代收\")]),_c('el-option',{attrs:{\"label\":\"电商结算\",\"value\":3}},[_vm._v(\"电商结算\")])],1)],1),(_vm.params.payment_method === 2)?_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hideClass),expression:\"hideClass\"}],attrs:{\"label\":\"物流公司\",\"size\":\"mini\",\"prop\":\"settlement_customer_id\",\"rules\":_vm.rules.settlement_customer_id}},[_c('el-select',{attrs:{\"clearable\":\"\",\"filterable\":\"\",\"filter-method\":_vm.logisticsInvok},on:{\"focus\":_vm.logisticsInvok,\"change\":_vm.logisticsChanges},model:{value:(_vm.params.settlement_customer_id),callback:function ($$v) {_vm.$set(_vm.params, \"settlement_customer_id\", $$v)},expression:\"params.settlement_customer_id\"}},_vm._l((_vm.logisticsList),function(item){return _c('el-option',{key:item.logistics_id,attrs:{\"label\":item.logistics_name,\"value\":item.logistics_id}})}),1)],1):_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hideClass),expression:\"hideClass\"}],attrs:{\"label\":\"物流公司\",\"size\":\"mini\",\"prop\":\"settlement_customer_id\"}},[_c('el-select',{attrs:{\"clearable\":\"\",\"filterable\":\"\",\"filter-method\":_vm.logisticsInvok},on:{\"focus\":_vm.logisticsInvok,\"change\":_vm.logisticsChanges},model:{value:(_vm.params.settlement_customer_id),callback:function ($$v) {_vm.$set(_vm.params, \"settlement_customer_id\", $$v)},expression:\"params.settlement_customer_id\"}},_vm._l((_vm.logisticsList),function(item){return _c('el-option',{key:item.logistics_id,attrs:{\"label\":item.logistics_name,\"value\":item.logistics_id}})}),1)],1),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hideClass),expression:\"hideClass\"}],attrs:{\"label\":\"送货需求\",\"size\":\"mini\"}},[_vm._v(\" \"+_vm._s((function(){if(_vm.params.delivery_demand_id == 0){ _vm.params.delivery_demand_id = null }})())+\" \"),_c('el-select',{attrs:{\"clearable\":\"\",\"disabled\":_vm.referenceDisabled},on:{\"focus\":_vm.getDeliveryDemandListInvok},model:{value:(_vm.params.delivery_demand_id),callback:function ($$v) {_vm.$set(_vm.params, \"delivery_demand_id\", $$v)},expression:\"params.delivery_demand_id\"}},_vm._l((_vm.deliveryDemandList),function(item){return _c('el-option',{key:item.delivery_demand_id,attrs:{\"label\":item.delivery_demand_name,\"value\":item.delivery_demand_id}})}),1)],1),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hideClass),expression:\"hideClass\"}],attrs:{\"label\":\"交货方式\",\"size\":\"mini\"}},[_vm._v(\" \"+_vm._s((function(){if(_vm.params.hand_over_id == 0){ _vm.params.hand_over_id = null }})())+\" \"),_c('el-select',{attrs:{\"clearable\":\"\",\"disabled\":_vm.referenceDisabled},on:{\"focus\":_vm.getHandoverListInvok},model:{value:(_vm.params.hand_over_id),callback:function ($$v) {_vm.$set(_vm.params, \"hand_over_id\", $$v)},expression:\"params.hand_over_id\"}},_vm._l((_vm.handoverList),function(item){return _c('el-option',{key:item.hand_over_id,attrs:{\"label\":item.hand_over_name,\"value\":item.hand_over_id}})}),1)],1),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hideClass),expression:\"hideClass\"}],attrs:{\"label\":\"出库类型\",\"size\":\"mini\"}},[_vm._v(\" \"+_vm._s((function(){_vm.params.outstock_type_id = 10002})())+\" \"),_c('el-input',{attrs:{\"value\":\"销售出库\",\"disabled\":\"\"}})],1),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hideClass),expression:\"hideClass\"}],attrs:{\"label\":\"仓库名称\",\"size\":\"mini\"}},[_vm._v(\" \"+_vm._s((function(){if(_vm.params.warehouse_id == 0){ _vm.params.warehouse_id = null }})())+\" \"),_c('el-select',{attrs:{\"clearable\":\"\"},on:{\"focus\":_vm.warehouseInvok,\"change\":_vm.warehousechange},model:{value:(_vm.params.warehouse_id),callback:function ($$v) {_vm.$set(_vm.params, \"warehouse_id\", $$v)},expression:\"params.warehouse_id\"}},_vm._l((_vm.warehouseList),function(item){return _c('el-option',{key:item.warehouse_id,attrs:{\"label\":item.warehouse_name,\"value\":item.warehouse_id}})}),1)],1),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hideClass),expression:\"hideClass\"}],attrs:{\"label\":\"打印次数\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.params.print_times),callback:function ($$v) {_vm.$set(_vm.params, \"print_times\", $$v)},expression:\"params.print_times\"}})],1),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hideClass),expression:\"hideClass\"}],attrs:{\"label\":\"单据状态:\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.params.auditor_status_name),callback:function ($$v) {_vm.$set(_vm.params, \"auditor_status_name\", $$v)},expression:\"params.auditor_status_name\"}})],1),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hideClass),expression:\"hideClass\"}],attrs:{\"label\":\"摘要\",\"size\":\"mini\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"maxlength\":\"300\",\"placeholder\":\"摘要最多300个字\"},model:{value:(_vm.params.abstract),callback:function ($$v) {_vm.$set(_vm.params, \"abstract\", $$v)},expression:\"params.abstract\"}})],1),_c('p',{staticStyle:{\"text-align\":\"center\",\"font-size\":\"14px\",\"cursor\":\"pointer\",\"color\":\"#409eff\"},on:{\"click\":function($event){_vm.hideClass=!_vm.hideClass}}},[_c('i',{class:_vm.hideClass?'el-icon-caret-top':'el-icon-caret-bottom'}),_c('span',[_vm._v(_vm._s(_vm.hideClass?'收缩':'展开'))])])],1),_c('div',{staticClass:\"add_delet\"},[_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.referenceDisabled),expression:\"referenceDisabled\"}],staticClass:\"addBtn\",attrs:{\"icon\":\"el-icon-circle-plus-outline\",\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.referenceOrder}},[_vm._v(\"参照订单\")]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.addDisabled),expression:\"addDisabled\"}],staticClass:\"addBtn\",attrs:{\"icon\":\"el-icon-circle-plus-outline\",\"type\":\"primary\",\"size\":\"mini\",\"title\":\"选择客户\"},on:{\"click\":_vm.addRow}},[_vm._v(\"增行\")]),_c('el-button',{attrs:{\"plain\":\"\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":_vm.deleteRow}},[_vm._v(\"删行\")])],1),_c('div',{staticClass:\"table_container\"},[_c('vxe-grid',{ref:\"xTable\",attrs:{\"border\":\"\",\"show-overflow\":\"tooltip\",\"show-footer\":\"true\",\"toolbar\":_vm.tool_Config,\"sort-config\":{trigger:'cell'},\"row-style\":_vm.rowClassName,\"size\":\"mini\",\"footer-method\":_vm.footerMethod,\"max-height\":\"500px\",\"data\":_vm.TableData,\"resizable\":\"\",\"height\":\"500px\",\"column-min-width\":\"100\",\"mouse-config\":{selected: true},\"columns\":_vm.tableColumn,\"keyboard-config\":{isArrow: true, isDel: false, isTab: true, isEdit: true},\"edit-config\":{trigger: 'click', mode: 'cell',autoClear:false,activeMethod:_vm.activeMethod}}})],1),_c('br'),(_vm.addDisabled)?_c('div',[_c('el-form',{ref:\"TableDataRef2\",staticClass:\"db priceFoot\",attrs:{\"model\":_vm.params,\"inline\":true}},[_c('el-form-item',{attrs:{\"label\":\"本单使用返利：\"}},[_c('el-input',{staticClass:\"element_input\",attrs:{\"type\":\"number\"},on:{\"blur\":function($event){return _vm.countSettlementPrice(2)}},nativeOn:{\"keyup\":function($event){return (function (value) { return _vm.countSettlementPrice(1); }).apply(null, arguments)}},model:{value:(_vm.params.rebate_price),callback:function ($$v) {_vm.$set(_vm.params, \"rebate_price\", $$v)},expression:\"params.rebate_price\"}}),_c('span',{staticClass:\"yeban\"},[_vm._v(\"余额:\"+_vm._s(_vm._f(\"priceFormat\")(_vm.params.rebate_balance?_vm.params.rebate_balance:0)))])],1),_c('el-form-item',{attrs:{\"label\":\"本单使用授信：\"}},[_c('el-input',{staticClass:\"element_input\",attrs:{\"type\":\"number\"},on:{\"blur\":function($event){return _vm.countSettlementPrice(2)}},nativeOn:{\"keyup\":function($event){return (function (value) { return _vm.countSettlementPrice(1); }).apply(null, arguments)}},model:{value:(_vm.params.credit_price),callback:function ($$v) {_vm.$set(_vm.params, \"credit_price\", $$v)},expression:\"params.credit_price\"}}),_c('span',{staticClass:\"yeban\"},[_vm._v(\"余额:\"+_vm._s(_vm._f(\"priceFormat\")(_vm.params.credit_balance?_vm.params.credit_balance:0)))])],1),_c('el-form-item',{attrs:{\"label\":\"本单使用预收：\"}},[_c('el-input',{staticClass:\"element_input\",attrs:{\"type\":\"number\"},on:{\"blur\":function($event){return _vm.countSettlementPrice(2)}},nativeOn:{\"keyup\":function($event){return (function (value) { return _vm.countSettlementPrice(1); }).apply(null, arguments)}},model:{value:(_vm.params.deposits_price),callback:function ($$v) {_vm.$set(_vm.params, \"deposits_price\", $$v)},expression:\"params.deposits_price\"}}),_c('span',{staticClass:\"yeban\"},[_vm._v(\"余额:\"+_vm._s(_vm._f(\"priceFormat\")(_vm.params.deposits?_vm.params.deposits:0)))])],1),_c('el-form-item',{attrs:{\"label\":\"客户余额：\"}},[_c('el-input',{staticClass:\"element_input\",attrs:{\"disabled\":\"\",\"size\":\"mini\"},model:{value:(_vm.params.balance),callback:function ($$v) {_vm.$set(_vm.params, \"balance\", $$v)},expression:\"params.balance\"}}),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.seeMoneyDetail}},[_vm._v(\"查看往来\")])],1),_c('el-form-item',{attrs:{\"label\":\"本单结算金额：\",\"size\":\"mini\"}},[_c('el-input',{staticClass:\"element_input\",attrs:{\"disabled\":\"\",\"type\":\"number\"},model:{value:(_vm.params.settlement_price),callback:function ($$v) {_vm.$set(_vm.params, \"settlement_price\", $$v)},expression:\"params.settlement_price\"}})],1)],1)],1):_vm._e(),_c('div',[_c('span',{staticStyle:{\"font-size\":\"14px\"}},[_vm._v(\"开票信息：\")]),_c('el-input',{staticStyle:{\"width\":\"50%\",\"vertical-align\":\"text-top\"},attrs:{\"type\":\"textarea\",\"placeholder\":\"请输入开票金额\"},model:{value:(_vm.params.invoice_info),callback:function ($$v) {_vm.$set(_vm.params, \"invoice_info\", $$v)},expression:\"params.invoice_info\"}})],1),_c('div',{staticClass:\"refundauditFoot\"},[_c('span',[_vm._v(\"制单人：\"+_vm._s(_vm.params.add_user_name ? _vm.params.add_user_name : _vm.username))]),_c('span',[_vm._v(\"单据时间：\"+_vm._s(_vm.params.add_time))]),_c('span',[_vm._v(\"审核人：\"+_vm._s(_vm.params.auditor_name))]),_c('span',[_vm._v(\"审核时间：\"+_vm._s(_vm.params.auditor_time))]),_c('span',[_vm._v(\"修改人：\"+_vm._s(_vm.params.update_user_name))]),_c('span',[_vm._v(\"修改时间：\"+_vm._s(_vm.params.update_time))])]),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.goBack}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.preSubmit( 'TableDataRef',false)}}},[_vm._v(\"保 存\")]),(_vm.authority.b_add==1)?_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.preSubmit( 'TableDataRef',true)}}},[_vm._v(\"保存并新增\")]):_vm._e()],1),_c('el-dialog',{attrs:{\"title\":\"多批次\",\"visible\":_vm.dialogTableBatch,\"width\":\"40%\"},on:{\"update:visible\":function($event){_vm.dialogTableBatch=$event}}},[_c('el-table',{attrs:{\"highlight-current-row\":true,\"tooltip-effect\":\"light\",\"border\":\"\",\"data\":_vm.batchList,\"max-height\":\"300\"},on:{\"selection-change\":_vm.handleSelectionChangelist}},[_c('el-table-column',{attrs:{\"show-overflow-tooltip\":true,\"type\":\"selection\",\"fixed\":\"left\",\"align\":\"center\",\"width\":\"44\"}}),_c('el-table-column',{attrs:{\"show-overflow-tooltip\":true,\"property\":\"batch\",\"width\":\"100\",\"label\":\"年周/批次\",\"align\":\"right\"}}),_c('el-table-column',{attrs:{\"show-overflow-tooltip\":true,\"property\":\"warehouse_name\",\"label\":\"仓库名称\",\"align\":\"right\"}}),_c('el-table-column',{attrs:{\"show-overflow-tooltip\":true,\"property\":\"allocation_name\",\"label\":\"货位名称\",\"align\":\"right\"}}),_c('el-table-column',{attrs:{\"show-overflow-tooltip\":true,\"property\":\"production_time\",\"label\":\"生产日期\",\"align\":\"right\"}}),_c('el-table-column',{attrs:{\"show-overflow-tooltip\":true,\"property\":\"stocks\",\"label\":\"在库库存\",\"align\":\"right\"}}),_c('el-table-column',{attrs:{\"show-overflow-tooltip\":true,\"property\":\"available_stocks\",\"label\":\"批次可用库存\",\"align\":\"right\"}})],1),_c('div',{staticStyle:{\"text-align\":\"center\",\"padding\":\"10px\"}},[_c('el-button',{staticStyle:{\"width\":\"100px\"},attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.orderAdd(_vm.dialogArryrow)}}},[_vm._v(\"确定\")])],1)],1),(_vm.dialogChooseProducts)?_c('goodsPopout',{attrs:{\"searchParams\":{company_id:_vm.params.company_id,\n        warehouse_id:_vm.params.warehouse_id,\n        customer_id: _vm.params.customer_id,\n        warehouse_name:_vm.params.warehouse_name}},on:{\"close\":function($event){_vm.dialogChooseProducts = false},\"submit\":_vm.chooseProducts_confirm}}):_vm._e(),(_vm.dialogBillVisible)?_c('div',[_c('el-dialog',{staticClass:\"dialogForm\",attrs:{\"close-on-click-modal\":false,\"title\":\"选择订单\",\"visible\":_vm.dialogBillVisible,\"width\":\"1300px\"},on:{\"update:visible\":function($event){_vm.dialogBillVisible=$event}}},[_c('source-bill',{attrs:{\"pardata\":_vm.params},on:{\"dialogformInline\":_vm.dialogformInline,\"closedialog\":_vm.closeDialog}})],1)],1):_vm._e(),(_vm.dialogTableVisible)?_c('historicalPrices',{attrs:{\"searchParams\":{ company_id: _vm.params.company_id,goods_id:_vm.currentScope.row && _vm.currentScope.row.goods_id },\"company_id\":_vm.params.company_id},on:{\"sumbitData\":_vm.handleCurrentChange},model:{value:(_vm.dialogTableVisible),callback:function ($$v) {_vm.dialogTableVisible=$$v},expression:\"dialogTableVisible\"}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./salesoutModifyCommon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./salesoutModifyCommon.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./salesoutModifyCommon.vue?vue&type=template&id=d3d284c6&scoped=true&\"\nimport script from \"./salesoutModifyCommon.vue?vue&type=script&lang=js&\"\nexport * from \"./salesoutModifyCommon.vue?vue&type=script&lang=js&\"\nimport style0 from \"./salesoutModifyCommon.vue?vue&type=style&index=0&id=d3d284c6&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d3d284c6\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <!-- 库存管理销售出库修改 -->\n  <common :sourceType='2' />\n</template>\n\n<script>\nimport common from \"@/components/element/sales/salesoutmanage/salesout/config/salesoutModifyCommon.vue\";\nexport default {\n  name: \"inventorySalesoutModify\",\n  data() {\n    return {};\n  },\n  components: {\n    common\n  }\n};\n</script>\n\n<style>\n</style>","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./salesoutModify.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./salesoutModify.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./salesoutModify.vue?vue&type=template&id=1f07da84&\"\nimport script from \"./salesoutModify.vue?vue&type=script&lang=js&\"\nexport * from \"./salesoutModify.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}