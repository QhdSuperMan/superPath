(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-2d0d9ff0"],{"6a5d":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"search_container"},[a("el-form",{ref:"filterFormRef",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.params}},[a("el-form-item",{attrs:{label:"采购组织",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{change:t.companyChange,focus:t.getCompany},model:{value:t.params.company_id,callback:function(e){t.$set(t.params,"company_id",e)},expression:"params.company_id"}},t._l(t.companyList,(function(e){return a("el-option",{key:e.company_id,attrs:{label:e.company_name,value:e.company_id}},[a("span",{class:1==e.type?"optionStyle":""},[t._v(t._s(e.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"业务日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:""},on:{change:t.change},model:{value:t.timeValue,callback:function(e){t.timeValue=e},expression:"timeValue"}})],1),a("el-form-item",{attrs:{label:"出入库类型",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.params.type,callback:function(e){t.$set(t.params,"type",e)},expression:"params.type"}},[a("el-option",{attrs:{label:"采购入库",value:1}},[t._v("采购入库")]),a("el-option",{attrs:{label:"采购退货",value:2}},[t._v("采购退货")])],1)],1),a("el-form-item",{attrs:{label:"供应商(厂家)",size:"mini"}},[a("el-select",{attrs:{clearable:"",maxlength:"100","filter-method":t.supplierChange,filterable:"",placeholder:"请选择"},on:{focus:t.supplier},model:{value:t.params.supplier_id,callback:function(e){t.$set(t.params,"supplier_id",e)},expression:"params.supplier_id"}},t._l(t.supplierList,(function(t){return a("el-option",{key:t.supplier_id,attrs:{label:t.supplier_name,value:t.supplier_id}})})),1)],1),a("el-form-item",{attrs:{label:"部门",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},model:{value:t.params.department_id,callback:function(e){t.$set(t.params,"department_id",e)},expression:"params.department_id"}},t._l(t.departmentList.options,(function(t){return a("el-option",{key:t.department_id,attrs:{label:t.department_name,value:t.department_id}})})),1)],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.onSearch}},[t._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.onReset}},[t._v("重置")])],1)],1)],1),1==t.authority.b_export&&t.listShow?a("div",{staticClass:"add_delet"},[a("el-dropdown",{attrs:{placement:"bottom-start"}},[a("span",{staticStyle:{cursor:"pointer",color:"#4e90e2"},attrs:{"split-button":""}},[a("el-button",{attrs:{plain:"",icon:"iconfont icon-daochu10",size:"mini"}},[t._v("导出")])],1),a("el-dropdown-menu",{staticStyle:{"margin-top":"10px"},attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(e){return t.exportOrder(1)}}},[t._v("导出Excel文件")]),a("el-dropdown-item",{nativeOn:{click:function(e){return t.exportOrder(2)}}},[t._v("导出CSV逗号分隔")])],1)],1)],1):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"table_container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:t.TableData.tableData,"max-height":t.tableHeight}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"company_name",label:"采购组织"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"sn",label:"单据号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"department_name",label:"部门"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"type_name",label:"出入库类型"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"supplier_name",label:"供应商(厂家)"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"num",label:"采购数量",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"total_price",label:"采购金额",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("priceFormatNone")(e.row.total_price))+" ")]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"business_time",label:"业务日期"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"remark",label:"单据备注"}})],1),a("div",{staticClass:"table_info"},[a("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[a("el-col",{attrs:{span:12}},[a("div",[t._v("采购数量总计："+t._s(t.TableData.allList.all_num))])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"textAr"},[t._v("采购金额总计："+t._s(t._f("priceFormatNone")(t.TableData.allList.all_price)))])])],1),a("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[a("el-col",{attrs:{span:12}},[a("div",[t._v("生成时间："+t._s(t.TableData.allList.add_time))])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"textAr"},[t._v("制表人："+t._s(t.TableData.allList.add_user_name))])])],1),a("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[a("el-col",{attrs:{span:12}},[a("div",[t._v("业务日期起始:"+t._s(this.params.start_time))])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"textAr"},[t._v("业务日期起始:"+t._s(this.params.end_time))])])],1)],1),a("div",{staticClass:"page_container"},[a("div",{staticClass:"pageNumber"},[t._v("每页显示")]),a("el-pagination",{staticClass:"erp-pagination",attrs:{"current-page":t.goPage,"page-size":t.pageSize1,"page-sizes":t.per_page,layout:"total,sizes, prev, pager, next,jumper",prevText:"上一页",nextText:"下一页",total:t.TableData.total},on:{"size-change":t.handleSizeChange,"update:currentPage":function(e){t.goPage=e},"update:current-page":function(e){t.goPage=e},"current-change":t.handleCurrentChange}})],1)],1)])},l=[],i=a("ade3"),r=a("65b0"),o={name:"reportPurchasesumrpt",data:function(){var t;return t={authority:{},params:{},searchParams:{},listShow:!1,timeValue:[],export_type:null,companyList:{},supplierList:[],customerList:{options:[]},TableData:{allList:{},tableData:[]},departmentList:{options:[]}},Object(i["a"])(t,"companyList",[]),Object(i["a"])(t,"tableHeight",600),t},methods:{change:function(t){this.params.start_time=t[0],this.params.end_time=t[1]},companyChange:function(t){this.$set(this.params,"supplier_id",""),Object(r["i"])(this,this.params,1)},getCompany:function(){Object(r["e"])(this)},supplier:function(){var t={company_id:this.params.company_id,supplier_name:null};Object(r["n"])(this,t)},onReset:function(){this.$set(this,"params",{}),this.timeValue=[],this.$set(this,"searchParams",{params:{},TableData:this.TableData,API:"getPurchaseSummaryList",vm:this}),Object(r["g"])(this.searchParams,2)},supplierChange:function(t){var e={company_id:this.params.company_id,supplier_name:t};Object(r["n"])(this,e)},exportOrder:function(t){if(0==this.listShow)return this.$message({message:"请查询需要导出的数据",type:"error"}),!1;Object.assign(this.params,{export_type:t});this.$axMethod.exportPurchaseSummaryUrl(this.params).then((function(t){200==t.data.code&&(window.location.href=t.data.data.url)}))},onSearch:function(){this.listShow=!0,this.timeValue&&2==this.timeValue.length?(this.params.start_time=this.timeValue[0],this.params.end_time=this.timeValue[1]):this.params.start_time=this.params.end_time="",Object.assign(this.searchParams.params,this.params,{page:1}),Object(r["g"])(this.searchParams,2,r["o"].bind(this))}},mounted:function(){this.$set(this,"searchParams",{params:{},TableData:this.TableData,API:"getPurchaseSummaryList",vm:this}),r["o"].bind(this)(),window.onresize=r["o"].bind(this)}},n=o,p=a("2877"),c=Object(p["a"])(n,s,l,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0d9ff0.85ca5223.js.map