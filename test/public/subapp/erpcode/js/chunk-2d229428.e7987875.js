(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-2d229428"],{dd4f:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search_container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"销售组织",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.companyListInvok,change:e.companyChange},model:{value:e.params.company_id,callback:function(t){e.$set(e.params,"company_id",t)},expression:"params.company_id"}},e._l(e.companyList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[a("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"名称",size:"mini"}},[a("el-input",{attrs:{maxlength:"50",placeholder:"请输入"},model:{value:e.params.customer_type_name,callback:function(t){e.$set(e.params,"customer_type_name",t)},expression:"params.customer_type_name"}})],1),a("el-form-item",{attrs:{label:"编号",size:"mini"}},[a("el-input",{attrs:{maxlength:"50",placeholder:"请输入"},model:{value:e.params.customer_type_id,callback:function(t){e.$set(e.params,"customer_type_id",t)},expression:"params.customer_type_id"}})],1),a("el-form-item",{attrs:{label:"助记码",size:"mini"}},[a("el-input",{attrs:{maxlength:"50",placeholder:"请输入"},model:{value:e.params.logogram,callback:function(t){e.$set(e.params,"logogram",t)},expression:"params.logogram"}})],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"add_delet"},[1==e.authority.b_add?a("el-button",{staticClass:"addBtn",attrs:{icon:"el-icon-circle-plus-outline",type:"primary",size:"mini"},on:{click:e.addFun}},[e._v("新增")]):e._e(),1==e.authority.b_del?a("el-button",{attrs:{plain:"",icon:"el-icon-delete",size:"mini"},on:{click:e.deletes}},[e._v("删除")]):e._e()],1),a("div",{staticClass:"table_container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading1,expression:"loading1"}],staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:e.TableData.tableData,"max-height":"600"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",fixed:"left",align:"center",width:"44"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"操作",fixed:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==e.authority.b_edit&&0!=t.row.company_id?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v(" 修改 ")]):a("el-button",{attrs:{disabled:"",type:"text",size:"small"}},[e._v(" 修改 ")])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"company_name",label:"销售组织"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"customer_type_name",label:"客户分类名称"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"customer_type_id",label:"编号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"logogram",label:"助记码"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"remark",label:"备注"}})],1)],1),a("div",{staticClass:"page_container"},[a("div",{staticClass:"pageNumber"},[e._v("每页显示")]),a("el-pagination",{staticClass:"erp-pagination",attrs:{"current-page":e.goPage,"page-size":e.pageSize1,"page-sizes":e.per_page,layout:"total,sizes, prev, pager, next,jumper",prevText:"上一页",nextText:"下一页",total:e.TableData.total},on:{"size-change":e.handleSizeChange,"update:currentPage":function(t){e.goPage=t},"update:current-page":function(t){e.goPage=t},"current-change":e.handleCurrentChange}})],1),e.dialogFormVisible?a("div",[a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"客户分类管理",center:"",visible:e.dialogFormVisible,width:"480px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"errorItem errorItemMl121",attrs:{model:e.ruleForm}},[a("el-form-item",{attrs:{label:"销售组织",size:"mini",rules:[{required:!0,message:"请选择销售组织",trigger:"blur"}],prop:"company_id"}},[e._v(" "+e._s(function(){0==e.ruleForm.company_id&&(e.ruleForm.company_id=null)}())+" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{focus:e.companyListInvok},model:{value:e.ruleForm.company_id,callback:function(t){e.$set(e.ruleForm,"company_id",t)},expression:"ruleForm.company_id"}},e._l(e.companyList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[a("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"客户分类名称",prop:"customer_type_name",size:"mini",rules:[{required:!0,message:"请输入客户分类名称",trigger:"blur"}]}},[a("el-input",{attrs:{maxlength:"50"},model:{value:e.ruleForm.customer_type_name,callback:function(t){e.$set(e.ruleForm,"customer_type_name",t)},expression:"ruleForm.customer_type_name"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"text",maxlength:"300",placeholder:"请输入"},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dialogFormsubmit("ruleForm")}}},[e._v("确 定")])],1)],1)],1):e._e()])},s=[],i=a("5530"),r=(a("4de4"),a("d3b7"),a("159b"),a("b64b"),a("a9e3"),a("65b0")),l=a("2f62"),n={name:"customCustomertype",data:function(){return{dialogFormVisible:!1,ruleForm:{},loading:!1}},computed:Object(i["a"])({},Object(l["c"])(["customertypeIndexGet"])),methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])(["customertypeIndexACT"])),{},{companyChange:function(e){e&&(this.params.company_name=this.companyList.filter((function(t){return t.company_id===e}))[0].company_name)},onSearch:function(){Object.assign(this.searchParams.params,this.params,{page:1}),this.customertypeIndexACT({goPage:this.goPage,params:this.params,pageSize:this.pageSize}),Object(r["g"])(this.searchParams)},onReset:function(){this.$set(this,"params",{}),this.$set(this,"searchParams",{params:{},TableData:this.TableData,API:"getCustomerTypeList",vm:this}),this.onSearch()},addFun:function(){var e=this;this.dialogFormVisible=!0,Object.keys(this.ruleForm).forEach((function(t){e.ruleForm[t]=""})),this.companyList.length<=0&&this.$set(this,"companyList",[{company_id:Number(localStorage.company_id),company_name:localStorage.company_name}]);var t=Object.assign([],this.companyList),a="";a=this.params.company_id?this.params.company_id:Number(localStorage.company_id),this.$set(this,"ruleForm",{company_id:a}),this.$set(this,"companyList",t)},handleEdit:function(e){this.dialogFormVisible=!0,this.ruleForm=Object.assign({},e),this.companyList.push({company_id:e.company_id,company_name:e.company_name})},dialogFormsubmit:function(e){var t=this,a=this;this.$refs[e].validate((function(e){if(e)if(void 0==a.ruleForm.customer_type_id){var o={eachData:t.ruleForm,UrlApi:"addCustomerType",closeDialog:t.dialogFormVisible=!1,list:{UrlApi:"getCustomerTypeList",data:t.TableData,esData:t.searchParams.params}};t.$common.addAndupdateFun(o)}else{var s={eachData:t.ruleForm,UrlApi:"editCustomerType",closeDialog:t.dialogFormVisible=!1,list:{UrlApi:"getCustomerTypeList",data:t.TableData,esData:t.searchParams.params}};t.$common.addAndupdateFun(s)}}))},deletes:function(){Object.assign(this.searchParams.params,{page:1});var e={deleID:"customer_type_id",deleSelect:this.multipleSelection,deleApi:"delCustomerType",list:{UrlApi:"getCustomerTypeList",data:this.TableData,esData:this.searchParams.params}};this.$common.deletes(e,"删除",this)}}),mounted:function(){this.customertypeIndexGet&&this.customertypeIndexGet.params&&(this.$set(this,"params",this.customertypeIndexGet.params),Object(r["l"])(this,this.customertypeIndexGet.params)),this.$set(this,"searchParams",{params:this.params,TableData:this.TableData,API:"getCustomerTypeList",vm:this}),Object(r["g"])(this.searchParams)}},m=n,c=a("2877"),p=Object(c["a"])(m,o,s,!1,null,"f04902e8",null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d229428.e7987875.js.map