(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-2d0e2502"],{"7dba":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"params"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.purchaseprice,expression:"purchaseprice"}],attrs:{id:"leixin"}},[a("div",{staticClass:"search_container"},[a("el-form",{ref:"filterFormRef",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params}},[a("el-form-item",{attrs:{label:"库存组织",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{change:e.companyChange,focus:e.companyListInvok},model:{value:e.params.company_id,callback:function(t){e.$set(e.params,"company_id",t)},expression:"params.company_id"}},e._l(e.companyList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}},[a("span",{class:1==t.type?"optionStyle":""},[e._v(e._s(t.company_name))])])})),1)],1),a("el-form-item",{attrs:{label:"部门",size:"mini"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{change:e.departmentChange,focus:e.DepartmentListInvok},model:{value:e.params.department_id,callback:function(t){e.$set(e.params,"department_id",t)},expression:"params.department_id"}},e._l(e.departmentList,(function(e){return a("el-option",{key:e.department_id,attrs:{label:e.department_name,value:e.department_id}})})),1)],1),a("el-form-item",{attrs:{label:"业务日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}})],1),a("el-form-item",{attrs:{label:"审核日期",size:"mini"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.timeValue1,callback:function(t){e.timeValue1=t},expression:"timeValue1"}})],1),a("el-form-item",{attrs:{label:"入库单据号",size:"mini"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.params.instorage_sn,callback:function(t){e.$set(e.params,"instorage_sn",t)},expression:"params.instorage_sn"}})],1),a("el-form-item",{attrs:{label:"供应商(厂家)",size:"mini"}},[a("el-select",{attrs:{clearable:"",maxlength:"100","filter-method":e.supplierListInvok,filterable:"",placeholder:"请选择"},on:{change:e.supplierChangesave,focus:e.supplierListInvok},model:{value:e.params.supplier_id,callback:function(t){e.$set(e.params,"supplier_id",t)},expression:"params.supplier_id"}},e._l(e.supplierList,(function(e){return a("el-option",{key:e.supplier_id,attrs:{label:e.supplier_name,value:e.supplier_id}})})),1)],1),a("el-form-item",{attrs:{label:"仓库名称",size:"mini"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},on:{focus:e.warehouseInvok,change:e.warehouseChange},model:{value:e.params.warehouse_id,callback:function(t){e.$set(e.params,"warehouse_id",t)},expression:"params.warehouse_id"}},e._l(e.warehouseList,(function(e){return a("el-option",{key:e.warehouse_id,attrs:{label:e.warehouse_name,value:e.warehouse_id}})})),1)],1),a("el-form-item",{attrs:{label:"审核状态",size:"mini"}},[a("el-select",{model:{value:e.params.auditor_status,callback:function(t){e.$set(e.params,"auditor_status",t)},expression:"params.auditor_status"}},[a("el-option",{attrs:{label:"全部",value:0}},[e._v("全部")]),a("el-option",{attrs:{label:"未审核",value:1}},[e._v("未审核")]),a("el-option",{attrs:{label:"已审核",value:2}},[e._v("已审核")]),a("el-option",{attrs:{label:"作废",value:3}},[e._v("作废")])],1)],1),a("el-form-item",{staticClass:"search-style search",attrs:{size:"mini"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"add_delet"},[1==e.authority.b_add?a("el-button",{staticClass:"addBtn",attrs:{icon:"el-icon-circle-plus-outline",type:"primary",size:"mini"},on:{click:e.addF}},[e._v("新增")]):e._e(),1==e.authority.b_del?a("el-button",{attrs:{plain:"",icon:"el-icon-delete",size:"mini"},on:{click:e.deletes}},[e._v("删除")]):e._e(),1==e.authority.b_pass?a("el-button",{attrs:{icon:"iconfont icon-pass",type:"primary",size:"mini"},on:{click:e.shenHe}},[e._v("审核")]):e._e(),1==e.authority.b_invalid?a("el-button",{staticClass:"addBtn",attrs:{plain:"",icon:"iconfont icon-zuofei",size:"mini"},on:{click:e.abolishFun}},[e._v("作废")]):e._e()],1),a("div",{staticClass:"table_container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading1,expression:"loading1"}],staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:e.TableData.tableData,"max-height":e.tableHeight},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",fixed:"left",align:"center",width:"44"}}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==e.authority.b_info?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.seeF(t,t.row)}}},[e._v(" 查看 ")]):e._e(),1==t.row.auditor_status&&1==e.authority.b_edit&&5!=e.params.type?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.addF(t,t.row)}}},[e._v(" 修改 ")]):a("el-button",{attrs:{disabled:"",type:"text",size:"small"},on:{click:function(a){return e.addF(t,t.row)}}},[e._v(" 修改 ")])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"company_name",width:"150",label:"库存组织"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"instorage_sn",width:"180",label:"入库单据号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"department_name",width:"100",label:"部门"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"buyer_name",width:"100",label:"采购员"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"supplier_name",width:"150",label:"供应商(厂家)"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"num",width:"120",label:"总数量",align:"right"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"total_abrasion_price",width:"120",label:"总磨损费",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("pre",[e._v(e._s(e._f("priceFormatNone")(t.row.total_abrasion_price)))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"total_intube_price",width:"120",label:"总内垫费",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("pre",[e._v(e._s(e._f("priceFormatNone")(t.row.total_intube_price)))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"total_change_price",width:"120",label:"总换胎收费",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("pre",[e._v(e._s(e._f("priceFormatNone")(t.row.total_change_price)))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"total_price",width:"140",label:"结算金额",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("pre",[e._v(e._s(e._f("priceFormatNone")(t.row.total_price)))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"type",width:"70",label:"入库类型"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"warehouse_name",width:"132",label:"仓库"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"business_time",width:"120",label:"业务日期"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"add_user_name",width:"120",label:"创建人"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"add_time",width:"170",label:"创建时间"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"auditor_name",width:"120",label:"审核人"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"auditor_time",width:"170",label:"审核时间"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"auditor_status_name",width:"120",label:"审核状态"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"remark",width:"150",label:"备注"}})],1)],1),a("div",{staticClass:"page_container"},[a("div",{staticClass:"pageNumber"},[e._v("每页显示")]),a("el-pagination",{staticClass:"erp-pagination",attrs:{"current-page":e.goPage,"page-size":e.pageSize1,"page-sizes":e.per_page,layout:"total,sizes, prev, pager, next,jumper",prevText:"上一页",nextText:"下一页",total:e.TableData.total},on:{"size-change":e.handleSizeChange,"update:currentPage":function(t){e.goPage=t},"update:current-page":function(t){e.goPage=t},"current-change":e.handleCurrentChange}})],1)])])},r=[],s=a("5530"),o=(a("a9e3"),a("4de4"),a("d3b7"),a("25f0"),a("a15b"),a("99af"),a("2f62")),l=a("65b0"),n={name:"inventoryThreeinstorageThreeinstorageIndex",data:function(){return{purchaseprice:!0,examineprice:!1,lock:0,auditStatus:{options:[]},timeValue1:[],dialogFormVisible:!1,tableHeight:600}},props:{type:{type:[Number,String],default:1}},computed:Object(s["a"])({},Object(o["c"])(["threeinstorageIndexGet"])),methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])(["threeinstorageIndexACT","threeinstorageAddACT","threeinstorageSeeACT"])),{},{supplierChangesave:function(e){e&&(this.params.supplier_name=this.supplierList.filter((function(t){return t.supplier_id===e}))[0].supplier_name)},warehouseChange:function(e){e&&(this.params.warehouse_name=this.warehouseList.filter((function(t){return t.warehouse_id===e}))[0].warehouse_name)},companyChange:function(e){""!=e&&(this.params.company_name=this.companyList.filter((function(t){return t.company_id===e}))[0].company_name,Object(l["a"])(this,this.params))},shenHe:function(){var e=this;if(this.multipleSelection.length<1)return this.$message({message:"请选择需要审核的信息！",type:"warning"}),!1;for(var t=[],a=0;a<this.multipleSelection.length;a++)t.push(this.multipleSelection[a].instorage_id);var i=t.toString(),r={eachData:{instorage_id:i.toString()},UrlApi:"auditorPassThreeInStorage",list:{UrlApi:"getThreeInStorageList",data:this.TableData,esData:this.params}};this.$baseData.checkCarDoctor({bill_type:5,bill_id:t.join(","),operation_type:4}).then((function(){e.$common.audit(r)}))},abolishFun:function(){var e=this;if(this.multipleSelection.length<1)return this.$message({message:"请选择需要作废的信息！",type:"warning"}),!1;for(var t=[],a=0;a<this.multipleSelection.length;a++)t.push(this.multipleSelection[a].instorage_id);var i=t.toString(),r={eachData:{instorage_id:i.toString()},UrlApi:"auditorInvalidThreeInStorage",list:{UrlApi:"getThreeInStorageList",data:this.TableData,esData:this.params}};this.$baseData.checkCarDoctor({bill_type:5,bill_id:t.join(","),operation_type:6}).then((function(){e.$common.audit(r)}))},departmentChange:function(e){e&&(this.params.department_name=this.departmentList.filter((function(t){return t.department_id===e}))[0].department_name)},onReset:function(){this.timeValue=[],this.timeValue1=[],this.$set(this,"params",{type:this.type,auditor_status:0}),this.threeinstorageIndexACT({}),this.$set(this,"searchParams",{params:this.params,TableData:this.TableData,API:"getThreeInStorageList",vm:this}),Object(l["g"])(this.searchParams)},seeF:function(e,t){this.threeinstorageSeeACT({instorage_id:t.instorage_id,goPage:this.goPage,params:this.params,pageSize:this.pageSize}),this.$router.push({path:"/inventory/threeinstorage/threeinstorageSee"})},addF:function(e,t){if(t&&1==t.is_execute)return this.$message.error("wms系统正在操作此单据，暂不支持单据修改"),!1;this.$router.push({path:"/inventory/threeinstorage/threeinstorageAdd"}),this.threeinstorageAddACT({instorage_id:t?t.instorage_id:null,goPage:this.goPage,params:this.params,pageSize:this.pageSize})},onSearch:function(){this.timeValue?(this.params.start_time=this.timeValue[0],this.params.end_time=this.timeValue[1]):this.params.start_time=this.params.end_time="",this.timeValue1?(this.params.auditor_start_time=this.timeValue1[0],this.params.auditor_end_time=this.timeValue1[1]):this.params.auditor_start_time=this.params.auditor_end_time="",Object.assign(this.searchParams.params,this.params,{page:1}),this.threeinstorageIndexACT({goPage:this.goPage,params:this.params,pageSize:this.pageSize}),Object(l["g"])(this.searchParams)},deletes:function(){var e=this;if(this.multipleSelection.length<1)return this.$message({message:"请选择需要删除的信息！",type:"warning"}),!1;for(var t=[],a=0;a<this.multipleSelection.length;a++)t.push(this.multipleSelection[a].instorage_id);var i={deleID:"instorage_id",deleSelect:this.multipleSelection,deleApi:"delThreeInStorage",list:{UrlApi:"getThreeInStorageList",data:this.TableData,esData:this.params}};this.$baseData.checkCarDoctor({bill_type:5,bill_id:t.join(","),operation_type:3}).then((function(){e.$common.deletes(i,"删除",e)}))}}),mounted:function(){if(this.$set(this,"params",{type:this.type,auditor_status:0}),this.threeinstorageIndexGet.goPage&&(this.params.page=this.threeinstorageIndexGet.goPage,this.params.per_page=this.threeinstorageIndexGet.pageSize),this.threeinstorageIndexGet&&this.threeinstorageIndexGet.params){if(this.threeinstorageIndexGet.params.start_time){var e=this.threeinstorageIndexGet.params,t=e.start_time,a=e.end_time;this.timeValue=this.timeValue.concat([t,a])}if(this.threeinstorageIndexGet.params.auditor_start_time){var i=this.threeinstorageIndexGet.params,r=i.auditor_start_time,s=i.auditor_end_time;this.timeValue1=this.timeValue1.concat([r,s])}this.$set(this,"params",this.threeinstorageIndexGet.params),Object(l["l"])(this,this.threeinstorageIndexGet.params)}this.$set(this,"searchParams",{params:this.params,TableData:this.TableData,API:"getThreeInStorageList",vm:this}),Object(l["g"])(this.searchParams,1,l["o"].bind(this)),window.onresize=l["o"].bind(this)}},p=n,h=a("2877"),m=Object(h["a"])(p,i,r,!1,null,null,null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d0e2502.a03bcbee.js.map