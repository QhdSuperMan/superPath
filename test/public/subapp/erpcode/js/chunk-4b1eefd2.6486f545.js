(window["webpackJsonp_erpcode"]=window["webpackJsonp_erpcode"]||[]).push([["chunk-4b1eefd2"],{"0cd4":function(e,t,o){"use strict";o.r(t);var a,i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[o("el-breadcrumb-item",[e._v("客户管理")]),o("el-breadcrumb-item",{staticClass:"attrbute"},[o("span",{on:{click:e.goBack}},[e._v("预收冲应收")])]),o("el-breadcrumb-item",[e._v("查看预收冲应收")])],1),o("div",{staticClass:"search_container"},[o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[o("el-form-item",{attrs:{label:"财务组织：",size:"mini"}},[e._v(" "+e._s(e.formInline.company_name)+" ")]),o("el-form-item",{attrs:{label:"单据号：",size:"mini"}},[e._v(" "+e._s(e.formInline.deposits_sn)+" ")]),o("el-form-item",{attrs:{label:"业务日期：",size:"mini"}},[e._v(" "+e._s(e.formInline.business_time)+" ")]),o("el-form-item",{attrs:{label:"客户名称：",size:"mini"}},[e._v(" "+e._s(e.formInline.customer_name)+" ")]),o("el-form-item",{attrs:{label:"部门：",size:"mini"}},[e._v(" "+e._s(e.formInline.department_name)+" ")]),o("el-form-item",{attrs:{label:"业务员：",size:"mini"}},[e._v(" "+e._s(e.formInline.business_name)+" ")]),o("el-form-item",{attrs:{label:"备注：",size:"mini"}},[e._v(" "+e._s(e.formInline.remark)+" ")]),o("el-form-item",{attrs:{label:"审核状态：",size:"mini"}},[e._v(" "+e._s(e.formInline.auditor_status_name)+" ")])],1)],1),e._m(0),o("div",{staticClass:"table_container"},[o("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:e.TableData.receipt_common,"summary-method":e.getSummaries,"show-summary":"","max-height":"600"}},[o("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"index",width:"46",label:"序号",align:"center"}}),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"receivables_mode_name",label:"结算方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" 预收冲应收 ")]}}])}),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"bank_name",label:"银行帐户"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" 预收账户 ")]}}])}),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"common_price",label:"金额",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{staticClass:"editor",attrs:{disabled:!0},model:{value:t.row.common_price,callback:function(o){e.$set(t.row,"common_price",o)},expression:"scope.row.common_price"}})]}}])}),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"remark",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{staticStyle:{cursor:"pointer"},on:{click:function(o){return e.searchRows(t,t.row)}}},[e._v(" "+e._s(t.row.remark)+" ")])]}}])})],1)],1),e.is_disabled?o("div",{staticClass:"aboutList"},[e._m(1),o("div",{staticClass:"table_container"},[o("div",[o("el-table",{attrs:{"highlight-current-row":!0,"tooltip-effect":"light",border:"",data:e.relationTable.tableData,"show-summary":"","summary-method":e.getrelationTableSummaries,"max-height":"600"}},[o("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"序号",width:"46",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}],null,!1,192879353)}),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"bill_sn",label:"单据号","min-width":"120"}}),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"order_type",label:"单据类型"}}),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"customer_name",label:"客户名称"}}),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"bill_num",label:"出库数量",align:"right"}}),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"order_price",label:"出库金额",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("pre",[e._v(e._s(e._f("priceFormatNone")(t.row.order_price)))])]}}],null,!1,1703548460)}),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"ec_channel_fee",label:"通道费",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("pre",[e._v(e._s(e._f("priceFormatNone")(t.row.ec_channel_fee)))])]}}],null,!1,1278414771)}),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"sc_price",label:"实际应收金额",align:"right","render-header":e.renderHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[o("pre",[e._v(e._s(e._f("priceFormatNone")(t.row.sc_price)))])]}}],null,!1,311688178)}),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"business_time",label:"业务日期"}}),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"add_time",label:"单据时间","min-width":"120"}}),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"remark",label:"备注",width:"156"}}),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"rc_price",label:"已冲销金额",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("pre",[e._v(e._s(e._f("priceFormatNone")(t.row.rc_price)))])]}}],null,!1,3238903667)}),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"rest_price",label:"未冲销金额",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("pre",[e._v(e._s(e._f("priceFormatNone")(t.row.rest_price)))])]}}],null,!1,3523324530)}),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"bill_price",label:"本次冲销金额",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("pre",[e._v(e._s(e._f("priceFormatNone")(t.row.bill_price)))])]}}],null,!1,3270672553)}),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"payment_method",label:"回款方式",width:"156"}})],1)],1)])]):e._e(),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[1==e.formInline.auditor_status?[1==e.authority.b_pass?o("el-button",{attrs:{type:"primary"},on:{click:e.examineFun}},[e._v("审 核")]):e._e(),1==e.authority.b_invalid?o("el-button",{on:{click:e.abolishFun}},[e._v("作 废")]):e._e()]:e._e(),1==e.authority.b_nopass&&2==e.formInline.auditor_status?o("el-button",{attrs:{type:"primary"},on:{click:e.nopass}},[e._v("弃 审")]):e._e(),3==e.formInline.auditor_status||1!=e.authority.b_invalid&&1!=e.authority.b_pass?[o("el-button",{on:{click:e.goBack}},[e._v("返 回")])]:[o("el-button",{on:{click:e.goBack}},[e._v("取 消")])]],2)],1)},r=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"paymanageTitle"},[o("i"),e._v(" "),o("span",[e._v("结算明细")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"paymanageTitle"},[o("i"),e._v(" "),o("span",[e._v("核销明细")])])}],s=o("ade3"),l=o("5530"),n=(o("e9c4"),o("d3b7"),o("159b"),o("d81d"),o("a9e3"),o("b680"),o("caad"),o("2f62")),c=(a={name:"customeDepositsSearch",data:function(){return{goBackText:null,authority:{},formInline:{},TableData:{},isShow_sbList:!1,sbListTabel:{tableData:[]},isShow_flList:!1,flListTabel:{tableData:[]},isShow_xschukuList:!1,xsListTabel:{tableData:[]},receiptaudit:"",receipt_id:"",is_disabled:!1,relationTable:{tableData:[]},title:"",changeIndex:0}},computed:Object(l["a"])({},Object(n["c"])(["depositsSearch_showGet"])),methods:Object(l["a"])(Object(l["a"])({},Object(n["b"])(["depositsIndexACT_show","depositsIndexACT"])),{},{goBack:function(){this.depositsIndexACT({params:this.depositsSearch_showGet.params,goPage:this.depositsSearch_showGet.goPage,pageSize:this.depositsSearch_showGet.pageSize}),this.$router.push({path:"/custom/deposits"})},renderHeader:function(){var e=this.$createElement;return e("el-tooltip",{class:"item",attrs:{effect:"dark",placement:"top"}},[e("p",{slot:"content"},["实际应收金额=本出库单中出库金额"]),e("span",{class:"el-icon-question",style:"cursor:pointer;font-weight:bold"},["实际应收金额"])])},changeTitle:function(e){this.changeIndex=e},searchRows:function(e,t){var o=this,a=[];a.push({accounts_type_id:t.accounts_type_id,receivables_mode_id:t.receivables_mode_id,bank_id:t.bank_id,common_price:t.common_price,remark:void 0==t.remark?"":t.remark});var i=this;this.formInline.business_time=this.$publicFution.formatData(new Date);var r={customer_id:this.formInline.customer_id,business_time:this.formInline.business_time,department_id:this.formInline.department_id,company_id:this.formInline.company_id,business_id:this.formInline.business_id,remark:this.formInline.remark,is_verify:1,common_body:JSON.stringify(a)};i.$axios({method:"post",url:i.$api.addReceipt,data:r}).then((function(e){0==e.data.data.length?o.is_disabled=!1:(o.is_disabled=!0,o.relationTable.tableData=e.data.data[0].list,o.title=e.data.data[0].title)}))},examineFun:function(){var e=this;this.$axios({method:"post",url:this.$api.auditorPassdeposits,data:{deposits_id:this.depositsSearch_showGet.deposits_id}}).then((function(t){200==t.data.code&&(e.$message({message:t.data.data,type:"success"}),e.goBack())}))},nopass:function(){var e=this;this.$axios({method:"post",url:this.$api.noauditorPassdeposits,data:{deposits_id:this.depositsSearch_showGet.deposits_id}}).then((function(t){200==t.data.code&&(e.$message({message:t.data.data,type:"success"}),e.goBack())}))},abolishFun:function(){var e=this;this.$axios({method:"post",url:this.$api.auditorInvaliddeposits,data:{deposits_id:this.depositsSearch_showGet.deposits_id}}).then((function(t){200==t.data.code&&(e.$message({message:t.data.data,type:"success"}),e.goBack())}))},getSummaries:function(e){var t=e.columns,o=e.data,a=[];return t.forEach((function(e,t){if(0!==t){var i=o.map((function(t){return Number(t[e.property])}));i.every((function(e){return isNaN(e)}))?a[t]="":(a[t]=i.reduce((function(e,t){var o=Number(t);return isNaN(o)?e:e+t}),0),a[t]=3==t?parseFloat(a[t]).toFixed(2):"")}else a[t]="总计"})),a},getrelationTableSummaries:function(e){var t=e.columns,o=e.data,a=[];return t.forEach((function(e,t){if(0!==t){var i=o.map((function(t){return Number(t[e.property])}));i.every((function(e){return isNaN(e)}))?a[t]="":(a[t]=i.reduce((function(e,t){var o=Number(t);return isNaN(o)?e:e+t}),0),4==t?a[t]=a[t]:[5,6,7,13,11,12].includes(t)?a[t]=parseFloat(a[t]).toFixed(2):a[t]="")}else a[t]="总计"})),a}})},Object(s["a"])(a,"computed",Object(l["a"])({},Object(n["c"])(["depositsSearch_showGet"]))),Object(s["a"])(a,"created",(function(){var e=this;this.authority=JSON.parse(localStorage.getItem("authority"));this.$axios({method:"get",url:this.$api.getDepositsInfo,params:{deposits_id:this.depositsSearch_showGet.deposits_id,is_edit:0}}).then((function(t){var o=t.data;200==o.code&&(e.$set(e,"TableData",o.data),e.formInline=e.TableData,e.receiptaudit=e.depositsSearch_showGet.receiptaudit,e.deposits_id=e.depositsSearch_showGet.deposits_id,"未审核"==e.formInline.auditor_status_name?e.goBackText="取 消":e.goBackText="返 回",e.TableData.receipt_common=o.data.deposits_common,void 0==o.data.receipt_common_bill.length||0==o.data.receipt_common_bill.length?e.is_disabled=!1:(e.is_disabled=!0,e.relationTable.tableData=o.data.receipt_common_bill))}))})),a),u=c,d=(o("7241"),o("2877")),m=Object(d["a"])(u,i,r,!1,null,"46d07b84",null);t["default"]=m.exports},7241:function(e,t,o){"use strict";o("ef73")},b680:function(e,t,o){"use strict";var a=o("23e7"),i=o("da84"),r=o("e330"),s=o("5926"),l=o("408a"),n=o("1148"),c=o("d039"),u=i.RangeError,d=i.String,m=Math.floor,p=r(n),_=r("".slice),f=r(1..toFixed),h=function(e,t,o){return 0===t?o:t%2===1?h(e,t-1,o*e):h(e*e,t/2,o)},b=function(e){var t=0,o=e;while(o>=4096)t+=12,o/=4096;while(o>=2)t+=1,o/=2;return t},v=function(e,t,o){var a=-1,i=o;while(++a<6)i+=t*e[a],e[a]=i%1e7,i=m(i/1e7)},w=function(e,t){var o=6,a=0;while(--o>=0)a+=e[o],e[o]=m(a/t),a=a%t*1e7},g=function(e){var t=6,o="";while(--t>=0)if(""!==o||0===t||0!==e[t]){var a=d(e[t]);o=""===o?a:o+p("0",7-a.length)+a}return o},y=c((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!c((function(){f({})}));a({target:"Number",proto:!0,forced:y},{toFixed:function(e){var t,o,a,i,r=l(this),n=s(e),c=[0,0,0,0,0,0],m="",f="0";if(n<0||n>20)throw u("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return d(r);if(r<0&&(m="-",r=-r),r>1e-21)if(t=b(r*h(2,69,1))-69,o=t<0?r*h(2,-t,1):r/h(2,t,1),o*=4503599627370496,t=52-t,t>0){v(c,0,o),a=n;while(a>=7)v(c,1e7,0),a-=7;v(c,h(10,a,1),0),a=t-1;while(a>=23)w(c,1<<23),a-=23;w(c,1<<a),v(c,1,1),w(c,2),f=g(c)}else v(c,0,o),v(c,1<<-t,0),f=g(c)+p("0",n);return n>0?(i=f.length,f=m+(i<=n?"0."+p("0",n-i)+f:_(f,0,i-n)+"."+_(f,i-n))):f=m+f,f}})},ef73:function(e,t,o){}}]);
//# sourceMappingURL=chunk-4b1eefd2.6486f545.js.map