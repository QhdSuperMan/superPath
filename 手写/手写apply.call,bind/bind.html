<!--
 * @Author: 吴玉荣
 * @LastEditors: 吴玉荣
 * @Date: 2021-06-28 16:14:49
 * @LastEditTime: 2021-06-28 17:10:59
 * @info: 描述
-->
<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
  </head>

  <body>
    <script>
      Function.prototype.bind2 = function (context) {
        var self = this;
        var args = Array.prototype.slice.call(arguments, 1);
        var fNOP = function () {};
        var fBound = function () {
          var bindArgs = Array.prototype.slice.call(arguments); // 原理就是方法调用的方式this是window 不是fBound
          return self.apply(this instanceof fNOP ? this : context, args.concat(bindArgs));
        }
        fNOP.prototype = this.prototype;
        fBound.prototype = new fNOP();
        return fBound;
      }
      //测试
      obj = {
        c: 2
      }
      function a(x, y, z) {
        console.log(this, x, y, z)
      }
      // a.myBind(obj, 1, 2)(3) //{c:2,func:[function a]} 1 2 3
      var p = new(a.bind2(obj, 1, 2, 3))
      var q = a.bind2(obj, 1, 2, 3)()
    </script>
  </body>

</html>