<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>

    if (!Function.prototype.bindTwo) {
      Function.prototype.bindTwo = function (oThis) {
        if (typeof this !== "function") {
          // 与 ECMAScript 5 最接近的
          // 内部 IsCallable 函数
          throw new TypeError(
            "Function.prototype.bind - what is trying " +
            "to be bound is not callable"
          );
        }
        var aArgs = Array.prototype.slice.call(arguments, 1),
          fToBind = this,
          // fNOP = function () { },
          fBound = function () {
            return fToBind.apply(
              (
                this instanceof fToBind &&
                  oThis ? this : oThis
              ),
              aArgs.concat(
                Array.prototype.slice.call(arguments)
              ))
          }
        // fNOP.prototype = this.prototype;
        fBound.prototype = Object.create(fToBind.prototype)
        return fBound;
      };
    }

    var obj = {
      id: 1
    }
  
    function test () {
      console.log(this.id);
    }

    var a = test.bindTwo(obj)
    console.dir(a);
    a()
    new (test.bindTwo(obj))

  </script>
</body>

</html>