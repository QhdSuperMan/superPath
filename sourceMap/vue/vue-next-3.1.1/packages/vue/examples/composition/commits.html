<!--
 * @Author: 吴玉荣
 * @LastEditors: 吴玉荣
 * @Date: 2021-06-22 17:11:49
 * @LastEditTime: 2021-07-05 11:28:56
 * @info: 描述
-->
<script src="../../dist/vue.global.js"></script>

<div id="demo">
  <h1 @click='change'>Latest Vue.js Commits {{ obj.name }}</h1>
  <son :fatherdata='currentBranch' />
</div>

<script>
const { createApp, ref, watchEffect, reactive } = Vue
const API_URL = `https://api.github.com/repos/vuejs/vue-next/commits?per_page=3&sha=`

const truncate = v => {
  const newline = v.indexOf('\n')
  return newline > 0 ? v.slice(0, newline) : v
}

const formatDate = v => v.replace(/T|Z/g, ' ')

const son = {
  setup() {

  },
  template: '<span>父亲传过来的数据：{{ fatherdata }}</span>',
  props: ['fatherdata']
}

createApp({
  components: {
    son
  },
  setup() {
    const currentBranch = ref('master')
    const obj = reactive({ name: 1 })
    const commits = ref(null)

    // watchEffect(() => {
      
    // })
    const change = ()=> {
      console.log(currentBranch.value = currentBranch.value !== 'master' ? 'master' : 'dev')
      obj.name = obj.name  !== 1 ? 1 : 2
    }
    return {
      branches: ['master', 'sync'],
      currentBranch,
      commits,
      truncate,
      formatDate,
      change,
      obj
    }
  }
}).mount('#demo')
</script>

<style>
  #demo {
    font-family: 'Helvetica', Arial, sans-serif;
  }
  a {
    text-decoration: none;
    color: #f66;
  }
  li {
    line-height: 1.5em;
    margin-bottom: 20px;
  }
  .author, .date {
    font-weight: bold;
  }
</style>
